import{a as U,u as $,b as M,j as e}from"./state-vendor-__gb9IU9.js";import{e as O,r as m,L as H}from"./react-vendor-QYi6USC3.js";import{u as V,a as b}from"./index-CFqXVpuW.js";import"./ui-vendor-CuJPReAW.js";const W=async(c,r,i)=>{const l=new URLSearchParams;r.status&&l.append("status",r.status),r.issue_type&&l.append("issue_type",r.issue_type),r.assigned_admin_id&&l.append("assigned_admin",r.assigned_admin_id),l.append("limit",i.limit.toString()),l.append("offset",((i.current_page-1)*i.limit).toString());const t=await b.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/disputes?${l.toString()}`,{headers:{Authorization:`Bearer ${c}`}});return{issues:t.data,total:t.data.length}},Q=async(c,r)=>{const i=await b.get(`https://123create-construction-app-with-a.launchpulse.ai/api/issues/${r}`,{headers:{Authorization:`Bearer ${c}`}});return{issue:i.data.issue||i.data,messages:i.data.messages||[]}},K=async(c,r,i)=>(await b.post(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/disputes/${r}/resolve`,i,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}})).data,Y=async(c,r,i)=>(await b.post(`https://123create-construction-app-with-a.launchpulse.ai/api/issues/${r}/messages`,i,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}})).data,ee=()=>{const[c,r]=O(),i=U(),l=V(s=>s.authentication_state.auth_token),[t,v]=m.useState(null),[x,k]=m.useState("details"),[y,C]=m.useState(""),[n,D]=m.useState({status:c.get("status_filter"),issue_type:c.get("dispute_type"),assigned_admin_id:c.get("assigned_admin")}),[d,p]=m.useState({resolution_type:"",resolution_amount:null,resolution_description:"",admin_notes:""}),[h,_]=m.useState({current_page:1,total_pages:1,total_count:0,limit:50});m.useEffect(()=>{const s=new URLSearchParams;n.status&&s.set("status_filter",n.status),n.issue_type&&s.set("dispute_type",n.issue_type),n.assigned_admin_id&&s.set("assigned_admin",n.assigned_admin_id),r(s,{replace:!0})},[n,r]);const{data:j,isLoading:I,error:P}=$({queryKey:["admin_disputes",n,h.current_page],queryFn:()=>W(l,n,h),enabled:!!l,staleTime:3e4}),u=(j==null?void 0:j.issues)||[],{data:f,isLoading:q}=$({queryKey:["dispute_details",t==null?void 0:t.issue_id],queryFn:()=>Q(l,t.issue_id),enabled:!!l&&!!t,staleTime:1e4}),S=(f==null?void 0:f.messages)||[],N=M({mutationFn:s=>K(l,s.issue_id,s.resolution_data),onSuccess:s=>{i.invalidateQueries({queryKey:["admin_disputes"]}),i.invalidateQueries({queryKey:["dispute_details"]}),v(s),p({resolution_type:"",resolution_amount:null,resolution_description:"",admin_notes:""}),alert("Dispute resolved successfully!")},onError:s=>{var a,o;alert(((o=(a=s.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to resolve dispute")}}),w=M({mutationFn:s=>Y(l,s.issue_id,s.message_data),onSuccess:()=>{i.invalidateQueries({queryKey:["dispute_details"]}),C("")},onError:s=>{var a,o;alert(((o=(a=s.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to send message")}}),F=(s,a)=>{D(o=>({...o,[s]:a})),_(o=>({...o,current_page:1}))},z=s=>{v(s),k("details")},B=s=>{if(s.preventDefault(),!t||!d.resolution_type){alert("Please fill in required fields");return}N.mutate({issue_id:t.issue_id,resolution_data:{resolution_offered:d.resolution_type,resolution_amount:d.resolution_amount,admin_notes:d.admin_notes}})},T=s=>{s.preventDefault(),!(!t||!y.trim())&&w.mutate({issue_id:t.issue_id,message_data:{message_text:y,attachments:[]}})},R={open_disputes_count:u.filter(s=>s.status==="open"||s.status==="under_review").length,avg_resolution_time:u.filter(s=>s.resolved_date).reduce((s,a)=>{const o=new Date(a.opened_date).getTime(),E=new Date(a.resolved_date).getTime();return s+(E-o)/(1e3*60*60)},0)/(u.filter(s=>s.resolved_date).length||1),resolution_outcomes:u.filter(s=>s.resolution_offered).reduce((s,a)=>(s[a.resolution_offered]=(s[a.resolution_offered]||0)+1,s),{})},g=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=s=>{switch(s){case"open":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"under_review":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=s=>({late_delivery:"Late Delivery",wrong_item:"Wrong Item",damaged_item:"Damaged Item",missing_item:"Missing Item",quality_issue:"Quality Issue",billing_issue:"Billing Issue",delivery_not_attempted:"Delivery Not Attempted",other:"Other"})[s]||s;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dispute Resolution Center"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and resolve customer disputes with mediation tools"})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-2",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:R.open_disputes_count}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Open Disputes"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-800",children:[R.avg_resolution_time.toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Avg Resolution Time"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status-filter",value:n.status||"",onChange:s=>F("status",s.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"awaiting_response",children:"Awaiting Response"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"type-filter",className:"block text-xs font-medium text-gray-700 mb-1",children:"Issue Type"}),e.jsxs("select",{id:"type-filter",value:n.issue_type||"",onChange:s=>F("issue_type",s.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"late_delivery",children:"Late Delivery"}),e.jsx("option",{value:"wrong_item",children:"Wrong Item"}),e.jsx("option",{value:"damaged_item",children:"Damaged Item"}),e.jsx("option",{value:"missing_item",children:"Missing Item"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"billing_issue",children:"Billing Issue"}),e.jsx("option",{value:"delivery_not_attempted",children:"Delivery Not Attempted"}),e.jsx("option",{value:"other",children:"Other"})]})]}),(n.status||n.issue_type||n.assigned_admin_id)&&e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{D({status:null,issue_type:null,assigned_admin_id:null})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Disputes"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u.length," dispute",u.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 400px)"},children:I?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):P?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load disputes"})}):u.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No disputes found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:u.map(s=>e.jsx("div",{onClick:()=>z(s),className:`p-4 cursor-pointer transition-all hover:bg-gray-50 ${(t==null?void 0:t.issue_id)===s.issue_id?"bg-blue-50 border-l-4 border-blue-600":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${A(s.status)}`,children:s.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:L(s.issue_type)})]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:["Order #",s.order_id.slice(-8)]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:g(s.opened_date)}),s.escalated_to_admin&&e.jsxs("span",{className:"inline-flex items-center text-red-600 font-medium",children:[e.jsx("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Escalated"]})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},s.issue_id))})}),u.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>_(s=>({...s,current_page:Math.max(1,s.current_page-1)})),disabled:h.current_page===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",h.current_page]}),e.jsx("button",{onClick:()=>_(s=>({...s,current_page:s.current_page+1})),disabled:u.length<h.limit,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx("div",{className:"lg:col-span-7",children:t?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Issue #",t.issue_id.slice(-8)]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${A(t.status)}`,children:t.status.replace("_"," ").toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",t.order_id.slice(-8)," • ",L(t.issue_type)]})]}),e.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:["details","evidence","communication","resolution"].map(s=>e.jsx("button",{onClick:()=>k(s),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${x===s?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.charAt(0).toUpperCase()+s.slice(1).replace("_"," ")},s))})}),e.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 450px)"},children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[x==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 rounded-lg p-4",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Opened Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:g(t.opened_date)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Desired Resolution"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.desired_resolution.replace("_"," ")})]}),t.resolved_date&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Resolved Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:g(t.resolved_date)})]}),t.assigned_admin_id&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Assigned Admin"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.assigned_admin_id})]})]}),t.affected_items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Affected Items"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-900 space-y-1",children:t.affected_items.map((s,a)=>e.jsx("li",{children:s},a))})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx(H,{to:`/admin/orders?order_id=${t.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View Related Order →"})})]}),x==="evidence"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Evidence Photos"}),t.evidence_photos.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No evidence photos uploaded"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.evidence_photos.map((s,a)=>e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:s,alt:`Evidence ${a+1}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(s,"_blank")})},a))})]}),x==="communication"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4 mb-6",style:{maxHeight:"400px",overflowY:"auto"},children:S.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No messages yet"})}):S.map(s=>e.jsx("div",{className:`flex ${s.sender_type==="admin"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-lg ${s.sender_type==="admin"?"bg-blue-600 text-white":s.sender_type==="customer"?"bg-gray-100 text-gray-900":"bg-green-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-xs font-medium opacity-75",children:s.sender_type.charAt(0).toUpperCase()+s.sender_type.slice(1)}),e.jsx("span",{className:"text-xs opacity-60",children:g(s.timestamp)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.message_text}),s.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:s.attachments.map((a,o)=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"block text-xs underline opacity-75 hover:opacity-100",children:["Attachment ",o+1]},o))})]})},s.message_id))}),e.jsx("form",{onSubmit:T,className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:y,onChange:s=>C(s.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),e.jsx("button",{type:"submit",disabled:!y.trim()||w.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Sending...":"Send"})]})})]}),x==="resolution"&&e.jsx("form",{onSubmit:B,className:"space-y-6",children:t.status==="resolved"||t.status==="closed"?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Dispute Resolved"}),t.resolution_offered&&e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Resolution:"})," ",t.resolution_offered]}),t.resolution_amount&&e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," $",typeof t.resolution_amount=="number"?t.resolution_amount.toFixed(2):parseFloat(t.resolution_amount).toFixed(2)]}),t.resolved_date&&e.jsxs("p",{children:[e.jsx("strong",{children:"Resolved on:"})," ",g(t.resolved_date)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Type *"}),e.jsxs("select",{id:"resolution-type",value:d.resolution_type,onChange:s=>p(a=>({...a,resolution_type:s.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select resolution..."}),e.jsx("option",{value:"full_refund",children:"Full Refund"}),e.jsx("option",{value:"partial_refund",children:"Partial Refund"}),e.jsx("option",{value:"replacement",children:"Replacement Item"}),e.jsx("option",{value:"credit",children:"Store Credit"}),e.jsx("option",{value:"other",children:"Other"})]})]}),(d.resolution_type==="full_refund"||d.resolution_type==="partial_refund"||d.resolution_type==="credit")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (USD)"}),e.jsx("input",{id:"resolution-amount",type:"number",step:"0.01",min:"0",value:d.resolution_amount||"",onChange:s=>p(a=>({...a,resolution_amount:s.target.value?parseFloat(s.target.value):null})),placeholder:"Enter amount",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Description"}),e.jsx("textarea",{id:"resolution-description",value:d.resolution_description,onChange:s=>p(a=>({...a,resolution_description:s.target.value})),rows:4,placeholder:"Explain the resolution to the customer...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Admin Notes"}),e.jsx("textarea",{id:"admin-notes",value:d.admin_notes,onChange:s=>p(a=>({...a,admin_notes:s.target.value})),rows:3,placeholder:"Internal notes (not visible to customer/supplier)...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{className:"flex space-x-3 pt-4",children:e.jsx("button",{type:"submit",disabled:!d.resolution_type||N.isPending,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:N.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resolving..."]}):"Resolve Dispute"})})]})})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Dispute Selected"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Select a dispute from the list to view details and manage resolution"})]})})]})})]})})};export{ee as default};
