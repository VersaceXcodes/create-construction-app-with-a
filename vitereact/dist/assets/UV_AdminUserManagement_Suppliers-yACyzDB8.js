import{a as ae,u as z,b as re,j as e}from"./state-vendor-__gb9IU9.js";import{e as le,r as h,L as ie}from"./react-vendor-QYi6USC3.js";import{u as K,a as T}from"./index-CFqXVpuW.js";import{an as ne,aT as de,f as q,S as ce,X as Q,a0 as oe,a8 as xe,E as H,p as X,m as W,h as G,a7 as me,a4 as ue,W as pe,K as ge,aR as he}from"./ui-vendor-CuJPReAW.js";const be=async(m,d,l)=>{if(!l)throw new Error("No auth token");const c=new URLSearchParams;c.append("user_type","supplier"),m.query&&c.append("query",m.query),m.status&&c.append("status",m.status),c.append("limit",d.limit.toString()),c.append("offset",((d.current_page-1)*d.limit).toString()),c.append("sort_by",m.sort_by),c.append("sort_order",m.sort_order);const o=await T.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users?${c.toString()}`,{headers:{Authorization:`Bearer ${l}`}}),s=o.data.users.map(a=>{var g,N,b,u,y;return{user_id:a.user_id,supplier_id:((g=a.supplier)==null?void 0:g.supplier_id)||null,email:a.email,first_name:a.first_name,last_name:a.last_name,account_type:((N=a.supplier)==null?void 0:N.account_type)||null,trade_credit_status:((b=a.supplier)==null?void 0:b.trade_credit_status)||null,total_orders:((u=a.supplier)==null?void 0:u.total_orders)||0,total_spent:((y=a.supplier)==null?void 0:y.total_spent)||0,registration_date:a.registration_date,last_login_date:a.last_login_date,status:a.status,email_verified:a.email_verified}}),p={current_page:Math.floor(o.data.offset/o.data.limit)+1,total_pages:Math.ceil(o.data.total/o.data.limit),total_count:o.data.total,limit:o.data.limit};return{suppliers_list:s,pagination:p}},ye=async(m,d)=>{var c,o,s,p,a,g,N,b,u,y;if(!d)throw new Error("No auth token");const l=await T.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users/${m}`,{headers:{Authorization:`Bearer ${d}`}});return{user_id:l.data.user_id,supplier_id:((c=l.data.supplier)==null?void 0:c.supplier_id)||null,email:l.data.email,first_name:l.data.first_name,last_name:l.data.last_name,phone_number:l.data.phone_number,account_type:((o=l.data.supplier)==null?void 0:o.account_type)||null,trade_credit_limit:((s=l.data.supplier)==null?void 0:s.trade_credit_limit)||null,trade_credit_balance:((p=l.data.supplier)==null?void 0:p.trade_credit_balance)||null,trade_credit_used:((a=l.data.supplier)==null?void 0:a.trade_credit_used)||null,trade_credit_status:((g=l.data.supplier)==null?void 0:g.trade_credit_status)||null,total_orders:((N=l.data.supplier)==null?void 0:N.total_orders)||0,total_spent:((b=l.data.supplier)==null?void 0:b.total_spent)||0,avg_order_value:((u=l.data.supplier)==null?void 0:u.total_orders)>0?(((y=l.data.supplier)==null?void 0:y.total_spent)||0)/l.data.supplier.total_orders:0,registration_date:l.data.registration_date,last_login_date:l.data.last_login_date,status:l.data.status,email_verified:l.data.email_verified,addresses:l.data.addresses||[],payment_methods:l.data.payment_methods||[],recent_orders:l.data.recent_orders||[]}},je=async(m,d,l)=>{if(!l)throw new Error("No auth token");await T.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users/${m}`,{status:d},{headers:{Authorization:`Bearer ${l}`}})},we=()=>{var V;const m=ae(),[d,l]=le(),c=K(t=>t.authentication_state.auth_token),o=K(t=>t.authentication_state.current_user),[s,p]=h.useState({query:d.get("search_query")||null,status:d.get("status_filter")||null,account_type:d.get("account_type_filter")||null,date_range:d.get("registration_date_range")||null,spending_tier:d.get("spending_tier")||null,sort_by:d.get("sort_by")||"registration_date",sort_order:d.get("sort_order")||"desc"}),[a,g]=h.useState({current_page:parseInt(d.get("page")||"1"),total_pages:1,total_count:0,limit:50}),[N,b]=h.useState(!1),[u,y]=h.useState(null),[v,C]=h.useState([]),[S,A]=h.useState(s.query||""),[$,J]=h.useState(!1);h.useEffect(()=>{const t=new URLSearchParams;s.query&&t.set("search_query",s.query),s.status&&t.set("status_filter",s.status),s.account_type&&t.set("account_type_filter",s.account_type),s.date_range&&t.set("registration_date_range",s.date_range),s.spending_tier&&t.set("spending_tier",s.spending_tier),a.current_page>1&&t.set("page",a.current_page.toString()),s.sort_by&&t.set("sort_by",s.sort_by),s.sort_order&&t.set("sort_order",s.sort_order),l(t,{replace:!0})},[s,a.current_page,l]),h.useEffect(()=>{const t=setTimeout(()=>{S!==s.query&&(p(i=>({...i,query:S||null})),g(i=>({...i,current_page:1})))},500);return()=>clearTimeout(t)},[S,s.query]);const{data:j,isLoading:w,error:F,refetch:Y}=z({queryKey:["admin-suppliers",s,a.current_page],queryFn:()=>be(s,a,c),enabled:!!c&&(o==null?void 0:o.user_type)==="admin",staleTime:6e4});h.useEffect(()=>{j!=null&&j.pagination&&g(t=>({...t,...j.pagination}))},[j]);const x=(j==null?void 0:j.suppliers_list)||[],{data:r,isLoading:E,error:R}=z({queryKey:["admin-supplier-detail",u],queryFn:()=>ye(u,c),enabled:!!u&&!!c,staleTime:3e4}),k=re({mutationFn:({userId:t,newStatus:i})=>je(t,i,c),onSuccess:()=>{m.invalidateQueries({queryKey:["admin-suppliers"]}),m.invalidateQueries({queryKey:["admin-supplier-detail",u]})}}),L=(t,i)=>{p(n=>({...n,[t]:i})),g(n=>({...n,current_page:1}))},D=t=>{g(i=>({...i,current_page:t})),window.scrollTo({top:0,behavior:"smooth"})},P=t=>{y(t),b(!0)},U=()=>{b(!1),y(null)},Z=t=>{C(i=>i.includes(t)?i.filter(n=>n!==t):[...i,t])},O=()=>{v.length===x.length?C([]):C(x.map(t=>t.user_id))},ee=async(t,i)=>{try{await k.mutateAsync({userId:t,newStatus:i})}catch(n){console.error("Failed to update status:",n)}},M=async t=>{try{await Promise.all(v.map(i=>k.mutateAsync({userId:i,newStatus:t}))),C([])}catch(i){console.error("Bulk update failed:",i)}},te=async()=>{const t=[["Email","Name","Account Type","Status","Total Orders","Total Spent","Registration Date"].join(","),...x.map(_=>[_.email,`${_.first_name||""} ${_.last_name||""}`.trim(),_.account_type||"N/A",_.status,_.total_orders,_.total_spent.toFixed(2),new Date(_.registration_date).toLocaleDateString()].join(","))].join(`
`),i=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(i),f=document.createElement("a");f.href=n,f.download=`suppliers-export-${new Date().toISOString().split("T")[0]}.csv`,f.click(),window.URL.revokeObjectURL(n)},se=t=>t.first_name&&t.last_name?`${t.first_name} ${t.last_name}`:t.email,B=t=>{switch(t){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"suspended":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=t=>t?t==="trade"?"bg-blue-100 text-blue-800 border-blue-200":"bg-purple-100 text-purple-800 border-purple-200":null;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Supplier Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage supplier accounts, monitor activity, and provide support"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:te,disabled:w,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),v.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-700 font-medium",children:[v.length," selected"]}),e.jsxs("button",{onClick:()=>M("suspended"),disabled:k.isPending,className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Suspend"]}),e.jsxs("button",{onClick:()=>M("active"),disabled:k.isPending,className:"inline-flex items-center px-3 py-2 border border-green-300 rounded-lg text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Activate"]})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsx("div",{className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:S,onChange:t=>A(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),S&&e.jsx("button",{onClick:()=>{A(""),p(t=>({...t,query:null}))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Q,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>J(!$),className:`inline-flex items-center px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${$?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Filters",(s.status||s.account_type||s.spending_tier)&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:[s.status,s.account_type,s.spending_tier].filter(Boolean).length})]}),e.jsxs("select",{value:`${s.sort_by}:${s.sort_order}`,onChange:t=>{const[i,n]=t.target.value.split(":");p(f=>({...f,sort_by:i,sort_order:n}))},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"registration_date:desc",children:"Newest First"}),e.jsx("option",{value:"registration_date:asc",children:"Oldest First"}),e.jsx("option",{value:"last_login_date:desc",children:"Recent Activity"}),e.jsx("option",{value:"total_spent:desc",children:"Highest Spending"}),e.jsx("option",{value:"total_orders:desc",children:"Most Orders"})]}),e.jsx("button",{onClick:()=>Y(),disabled:w,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors",children:e.jsx(xe,{className:`h-4 w-4 ${w?"animate-spin":""}`})})]})]}),$&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs("select",{value:s.status||"",onChange:t=>L("status",t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),e.jsxs("select",{value:s.account_type||"",onChange:t=>L("account_type",t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"trade",children:"Trade"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spending Tier"}),e.jsxs("select",{value:s.spending_tier||"",onChange:t=>L("spending_tier",t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Tiers"}),e.jsx("option",{value:"high",children:"High Value ($10k+)"}),e.jsx("option",{value:"medium",children:"Medium Value ($1k-$10k)"}),e.jsx("option",{value:"low",children:"Low Value (<$1k)"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{p({query:null,status:null,account_type:null,date_range:null,spending_tier:null,sort_by:"registration_date",sort_order:"desc"}),A("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Clear All Filters"})})]})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:a.total_count.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(H,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Accounts"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-green-600",children:x.filter(t=>t.status==="active").length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(q,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Verified Emails"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-blue-600",children:x.filter(t=>t.email_verified).length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(X,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trade Accounts"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-purple-600",children:x.filter(t=>t.account_type==="trade").length})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(W,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Supplier Accounts",s.query&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:['- Results for "',s.query,'"']})]}),x.length>0&&e.jsx("button",{onClick:O,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:v.length===x.length?"Deselect All":"Select All"})]})}),w&&e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading suppliers..."})]})}),F&&e.jsx("div",{className:"py-12 px-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-800",children:"Failed to load suppliers. Please try again."})]})})}),!w&&!F&&x.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No suppliers found"}),e.jsx("p",{className:"text-gray-600",children:s.query?"Try adjusting your search or filters":"No supplier accounts in the system yet"})]}),!w&&!F&&x.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:v.length===x.length&&x.length>0,onChange:O,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(t=>{var i;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>P(t.user_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:n=>n.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:v.includes(t.user_id),onChange:()=>Z(t.user_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:(((i=t.first_name)==null?void 0:i[0])||t.email[0]).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:se(t)}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.email,!t.email_verified&&e.jsx(me,{className:"h-3 w-3 text-amber-500 ml-1","aria-label":"Email not verified"})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.account_type&&e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${I(t.account_type)}`,children:t.account_type==="trade"?"Trade":"Retail"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${B(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.total_orders}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",t.total_spent.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.registration_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:n=>n.stopPropagation(),children:e.jsx("button",{onClick:()=>P(t.user_id),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(ue,{className:"h-4 w-4 inline"})})})]},t.user_id)})})]})}),!w&&x.length>0&&a.total_pages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(a.current_page-1)*a.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(a.current_page*a.limit,a.total_count)})," of"," ",e.jsx("span",{className:"font-medium",children:a.total_count})," suppliers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(a.current_page-1),disabled:a.current_page===1,className:"p-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(pe,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",a.current_page," of ",a.total_pages]}),e.jsx("button",{onClick:()=>D(a.current_page+1),disabled:a.current_page===a.total_pages,className:"p-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(ge,{className:"h-5 w-5"})})]})]})})]})]}),N&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Supplier Details"}),e.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Q,{className:"h-6 w-6 text-gray-500"})})]})}),E&&e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading supplier details..."})]})}),R&&e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:"Failed to load supplier details"})})}),!E&&!R&&r&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:(((V=r.first_name)==null?void 0:V[0])||r.email[0]).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:"No name provided"}),e.jsx("p",{className:"text-gray-600",children:r.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${B(r.status)}`,children:r.status}),r.email_verified?e.jsxs("span",{className:"inline-flex items-center text-xs text-green-700",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center text-xs text-amber-600",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Unverified"]})]})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs("select",{value:r.status,onChange:t=>ee(r.user_id,t.target.value),disabled:k.isPending,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Account Type"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:r.account_type?e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${I(r.account_type)}`,children:r.account_type==="trade"?"Trade":"Retail"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Orders"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:r.total_orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Spent"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",r.total_spent.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Avg Order Value"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",r.avg_order_value.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.phone_number||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Registered:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(r.registration_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Login:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.last_login_date?new Date(r.last_login_date).toLocaleDateString():"Never"})]})]})]}),r.account_type==="trade"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Trade Credit"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Credit Limit"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-900",children:["$",(parseFloat(r.trade_credit_limit)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Used"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-900",children:["$",(parseFloat(r.trade_credit_used)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Available"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-green-700",children:["$",(parseFloat(r.trade_credit_balance)||0).toFixed(2)]})]})]}),r.trade_credit_status&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-xs text-blue-700",children:"Status: "}),e.jsx("span",{className:"text-xs font-semibold text-blue-900",children:r.trade_credit_status.replace(/_/g," ").toUpperCase()})]})]})]}),r.addresses&&r.addresses.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Saved Addresses"}),e.jsx("div",{className:"space-y-2",children:r.addresses.map((t,i)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.street_address,t.apt_suite&&`, ${t.apt_suite}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.city,", ",t.state," ",t.postal_code]}),t.is_default&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"Default"})]},i))})]}),r.recent_orders&&r.recent_orders.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Orders"}),e.jsx("div",{className:"space-y-2",children:r.recent_orders.slice(0,5).map((t,i)=>{var n,f;return e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Order #",t.order_number||((n=t.order_id)==null?void 0:n.substring(0,8))]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.order_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",((f=t.total_amount)==null?void 0:f.toFixed(2))||"0.00"]}),e.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${t.status==="delivered"?"bg-green-100 text-green-800":t.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t.status})]})]},i)})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Admin Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ie,{to:`/admin/orders?supplier_id=${r.supplier_id}`,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"View All Orders"]}),e.jsxs("button",{onClick:()=>{alert("Impersonation feature - would open supplier session")},className:"inline-flex items-center justify-center px-4 py-2 border border-blue-300 rounded-lg text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Impersonate Account"]}),e.jsxs("button",{onClick:()=>{alert("Send message feature")},className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsx("button",{onClick:U,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"})]})]})]})]})})]})})};export{we as default};
