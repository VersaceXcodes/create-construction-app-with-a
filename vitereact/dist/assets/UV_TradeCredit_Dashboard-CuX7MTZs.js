import{a as G,u as C,b as O,j as e}from"./state-vendor-__gb9IU9.js";import{r as u,L as v}from"./react-vendor-QYi6USC3.js";import{u as z,a as S}from"./index-C8z-Yyaa.js";import{h as D,an as X,a8 as F,al as Z,T as ee,D as b,ay as E,f as y,F as B}from"./ui-vendor-CuJPReAW.js";const q="https://123create-construction-app-with-a.launchpulse.ai",te=async r=>{const n=(await S.get(`${q}/customers/me`,{headers:{Authorization:`Bearer ${r}`}})).data;return{trade_credit_limit:Number(n.trade_credit_limit||0),trade_credit_balance:Number(n.trade_credit_balance||0),trade_credit_used:Number(n.trade_credit_used||0),trade_credit_terms:n.trade_credit_terms||"Net 30",trade_credit_status:n.trade_credit_status||"pending",available_credit:Number(n.trade_credit_balance||0),credit_utilization_percentage:n.trade_credit_limit>0?Number(n.trade_credit_used||0)/Number(n.trade_credit_limit)*100:0}},se=async r=>(await S.get(`${q}/payment-methods`,{headers:{Authorization:`Bearer ${r}`}})).data.filter(n=>n.payment_type==="credit_card"||n.payment_type==="debit_card"),ae=async(r,a,n,l)=>(console.log("Fetching transactions:",{token:r,customer_id:a,start_date:n,end_date:l}),[{transaction_id:"txn_001",transaction_type:"purchase",amount:1500,description:"Order ORD-2024-001",transaction_date:new Date(Date.now()-5*24*60*60*1e3).toISOString(),reference_order_id:"order_001",running_balance:48500},{transaction_id:"txn_002",transaction_type:"payment",amount:-2e3,description:"Payment received",transaction_date:new Date(Date.now()-15*24*60*60*1e3).toISOString(),reference_order_id:null,running_balance:5e4}]),re=async(r,a)=>(console.log("Submitting payment:",{token:r,payment_data:a}),{transaction_id:`txn_${Date.now()}`,status:"completed",new_balance:0,confirmation_number:`CONF${Date.now()}`}),ne=async(r,a)=>(console.log("Submitting credit increase request:",{token:r,request_data:a}),{request_id:`req_${Date.now()}`,status:"pending_review",estimated_review_time:"2-3 business days"}),oe=()=>{var M,L;const r=z(s=>s.authentication_state.auth_token),a=z(s=>s.authentication_state.customer_profile),n=G(),[l,h]=u.useState("overview"),[,$]=u.useState(!1),[,P]=u.useState(!1),[_,U]=u.useState({start_date:"",end_date:"",period_preset:"last_30_days"}),[i,p]=u.useState({payment_amount:0,payment_method_id:"",payment_date:new Date().toISOString().split("T")[0]}),[d,w]=u.useState({requested_new_limit:0,business_justification:"",updated_financial_documents:[]}),[T,m]=u.useState(null),[R,g]=u.useState(null),{data:t,isLoading:K,error:j,refetch:I}=C({queryKey:["credit-account-summary",a==null?void 0:a.customer_id],queryFn:()=>te(r),enabled:!!r&&!!a,staleTime:6e4,refetchOnWindowFocus:!0,select:s=>({...s,trade_credit_limit:Number(s.trade_credit_limit||0),trade_credit_balance:Number(s.trade_credit_balance||0),trade_credit_used:Number(s.trade_credit_used||0),available_credit:Number(s.available_credit||0),credit_utilization_percentage:Number(s.credit_utilization_percentage||0)})}),{data:k=[],isLoading:Y}=C({queryKey:["trade-credit-transactions",a==null?void 0:a.customer_id,_],queryFn:()=>ae(r,a.customer_id,_.start_date,_.end_date),enabled:!!r&&!!a&&l==="transactions",staleTime:3e4}),{data:A=[],isLoading:Q}=C({queryKey:["payment-methods"],queryFn:()=>se(r),enabled:!!r&&l==="payment",staleTime:3e5}),N=O({mutationFn:s=>re(r,s),onSuccess:()=>{n.invalidateQueries({queryKey:["credit-account-summary"]}),n.invalidateQueries({queryKey:["trade-credit-transactions"]}),$(!1),p({payment_amount:0,payment_method_id:"",payment_date:new Date().toISOString().split("T")[0]}),m(null)},onError:s=>{var c,o;m(((o=(c=s.response)==null?void 0:c.data)==null?void 0:o.message)||"Payment failed. Please try again.")}}),f=O({mutationFn:s=>ne(r,s),onSuccess:()=>{P(!1),w({requested_new_limit:0,business_justification:"",updated_financial_documents:[]}),g(null)},onError:s=>{var c,o;g(((o=(c=s.response)==null?void 0:c.data)==null?void 0:o.message)||"Request failed. Please try again.")}}),H=()=>{if(m(null),!i.payment_amount||i.payment_amount<=0){m("Please enter a valid payment amount");return}if(!i.payment_method_id){m("Please select a payment method");return}if(i.payment_amount>((t==null?void 0:t.trade_credit_used)||0)){m("Payment amount cannot exceed outstanding balance");return}N.mutate({customer_id:a.customer_id,payment_amount:i.payment_amount,payment_method_id:i.payment_method_id})},W=()=>{if(g(null),!d.requested_new_limit||d.requested_new_limit<=((t==null?void 0:t.trade_credit_limit)||0)){g("Requested limit must be greater than current limit");return}if(!d.business_justification||d.business_justification.length<50){g("Please provide a detailed business justification (minimum 50 characters)");return}f.mutate({customer_id:a.customer_id,current_limit:t.trade_credit_limit,requested_new_limit:d.requested_new_limit,business_justification:d.business_justification,updated_financial_documents:d.updated_financial_documents})},V=()=>{window.open(`${q}/trade-credit/statement?customer_id=${a==null?void 0:a.customer_id}&format=pdf`,"_blank")},J=s=>{const c=new Date;let o="";switch(s){case"last_30_days":o=new Date(c.getTime()-30*24*60*60*1e3).toISOString().split("T")[0];break;case"last_90_days":o=new Date(c.getTime()-90*24*60*60*1e3).toISOString().split("T")[0];break;case"this_year":o=`${c.getFullYear()}-01-01`;break;case"all_time":o="";break}U({start_date:o,end_date:c.toISOString().split("T")[0],period_preset:s})};if(t&&t.trade_credit_status!=="approved")return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center",children:[e.jsx(D,{className:"mx-auto h-16 w-16 text-amber-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Trade Credit Not Available"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:[t.trade_credit_status==="pending"&&"Your trade credit application is being reviewed. We'll notify you once approved.",t.trade_credit_status==="rejected"&&"Your trade credit application was not approved at this time.",t.trade_credit_status==="suspended"&&"Your trade credit account has been temporarily suspended."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(v,{to:"/dashboard",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Return to Dashboard"}),t.trade_credit_status==="rejected"&&e.jsx(v,{to:"/trade-credit/apply",className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"Reapply"})]})]})})})});if(K)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"})]}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})})})});if(j)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[e.jsx(D,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Failed to Load Credit Account"}),e.jsx("p",{className:"text-red-700 mb-6",children:((L=(M=j==null?void 0:j.response)==null?void 0:M.data)==null?void 0:L.message)||"An error occurred while loading your credit account. Please try again."}),e.jsx("button",{onClick:()=>I(),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"})]})})})});const x={total_outstanding:Number((t==null?void 0:t.trade_credit_used)||0),current_due:Number((t==null?void 0:t.trade_credit_used)||0),overdue_amount:0,due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],payment_terms:(t==null?void 0:t.trade_credit_terms)||"Net 30"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Trade Credit Account"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your trade credit, view transactions, and make payments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Download Statement"})]}),e.jsxs("button",{onClick:()=>I(),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(Z,{className:"h-6 w-6 text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Credit Limit"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",t==null?void 0:t.trade_credit_limit.toFixed(2)]})}),e.jsx("p",{className:"text-sm text-gray-500",children:t==null?void 0:t.trade_credit_terms})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Available"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",t==null?void 0:t.available_credit.toFixed(2)]})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t==null?void 0:t.credit_utilization_percentage.toFixed(1),"% utilized"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg",children:e.jsx(b,{className:"h-6 w-6 text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Outstanding"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["$",t==null?void 0:t.trade_credit_used.toFixed(2)]})}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(x.due_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Credit Utilization"}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[t==null?void 0:t.credit_utilization_percentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${((t==null?void 0:t.credit_utilization_percentage)||0)>80?"bg-red-500":((t==null?void 0:t.credit_utilization_percentage)||0)>50?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min((t==null?void 0:t.credit_utilization_percentage)||0,100)}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{children:["$",t==null?void 0:t.trade_credit_limit.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[e.jsxs("button",{onClick:()=>{$(!0),h("payment")},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg",children:[e.jsx(b,{className:"h-5 w-5"}),"Make Payment"]}),e.jsxs("button",{onClick:()=>{P(!0),h("increase")},className:"flex items-center gap-2 px-6 py-3 bg-white text-gray-900 rounded-lg font-medium hover:bg-gray-50 transition-colors border border-gray-300",children:[e.jsx(E,{className:"h-5 w-5"}),"Request Credit Increase"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>h("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),e.jsx("button",{onClick:()=>h("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="transactions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Transaction History"}),e.jsx("button",{onClick:()=>h("payment"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="payment"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Make Payment"}),e.jsx("button",{onClick:()=>h("increase"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="increase"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Request Increase"})]})}),e.jsxs("div",{className:"p-6",children:[l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-600 capitalize",children:t==null?void 0:t.trade_credit_status})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Terms:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t==null?void 0:t.trade_credit_terms})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Type:"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Trade"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Due:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",x.current_due.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Due:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(x.due_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Overdue:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["$",x.overdue_amount.toFixed(2)]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:k.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.transaction_type==="payment"?"bg-green-50":"bg-blue-50"}`,children:s.transaction_type==="payment"?e.jsx(y,{className:"h-5 w-5 text-green-600"}):e.jsx(B,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.description}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.transaction_date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${s.transaction_type==="payment"?"text-green-600":"text-gray-900"}`,children:[s.amount<0?"+":"-","$",Math.abs(s.amount).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: $",s.running_balance.toFixed(2)]})]})]},s.transaction_id))})]})]}),l==="transactions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),e.jsx("div",{className:"flex gap-2",children:["last_30_days","last_90_days","this_year","all_time"].map(s=>e.jsx("button",{onClick:()=>J(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_.period_preset===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())},s))})]}),Y?e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},s))}):k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Transactions"}),e.jsx("p",{className:"text-gray-600",children:"No transactions found for the selected period"})]}):e.jsx("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.transaction_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.transaction_type==="payment"?"bg-green-100 text-green-800":s.transaction_type==="purchase"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.transaction_type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsxs("span",{className:s.transaction_type==="payment"?"text-green-600":"text-gray-900",children:[s.amount<0?"+":"-","$",Math.abs(s.amount).toFixed(2)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:["$",s.running_balance.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:s.reference_order_id?e.jsx(v,{to:`/orders/${s.reference_order_id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Order"}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},s.transaction_id))})]})})]}),l==="payment"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Make a Payment"}),e.jsxs("p",{className:"text-gray-600",children:["Outstanding Balance: ",e.jsxs("span",{className:"font-semibold text-amber-600",children:["$",x.total_outstanding.toFixed(2)]})]})]}),T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:T})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:x.total_outstanding,value:i.payment_amount||"",onChange:s=>{m(null),p({...i,payment_amount:Number(s.target.value)})},placeholder:"0.00",className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("button",{onClick:()=>p({...i,payment_amount:x.total_outstanding}),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Pay Full Balance"}),e.jsx("button",{onClick:()=>p({...i,payment_amount:x.total_outstanding/2}),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Pay Half"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),Q?e.jsx("div",{className:"animate-pulse h-12 bg-gray-200 rounded-lg"}):A.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No payment methods saved"}),e.jsx(v,{to:"/account#payments",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Add Payment Method"})]}):e.jsxs("select",{value:i.payment_method_id,onChange:s=>{m(null),p({...i,payment_method_id:s.target.value})},className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select payment method"}),A.map(s=>e.jsxs("option",{value:s.payment_method_id,children:[s.card_brand," •••• ",s.card_last_four,s.is_default&&" (Default)"]},s.payment_method_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:i.payment_date,onChange:s=>p({...i,payment_date:s.target.value}),className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{onClick:H,disabled:N.isPending,className:"w-full flex justify-center items-center gap-2 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-5 w-5 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-5 w-5"}),"Submit Payment"]})}),N.isSuccess&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Payment submitted successfully!"})})]}),l==="increase"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Request Credit Increase"}),e.jsxs("p",{className:"text-gray-600",children:["Current Limit: ",e.jsxs("span",{className:"font-semibold text-blue-600",children:["$",t==null?void 0:t.trade_credit_limit.toFixed(2)]})]})]}),R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:R})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested New Credit Limit"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"1000",min:t==null?void 0:t.trade_credit_limit,value:d.requested_new_limit||"",onChange:s=>{g(null),w({...d,requested_new_limit:Number(s.target.value)})},placeholder:"Enter requested amount",className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Increase of $",Math.max(0,(d.requested_new_limit||0)-((t==null?void 0:t.trade_credit_limit)||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Justification"}),e.jsx("textarea",{value:d.business_justification,onChange:s=>{g(null),w({...d,business_justification:s.target.value})},placeholder:"Explain why you need the credit increase...",rows:6,className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[d.business_justification.length," / 500 characters (minimum 50)"]})]}),e.jsx("button",{onClick:W,disabled:f.isPending,className:"w-full flex justify-center items-center gap-2 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-5 w-5 animate-spin"}),"Submitting Request..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-5 w-5"}),"Submit Request"]})}),f.isSuccess&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Credit increase request submitted successfully! We'll review and respond within 2-3 business days."})})]})]})]}),e.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(D,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Trade Credit Information"}),e.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your trade credit account allows you to make purchases now and pay later according to your agreed terms."}),e.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["Payment terms: ",t==null?void 0:t.trade_credit_terms]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Make payments anytime to free up credit"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Request credit increases as your business grows"})]})]})]})]})})]})})})};export{oe as default};
