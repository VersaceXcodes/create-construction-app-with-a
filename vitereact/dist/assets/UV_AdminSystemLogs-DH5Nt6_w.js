import{u as b,b as K,j as e}from"./state-vendor-__gb9IU9.js";import{e as W,r as f}from"./react-vendor-QYi6USC3.js";import{u as Q,a as h}from"./index-CWN4_r_N.js";import{a8 as V,an as G,aP as X,N as Z,h as v,U as k,l as J,f as T,a7 as S,aZ as Y,aS as A,T as P,S as M}from"./ui-vendor-CuJPReAW.js";const ee=async n=>{const r=await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/admin/system/health",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{uptime_percentage:r.data.uptime_percentage||99.9,response_time_avg:r.data.average_response_time_ms||150,error_rate:r.data.error_rate_percentage||.01,active_connections:r.data.active_websocket_connections||0,database_status:r.data.database_status||"operational",api_status:r.data.api_status||"operational",last_updated:r.data.last_checked_timestamp||new Date().toISOString()}},se=async(n,r,i)=>{var c;const l=new URLSearchParams;r.log_level&&l.append("level",r.log_level),r.component&&l.append("component",r.component),r.time_range&&l.append("time_range",r.time_range),l.append("limit","50"),l.append("offset",String((i-1)*50));const a=await h.get(`https://urls-washer-articles-luke.trycloudflare.com/api/admin/logs/application?${l.toString()}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{logs:((c=a.data.logs)==null?void 0:c.map(d=>({log_id:d.log_id,timestamp:d.timestamp,level:d.severity_level||d.level,component:d.component_name||d.component,message:d.log_message||d.message,stack_trace:d.stack_trace,user_id:d.user_id,request_id:d.request_id})))||[],total_count:a.data.total_count||0,current_page:Math.floor((a.data.offset||0)/50)+1}},te=async(n,r)=>{var l;const i=await h.get(`https://urls-washer-articles-luke.trycloudflare.com/api/admin/logs/api-performance?time_range=${r}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{endpoints:((l=i.data.endpoint_metrics)==null?void 0:l.map(a=>({endpoint:a.endpoint_path||a.endpoint,method:a.http_method||a.method,avg_response_time:a.average_response_time_ms||0,request_count:a.total_requests||0,error_count:a.error_count||0,success_rate:(a.total_requests-a.error_count)/a.total_requests*100||100})))||[],api_health_score:i.data.overall_api_health_score||100}},ae=async(n,r)=>{var l;const i=await h.get(`https://urls-washer-articles-luke.trycloudflare.com/api/admin/logs/user-activity?time_range=${r}&limit=100&offset=0`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{activities:((l=i.data.activity_logs)==null?void 0:l.map(a=>({activity_id:a.activity_id,user_id:a.user_id,user_type:a.user_type,action_type:a.action_type,resource:a.affected_resource||a.resource,timestamp:a.timestamp,ip_address:a.ip_address,user_agent:a.user_agent})))||[],total_count:i.data.total_count||0}},re=async n=>{var i,l;const r=await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/admin/logs/error-summary?period=24h",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{total_errors_24h:r.data.total_errors_last_24h||0,critical_errors:r.data.critical_error_count||0,error_trend:((i=r.data.hourly_error_counts)==null?void 0:i.map(a=>({hour:a.hour_timestamp,error_count:a.error_count})))||[],top_errors:((l=r.data.top_error_types)==null?void 0:l.map(a=>({error_type:a.error_type,count:a.occurrence_count,latest_occurrence:a.latest_timestamp})))||[]}},le=async(n,r)=>(await h.post("https://urls-washer-articles-luke.trycloudflare.com/api/admin/logs/export",{log_type:r.component,time_range:r.time_range,format:"csv"},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},responseType:"blob"})).data,de=()=>{const n=Q(s=>s.authentication_state.auth_token),[r,i]=W(),[l,a]=f.useState("logs"),[c,d]=f.useState({log_level:r.get("log_level")||null,component:r.get("component")||null,time_range:r.get("time_range")||"last_24_hours",date_from:null,date_to:null}),[p,C]=f.useState(Number(r.get("page"))||1),[y,E]=f.useState(""),{data:t,isLoading:F}=b({queryKey:["system-health"],queryFn:()=>ee(n),enabled:!!n,refetchInterval:3e4,staleTime:25e3}),{data:u,isLoading:q,refetch:U}=b({queryKey:["application-logs",c,p],queryFn:()=>se(n,c,p),enabled:!!n&&l==="logs",staleTime:6e4}),{data:g,isLoading:R,refetch:D}=b({queryKey:["api-performance",c.time_range],queryFn:()=>te(n,c.time_range),enabled:!!n&&l==="api",staleTime:6e4}),{data:N,isLoading:I}=b({queryKey:["user-activity",c.time_range],queryFn:()=>ae(n,c.time_range),enabled:!!n&&l==="activity",staleTime:6e4}),{data:m,isLoading:z,refetch:B}=b({queryKey:["error-summary"],queryFn:()=>re(n),enabled:!!n&&l==="errors",refetchInterval:6e4,staleTime:55e3}),_=K({mutationFn:()=>le(n,c),onSuccess:s=>{const o=window.URL.createObjectURL(s),x=document.createElement("a");x.href=o,x.download=`logs-export-${new Date().toISOString()}.csv`,x.click(),window.URL.revokeObjectURL(o)}}),w=s=>{const o={...c,...s};d(o);const x=new URLSearchParams;o.log_level&&x.set("log_level",o.log_level),o.component&&x.set("component",o.component),o.time_range&&x.set("time_range",o.time_range),x.set("page","1"),i(x),C(1)},$=s=>{C(s);const o=new URLSearchParams(r);o.set("page",String(s)),i(o)},H=()=>{_.mutate()},L=s=>new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),O=s=>{switch(s.toLowerCase()){case"error":case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},j=s=>s==="operational"?"text-green-600":"text-red-600";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Monitoring & Logs"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor system health, analyze logs, and track performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{U(),D(),B()},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:H,disabled:_.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),_.isPending?"Exporting...":"Export Logs"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[F?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},s))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Uptime"}),e.jsx(X,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t==null?void 0:t.uptime_percentage.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Last 30 days"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsx(Z,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t==null?void 0:t.response_time_avg,"ms"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"API average"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Error Rate"}),e.jsx(v,{className:`h-5 w-5 ${((t==null?void 0:t.error_rate)||0)>1?"text-red-600":"text-green-600"}`})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t==null?void 0:t.error_rate.toFixed(3),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Last 24 hours"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Connections"}),e.jsx(k,{className:"h-5 w-5 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t==null?void 0:t.active_connections.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"WebSocket clients"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:`h-6 w-6 mr-3 ${j((t==null?void 0:t.database_status)||"operational")}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Database Status"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${j((t==null?void 0:t.database_status)||"operational")}`,children:(t==null?void 0:t.database_status)||"operational"})]})]}),(t==null?void 0:t.database_status)==="operational"?e.jsx(T,{className:"h-8 w-8 text-green-500"}):e.jsx(S,{className:"h-8 w-8 text-red-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:`h-6 w-6 mr-3 ${j((t==null?void 0:t.api_status)||"operational")}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"API Status"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${j((t==null?void 0:t.api_status)||"operational")}`,children:(t==null?void 0:t.api_status)||"operational"})]})]}),(t==null?void 0:t.api_status)==="operational"?e.jsx(T,{className:"h-8 w-8 text-green-500"}):e.jsx(S,{className:"h-8 w-8 text-red-500"})]})})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>a("logs"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${l==="logs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),"Application Logs"]})}),e.jsx("button",{onClick:()=>a("api"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${l==="api"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2"}),"API Performance"]})}),e.jsx("button",{onClick:()=>a("activity"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${l==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"User Activity"]})}),e.jsx("button",{onClick:()=>a("errors"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${l==="errors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(v,{className:"h-5 w-5 mr-2"}),"Error Summary",((m==null?void 0:m.critical_errors)||0)>0&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:m==null?void 0:m.critical_errors})]})})]})}),l==="logs"&&e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Log Level"}),e.jsxs("select",{value:c.log_level||"all",onChange:s=>w({log_level:s.target.value==="all"?null:s.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Component"}),e.jsxs("select",{value:c.component||"all",onChange:s=>w({component:s.target.value==="all"?null:s.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Components"}),e.jsx("option",{value:"api",children:"API"}),e.jsx("option",{value:"database",children:"Database"}),e.jsx("option",{value:"auth",children:"Authentication"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"email",children:"Email Service"}),e.jsx("option",{value:"websocket",children:"WebSocket"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Time Range"}),e.jsxs("select",{value:c.time_range,onChange:s=>w({time_range:s.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"last_hour",children:"Last Hour"}),e.jsx("option",{value:"last_24_hours",children:"Last 24 Hours"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search Logs"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:y,onChange:s=>E(s.target.value),placeholder:"Search in logs...",className:"block w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[l==="logs"&&e.jsx(e.Fragment,{children:q?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},s))}):u&&u.logs.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:u.logs.filter(s=>!y||s.message.toLowerCase().includes(y.toLowerCase())||s.component.toLowerCase().includes(y.toLowerCase())).map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${O(s.level)}`,children:s.level.toUpperCase()}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:s.component}),e.jsx("span",{className:"text-xs text-gray-500",children:L(s.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-900 font-medium line-clamp-2",children:s.message}),s.stack_trace&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:text-blue-700",children:"View Stack Trace"}),e.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-3 rounded border border-gray-200 overflow-x-auto",children:s.stack_trace})]}),s.user_id&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["User ID: ",s.user_id]}),s.request_id&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Request ID: ",s.request_id]})]})})},s.log_id))}),u.total_count>50&&e.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(p-1)*50+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(p*50,u.total_count)})," of"," ",e.jsx("span",{className:"font-medium",children:u.total_count})," logs"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>$(p-1),disabled:p===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("button",{onClick:()=>$(p+1),disabled:p*50>=u.total_count,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No logs found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or time range"})]})}),l==="api"&&e.jsx(e.Fragment,{children:R?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))}):g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Overall API Health Score"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-900",children:[g.api_health_score.toFixed(1),"%"]})]}),e.jsx("div",{className:`text-6xl ${g.api_health_score>=95?"text-green-500":g.api_health_score>=85?"text-yellow-500":"text-red-500"}`,children:g.api_health_score>=95?"✓":g.api_health_score>=85?"⚠":"✗"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endpoint"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Response"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requests"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.endpoints.map((s,o)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.endpoint}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.method==="GET"?"bg-blue-100 text-blue-800":s.method==="POST"?"bg-green-100 text-green-800":s.method==="PUT"?"bg-yellow-100 text-yellow-800":s.method==="DELETE"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`font-medium ${s.avg_response_time<200?"text-green-600":s.avg_response_time<500?"text-yellow-600":"text-red-600"}`,children:[s.avg_response_time,"ms"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.request_count.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:s.error_count>0?"text-red-600 font-medium":"text-gray-500",children:s.error_count})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative pt-1",children:e.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-gray-200",children:e.jsx("div",{style:{width:`${s.success_rate}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ${s.success_rate>=99?"bg-green-500":s.success_rate>=95?"bg-yellow-500":"bg-red-500"}`})})})}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-gray-900",children:[s.success_rate.toFixed(1),"%"]})]})})]},o))})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No metrics available"})]})}),l==="activity"&&e.jsx(e.Fragment,{children:I?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))}):N&&N.activities.length>0?e.jsx("div",{className:"space-y-3",children:N.activities.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:s.user_type}),e.jsx("span",{className:"text-xs text-gray-500",children:L(s.timestamp)})]}),e.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[s.action_type," - ",s.resource]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-x-4",children:[e.jsxs("span",{children:["User: ",s.user_id]}),s.ip_address&&e.jsxs("span",{children:["IP: ",s.ip_address]})]})]})})},s.activity_id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No activity logs"})]})}),l==="errors"&&e.jsx(e.Fragment,{children:z?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[1,2].map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},s))})}):m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Errors (24h)"}),e.jsx(v,{className:"h-5 w-5 text-red-600"})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:m.total_errors_24h.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical Errors"}),e.jsx(S,{className:"h-5 w-5 text-red-600"})]}),e.jsx("p",{className:"text-4xl font-bold text-red-600",children:m.critical_errors})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Error Types"}),e.jsx("div",{className:"space-y-3",children:m.top_errors.map((s,o)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.error_type}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last occurred: ",L(s.latest_occurrence)]})]}),e.jsx("div",{className:"ml-4 flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.count}),e.jsx("p",{className:"text-xs text-gray-500",children:"occurrences"})]})})]})},o))})]}),m.error_trend.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Error Trend (24h)"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-end justify-between space-x-2 h-48",children:m.error_trend.map((s,o)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end",children:[e.jsx("div",{className:"w-full bg-red-500 rounded-t transition-all hover:bg-red-600",style:{height:`${s.error_count/Math.max(...m.error_trend.map(x=>x.error_count))*100}%`,minHeight:s.error_count>0?"4px":"0"},title:`${s.error_count} errors`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left whitespace-nowrap",children:[new Date(s.hour).getHours(),":00"]})]},o))})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No error data available"})]})})]})]})})]})})};export{de as default};
