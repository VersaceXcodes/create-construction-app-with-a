import{a as re,u as I,b as L,j as e}from"./state-vendor-__gb9IU9.js";import{r as d,R as $}from"./react-vendor-QYi6USC3.js";import{u as A,a as w}from"./index-CrNOa18y.js";import{D as ae,w as E,P as V,y as R,T as K,ad as ne,X as Q,ah as ie,aD as oe,$ as le,aE as ce}from"./ui-vendor-CuJPReAW.js";const de=async o=>(await w.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",{headers:{Authorization:`Bearer ${o}`},params:{limit:100,offset:0,sort_by:"product_name",sort_order:"asc"}})).data.products||[],ue=async(o,c)=>(await w.get("https://123create-construction-app-with-a.launchpulse.ai/api/promotions",{headers:{Authorization:`Bearer ${o}`},params:{supplier_id:c,is_active:"true"}})).data||[],me=async(o,c,i)=>{const g=l=>{if(!l)return"";try{const x=new Date(l);return isNaN(x.getTime())?(console.error("[formatDateTimeForAPI] Invalid date:",l),l):x.toISOString()}catch(x){return console.error("[formatDateTimeForAPI] Error formatting date:",x,"value:",l),l}};return(await w.post("https://123create-construction-app-with-a.launchpulse.ai/api/promotions",{supplier_id:c,promotion_name:i.promotion_name,promotion_type:i.promotion_type,discount_type:i.discount_type,discount_value:Number(i.discount_value),start_date:g(i.start_date),end_date:g(i.end_date),applicable_products:i.applicable_products.length>0?i.applicable_products:null,promo_code:i.promo_code||null,minimum_purchase_amount:i.minimum_purchase_amount?Number(i.minimum_purchase_amount):null,is_active:!0},{headers:{Authorization:`Bearer ${o}`}})).data},xe=async(o,c,i,g)=>(await w.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${c}`,{price_per_unit:Number(i),bulk_pricing:g},{headers:{Authorization:`Bearer ${o}`}})).data,ye=()=>{const o=A(t=>t.authentication_state.auth_token),c=A(t=>t.authentication_state.current_user),i=A(t=>t.authentication_state.supplier_profile),g=re(),m=(i==null?void 0:i.supplier_id)||(c==null?void 0:c.user_id)||"",[l,x]=d.useState("pricing"),[U,h]=d.useState(!1),[z,P]=d.useState(null),[M,b]=d.useState(""),[y,B]=d.useState(""),[f,r]=d.useState(null),j=$.useRef(null),N=$.useRef(null),[a,C]=d.useState({promotion_name:"",promotion_type:"seasonal",discount_type:"percentage",discount_value:0,start_date:"",end_date:"",applicable_products:[],promo_code:"",minimum_purchase_amount:null}),S=$.useCallback(t=>{if(!t)return"";if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(t))return t;if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t))return t.substring(0,16);try{const s=new Date(t);if(isNaN(s.getTime()))return console.warn("[normalizeDateTimeValue] Invalid date:",t),"";const n=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0"),ee=String(s.getDate()).padStart(2,"0"),te=String(s.getHours()).padStart(2,"0"),se=String(s.getMinutes()).padStart(2,"0"),v=`${n}-${u}-${ee}T${te}:${se}`;return console.log("[normalizeDateTimeValue] Normalized:",t,"->",v),/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(v)?v:(console.error("[normalizeDateTimeValue] Invalid output format:",v,"from:",t),"")}catch(s){return console.error("[normalizeDateTimeValue] Error parsing date:",s,"value:",t),""}},[]);d.useEffect(()=>(window.__setPromotionFormData=t=>{C(s=>{const n={...t};if(t.start_date!==void 0){const u=S(t.start_date);n.start_date=u,j.current&&u&&(j.current.value=u,j.current.setCustomValidity(""))}if(t.end_date!==void 0){const u=S(t.end_date);n.end_date=u,N.current&&u&&(N.current.value=u,N.current.setCustomValidity(""))}return{...s,...n}})},()=>{delete window.__setPromotionFormData}),[S]);const{data:q=[],isLoading:O,error:H}=I({queryKey:["supplier-products",m],queryFn:()=>de(o||""),enabled:!!o&&!!m,staleTime:6e4,select:t=>t.map(s=>({...s,price_per_unit:Number(s.price_per_unit||0),cost_price:s.cost_price?Number(s.cost_price):null}))}),{data:D=[],isLoading:W,error:X}=I({queryKey:["supplier-promotions",m],queryFn:()=>ue(o||"",m),enabled:!!o&&!!m,staleTime:3e4,select:t=>t.map(s=>({...s,discount_value:Number(s.discount_value||0),usage_count:Number(s.usage_count||0)}))}),_=L({mutationFn:t=>me(o||"",m,t),onSuccess:()=>{g.invalidateQueries({queryKey:["supplier-promotions"]}),h(!1),C({promotion_name:"",promotion_type:"seasonal",discount_type:"percentage",discount_value:0,start_date:"",end_date:"",applicable_products:[],promo_code:"",minimum_purchase_amount:null}),r({type:"success",text:"Promotion created successfully!"}),setTimeout(()=>r(null),3e3)},onError:t=>{var s,n;r({type:"error",text:((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to create promotion"}),setTimeout(()=>r(null),5e3)}}),k=L({mutationFn:({productId:t,price:s,bulkPricing:n})=>xe(o||"",t,s,n),onSuccess:()=>{g.invalidateQueries({queryKey:["supplier-products"]}),P(null),b(""),r({type:"success",text:"Price updated successfully!"}),setTimeout(()=>r(null),3e3)},onError:t=>{var s,n;r({type:"error",text:((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update price"}),setTimeout(()=>r(null),5e3)}}),T=d.useMemo(()=>q.map(t=>({...t,margin_percentage:t.cost_price&&t.price_per_unit>0?(t.price_per_unit-t.cost_price)/t.price_per_unit*100:null})),[q]),F=d.useMemo(()=>{if(!y)return T;const t=y.toLowerCase();return T.filter(s=>s.product_name.toLowerCase().includes(t)||s.sku.toLowerCase().includes(t))},[T,y]),Y=t=>{P(t.product_id),b(t.price_per_unit.toString())},G=()=>{P(null),b("")},J=t=>{const s=parseFloat(M);if(isNaN(s)||s<=0){r({type:"error",text:"Please enter a valid price"}),setTimeout(()=>r(null),3e3);return}k.mutate({productId:t.product_id,price:s,bulkPricing:t.bulk_pricing})},Z=t=>{if(t.preventDefault(),console.log("[handleCreatePromotion] Form data:",a),!a.promotion_name.trim()){r({type:"error",text:"Promotion name is required"}),setTimeout(()=>r(null),3e3);return}if(a.discount_value<=0){r({type:"error",text:"Discount value must be greater than zero"}),setTimeout(()=>r(null),3e3);return}if(!a.start_date||!a.end_date){r({type:"error",text:"Start and end dates are required"}),setTimeout(()=>r(null),3e3);return}const s=new Date(a.start_date),n=new Date(a.end_date);if(isNaN(s.getTime())||isNaN(n.getTime())){console.error("[handleCreatePromotion] Invalid date values:",{start_date:a.start_date,end_date:a.end_date,startDate:s.toString(),endDate:n.toString()}),r({type:"error",text:"Please enter valid dates"}),setTimeout(()=>r(null),3e3);return}if(n<=s){r({type:"error",text:"End date must be after start date"}),setTimeout(()=>r(null),3e3);return}console.log("[handleCreatePromotion] Validation passed, submitting..."),_.mutate(a)},p=(t,s)=>{C(n=>({...n,[t]:s}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ae,{className:"w-8 h-8 text-blue-600"}),"Pricing & Promotions"]}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Manage your product pricing, bulk discounts, and promotional campaigns"})]}),l==="promotions"&&e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(E,{className:"w-5 h-5"}),"Create Promotion"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>x("pricing"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="pricing"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Product Pricing"]})}),e.jsx("button",{onClick:()=>x("promotions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="promotions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Promotions (",D.length,")"]})}),e.jsx("button",{onClick:()=>x("analytics"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="analytics"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Analytics"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f&&e.jsx("div",{className:`fixed top-20 right-4 z-50 px-6 py-4 rounded-lg shadow-xl border ${f.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[f.type==="success"?e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}):e.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),e.jsx("p",{className:"font-medium",children:f.text})]})}),l==="pricing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:y,onChange:t=>B(t.target.value),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("button",{className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Search"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Product Pricing (",F.length,")"]})}),O?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):H?e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again."})}):F.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(V,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No products found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.product_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:t.sku})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z===t.product_id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:M,onChange:s=>b(s.target.value),className:"w-24 px-2 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-100",autoFocus:!0})]}):e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",Number(t.price_per_unit||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:t.cost_price?`$${t.cost_price.toFixed(2)}`:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.margin_percentage!==null?e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${t.margin_percentage>=30?"bg-green-100 text-green-800":t.margin_percentage>=15?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.margin_percentage.toFixed(1),"%"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:z===t.product_id?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>J(t),disabled:k.isPending,className:"inline-flex items-center gap-1 text-green-600 hover:text-green-900 transition-colors disabled:opacity-50",children:[e.jsx(ne,{className:"w-4 h-4"}),"Save"]}),e.jsxs("button",{onClick:G,disabled:k.isPending,className:"inline-flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50",children:[e.jsx(Q,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>Y(t),className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-900 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),"Edit Price"]})})]},t.product_id))})]})})]})]}),l==="promotions"&&e.jsx("div",{className:"space-y-6",children:W?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading promotions..."})]}):X?e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load promotions. Please try again."})}):D.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Promotions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first promotional campaign to boost sales"}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(E,{className:"w-5 h-5"}),"Create First Promotion"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:D.map(t=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:t.promotion_name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:t.promotion_type.replace("_"," ")})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Discount"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.discount_type==="percentage"?`${t.discount_value}% off`:`$${t.discount_value.toFixed(2)} off`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Duration"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[new Date(t.start_date).toLocaleDateString()," - ",new Date(t.end_date).toLocaleDateString()]})]})]}),t.promo_code&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Promo Code"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900 bg-gray-100 px-2 py-1 rounded inline-block",children:t.promo_code})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Usage Count"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[t.usage_count," times"]})]})})]})]})},t.promotion_id))})}),l==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(K,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Pricing Analytics Coming Soon"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Advanced pricing analytics including conversion rates, margin analysis, and pricing optimization recommendations will be available soon."})]})})]})]}),U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Promotion"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:Z,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Name *"}),e.jsx("input",{type:"text",required:!0,value:a.promotion_name,onChange:t=>p("promotion_name",t.target.value),placeholder:"e.g., Summer Sale 2024",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Type *"}),e.jsxs("select",{required:!0,value:a.promotion_type,onChange:t=>p("promotion_type",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"seasonal",children:"Seasonal"}),e.jsx("option",{value:"volume_discount",children:"Volume Discount"}),e.jsx("option",{value:"new_customer",children:"New Customer"}),e.jsx("option",{value:"trade_exclusive",children:"Trade Exclusive"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type *"}),e.jsxs("select",{required:!0,value:a.discount_type,onChange:t=>p("discount_type",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Value *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:a.discount_value||"",onChange:t=>p("discount_value",parseFloat(t.target.value)||0),placeholder:a.discount_type==="percentage"?"10":"50.00",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"promotion-start-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{ref:j,id:"promotion-start-date",name:"start_date",type:"datetime-local",required:!0,value:a.start_date,onChange:t=>{p("start_date",t.target.value)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all","data-testid":"promotion-start-date","aria-label":"Promotion Start Date"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"promotion-end-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),e.jsx("input",{ref:N,id:"promotion-end-date",name:"end_date",type:"datetime-local",required:!0,value:a.end_date,onChange:t=>{p("end_date",t.target.value)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all","data-testid":"promotion-end-date","aria-label":"Promotion End Date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promo Code (Optional)"}),e.jsx("input",{type:"text",value:a.promo_code,onChange:t=>p("promo_code",t.target.value.toUpperCase()),placeholder:"e.g., SUMMER2024",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all font-mono"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Leave empty for automatic discount application"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Purchase Amount (Optional)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a.minimum_purchase_amount||"",onChange:t=>p("minimum_purchase_amount",parseFloat(t.target.value)||null),placeholder:"0.00",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),disabled:_.isPending,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5"}),"Create Promotion"]})})]})]})]})})]})};export{ye as default};
