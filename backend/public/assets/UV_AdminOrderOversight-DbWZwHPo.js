import{a as H,u as P,b as W,j as e}from"./state-vendor-__gb9IU9.js";import{e as X,r as u,L as G}from"./react-vendor-QYi6USC3.js";import{u as R,a as N}from"./index-BLkJOUb3.js";import{T as J,D as Y,f as Z,N as ee,h as I,S as se,a0 as te,X as j,a4 as re}from"./ui-vendor-CuJPReAW.js";const ae=async(o,d,a)=>{const i=new URLSearchParams;d.status&&i.append("status_filter",d.status),d.has_issues!==null&&i.append("issue_flag",String(d.has_issues)),i.append("limit",String(a.limit)),i.append("offset",String(a.offset));const c=await N.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/orders?${i.toString()}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return{orders:c.data.orders||[],total:c.data.total||0}},le=async(o,d)=>{const a=await N.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${d}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return{order:a.data.order,items:a.data.items||[],delivery:a.data.delivery||null,timeline:a.data.timeline||[]}},ie=async(o,d,a,i)=>(await N.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${d}`,{status:a,admin_notes:i},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data,ne=async o=>{const d=await N.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard?metric_type=orders",{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}),a=d.data.total_orders||0,i=d.data.active_orders||0,c=d.data.pending_disputes||0;return{total_orders:a,completion_rate:a>0?(a-i)/a*100:0,avg_fulfillment_time:48,issue_rate:a>0?c/a*100:0}},me=()=>{const[o,d]=X(),a=H(),i=R(s=>s.authentication_state.auth_token),c=R(s=>s.authentication_state.current_user),[h,T]=u.useState(null),[B,L]=u.useState(!1),[Q,v]=u.useState(!1),[w,_]=u.useState(""),[M,S]=u.useState(""),[K,E]=u.useState(""),[m,g]=u.useState({status:o.get("status_filter")||null,min_total:null,max_total:null,has_issues:o.get("issue_flag")==="true"?!0:null});u.useEffect(()=>{const s=o.get("value_range");s==="high_value"?g(l=>({...l,min_total:1e3,max_total:null})):s==="medium_value"?g(l=>({...l,min_total:100,max_total:1e3})):s==="low_value"&&g(l=>({...l,min_total:null,max_total:100}))},[o]);const[n,b]=u.useState({current_page:1,total_pages:1,total_count:0,limit:50}),{data:t,isLoading:y,error:k}=P({queryKey:["admin-orders",m,n.current_page,n.limit],queryFn:()=>ae(i,m,{limit:n.limit,offset:(n.current_page-1)*n.limit}),enabled:!!i&&(c==null?void 0:c.user_type)==="admin",staleTime:6e4,refetchOnWindowFocus:!1,select:s=>({orders:s.orders,total:s.total})});u.useEffect(()=>{(t==null?void 0:t.total)!==void 0&&b(s=>({...s,total_count:t.total,total_pages:Math.ceil(t.total/s.limit)}))},[t==null?void 0:t.total]);const{data:r,isLoading:A}=P({queryKey:["order-details",h],queryFn:()=>le(i,h),enabled:!!i&&!!h,staleTime:3e4}),{data:x}=P({queryKey:["admin-order-analytics"],queryFn:()=>ne(i),enabled:!!i&&(c==null?void 0:c.user_type)==="admin",staleTime:12e4,select:s=>({total_orders:s.total_orders,completion_rate:Number(Number(s.completion_rate||0).toFixed(1)),avg_fulfillment_time:Number(Number(s.avg_fulfillment_time||0).toFixed(1)),issue_rate:Number(Number(s.issue_rate||0).toFixed(1))})}),C=W({mutationFn:({order_id:s,new_status:l,admin_notes:$})=>ie(i,s,l,$),onSuccess:()=>{a.invalidateQueries({queryKey:["admin-orders"]}),a.invalidateQueries({queryKey:["order-details",h]}),v(!1),S(""),_("")}}),f=(s,l)=>{const $={...m,[s]:l};g($),b(U=>({...U,current_page:1}));const p=new URLSearchParams(o);s==="status"&&l?p.set("status_filter",l):s==="status"&&!l&&p.delete("status_filter"),s==="has_issues"&&l!==null?p.set("issue_flag",String(l)):s==="has_issues"&&l===null&&p.delete("issue_flag"),d(p)},q=s=>{T(s),L(!0)},V=s=>{s.preventDefault(),!(!h||!w)&&C.mutate({order_id:h,new_status:w,admin_notes:M})},z=()=>{L(!1),T(null)},O=()=>{v(!1),_(""),S("")},F=s=>({pending:"bg-yellow-100 text-yellow-800 border border-yellow-200",processing:"bg-blue-100 text-blue-800 border border-blue-200",shipped:"bg-purple-100 text-purple-800 border border-purple-200",in_transit:"bg-indigo-100 text-indigo-800 border border-indigo-200",delivered:"bg-green-100 text-green-800 border border-green-200",cancelled:"bg-red-100 text-red-800 border border-red-200",refunded:"bg-gray-100 text-gray-800 border border-gray-200"})[s]||"bg-gray-100 text-gray-800",D=s=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Oversight"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor and manage all platform orders with administrative controls"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("button",{onClick:()=>a.invalidateQueries({queryKey:["admin-orders"]}),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:(x==null?void 0:x.total_orders.toLocaleString())||"0"})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:e.jsx(Y,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(x==null?void 0:x.completion_rate)||0,"%"]})]}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:e.jsx(Z,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Fulfillment"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(x==null?void 0:x.avg_fulfillment_time)||0,"h"]})]}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:e.jsx(ee,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Issue Rate"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(x==null?void 0:x.issue_rate)||0,"%"]})]}),e.jsx("div",{className:"bg-red-50 rounded-lg p-3",children:e.jsx(I,{className:"h-6 w-6 text-red-600"})})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order number or customer...",value:K,onChange:s=>E(s.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"})]}),e.jsxs("select",{value:m.status||"",onChange:s=>f("status",s.target.value||null),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Orders"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.has_issues===!0,onChange:s=>f("has_issues",s.target.checked?!0:null),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Issues Only"})]})})]}),(m.status||m.has_issues)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[m.status&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Status: ",m.status,e.jsx("button",{onClick:()=>f("status",null),className:"ml-2 hover:text-blue-900",children:e.jsx(j,{className:"h-3 w-3"})})]}),m.has_issues&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:["Has Issues",e.jsx("button",{onClick:()=>f("has_issues",null),className:"ml-2 hover:text-red-900",children:e.jsx(j,{className:"h-3 w-3"})})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Orders List",(t==null?void 0:t.total)!==void 0&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",t.total.toLocaleString()," total)"]})]})}),y&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading orders..."})]}),k&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(I,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load orders"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Please try again later"})]}),!y&&!k&&(!(t!=null&&t.orders)||t.orders.length===0)&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(re,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}),!y&&!k&&(t==null?void 0:t.orders)&&t.orders.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.orders.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>q(s.order_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.order_number}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.order_id.substring(0,8),"..."]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:new Date(s.order_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${F(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${D(s.payment_status)}`,children:s.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",Number(s.total_amount).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:l=>{l.stopPropagation(),q(s.order_id)},className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"View Details"})})]},s.order_id))})]})}),!y&&t&&t.orders.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(n.current_page-1)*n.limit+1," to"," ",Math.min(n.current_page*n.limit,n.total_count)," of"," ",n.total_count," orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>b(s=>({...s,current_page:Math.max(1,s.current_page-1)})),disabled:n.current_page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",n.current_page," of ",n.total_pages]}),e.jsx("button",{onClick:()=>b(s=>({...s,current_page:Math.min(s.total_pages,s.current_page+1)})),disabled:n.current_page===n.total_pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})}),B&&h&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:z}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Details"}),e.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(j,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[A&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading order details..."})]}),!A&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.order.order_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(r.order.order_date).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${F(r.order.status)}`,children:r.order.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${D(r.order.payment_status)}`,children:r.order.payment_status})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"bg-gray-50 rounded-lg divide-y divide-gray-200",children:r.items.map(s=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",s.sku]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",s.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",Number(s.line_total||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",Number(s.price_per_unit||0).toFixed(2)," each"]})]})]},s.order_item_id))})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(r.order.subtotal_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Delivery Fee"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(r.order.delivery_fee_total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Tax"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(r.order.tax_amount).toFixed(2)]})]}),r.order.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Discount"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-$",Number(r.order.discount_amount).toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-blue-200 pt-2 mt-2 flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",Number(r.order.total_amount).toFixed(2)]})]})]})}),r.delivery&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Information"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Method"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.delivery.delivery_method})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${F(r.delivery.delivery_status)}`,children:r.delivery.delivery_status})]}),r.delivery.tracking_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tracking Number"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.delivery.tracking_number})]}),r.delivery.carrier&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Carrier"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.delivery.carrier})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),v(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"Intervene Order"}),e.jsx(G,{to:`/orders/${r.order.order_id}`,className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"View Full Order"})]})]})]})]})]})}),Q&&h&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:O}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Order Intervention"}),e.jsx("button",{onClick:O,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(j,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:V,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Order Status *"}),e.jsxs("select",{value:w,onChange:s=>_(s.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"Select status..."}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes *"}),e.jsx("textarea",{value:M,onChange:s=>S(s.target.value),required:!0,rows:4,placeholder:"Provide reason for intervention...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(I,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"This action will update the order status and notify relevant parties."})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:O,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:C.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Intervention"})]})]})]})]})})]})})};export{me as default};
