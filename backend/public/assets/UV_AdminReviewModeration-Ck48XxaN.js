import{a as Y,u as z,b as Z,j as e}from"./state-vendor-__gb9IU9.js";import{e as ee,r as d,L as V}from"./react-vendor-QYi6USC3.js";import{u as se,a as w}from"./index-XlgXzfNq.js";import{a0 as te,K as B,h as ae,e as D,g as f,j as re,aO as le,au as ne,aH as q,f as I,a7 as U,a4 as ie,W as oe}from"./ui-vendor-CuJPReAW.js";const ce=async(m,n,g)=>{const a=new URLSearchParams;n.status&&a.append("status",n.status),n.min_rating!==null&&a.append("min_rating",n.min_rating.toString()),n.verification_status!==null&&a.append("verified_purchase",n.verification_status.toString()),a.append("limit",g.limit.toString()),a.append("offset",((g.current_page-1)*g.limit).toString()),a.append("sort_by","review_date"),a.append("sort_order","desc");const o=await w.get(`https://123create-construction-app-with-a.launchpulse.ai/api/reviews?${a.toString()}`,{headers:{Authorization:`Bearer ${m}`}});return{reviews:o.data.reviews||[],total:o.data.total||0}},de=async m=>(await w.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/flagged",{headers:{Authorization:`Bearer ${m}`}})).data||[],me=async(m,n,g,a)=>(await w.post(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/${n}/moderate`,{action:g,reason:a},{headers:{Authorization:`Bearer ${m}`}})).data,xe=async m=>(await w.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard?metric_type=content_moderation",{headers:{Authorization:`Bearer ${m}`}})).data,be=()=>{var O;const m=Y(),[n,g]=ee(),a=se(s=>s.authentication_state.auth_token),[o,K]=d.useState(n.get("flagged_only")==="true"?"flagged":"all"),[x,_]=d.useState({status:n.get("review_type")||null,flagged_only:n.get("flagged_only")==="true",min_rating:null,verification_status:null}),[r,j]=d.useState({current_page:1,total_pages:1,total_count:0,limit:50}),[u,S]=d.useState(null),[Q,C]=d.useState(!1),[l,R]=d.useState(null),[k,A]=d.useState(""),[p,y]=d.useState([]),[$,H]=d.useState(!1),{data:c,isLoading:v,error:T}=z({queryKey:["admin-reviews",x,r.current_page,o],queryFn:async()=>{if(!a)throw new Error("No auth token");if(o==="flagged"){const s=await de(a);return{reviews:s,total:s.length}}return ce(a,x,r)},staleTime:6e4,enabled:!!a}),{data:W}=z({queryKey:["moderation-stats"],queryFn:async()=>{if(!a)throw new Error("No auth token");return xe(a)},staleTime:3e4,enabled:!!a,select:s=>({total_flagged:(s==null?void 0:s.total_flagged)||0,pending_moderation:(s==null?void 0:s.pending_moderation)||0,moderated_today:(s==null?void 0:s.moderated_today)||0})}),N=Z({mutationFn:async s=>{if(!a)throw new Error("No auth token");return me(a,s.reviewId,s.action,s.reason)},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-reviews"]}),m.invalidateQueries({queryKey:["moderation-stats"]}),C(!1),S(null),A(""),R(null)}});d.useEffect(()=>{c&&j(s=>({...s,total_count:c.total,total_pages:Math.ceil(c.total/s.limit)}))},[c]),d.useEffect(()=>{const s=new URLSearchParams;x.flagged_only&&s.set("flagged_only","true"),x.status&&s.set("review_type",x.status),g(s,{replace:!0})},[x,g]);const E=s=>{K(s),_(t=>({...t,flagged_only:s==="flagged"})),j(t=>({...t,current_page:1})),y([])},F=(s,t)=>{_(i=>({...i,[s]:t})),j(i=>({...i,current_page:1}))},M=s=>{j(t=>({...t,current_page:s})),window.scrollTo({top:0,behavior:"smooth"})},P=(s,t)=>{S(s),R(t),C(!0)},L=()=>{C(!1),S(null),R(null),A("")},X=async()=>{!u||!l||await N.mutateAsync({reviewId:u.review_id,action:l,reason:k})},G=s=>{y(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s])},J=()=>{if(!(c!=null&&c.reviews))return;const s=c.reviews.map(t=>t.review_id);y(t=>t.length===s.length?[]:s)},h=(c==null?void 0:c.reviews)||[],b=W||{total_flagged:0,pending_moderation:0,moderated_today:0};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Review Moderation"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and moderate customer reviews and ratings"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:b.total_flagged}),e.jsx("div",{className:"text-xs text-gray-600",children:"Flagged"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.pending_moderation}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.moderated_today}),e.jsx("div",{className:"text-xs text-gray-600",children:"Today"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(te,{className:"w-5 h-5 mr-2 text-gray-600"}),"Filters"]}),e.jsx("button",{onClick:()=>H(!$),className:"lg:hidden text-gray-600 hover:text-gray-900",children:e.jsx(B,{className:`w-5 h-5 transform transition-transform ${$?"rotate-90":""}`})})]}),e.jsxs("div",{className:`space-y-4 ${$?"block":"hidden lg:block"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Status"}),e.jsxs("select",{value:x.status||"",onChange:s=>F("status",s.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"flagged",children:"Flagged"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),e.jsxs("select",{value:((O=x.min_rating)==null?void 0:O.toString())||"",onChange:s=>F("min_rating",s.target.value?Number(s.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"Any Rating"}),e.jsx("option",{value:"1",children:"1+ Stars"}),e.jsx("option",{value:"2",children:"2+ Stars"}),e.jsx("option",{value:"3",children:"3+ Stars"}),e.jsx("option",{value:"4",children:"4+ Stars"}),e.jsx("option",{value:"5",children:"5 Stars Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),e.jsxs("select",{value:x.verification_status===null?"":x.verification_status.toString(),onChange:s=>F("verification_status",s.target.value===""?null:s.target.value==="true"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Reviews"}),e.jsx("option",{value:"true",children:"Verified Only"}),e.jsx("option",{value:"false",children:"Unverified Only"})]})]}),e.jsx("button",{onClick:()=>{_({status:null,flagged_only:o==="flagged",min_rating:null,verification_status:null})},className:"w-full px-4 py-2 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear All Filters"})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white rounded-t-xl shadow-sm border-x border-t border-gray-200",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>E("all"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${o==="all"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:["All Reviews (",r.total_count,")"]}),e.jsxs("button",{onClick:()=>E("flagged"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors relative ${o==="flagged"?"text-amber-600 border-b-2 border-amber-600 bg-amber-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:["Flagged Reviews",b.total_flagged>0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white bg-amber-600 rounded-full",children:b.total_flagged})]})]}),p.length>0&&e.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:p.length})," review",p.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>y([]),className:"px-3 py-1.5 text-sm text-blue-700 hover:text-blue-900 font-medium",children:"Clear Selection"}),e.jsx("button",{className:"px-4 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Approve Selected"}),e.jsx("button",{className:"px-4 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Reject Selected"})]})]}),h.length>0&&e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.length===h.length,onChange:J,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Select all on this page"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",r.total_count," reviews"]})]})]}),e.jsxs("div",{className:"bg-white rounded-b-xl shadow-sm border-x border-b border-gray-200",children:[v&&e.jsx("div",{className:"py-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm font-medium",children:"Loading reviews..."})]})}),T&&e.jsx("div",{className:"py-12 px-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load reviews. Please try again."})]})})}),!v&&!T&&h.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(D,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-sm text-gray-600",children:o==="flagged"?"No flagged reviews require moderation":"Try adjusting your filters"})]}),!v&&h.length>0&&e.jsx("div",{className:"divide-y divide-gray-200",children:h.map(s=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",checked:p.includes(s.review_id),onChange:()=>G(s.review_id),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(t=>e.jsx(f,{className:`w-4 h-4 ${t<=s.rating_overall?"text-yellow-400 fill-current":"text-gray-300"}`},t)),e.jsxs("span",{className:"ml-2 text-sm font-medium text-gray-900",children:[s.rating_overall,".0"]})]}),s.verified_purchase&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"Verified Purchase"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.status==="published"?"bg-green-100 text-green-800":s.status==="flagged"?"bg-amber-100 text-amber-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.is_anonymous?e.jsx("span",{className:"font-medium",children:"Anonymous"}):e.jsxs("span",{className:"font-medium",children:["Customer ID: ",s.customer_id.substring(0,8),"..."]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("time",{dateTime:s.review_date,children:new Date(s.review_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{children:["Order: ",s.order_id.substring(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:s.helpful_votes})]})]}),s.review_text&&e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-gray-900 leading-relaxed",children:s.review_text})}),(s.rating_product||s.rating_service||s.rating_delivery)&&e.jsxs("div",{className:"mb-3 flex flex-wrap gap-3 text-sm",children:[s.rating_product&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Product:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>e.jsx(f,{className:`w-3 h-3 ${t<=s.rating_product?"text-yellow-400 fill-current":"text-gray-300"}`},t))})]}),s.rating_service&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Service:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>e.jsx(f,{className:`w-3 h-3 ${t<=s.rating_service?"text-yellow-400 fill-current":"text-gray-300"}`},t))})]}),s.rating_delivery&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Delivery:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>e.jsx(f,{className:`w-3 h-3 ${t<=s.rating_delivery?"text-yellow-400 fill-current":"text-gray-300"}`},t))})]})]}),s.photos&&s.photos.length>0&&e.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.photos.length," photo",s.photos.length!==1?"s":""]})]}),s.supplier_response&&e.jsxs("div",{className:"mt-3 bg-blue-50 border-l-4 border-blue-600 p-3 rounded-r",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(D,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Supplier Response"}),s.supplier_response_date&&e.jsx("span",{className:"ml-2 text-xs text-blue-700",children:new Date(s.supplier_response_date).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-blue-900",children:s.supplier_response})]}),o==="flagged"&&"flag_reason"in s&&e.jsxs("div",{className:"mt-3 bg-amber-50 border-l-4 border-amber-600 p-3 rounded-r",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(q,{className:"w-4 h-4 text-amber-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"Flagged Reason"})]}),e.jsx("p",{className:"text-sm text-amber-900",children:s.flag_reason})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>P(s,"approve"),disabled:s.status==="published",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-green-700 bg-green-100 hover:bg-green-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{className:"w-4 h-4 mr-1.5"}),"Approve"]}),e.jsxs("button",{onClick:()=>P(s,"reject"),disabled:s.status==="rejected",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(U,{className:"w-4 h-4 mr-1.5"}),"Reject"]}),e.jsxs("button",{onClick:()=>P(s,"flag"),disabled:s.status==="flagged",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-amber-700 bg-amber-100 hover:bg-amber-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(q,{className:"w-4 h-4 mr-1.5"}),"Flag"]}),e.jsxs(V,{to:`/admin/orders?order_id=${s.order_id}`,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",children:[e.jsx(ie,{className:"w-4 h-4 mr-1.5"}),"View Order"]}),s.product_id&&e.jsx(V,{to:`/product/${s.product_id}`,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"View Product"})]})]})]})},s.review_id))}),!v&&h.length>0&&r.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",r.current_page," of ",r.total_pages]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>M(r.current_page-1),disabled:r.current_page===1,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,r.total_pages)},(s,t)=>{let i;return r.total_pages<=5||r.current_page<=3?i=t+1:r.current_page>=r.total_pages-2?i=r.total_pages-4+t:i=r.current_page-2+t,e.jsx("button",{onClick:()=>M(i),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i===r.current_page?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:i},i)})}),e.jsxs("button",{onClick:()=>M(r.current_page+1),disabled:r.current_page===r.total_pages,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx(B,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]})}),Q&&u&&l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:L}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${l==="approve"?"bg-green-100":l==="reject"?"bg-red-100":"bg-amber-100"}`,children:[l==="approve"&&e.jsx(I,{className:"w-6 h-6 text-green-600"}),l==="reject"&&e.jsx(U,{className:"w-6 h-6 text-red-600"}),l==="flag"&&e.jsx(q,{className:"w-6 h-6 text-amber-600"})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l==="approve"?"Approve Review":l==="reject"?"Reject Review":"Flag Review"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Review ID: ",u.review_id.substring(0,12),"..."]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex items-center mb-2",children:[1,2,3,4,5].map(s=>e.jsx(f,{className:`w-4 h-4 ${s<=u.rating_overall?"text-yellow-400 fill-current":"text-gray-300"}`},s))}),u.review_text&&e.jsx("p",{className:"text-sm text-gray-900 line-clamp-3",children:u.review_text})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"moderation-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:l==="approve"?"Approval Notes (Optional)":"Reason for Action (Required)"}),e.jsx("textarea",{id:"moderation-reason",value:k,onChange:s=>A(s.target.value),rows:3,required:l!=="approve",placeholder:l==="approve"?"Add any notes about this approval...":l==="reject"?"Explain why this review is being rejected...":"Describe the policy violation...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:L,disabled:N.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:X,disabled:N.isPending||l!=="approve"&&!k.trim(),className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${l==="approve"?"bg-green-600 hover:bg-green-700":l==="reject"?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700"}`,children:N.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[l==="approve"&&"Approve Review",l==="reject"&&"Reject Review",l==="flag"&&"Flag Review"]})})]})]})]})})]})})};export{be as default};
