import{u as v,j as e}from"./state-vendor-__gb9IU9.js";import{e as ve,r as p,L as u}from"./react-vendor-QYi6USC3.js";import{u as we,a as h}from"./index-4570EpHZ.js";import{$ as _e,C as Ae,a8 as y,an as ke,d as ie,T as R,P as S,U as ce,D,h as b,c as oe,g as xe,aI as Ce}from"./ui-vendor-CuJPReAW.js";const j=()=>{var d,n;try{const c=localStorage.getItem("app-storage");if(!c)return null;const t=JSON.parse(c);return((n=(d=t==null?void 0:t.state)==null?void 0:d.authentication_state)==null?void 0:n.auth_token)||null}catch(c){return console.error("Error reading auth token:",c),null}},Se=async d=>{const n=j();return(await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/dashboard",{params:{date_range:d},headers:{Authorization:`Bearer ${n}`}})).data},Fe=async d=>{const n=j();return(await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/sales",{params:{date_range:d},headers:{Authorization:`Bearer ${n}`}})).data},Re=async d=>{const n=j();return(await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/products",{params:{date_range:d},headers:{Authorization:`Bearer ${n}`}})).data},De=async d=>{const n=j();return(await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/customers",{params:{date_range:d},headers:{Authorization:`Bearer ${n}`}})).data},Le=async d=>{const n=j();return(await h.get("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/financials",{params:{date_range:d},headers:{Authorization:`Bearer ${n}`}})).data},Pe=async(d,n,c)=>{const t=j();return(await h.post("https://urls-washer-articles-luke.trycloudflare.com/api/suppliers/me/analytics/export",{format:d,date_range:n,sections:c},{headers:{Authorization:`Bearer ${t}`},responseType:"blob"})).data},Ue=()=>{var O,Q,G,J,H,W,X,Y,Z,M,I,ee,se,te,re,ae,le,de;const[d,n]=ve(),c=we(s=>s.authentication_state.supplier_profile),[t,L]=p.useState(d.get("metric_category")||"dashboard"),[i,me]=p.useState({range_type:d.get("date_range")||"last_30_days",custom_start:null,custom_end:null,comparison_period:null}),[P]=p.useState(d.get("comparison_enabled")==="true"),[E,$]=p.useState(!1),[T]=p.useState("pdf"),[F,q]=p.useState(!1),{data:a,isLoading:U,error:w,refetch:he}=v({queryKey:["supplier-analytics-dashboard",i.range_type],queryFn:()=>Se(i.range_type),enabled:t==="dashboard",staleTime:5*60*1e3,retry:1,select:s=>({total_sales:Number(s.total_sales||0),total_orders:Number(s.total_orders||0),avg_order_value:Number(s.avg_order_value||0),fulfillment_rate:Number(s.fulfillment_rate||0),customer_count:Number(s.customer_count||0),product_count:Number(s.product_count||0),rating_average:Number(s.rating_average||0)})}),{data:x,isLoading:z,error:_,refetch:ge}=v({queryKey:["supplier-analytics-sales",i.range_type],queryFn:()=>Fe(i.range_type),enabled:t==="sales",staleTime:5*60*1e3,retry:1}),{data:g,isLoading:B,error:A,refetch:pe}=v({queryKey:["supplier-analytics-products",i.range_type],queryFn:()=>Re(i.range_type),enabled:t==="products",staleTime:5*60*1e3,retry:1}),{data:r,isLoading:V,error:k,refetch:ue}=v({queryKey:["supplier-analytics-customers",i.range_type],queryFn:()=>De(i.range_type),enabled:t==="customers",staleTime:5*60*1e3,retry:1}),{data:o,isLoading:K,error:C,refetch:ye}=v({queryKey:["supplier-analytics-financial",i.range_type],queryFn:()=>Le(i.range_type),enabled:t==="financial",staleTime:5*60*1e3,retry:1});p.useEffect(()=>{const s={};t!=="dashboard"&&(s.metric_category=t),i.range_type!=="last_30_days"&&(s.date_range=i.range_type),P&&(s.comparison_enabled="true"),n(s,{replace:!0})},[t,i.range_type,P,n]);const be=s=>{L(s)},je=s=>{me(l=>({...l,range_type:s,custom_start:null,custom_end:null})),$(!1)},Ne=async()=>{if(!F){q(!0);try{const s=[t],l=await Pe(T,i.range_type,s),ne=window.URL.createObjectURL(l),f=document.createElement("a");f.href=ne,f.download=`analytics-${t}-${i.range_type}.${T}`,document.body.appendChild(f),f.click(),f.remove(),window.URL.revokeObjectURL(ne)}catch(s){console.error("Export failed:",s),alert("Export failed. Please try again.")}finally{q(!1)}}},m=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(s),N=s=>`${s.toFixed(1)}%`,fe=()=>({today:"Today",last_7_days:"Last 7 Days",last_30_days:"Last 30 Days",last_90_days:"Last 90 Days",custom:"Custom Range"})[i.range_type]||"Last 30 Days";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Analytics"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Comprehensive performance insights for ",e.jsx("span",{className:"font-medium",children:c==null?void 0:c.business_name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>$(!E),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),fe(),e.jsx(Ae,{className:"ml-2 h-4 w-4"})]}),E&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:e.jsx("div",{className:"py-1",children:[{value:"today",label:"Today"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"last_90_days",label:"Last 90 Days"}].map(s=>e.jsx("button",{onClick:()=>je(s.value),className:`block w-full text-left px-4 py-2 text-sm transition-colors ${i.range_type===s.value?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:s.label},s.value))})})]}),e.jsx("button",{onClick:Ne,disabled:F,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"animate-spin h-4 w-4 mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Analytics tabs",children:[{id:"dashboard",label:"Dashboard",icon:ie},{id:"sales",label:"Sales",icon:R},{id:"products",label:"Products",icon:S},{id:"customers",label:"Customers",icon:ce},{id:"financial",label:"Financial",icon:D}].map(s=>e.jsxs("button",{onClick:()=>be(s.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${t===s.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"h-5 w-5 mr-2"}),s.label]},s.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="dashboard"&&e.jsx("div",{className:"space-y-6",children:U?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(7)].map((s,l)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},l))}):w?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load dashboard metrics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:h.isAxiosError(w)?((Q=(O=w.response)==null?void 0:O.data)==null?void 0:Q.message)||w.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>he(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(D,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m((a==null?void 0:a.total_sales)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-green-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(a==null?void 0:a.total_orders)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(R,{className:"h-6 w-6 text-purple-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m((a==null?void 0:a.avg_order_value)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(S,{className:"h-6 w-6 text-amber-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Fulfillment Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N((a==null?void 0:a.fulfillment_rate)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(ce,{className:"h-6 w-6 text-indigo-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(a==null?void 0:a.customer_count)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-pink-100 rounded-lg",children:e.jsx(S,{className:"h-6 w-6 text-pink-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(a==null?void 0:a.product_count)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(xe,{className:"h-6 w-6 text-yellow-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Average Rating"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[((a==null?void 0:a.rating_average)||0).toFixed(1),e.jsx(xe,{className:"h-5 w-5 text-yellow-500 ml-1 fill-current"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(u,{to:"/supplier/products",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(S,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update inventory & pricing"})]})]}),e.jsxs(u,{to:"/supplier/orders",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(oe,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Process pending orders"})]})]}),e.jsxs(u,{to:"/supplier/financials",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(D,{className:"h-8 w-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Financial Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View payouts & earnings"})]})]})]})]})]})}),t==="sales"&&e.jsx("div",{className:"space-y-6",children:z?e.jsx("div",{className:"space-y-6",children:[...Array(3)].map((s,l)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]},l))}):_?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load sales analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:h.isAxiosError(_)?((J=(G=_.response)==null?void 0:G.data)==null?void 0:J.message)||_.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>ge(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2 text-blue-600"}),"Revenue Trends"]}),e.jsx("div",{className:"space-y-2",children:x!=null&&x.revenue_trends&&x.revenue_trends.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Orders"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.revenue_trends.slice(0,10).map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.date}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:m(s.revenue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:s.orders})]},l))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No sales data available for this period"})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Sales Summary"}),e.jsx("div",{className:"space-y-3",children:x!=null&&x.daily_sales&&x.daily_sales.length>0?x.daily_sales.slice(0,7).map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.date}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s.orders," orders"]}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:m(s.revenue)})]})]},l)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No daily sales data available"})})]})]})}),t==="products"&&e.jsx("div",{className:"space-y-6",children:B?e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,l)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},l))})]}):A?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load product analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:h.isAxiosError(A)?((W=(H=A.response)==null?void 0:H.data)==null?void 0:W.message)||A.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>pe(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-green-600"}),"Top Performing Products"]}),e.jsx("div",{className:"overflow-x-auto",children:g!=null&&g.top_performers&&g.top_performers.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Views"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margin"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.top_performers.slice(0,10).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(u,{to:`/supplier/products/${s.product_id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:s.product_name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:s.sales_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:s.views_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:m(s.revenue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.profit_margin>=30?"bg-green-100 text-green-800":s.profit_margin>=20?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:N(s.profit_margin)})})]},s.product_id))})]}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No product performance data available"})})]}),(g==null?void 0:g.underperformers)&&g.underperformers.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(b,{className:"h-5 w-5 mr-2 text-amber-600"}),"Products Needing Attention"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Views"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.underperformers.slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(u,{to:`/supplier/products/${s.product_id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:s.product_name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:s.sales_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:s.views_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:m(s.revenue)})]},s.product_id))})]})})]})]})}),t==="customers"&&e.jsx("div",{className:"space-y-6",children:V?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map((s,l)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]},l))}):k?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load customer analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:h.isAxiosError(k)?((Y=(X=k.response)==null?void 0:X.data)==null?void 0:Y.message)||k.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>ue(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Acquisition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"New Customers"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:((Z=r==null?void 0:r.acquisition_metrics)==null?void 0:Z.new_customers)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:N(((M=r==null?void 0:r.acquisition_metrics)==null?void 0:M.conversion_rate)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Acquisition Cost"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:m(((I=r==null?void 0:r.acquisition_metrics)==null?void 0:I.acquisition_cost)||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Retention"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Repeat Customers"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:((ee=r==null?void 0:r.retention_metrics)==null?void 0:ee.repeat_customers)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Retention Rate"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:N(((se=r==null?void 0:r.retention_metrics)==null?void 0:se.retention_rate)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Churn Rate"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:N(((te=r==null?void 0:r.retention_metrics)==null?void 0:te.churn_rate)||0)})]})]})]})]}),(r==null?void 0:r.customer_segments)&&r.customer_segments.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Segments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Segment"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Customers"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg Order"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.customer_segments.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.segment_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:s.customer_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:m(s.avg_order_value)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:m(s.total_revenue)})]},l))})]})})]})]})}),t==="financial"&&e.jsx("div",{className:"space-y-6",children:K?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,l)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},l))}):C?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load financial analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:h.isAxiosError(C)?((ae=(re=C.response)==null?void 0:re.data)==null?void 0:ae.message)||C.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>ye(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Gross Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m((o==null?void 0:o.gross_revenue)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Platform Fees"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["-",m((o==null?void 0:o.commission_costs)||0)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Net Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m((o==null?void 0:o.net_revenue)||0)})]})]}),(o==null?void 0:o.payout_history)&&o.payout_history.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Payouts"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.payout_history.slice(0,10).map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(s.scheduled_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:m(s.amount)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="processing"?"bg-blue-100 text-blue-800":s.status==="scheduled"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:s.status})})]},s.payout_id))})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["For detailed financial reports and payout management, visit the"," ",e.jsx(u,{to:"/supplier/financials",className:"font-medium underline hover:text-blue-900",children:"Financials dashboard"})]})})]})}),!U&&!z&&!B&&!V&&!K&&t==="sales"&&(!x||((le=x.daily_sales)==null?void 0:le.length)===0&&((de=x.revenue_trends)==null?void 0:de.length)===0)&&e.jsxs("div",{className:"bg-white rounded-xl p-12 shadow-sm border border-gray-200 text-center",children:[e.jsx(ie,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start making sales to see your analytics data here."}),e.jsx(u,{to:"/supplier/products",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Manage Products"})]})]})]})})};export{Ue as default};
