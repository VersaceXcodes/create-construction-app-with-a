import{a as J,u as Z,b as z,j as e}from"./state-vendor-__gb9IU9.js";import{f as ee,u as se,r as n,L as g}from"./react-vendor-QYi6USC3.js";import{u as I,a as $}from"./index-BLkJOUb3.js";import{k as S,P as F,w as te,ad as ae,X as re,ah as ie,T as k,ai as O,aj as le,c as W}from"./ui-vendor-CuJPReAW.js";const ne=async(l,c)=>(await $.get(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${l}`,{headers:{Authorization:`Bearer ${c}`}})).data,ce=async(l,c,o)=>(await $.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${l}`,c,{headers:{Authorization:`Bearer ${o}`}})).data,de=async(l,c)=>(await $.post(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${l}/load-to-cart`,{},{headers:{Authorization:`Bearer ${c}`}})).data,he=()=>{var Q,L;const{project_id:l}=ee(),c=se(),o=J(),j=I(s=>s.authentication_state.auth_token),K=I(s=>s.fetch_cart),[V,N]=n.useState(!1),[q,C]=n.useState(""),[A,P]=n.useState(""),[d,H]=n.useState(1),[v,M]=n.useState(!1),[T,w]=n.useState(!1),{data:t,isLoading:U,error:b,refetch:R}=Z({queryKey:["project",l],queryFn:()=>ne(l,j),enabled:!!l&&!!j,staleTime:6e4,refetchOnWindowFocus:!1,select:s=>{const r=(s.items||[]).map(a=>{const p=Number(a.price_per_unit||0),u=p,m=Number(a.quantity||0),B=Number(a.stock_quantity||0);return{project_item_id:a.project_item_id,product_id:a.product_id,product_name:a.product_name,sku:"N/A",quantity:m,saved_price:p,current_price:u,price_change:u-p,stock_quantity:B,availability_status:B>=m?"available":"insufficient_stock",primary_image_url:a.primary_image_url,supplier_name:"Unknown Supplier",supplier_id:"",line_total_saved:m*p,line_total_current:m*u}});return{project:s.project,items:r}}});n.useEffect(()=>{t!=null&&t.project&&(C(t.project.project_name||""),P(t.project.description||""))},[t]),n.useEffect(()=>{var s,r;if(b){const a=b;(((s=a.response)==null?void 0:s.status)===404||((r=a.response)==null?void 0:r.status)===403)&&setTimeout(()=>c("/projects"),3e3)}},[b,c]);const _=z({mutationFn:s=>ce(l,s,j),onSuccess:()=>{o.invalidateQueries({queryKey:["project",l]}),o.invalidateQueries({queryKey:["projects"]}),N(!1),w(!1)},onError:s=>{var r,a;alert(`Failed to update project: ${((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||s.message}`)}}),f=z({mutationFn:()=>de(l,j),onSuccess:async s=>{await K(),o.invalidateQueries({queryKey:["cart"]}),o.invalidateQueries({queryKey:["cart-summary"]}),s.unavailable_items&&s.unavailable_items.length>0?alert(`Added ${s.added_items} items to cart. ${s.unavailable_items.length} items were unavailable.`):alert(`Successfully added ${s.added_items} items to cart!`),c("/cart")},onError:s=>{var r,a;alert(`Failed to load project to cart: ${((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||s.message}`)}}),i=n.useMemo(()=>{if(!(t!=null&&t.items))return{saved_total:0,current_total:0,price_difference:0,price_change_percentage:0};const s=t.items.reduce((u,m)=>u+m.line_total_saved,0),r=t.items.reduce((u,m)=>u+m.line_total_current,0),a=r-s,p=s>0?a/s*100:0;return{saved_total:s,current_total:r,price_difference:a,price_change_percentage:p}},[t==null?void 0:t.items]),E=n.useMemo(()=>!(t!=null&&t.items)||d===1?{}:t.items.reduce((s,r)=>(s[r.project_item_id]=Math.ceil(r.quantity*d),s),{}),[t==null?void 0:t.items,d]),h=n.useMemo(()=>t!=null&&t.items?t.items.filter(s=>s.availability_status==="insufficient_stock"):[],[t==null?void 0:t.items]),X=()=>{if(!T){N(!1);return}_.mutate({project_name:q,description:A||void 0})},Y=()=>{C((t==null?void 0:t.project.project_name)||""),P((t==null?void 0:t.project.description)||""),N(!1),w(!1)},D=()=>{h.length>0&&!window.confirm(`${h.length} items have insufficient stock. Do you want to continue loading available items to cart?`)||f.mutate()},G=()=>{d!==1&&(M(!1),alert("Scaling preview shown. Backend endpoint for applying scale not yet implemented."))};if(U)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},s))})]})})});if(b){const s=b,r=((Q=s.response)==null?void 0:Q.status)===404,a=((L=s.response)==null?void 0:L.status)===403;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(S,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r?"Project Not Found":a?"Access Denied":"Error Loading Project"}),e.jsx("p",{className:"text-gray-600 mb-6",children:r?"The project you're looking for doesn't exist or has been deleted.":a?"You don't have permission to view this project.":"Something went wrong while loading the project. Please try again."}),e.jsxs("div",{className:"space-y-3",children:[!r&&!a&&e.jsx("button",{onClick:()=>R(),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"}),e.jsx(g,{to:"/projects",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Projects"})]})]})})})})}if(!t||!t.items||t.items.length===0)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(g,{to:"/projects",className:"text-blue-600 hover:text-blue-700 font-medium mb-4 inline-flex items-center transition-colors",children:"← Back to Projects"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:(t==null?void 0:t.project.project_name)||"Project"}),(t==null?void 0:t.project.description)&&e.jsx("p",{className:"text-gray-600 mt-2 leading-relaxed",children:t.project.description})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4",children:e.jsx(F,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"This project is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add products to this project to create a reusable template for future orders."}),e.jsxs(g,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),"Browse Products"]})]})]})})});const y=t.project,x=t.items;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(g,{to:"/projects",className:"text-blue-600 hover:text-blue-700 font-medium mb-4 inline-flex items-center transition-colors",children:"← Back to Projects"}),e.jsx("div",{className:"mt-4",children:V?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),e.jsx("input",{id:"project_name",type:"text",value:q,onChange:s=>{C(s.target.value),w(!0)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"project_description",value:A,onChange:s=>{P(s.target.value),w(!0)},rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Add a description for this project"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:X,disabled:_.isPending||!T,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),"Save Changes"]})}),e.jsxs("button",{onClick:Y,disabled:_.isPending,className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),"Cancel"]})]})]}):e.jsx("div",{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:y.project_name}),y.description&&e.jsx("p",{className:"text-gray-600 mt-2 leading-relaxed",children:y.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(y.created_date).toLocaleDateString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last updated: ",new Date(y.last_updated_date).toLocaleDateString()]})]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Edit Info"]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(F,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Original Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.saved_total.toFixed(2)]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(k,{className:"h-6 w-6 text-gray-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.current_total.toFixed(2)]}),i.price_difference!==0&&e.jsxs("div",{className:`inline-flex items-center mt-2 text-sm font-medium ${i.price_difference>0?"text-red-600":"text-green-600"}`,children:[i.price_difference>0?e.jsx(k,{className:"h-4 w-4 mr-1"}):e.jsx(O,{className:"h-4 w-4 mr-1"}),i.price_difference>0?"+":"","$",Math.abs(i.price_difference).toFixed(2),"(",i.price_change_percentage>0?"+":"",i.price_change_percentage.toFixed(1),"%)"]})]}),e.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${i.price_difference>0?"bg-red-100":i.price_difference<0?"bg-green-100":"bg-gray-100"}`,children:e.jsx(k,{className:`h-6 w-6 ${i.price_difference>0?"text-red-600":i.price_difference<0?"text-green-600":"text-gray-600"}`})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"h-5 w-5 text-gray-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Scale Project Quantities"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale_multiplier",className:"block text-sm font-medium text-gray-700 mb-2",children:"Scale Multiplier"}),e.jsx("input",{id:"scale_multiplier",type:"number",min:"0.1",max:"10",step:"0.1",value:d,onChange:s=>{const r=parseFloat(s.target.value);!isNaN(r)&&r>0&&H(r)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Example: 2.0 doubles all quantities, 0.5 halves them"})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>M(!v),disabled:d===1,className:"w-full px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Hide Preview":"Preview Scaled Quantities"})}),e.jsx("div",{children:e.jsx("button",{onClick:G,disabled:d===1,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Scaling"})})]}),v&&d!==1&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scaled Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(s=>{const r=E[s.project_item_id]||s.quantity,a=r-s.quantity;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:s.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:r}),e.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium ${a>0?"text-green-600":a<0?"text-red-600":"text-gray-500"}`,children:[a>0?"+":"",a]})]},s.project_item_id)})})]})})]}),h.length>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-2",children:"Stock Availability Issues"}),e.jsxs("p",{className:"text-sm text-amber-800 mb-3",children:[h.length," ",h.length===1?"item has":"items have"," insufficient stock:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-amber-700",children:h.map(s=>e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:s.product_name})," - ","Needed: ",s.quantity,", Available: ",s.stock_quantity]},s.project_item_id))})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Project Items (",x.length,")"]}),e.jsx("button",{onClick:D,disabled:f.isPending||x.length===0,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Load All to Cart"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[s.primary_image_url?e.jsx("img",{src:s.primary_image_url,alt:s.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(F,{className:"h-16 w-16 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 right-3",children:s.availability_status==="available"?e.jsx("span",{className:"px-3 py-1 bg-green-600 text-white text-xs font-medium rounded-full",children:"In Stock"}):e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-xs font-medium rounded-full",children:"Low Stock"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(g,{to:`/product/${s.product_id}`,className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors line-clamp-2 mb-2",children:s.product_name}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:v&&d!==1?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"line-through text-gray-400 mr-2",children:s.quantity}),e.jsx("span",{className:"text-blue-600",children:E[s.project_item_id]})]}):s.quantity})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Original Price:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",s.saved_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Price:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",s.current_price.toFixed(2)]})]}),s.price_change!==0&&e.jsx("div",{className:"pt-2",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${s.price_change>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:s.price_change>0?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"+$",Math.abs(s.price_change).toFixed(2)," per unit"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"-$",Math.abs(s.price_change).toFixed(2)," per unit"]})})}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal (Original):"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",s.line_total_saved.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal (Current):"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",s.line_total_current.toFixed(2)]})]})]}),s.availability_status==="insufficient_stock"&&e.jsx("div",{className:"pt-3",children:e.jsxs("div",{className:"flex items-center px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(S,{className:"h-4 w-4 text-amber-600 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"text-xs text-amber-800",children:["Only ",s.stock_quantity," available"]})]})})]}),e.jsx(g,{to:`/product/${s.product_id}`,className:"mt-4 w-full inline-flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm",children:"View Product Details"})]})]},s.project_item_id))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Ready to order?"}),e.jsx("p",{children:"Load all items to your cart and proceed to checkout."})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:D,disabled:f.isPending||x.length===0,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Load to Cart (",x.length," items)"]})})})]})})]})})})};export{he as default};
