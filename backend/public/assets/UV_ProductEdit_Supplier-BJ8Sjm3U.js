import{a as le,u as I,b as K,j as e}from"./state-vendor-__gb9IU9.js";import{f as oe,u as ce,r as o,L as N}from"./react-vendor-QYi6USC3.js";import{u as U,a as y}from"./index-CWUh35PH.js";import{h as w,a6 as L,ag as de,f as ue,x as me,w as ge,X as R,at as xe,ad as pe}from"./ui-vendor-CuJPReAW.js";const ye=async(i,d)=>(await y.get(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${i}`,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).data,be=async i=>(await y.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:"true"},headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}})).data,he=async(i,d,u)=>(await y.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${i}`,d,{headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}})).data,fe=async(i,d)=>{const u={category_id:i.category_id,sku:`${i.sku}_COPY`,product_name:`${i.product_name} (Copy)`,description:i.description,key_features:i.key_features,specifications:i.specifications,price_per_unit:i.price_per_unit,unit_of_measure:i.unit_of_measure,bulk_pricing:i.bulk_pricing,stock_quantity:0,low_stock_threshold:i.low_stock_threshold,images:i.images,primary_image_url:i.primary_image_url,status:"inactive",brand:i.brand,minimum_order_quantity:i.minimum_order_quantity,handling_time_days:i.handling_time_days,tags:i.tags,weight:i.weight,material:i.material,warranty_information:i.warranty_information,customer_type_availability:i.customer_type_availability};return(await y.post("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",u,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).data},Ce=()=>{var J;const{product_id:i}=oe(),d=ce(),u=le(),m=U(s=>s.authentication_state.auth_token),b=U(s=>s.authentication_state.supplier_profile),[r,k]=o.useState(null),[h,C]=o.useState([]),[q,f]=o.useState({}),[g,S]=o.useState(!1),[Q,A]=o.useState(!1),[x,F]=o.useState(""),[p,P]=o.useState(""),[_,O]=o.useState(""),[j,T]=o.useState(""),{data:t,isLoading:M,error:V}=I({queryKey:["product",i],queryFn:()=>ye(i,m),enabled:!!i&&!!m,staleTime:0,retry:1}),{data:$,isLoading:z}=I({queryKey:["categories","active"],queryFn:()=>be(m),enabled:!!m,staleTime:5*60*1e3}),H=Array.isArray($)?$:[],v=K({mutationFn:s=>he(i,s,m),onSuccess:()=>{u.invalidateQueries({queryKey:["product",i]}),u.invalidateQueries({queryKey:["supplier-products"]}),u.invalidateQueries({queryKey:["supplier-inventory"]}),S(!1),C([]),f({}),A(!0),setTimeout(()=>A(!1),3e3)},onError:s=>{var a,l;(l=(a=s.response)==null?void 0:a.data)!=null&&l.errors&&f(s.response.data.errors)}}),B=K({mutationFn:()=>fe(t,m),onSuccess:s=>{u.invalidateQueries({queryKey:["supplier-products"]}),d(`/supplier/products/${s.product_id}/edit`)}});o.useEffect(()=>{if(t){if(b&&t.supplier_id!==b.supplier_id){alert("Access denied - product does not belong to your shop"),d("/supplier/products");return}k({product_id:t.product_id,category_id:t.category_id,product_name:t.product_name,description:t.description,key_features:t.key_features,specifications:t.specifications,price_per_unit:t.price_per_unit,unit_of_measure:t.unit_of_measure,bulk_pricing:t.bulk_pricing,stock_quantity:t.stock_quantity,low_stock_threshold:t.low_stock_threshold,expected_restock_date:t.expected_restock_date,images:t.images,primary_image_url:t.primary_image_url,status:t.status,is_featured:t.is_featured,tags:t.tags,weight:t.weight,material:t.material,warranty_information:t.warranty_information,minimum_order_quantity:t.minimum_order_quantity,maximum_order_quantity:t.maximum_order_quantity,handling_time_days:t.handling_time_days,searchable:t.searchable,customer_type_availability:t.customer_type_availability})}},[t,b,d]),o.useEffect(()=>{if(!t||!r)return;const s=JSON.stringify(r)!==JSON.stringify({product_id:t.product_id,category_id:t.category_id,product_name:t.product_name,description:t.description,key_features:t.key_features,specifications:t.specifications,price_per_unit:t.price_per_unit,unit_of_measure:t.unit_of_measure,bulk_pricing:t.bulk_pricing,stock_quantity:t.stock_quantity,low_stock_threshold:t.low_stock_threshold,expected_restock_date:t.expected_restock_date,images:t.images,primary_image_url:t.primary_image_url,status:t.status,is_featured:t.is_featured,tags:t.tags,weight:t.weight,material:t.material,warranty_information:t.warranty_information,minimum_order_quantity:t.minimum_order_quantity,maximum_order_quantity:t.maximum_order_quantity,handling_time_days:t.handling_time_days,searchable:t.searchable,customer_type_availability:t.customer_type_availability});S(s)},[r,t]),o.useEffect(()=>{const s=a=>{g&&(a.preventDefault(),a.returnValue="")};return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[g]);const D=o.useCallback((s,a,l)=>{JSON.stringify(a)!==JSON.stringify(l)&&C(c=>[...c,{field_name:s,old_value:a,new_value:l,timestamp:new Date().toISOString()}])},[]),n=o.useCallback((s,a)=>{!r||!t||(k(l=>{if(!l)return l;const c=l[s];return D(s,c,a),{...l,[s]:a}}),f(l=>{const c={...l};return delete c[s],c}))},[r,t,D]),W=async s=>{if(s.preventDefault(),!r)return;const a={};r.category_id!==(t==null?void 0:t.category_id)&&(a.category_id=r.category_id),r.product_name!==(t==null?void 0:t.product_name)&&(a.product_name=r.product_name),r.description!==(t==null?void 0:t.description)&&(a.description=r.description),JSON.stringify(r.key_features)!==JSON.stringify(t==null?void 0:t.key_features)&&(a.key_features=r.key_features),JSON.stringify(r.specifications)!==JSON.stringify(t==null?void 0:t.specifications)&&(a.specifications=r.specifications),r.price_per_unit!==(t==null?void 0:t.price_per_unit)&&(a.price_per_unit=r.price_per_unit),r.unit_of_measure!==(t==null?void 0:t.unit_of_measure)&&(a.unit_of_measure=r.unit_of_measure),JSON.stringify(r.bulk_pricing)!==JSON.stringify(t==null?void 0:t.bulk_pricing)&&(a.bulk_pricing=r.bulk_pricing),r.stock_quantity!==(t==null?void 0:t.stock_quantity)&&(a.stock_quantity=r.stock_quantity),r.low_stock_threshold!==(t==null?void 0:t.low_stock_threshold)&&(a.low_stock_threshold=r.low_stock_threshold),r.expected_restock_date!==(t==null?void 0:t.expected_restock_date)&&(a.expected_restock_date=r.expected_restock_date),JSON.stringify(r.images)!==JSON.stringify(t==null?void 0:t.images)&&(a.images=r.images),r.primary_image_url!==(t==null?void 0:t.primary_image_url)&&(a.primary_image_url=r.primary_image_url),r.status!==(t==null?void 0:t.status)&&(a.status=r.status),r.is_featured!==(t==null?void 0:t.is_featured)&&(a.is_featured=r.is_featured),JSON.stringify(r.tags)!==JSON.stringify(t==null?void 0:t.tags)&&(a.tags=r.tags),r.weight!==(t==null?void 0:t.weight)&&(a.weight=r.weight),r.material!==(t==null?void 0:t.material)&&(a.material=r.material),r.warranty_information!==(t==null?void 0:t.warranty_information)&&(a.warranty_information=r.warranty_information),r.minimum_order_quantity!==(t==null?void 0:t.minimum_order_quantity)&&(a.minimum_order_quantity=r.minimum_order_quantity),r.maximum_order_quantity!==(t==null?void 0:t.maximum_order_quantity)&&(a.maximum_order_quantity=r.maximum_order_quantity),r.handling_time_days!==(t==null?void 0:t.handling_time_days)&&(a.handling_time_days=r.handling_time_days),r.searchable!==(t==null?void 0:t.searchable)&&(a.searchable=r.searchable),r.customer_type_availability!==(t==null?void 0:t.customer_type_availability)&&(a.customer_type_availability=r.customer_type_availability),await v.mutateAsync(a)},Y=()=>{if(!x.trim()||!r)return;const a=[...Array.isArray(r.images)?r.images:[],x.trim()];n("images",a),r.primary_image_url||n("primary_image_url",x.trim()),F("")},X=s=>{if(!r)return;const a=Array.isArray(r.images)?r.images:[],l=a.filter((je,ne)=>ne!==s),c=a[s];n("images",l),r.primary_image_url===c&&n("primary_image_url",l[0]||null)},G=s=>{n("primary_image_url",s)},E=()=>{if(!p.trim()||!r)return;const s=Array.isArray(r.tags)?r.tags:[];s.includes(p.trim())||(n("tags",[...s,p.trim()]),P(""))},Z=s=>{if(!r)return;const a=Array.isArray(r.tags)?r.tags:[];n("tags",a.filter(l=>l!==s))},ee=()=>{if(!_.trim()||!j.trim()||!r)return;const s=parseFloat(j);if(isNaN(s)||s<=0)return;const a=r.bulk_pricing||{};n("bulk_pricing",{...a,[_]:s}),O(""),T("")},te=s=>{if(!r)return;const a={...r.bulk_pricing||{}};delete a[s],n("bulk_pricing",Object.keys(a).length>0?a:null)},se=()=>{if(!r)return;const s=Array.isArray(r.key_features)?r.key_features:[];n("key_features",[...s,""])},re=(s,a)=>{if(!r)return;const c=[...Array.isArray(r.key_features)?r.key_features:[]];c[s]=a,n("key_features",c)},ae=s=>{if(!r)return;const a=Array.isArray(r.key_features)?r.key_features:[];n("key_features",a.filter((l,c)=>c!==s))},ie=async()=>{t&&window.confirm("Create a duplicate of this product? The copy will be inactive with 0 stock.")&&await B.mutateAsync()};return M||z?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading product..."})]})})}):V?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're trying to edit could not be found."}),e.jsxs(N,{to:"/supplier/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Back to Products"]})]})})}):!r||!t?null:e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(N,{to:"/supplier/products",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Back to Products"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Product"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["SKU: ",t.sku]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[g&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-amber-100 text-amber-800",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Unsaved changes"]}),e.jsxs("button",{type:"button",onClick:ie,disabled:B.isPending,className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),"Duplicate"]})]})]})]}),Q&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center",children:[e.jsx(ue,{className:"w-5 h-5 text-green-600 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:"Product updated successfully!"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"product_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"product_name",value:r.product_name||"",onChange:s=>n("product_name",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0}),q.product_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.product_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category_id",className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category_id",value:r.category_id||"",onChange:s=>n("category_id",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),H.map(s=>e.jsx("option",{value:s.category_id,children:s.category_name},s.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU (cannot be changed)"}),e.jsx("input",{type:"text",id:"sku",value:t.sku,readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-100 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:r.description||"",onChange:s=>n("description",s.target.value),rows:6,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Detailed product description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key Features"}),e.jsxs("div",{className:"space-y-2",children:[Array.isArray(r.key_features)&&r.key_features.map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:s,onChange:l=>re(a,l.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Feature description"}),e.jsx("button",{type:"button",onClick:()=>ae(a),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(me,{className:"w-5 h-5"})})]},a)),e.jsxs("button",{type:"button",onClick:se,className:"inline-flex items-center px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"Add Feature"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price_per_unit",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price per Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"price_per_unit",value:r.price_per_unit||"",onChange:s=>n("price_per_unit",Number(s.target.value)),step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"unit_of_measure",className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit of Measure ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"unit_of_measure",value:r.unit_of_measure||"",onChange:s=>n("unit_of_measure",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"piece, bag, yard, etc.",required:!0})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bulk Pricing (optional)"}),e.jsxs("div",{className:"space-y-2",children:[r.bulk_pricing&&Object.entries(r.bulk_pricing).map(([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("span",{className:"text-gray-700 font-medium",children:[s,"+:"]}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:["$",Number(a).toFixed(2)]}),e.jsx("button",{type:"button",onClick:()=>te(s),className:"ml-auto p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]},s)),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:_,onChange:s=>O(s.target.value),placeholder:"Quantity (e.g., 10)",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("input",{type:"number",value:j,onChange:s=>T(s.target.value),placeholder:"Price",step:"0.01",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Inventory"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stock_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:["Stock Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"stock_quantity",value:r.stock_quantity??0,onChange:s=>n("stock_quantity",Number(s.target.value)),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"low_stock_threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Alert"}),e.jsx("input",{type:"number",id:"low_stock_threshold",value:r.low_stock_threshold??10,onChange:s=>n("low_stock_threshold",Number(s.target.value)),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expected_restock_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Restock Date"}),e.jsx("input",{type:"date",id:"expected_restock_date",value:((J=r.expected_restock_date)==null?void 0:J.split("T")[0])||"",onChange:s=>n("expected_restock_date",s.target.value?new Date(s.target.value).toISOString():null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Product Images"}),Array.isArray(r.images)&&r.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:r.images.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Product ${a+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),r.primary_image_url===s&&e.jsx("span",{className:"absolute top-2 left-2 px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded",children:"Primary"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex space-x-2",children:[r.primary_image_url!==s&&e.jsx("button",{type:"button",onClick:()=>G(s),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>X(a),className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"Remove"})]})})]},a))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"url",value:x,onChange:s=>F(s.target.value),placeholder:"Enter image URL",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsxs("button",{type:"button",onClick:Y,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(xe,{className:"w-5 h-5 mr-2"}),"Add Image"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Note: Image upload endpoint not yet available. Please enter image URLs manually."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsx("input",{type:"text",id:"brand",value:r.brand||"",onChange:s=>n("brand",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-700 mb-2",children:"Material"}),e.jsx("input",{type:"text",id:"material",value:r.material||"",onChange:s=>n("material",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight (lbs)"}),e.jsx("input",{type:"number",id:"weight",value:r.weight??"",onChange:s=>n("weight",s.target.value?Number(s.target.value):null),step:"0.01",min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Array.isArray(r.tags)&&r.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[s,e.jsx("button",{type:"button",onClick:()=>Z(s),className:"ml-2 hover:text-blue-900",children:e.jsx(R,{className:"w-4 h-4"})})]},s))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:p,onChange:s=>P(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),E()),placeholder:"Add tag",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"warranty_information",className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Information"}),e.jsx("textarea",{id:"warranty_information",value:r.warranty_information||"",onChange:s=>n("warranty_information",s.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Warranty terms and conditions..."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order & Delivery Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minimum_order_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order"}),e.jsx("input",{type:"number",id:"minimum_order_quantity",value:r.minimum_order_quantity??1,onChange:s=>n("minimum_order_quantity",Number(s.target.value)),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maximum_order_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Order"}),e.jsx("input",{type:"number",id:"maximum_order_quantity",value:r.maximum_order_quantity??"",onChange:s=>n("maximum_order_quantity",s.target.value?Number(s.target.value):null),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"handling_time_days",className:"block text-sm font-medium text-gray-700 mb-2",children:"Handling Time (days)"}),e.jsx("input",{type:"number",id:"handling_time_days",value:r.handling_time_days??1,onChange:s=>n("handling_time_days",Number(s.target.value)),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Status & Visibility"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"status",value:r.status||"active",onChange:s=>n("status",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customer_type_availability",className:"block text-sm font-medium text-gray-700 mb-2",children:"Available To"}),e.jsxs("select",{id:"customer_type_availability",value:r.customer_type_availability||"all",onChange:s=>n("customer_type_availability",s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"retail",children:"Retail Only"}),e.jsx("option",{value:"trade",children:"Trade Only"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Featured Product"}),e.jsx("input",{type:"checkbox",checked:r.is_featured||!1,onChange:s=>n("is_featured",s.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Searchable"}),e.jsx("input",{type:"checkbox",checked:r.searchable??!0,onChange:s=>n("searchable",s.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white border-t-4 border-blue-600 rounded-xl shadow-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[g&&e.jsxs("span",{className:"text-amber-700 font-medium flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"You have unsaved changes"]}),h.length>0&&e.jsxs("span",{className:"text-gray-600 text-sm",children:[h.length," change",h.length!==1?"s":""," made"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{to:"/supplier/products",className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v.isPending||!g,className:"inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})})]})]})})})};export{Ce as default};
