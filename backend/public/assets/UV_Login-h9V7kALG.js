import{j as e}from"./state-vendor-__gb9IU9.js";import{u as q,e as T,r as l,L as b}from"./react-vendor-QYi6USC3.js";import{u as d}from"./index-BLkJOUb3.js";import{h as y,p as U,u as z,a3 as H,a4 as I}from"./ui-vendor-CuJPReAW.js";const J=()=>{const a=q(),[w]=T(),j=d(s=>s.authentication_state.authentication_status.is_authenticated),i=d(s=>s.authentication_state.authentication_status.is_loading),m=d(s=>s.authentication_state.error_message),u=d(s=>s.authentication_state.authentication_status.user_type),E=d(s=>s.login_user),g=d(s=>s.clear_auth_error),[o,v]=l.useState(""),[x,C]=l.useState(""),[P,S]=l.useState(!1),[h,_]=l.useState(!1),[r,n]=l.useState({email:null,password:null}),p=w.get("redirect_url"),f=w.get("email");l.useEffect(()=>{f&&v(f)},[f]),l.useEffect(()=>{j&&(p&&B(p)?a(p,{replace:!0}):u==="customer"?a("/dashboard",{replace:!0}):u==="supplier"?a("/supplier/dashboard",{replace:!0}):u==="admin"?a("/admin",{replace:!0}):a("/",{replace:!0}))},[j,u,a,p]);const B=s=>s?s.startsWith("/")&&!s.includes("://"):!1,N=s=>s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?null:"Please enter a valid email address":"Email address is required",k=s=>s?s.length<8?"Password must be at least 8 characters":null:"Password is required",L=s=>{const t=s.target.value;v(t),r.email&&n(c=>({...c,email:null})),m&&g()},A=s=>{const t=s.target.value;C(t),r.password&&n(c=>({...c,password:null})),m&&g()},F=()=>{const s=N(o);n(t=>({...t,email:s}))},M=()=>{const s=k(x);n(t=>({...t,password:s}))},W=async s=>{s.preventDefault(),g();const t=N(o),c=k(x);if(t||c){n({email:t,password:c});return}n({email:null,password:null});try{await E(o.toLowerCase().trim(),x)}catch($){console.error("Login error:",$)}},R=()=>{_(!h)},V=()=>{const s=o?`?email=${encodeURIComponent(o)}`:"";a(`/forgot-password${s}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-8 pt-8 pb-6 bg-gradient-to-r from-blue-600 to-indigo-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Sign in to access your BuildEasy account"})]})}),e.jsxs("div",{className:"px-8 py-8",children:[m&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(y,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:m})})]}),e.jsxs("form",{onSubmit:W,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:L,onBlur:F,disabled:i,placeholder:"you@example.com",className:`
                        block w-full pl-10 pr-4 py-3 
                        border-2 rounded-lg
                        bg-white text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        disabled:opacity-50 disabled:cursor-not-allowed
                        ${r.email?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                      `,style:{WebkitTextFillColor:"#111827"}})]}),r.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),r.email]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("button",{type:"button",onClick:V,className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"current-password",required:!0,value:x,onChange:A,onBlur:M,disabled:i,placeholder:"Enter your password",className:`
                        block w-full pl-10 pr-12 py-3 
                        border-2 rounded-lg
                        bg-white text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        disabled:opacity-50 disabled:cursor-not-allowed
                        ${r.password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                      `,style:{WebkitTextFillColor:"#111827"}}),e.jsx("button",{type:"button",onClick:R,disabled:i,className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:opacity-70 transition-opacity disabled:opacity-50","aria-label":h?"Hide password":"Show password",children:h?e.jsx(H,{className:"h-5 w-5 text-gray-400"}):e.jsx(I,{className:"h-5 w-5 text-gray-400"})})]}),r.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),r.password]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:P,onChange:s=>S(s.target.checked),disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Keep me signed in for 7 days"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:`
                      w-full flex justify-center items-center
                      px-6 py-3 rounded-lg
                      bg-blue-600 hover:bg-blue-700
                      text-white font-medium
                      shadow-lg hover:shadow-xl
                      transition-all duration-200
                      focus:outline-none focus:ring-4 focus:ring-blue-100
                      disabled:opacity-50 disabled:cursor-not-allowed
                    `,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"New to BuildEasy?"})})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(b,{to:"/register",className:`
                    w-full flex justify-center items-center
                    px-6 py-3 rounded-lg
                    bg-gray-100 hover:bg-gray-200
                    text-gray-900 font-medium
                    border-2 border-gray-300
                    transition-all duration-200
                    focus:outline-none focus:ring-4 focus:ring-gray-100
                  `,children:"Create an Account"})}),e.jsxs("div",{className:"mt-8 text-center space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Need help?"," ",e.jsx(b,{to:"/help",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Visit our Help Center"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["By signing in, you agree to our"," ",e.jsx(b,{to:"/terms",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Terms of Service"})," ","and"," ",e.jsx(b,{to:"/privacy",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Privacy Policy"})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center bg-white rounded-full px-4 py-2 shadow-md border border-gray-100",children:[e.jsx("svg",{className:"h-4 w-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Secure Login â€¢ 256-bit Encryption"})]})})]})})})};export{J as default};
