import{a as we,u as A,b as F,j as e}from"./state-vendor-__gb9IU9.js";import{r as i}from"./react-vendor-QYi6USC3.js";import{u as Ce,a as c}from"./index-CWUh35PH.js";import{k as ke,j as Me,a_ as G,i as H,a$ as Y,$ as S,aX as le}from"./ui-vendor-CuJPReAW.js";const o="https://123create-construction-app-with-a.launchpulse.ai/api",$e=async n=>{const r=await c.get(`${o}/admin/maintenance/status`,{headers:{Authorization:`Bearer ${n}`}});return{is_maintenance_active:r.data.maintenance_mode_active,maintenance_message:r.data.maintenance_message,scheduled_start:r.data.scheduled_start_time,scheduled_end:r.data.scheduled_end_time,affected_services:r.data.affected_services||[],last_activated_by:r.data.last_activated_by,last_activated_at:r.data.last_activated_timestamp}},Ae=async(n,r)=>{const t=await c.put(`${o}/admin/maintenance/toggle`,r,{headers:{Authorization:`Bearer ${n}`}});return{is_maintenance_active:t.data.maintenance_mode_active,maintenance_message:t.data.maintenance_message,scheduled_start:null,scheduled_end:null,affected_services:t.data.affected_services||[],last_activated_by:t.data.activated_by,last_activated_at:t.data.activated_at}},Fe=async n=>(await c.get(`${o}/admin/features/flags`,{headers:{Authorization:`Bearer ${n}`}})).data.feature_flags.map(t=>({flag_id:t.flag_id,flag_name:t.flag_name,description:t.description,is_enabled:t.is_enabled,rollout_percentage:t.rollout_percentage,target_user_types:t.target_user_types||[],updated_by:t.updated_by,updated_at:t.updated_at})),Se=async(n,r,t)=>{await c.put(`${o}/admin/features/flags/${r}`,t,{headers:{Authorization:`Bearer ${n}`}})},Ee=async n=>{const r=await c.get(`${o}/admin/platform/version`,{headers:{Authorization:`Bearer ${n}`}});return{current_version:r.data.version_number,deployment_date:r.data.deployment_timestamp,build_number:r.data.build_id,commit_hash:r.data.git_commit_hash,environment:r.data.environment_name,rollback_available:r.data.rollback_available,previous_version:r.data.previous_version}},De=async n=>(await c.get(`${o}/admin/maintenance/scheduled`,{headers:{Authorization:`Bearer ${n}`}})).data.scheduled_windows.map(t=>({maintenance_id:t.maintenance_id,title:t.title,description:t.description,scheduled_start:t.scheduled_start_time,scheduled_end:t.scheduled_end_time,maintenance_type:t.maintenance_type,affected_services:t.affected_services||[],status:t.status,created_by:t.created_by})),Te=async(n,r)=>{await c.post(`${o}/admin/maintenance/schedule`,r,{headers:{Authorization:`Bearer ${n}`}})},Pe=async(n,r)=>{await c.post(`${o}/admin/maintenance/emergency`,r,{headers:{Authorization:`Bearer ${n}`}})},Re=()=>{const n=Ce(s=>s.authentication_state.auth_token),r=we(),[t,m]=i.useState("maintenance"),[ie,E]=i.useState(!1),[de,p]=i.useState(!1),[ce,u]=i.useState(!1),[O,y]=i.useState(""),[h,f]=i.useState([]),[j,D]=i.useState(""),[X,T]=i.useState(""),[v,P]=i.useState(""),[N,U]=i.useState(""),[_,L]=i.useState([]),[Z,J]=i.useState(!0),[ee,se]=i.useState(30),[w,V]=i.useState(""),[ae,q]=i.useState(60),[C,R]=i.useState(""),[oe,z]=i.useState(null),[B,te]=i.useState(0),[b,I]=i.useState([]),k=["api","web_app","mobile_app","search","payments","notifications","chat","analytics"],me=["customer","supplier","admin"],{data:a,isLoading:xe,error:ge}=A({queryKey:["maintenance-status"],queryFn:()=>$e(n),enabled:!!n,staleTime:3e4,refetchInterval:6e4}),{data:x,isLoading:ue}=A({queryKey:["feature-flags"],queryFn:()=>Fe(n),enabled:!!n&&t==="features",staleTime:3e4}),{data:d,isLoading:he}=A({queryKey:["version-info"],queryFn:()=>Ee(n),enabled:!!n&&t==="version",staleTime:3e5}),{data:W,isLoading:be}=A({queryKey:["scheduled-maintenance"],queryFn:()=>De(n),enabled:!!n&&t==="scheduled",staleTime:6e4}),g=F({mutationFn:s=>Ae(n,s),onSuccess:()=>{r.invalidateQueries({queryKey:["maintenance-status"]}),u(!1),y(""),f([])}}),K=F({mutationFn:s=>Pe(n,s),onSuccess:()=>{r.invalidateQueries({queryKey:["maintenance-status"]}),E(!1),V(""),q(60),R("")}}),Q=F({mutationFn:s=>Te(n,s),onSuccess:()=>{r.invalidateQueries({queryKey:["scheduled-maintenance"]}),p(!1),D(""),T(""),P(""),U(""),L([]),J(!0),se(30)}}),M=F({mutationFn:({flagId:s,payload:l})=>Se(n,s,l),onSuccess:()=>{r.invalidateQueries({queryKey:["feature-flags"]}),z(null)}}),pe=()=>{a!=null&&a.is_maintenance_active,u(!0)},re=()=>{g.mutate({maintenance_active:!(a!=null&&a.is_maintenance_active),maintenance_message:O||"Platform is currently under maintenance. We will be back soon.",affected_services:h.length>0?h:k})},ye=()=>{!w||!C||K.mutate({reason:w,estimated_duration_minutes:ae,maintenance_message:C})},fe=()=>{!j||!v||!N||Q.mutate({title:j,description:X,scheduled_start:v,scheduled_end:N,affected_services:_.length>0?_:k,notify_users:Z,warning_duration_minutes:ee})},je=s=>{M.mutate({flagId:s.flag_id,payload:{is_enabled:!s.is_enabled,rollout_percentage:s.rollout_percentage,target_user_types:s.target_user_types}})},ve=s=>{var l;M.mutate({flagId:s,payload:{is_enabled:((l=x==null?void 0:x.find($=>$.flag_id===s))==null?void 0:l.is_enabled)||!1,rollout_percentage:B,target_user_types:b}})},ne=(s,l,$)=>{l.includes(s)?$(l.filter(_e=>_e!==s)):$([...l,s])},Ne=s=>{b.includes(s)?I(b.filter(l=>l!==s)):I([...b,s])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Maintenance"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Control system maintenance, feature flags, and platform updates"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:a!=null&&a.is_maintenance_active?e.jsxs("div",{className:"flex items-center space-x-2 bg-red-100 text-red-800 px-4 py-2 rounded-lg",children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Maintenance Mode Active"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"System Operational"})]})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>m("maintenance"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="maintenance"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{children:"Maintenance Control"})]})}),e.jsx("button",{onClick:()=>m("features"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="features"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:"Feature Flags"})]})}),e.jsx("button",{onClick:()=>m("version"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="version"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("span",{children:"Version Info"})]})}),e.jsx("button",{onClick:()=>m("scheduled"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="scheduled"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsx("span",{children:"Scheduled Maintenance"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="maintenance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Maintenance Status"})}),e.jsx("div",{className:"p-6",children:xe?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):ge?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700",children:"Failed to load maintenance status"})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3",children:a!=null&&a.is_maintenance_active?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Mode: ACTIVE"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Mode: INACTIVE"})]})}),(a==null?void 0:a.maintenance_message)&&e.jsxs("p",{className:"mt-2 text-gray-600",children:[e.jsx("strong",{children:"Message:"})," ",a.maintenance_message]}),(a==null?void 0:a.affected_services)&&a.affected_services.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Affected Services:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.affected_services.map(s=>e.jsx("span",{className:"px-3 py-1 bg-amber-100 text-amber-800 text-xs font-medium rounded-full",children:s},s))})]}),(a==null?void 0:a.last_activated_at)&&e.jsxs("p",{className:"mt-3 text-sm text-gray-500",children:["Last updated: ",new Date(a.last_activated_at).toLocaleString(),a.last_activated_by&&` by ${a.last_activated_by}`]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:pe,disabled:g.isPending,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg flex items-center space-x-2 ${a!=null&&a.is_maintenance_active?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(G,{className:"h-5 w-5"}),e.jsxs("span",{children:[a!=null&&a.is_maintenance_active?"Deactivate":"Activate"," Maintenance"]})]}),e.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{children:"Emergency Mode"})]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(S,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule Maintenance"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Plan maintenance windows with user notifications"}),e.jsx("button",{onClick:()=>p(!0),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Schedule Window"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(H,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Feature Flags"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Control feature rollout and availability"}),e.jsx("button",{onClick:()=>m("features"),className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:"Manage Flags"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Y,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Version Info"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"View deployment details and rollback options"}),e.jsx("button",{onClick:()=>m("version"),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"View Version"})]})]})]}),t==="features"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Feature Flag Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Control feature availability and gradual rollout across user types"})]}),e.jsx("div",{className:"p-6",children:ue?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-purple-600"})}):!x||x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No feature flags configured"})]}):e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:s.flag_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.is_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.is_enabled?"Enabled":"Disabled"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Rollout:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[s.rollout_percentage,"%"]})]}),s.target_user_types.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"Target:"}),e.jsx("div",{className:"flex space-x-1",children:s.target_user_types.map(l=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:l},l))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:new Date(s.updated_at).toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsx("button",{onClick:()=>je(s),disabled:M.isPending,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${s.is_enabled?"bg-red-100 hover:bg-red-200 text-red-700":"bg-green-100 hover:bg-green-200 text-green-700"} disabled:opacity-50`,children:s.is_enabled?"Disable":"Enable"}),e.jsx("button",{onClick:()=>{z(s.flag_id),te(s.rollout_percentage),I(s.target_user_types)},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Configure"})]})]}),oe===s.flag_id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rollout Percentage: ",B,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:B,onChange:l=>te(Number(l.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target User Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(l=>e.jsx("button",{type:"button",onClick:()=>Ne(l),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${b.includes(l)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:l},l))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>ve(s.flag_id),disabled:M.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Save Configuration"}),e.jsx("button",{onClick:()=>z(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})]},s.flag_id))})})]})}),t==="version"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Version Information"})}),e.jsx("div",{className:"p-6",children:he?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-green-600"})}):d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Version"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.current_version})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Environment"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${d.environment==="production"?"bg-green-100 text-green-800":d.environment==="staging"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:d.environment})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Build Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.build_number})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Deployment Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(d.deployment_date).toLocaleString()})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Commit Hash"}),e.jsx("code",{className:"text-sm font-mono text-gray-900 bg-gray-50 px-2 py-1 rounded",children:d.commit_hash})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Rollback Available"}),e.jsx("div",{className:"flex items-center space-x-2",children:d.rollback_available?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-green-600 font-semibold",children:"Yes"}),d.previous_version&&e.jsxs("span",{className:"text-gray-600 text-sm",children:["(to ",d.previous_version,")"]})]}):e.jsx("span",{className:"text-gray-600 font-semibold",children:"No"})})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No version information available"})]})})]})}),t==="scheduled"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scheduled Maintenance Windows"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Plan and manage future maintenance periods"})]}),e.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"+ Schedule New"})]}),e.jsx("div",{className:"p-6",children:be?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):!W||W.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled maintenance windows"})]}):e.jsx("div",{className:"space-y-4",children:W.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${s.status==="scheduled"?"bg-blue-100 text-blue-800":s.status==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(s.scheduled_start).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(s.scheduled_end).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.maintenance_type})]})]}),s.affected_services.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Affected Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.affected_services.map(l=>e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs font-medium rounded",children:l},l))})]})]},s.maintenance_id))})})]})})]}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${a!=null&&a.is_maintenance_active?"bg-green-100":"bg-red-100"}`,children:e.jsx(G,{className:`h-6 w-6 ${a!=null&&a.is_maintenance_active?"text-green-600":"text-red-600"}`})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[a!=null&&a.is_maintenance_active?"Deactivate":"Activate"," Maintenance Mode"]})]}),!(a!=null&&a.is_maintenance_active)&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Message"}),e.jsx("textarea",{value:O,onChange:s=>y(s.target.value),placeholder:"Platform is currently under maintenance...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affected Services"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map(s=>e.jsx("button",{type:"button",onClick:()=>ne(s,h,f),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h.includes(s)?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s))}),h.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All services will be affected"})]})]}),e.jsx("div",{className:`p-4 rounded-lg mb-6 ${a!=null&&a.is_maintenance_active?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`text-sm ${a!=null&&a.is_maintenance_active?"text-green-800":"text-red-800"}`,children:a!=null&&a.is_maintenance_active?"This will restore platform access to all users immediately.":"This will prevent users from accessing the platform. Use only when necessary."})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:re,disabled:g.isPending,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg disabled:opacity-50 ${a!=null&&a.is_maintenance_active?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:g.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Confirm ${a!=null&&a.is_maintenance_active?"Deactivation":"Activation"}`}),e.jsx("button",{onClick:()=>{u(!1),y(""),f([])},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(le,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Emergency Maintenance"})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"WARNING:"})," This will immediately activate maintenance mode with minimal notice to users. Use only for critical system issues."]})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Reason *"}),e.jsx("input",{type:"text",value:w,onChange:s=>V(s.target.value),placeholder:"Critical database issue requiring immediate attention",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes)"}),e.jsx("input",{type:"number",value:ae,onChange:s=>q(Number(s.target.value)),min:"5",max:"480",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Message *"}),e.jsx("textarea",{value:C,onChange:s=>R(s.target.value),placeholder:"We are performing emergency maintenance. Service will be restored shortly.",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:ye,disabled:K.isPending||!w||!C,className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:K.isPending?"Activating...":"Activate Emergency Mode"}),e.jsx("button",{onClick:()=>{E(!1),V(""),q(60),R("")},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 my-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(S,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Schedule Maintenance Window"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Title *"}),e.jsx("input",{type:"text",value:j,onChange:s=>D(s.target.value),placeholder:"Scheduled System Upgrade",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:X,onChange:s=>T(s.target.value),placeholder:"Database migration and performance improvements",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx("input",{type:"datetime-local",value:v,onChange:s=>P(s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),e.jsx("input",{type:"datetime-local",value:N,onChange:s=>U(s.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affected Services"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map(s=>e.jsx("button",{type:"button",onClick:()=>ne(s,_,L),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${_.includes(s)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"notify-users",checked:Z,onChange:s=>J(s.target.checked),className:"h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"notify-users",className:"text-sm font-medium text-gray-700",children:"Notify All Users"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warning Duration (minutes)"}),e.jsx("input",{type:"number",value:ee,onChange:s=>se(Number(s.target.value)),min:"5",max:"1440",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a!=null&&a.is_maintenance_active?re:fe,disabled:(a!=null&&a.is_maintenance_active?g.isPending:Q.isPending)||!(a!=null&&a.is_maintenance_active)&&(!j||!v||!N),className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:(a!=null&&a.is_maintenance_active?g.isPending:Q.isPending)?"Processing...":a!=null&&a.is_maintenance_active?"Confirm Deactivation":"Schedule Maintenance"}),e.jsx("button",{onClick:()=>{u(!1),p(!1),y(""),f([]),D(""),T(""),P(""),U(""),L([])},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})})]})})};export{Re as default};
