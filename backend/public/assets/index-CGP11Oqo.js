import{c as QN,u as ne,j as e,a as Pe,b as oe,Q as XN,d as JN}from"./state-vendor-cc1XCyvo.js";import{a as ZN,u as ze,b as wm,r as _,L as Q,R as Z,c as Fe,d as ur,e as Qi,g as Je,B as ew,f as tw,h as fe,N as fa}from"./react-vendor-DrHzt48t.js";import{C as Et,S as Xe,X as ge,a as Pl,M as Fo,b as Js,P as ve,c as Be,d as zs,D as Te,e as Ft,B as Ht,f as he,g as Oe,h as de,i as Vt,T as Re,j as Mt,L as eh,U as ct,k as At,l as Al,F as Me,m as Ed,n as sw,o as Zs,p as jt,q as Dt,r as rw,s as aw,t as nw,u as Xn,A as Fd,v as _m,w as dt,x as _t,y as Aa,z as zt,E as Xt,G as $a,H as km,I as ls,J as kt,K as Ie,N as He,O as $l,Q as sb,R as rb,V as Di,W as Rt,Y as je,Z as ab,_ as Sm,$ as mt,a0 as ys,a1 as Qs,a2 as iw,a3 as Oa,a4 as xt,a5 as ut,a6 as ir,a7 as Ve,a8 as vt,a9 as Md,aa as nb,ab as lw,ac as ow,ad as Bt,ae as Xi,af as ib,ag as Cm,ah as Is,ai as Jn,aj as cw,ak as Ss,al as es,am as lb,an as Lt,ao as dw,ap as uw,aq as mw,ar as xw,as as kr,at as os,au as Zn,av as hw,aw as pw,ax as th,ay as sh,az as gw,aA as Rd,aB as fw,aC as bw,aD as yw,aE as ob,aF as vw,aG as jw,aH as Gr,aI as Nw,aJ as ww,aK as vl,aL as Ji,aM as Wc,aN as rh,aO as ba,aP as cb,aQ as _w,aR as Dd,aS as Rs,aT as kw,aU as Sw,aV as Cw,aW as ah,aX as ya,aY as Pw,aZ as Aw,a_ as Vc,a$ as Kc,b0 as $w,b1 as Ow,b2 as Tw,b3 as Ew}from"./ui-vendor-DIYmv_DK.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var db,nh=ZN;db=nh.createRoot,nh.hydrateRoot;function Fw(t,s){let r;try{r=t()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),o=(i=r.getItem(n))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>r.removeItem(n)}}const Ld=t=>s=>{try{const r=t(s);return r instanceof Promise?r:{then(a){return Ld(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return Ld(a)(r)}}}},Mw=(t,s)=>(r,a,n)=>{let i={storage:Fw(()=>localStorage),partialize:b=>b,version:0,merge:(b,v)=>({...v,...b}),...s},l=!1;const o=new Set,d=new Set;let c=i.storage;if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...b)},a,n);const u=()=>{const b=i.partialize({...a()});return c.setItem(i.name,{state:b,version:i.version})},m=n.setState;n.setState=(b,v)=>(m(b,v),u());const h=t((...b)=>(r(...b),u()),a,n);n.getInitialState=()=>h;let x;const p=()=>{var b,v;if(!c)return;l=!1,o.forEach(P=>{var w;return P((w=a())!=null?w:h)});const j=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(b=a())!=null?b:h))||void 0;return Ld(c.getItem.bind(c))(i.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==i.version){if(i.migrate){const w=i.migrate(P.state,P.version);return w instanceof Promise?w.then(C=>[!0,C]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var w;const[C,f]=P;if(x=i.merge(f,(w=a())!=null?w:h),r(x,!0),C)return u()}).then(()=>{j==null||j(x,void 0),x=a(),l=!0,d.forEach(P=>P(x))}).catch(P=>{j==null||j(void 0,P)})};return n.persist={setOptions:b=>{i={...i,...b},b.storage&&(c=b.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(d.add(b),()=>{d.delete(b)})},i.skipHydration||p(),x||h},Rw=Mw;function ub(t,s){return function(){return t.apply(s,arguments)}}const{toString:Dw}=Object.prototype,{getPrototypeOf:Pm}=Object,{iterator:Mo,toStringTag:mb}=Symbol,Ro=(t=>s=>{const r=Dw.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ts=t=>(t=t.toLowerCase(),s=>Ro(s)===t),Do=t=>s=>typeof s===t,{isArray:nn}=Array,Ta=Do("undefined");function Li(t){return t!==null&&!Ta(t)&&t.constructor!==null&&!Ta(t.constructor)&&ts(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xb=Ts("ArrayBuffer");function Lw(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&xb(t.buffer),s}const Iw=Do("string"),ts=Do("function"),hb=Do("number"),Ii=t=>t!==null&&typeof t=="object",qw=t=>t===!0||t===!1,jl=t=>{if(Ro(t)!=="object")return!1;const s=Pm(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(mb in t)&&!(Mo in t)},Bw=t=>{if(!Ii(t)||Li(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Uw=Ts("Date"),zw=Ts("File"),Ww=Ts("Blob"),Vw=Ts("FileList"),Kw=t=>Ii(t)&&ts(t.pipe),Hw=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||ts(t.append)&&((s=Ro(t))==="formdata"||s==="object"&&ts(t.toString)&&t.toString()==="[object FormData]"))},Yw=Ts("URLSearchParams"),[Gw,Qw,Xw,Jw]=["ReadableStream","Request","Response","Headers"].map(Ts),Zw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qi(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),nn(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(Li(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(a=0;a<l;a++)o=i[a],s.call(null,t[o],o,t)}}function pb(t,s){if(Li(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gb=t=>!Ta(t)&&t!==zr;function Id(){const{caseless:t,skipUndefined:s}=gb(this)&&this||{},r={},a=(n,i)=>{const l=t&&pb(r,i)||i;jl(r[l])&&jl(n)?r[l]=Id(r[l],n):jl(n)?r[l]=Id({},n):nn(n)?r[l]=n.slice():(!s||!Ta(n))&&(r[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&qi(arguments[n],a);return r}const e_=(t,s,r,{allOwnKeys:a}={})=>(qi(s,(n,i)=>{r&&ts(n)?t[i]=ub(n,r):t[i]=n},{allOwnKeys:a}),t),t_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),s_=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},r_=(t,s,r,a)=>{let n,i,l;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=r!==!1&&Pm(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},a_=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},n_=t=>{if(!t)return null;if(nn(t))return t;let s=t.length;if(!hb(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},i_=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Pm(Uint8Array)),l_=(t,s)=>{const a=(t&&t[Mo]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},o_=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},c_=Ts("HTMLFormElement"),d_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),ih=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),u_=Ts("RegExp"),fb=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};qi(r,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},m_=t=>{fb(t,(s,r)=>{if(ts(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(ts(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},x_=(t,s)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return nn(t)?a(t):a(String(t).split(s)),r},h_=()=>{},p_=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function g_(t){return!!(t&&ts(t.append)&&t[mb]==="FormData"&&t[Mo])}const f_=t=>{const s=new Array(10),r=(a,n)=>{if(Ii(a)){if(s.indexOf(a)>=0)return;if(Li(a))return a;if(!("toJSON"in a)){s[n]=a;const i=nn(a)?[]:{};return qi(a,(l,o)=>{const d=r(l,n+1);!Ta(d)&&(i[o]=d)}),s[n]=void 0,i}}return a};return r(t,0)},b_=Ts("AsyncFunction"),y_=t=>t&&(Ii(t)||ts(t))&&ts(t.then)&&ts(t.catch),bb=((t,s)=>t?setImmediate:s?((r,a)=>(zr.addEventListener("message",({source:n,data:i})=>{n===zr&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),zr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ts(zr.postMessage)),v_=typeof queueMicrotask<"u"?queueMicrotask.bind(zr):typeof process<"u"&&process.nextTick||bb,j_=t=>t!=null&&ts(t[Mo]),ie={isArray:nn,isArrayBuffer:xb,isBuffer:Li,isFormData:Hw,isArrayBufferView:Lw,isString:Iw,isNumber:hb,isBoolean:qw,isObject:Ii,isPlainObject:jl,isEmptyObject:Bw,isReadableStream:Gw,isRequest:Qw,isResponse:Xw,isHeaders:Jw,isUndefined:Ta,isDate:Uw,isFile:zw,isBlob:Ww,isRegExp:u_,isFunction:ts,isStream:Kw,isURLSearchParams:Yw,isTypedArray:i_,isFileList:Vw,forEach:qi,merge:Id,extend:e_,trim:Zw,stripBOM:t_,inherits:s_,toFlatObject:r_,kindOf:Ro,kindOfTest:Ts,endsWith:a_,toArray:n_,forEachEntry:l_,matchAll:o_,isHTMLForm:c_,hasOwnProperty:ih,hasOwnProp:ih,reduceDescriptors:fb,freezeMethods:m_,toObjectSet:x_,toCamelCase:d_,noop:h_,toFiniteNumber:p_,findKey:pb,global:zr,isContextDefined:gb,isSpecCompliantForm:g_,toJSONObject:f_,isAsyncFn:b_,isThenable:y_,setImmediate:bb,asap:v_,isIterable:j_};function $e(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}ie.inherits($e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const yb=$e.prototype,vb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vb[t]={value:t}});Object.defineProperties($e,vb);Object.defineProperty(yb,"isAxiosError",{value:!0});$e.from=(t,s,r,a,n,i)=>{const l=Object.create(yb);ie.toFlatObject(t,l,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=t&&t.message?t.message:"Error",d=s==null&&t?t.code:s;return $e.call(l,o,d,r,a,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const N_=null;function qd(t){return ie.isPlainObject(t)||ie.isArray(t)}function jb(t){return ie.endsWith(t,"[]")?t.slice(0,-2):t}function lh(t,s,r){return t?t.concat(s).map(function(n,i){return n=jb(n),!r&&i?"["+n+"]":n}).join(r?".":""):s}function w_(t){return ie.isArray(t)&&!t.some(qd)}const __=ie.toFlatObject(ie,{},null,function(s){return/^is[A-Z]/.test(s)});function Lo(t,s,r){if(!ie.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=ie.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!ie.isUndefined(v[b])});const a=r.metaTokens,n=r.visitor||u,i=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(s);if(!ie.isFunction(n))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(ie.isDate(p))return p.toISOString();if(ie.isBoolean(p))return p.toString();if(!d&&ie.isBlob(p))throw new $e("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(p)||ie.isTypedArray(p)?d&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,b,v){let j=p;if(p&&!v&&typeof p=="object"){if(ie.endsWith(b,"{}"))b=a?b:b.slice(0,-2),p=JSON.stringify(p);else if(ie.isArray(p)&&w_(p)||(ie.isFileList(p)||ie.endsWith(b,"[]"))&&(j=ie.toArray(p)))return b=jb(b),j.forEach(function(w,C){!(ie.isUndefined(w)||w===null)&&s.append(l===!0?lh([b],C,i):l===null?b:b+"[]",c(w))}),!1}return qd(p)?!0:(s.append(lh(v,b,i),c(p)),!1)}const m=[],h=Object.assign(__,{defaultVisitor:u,convertValue:c,isVisitable:qd});function x(p,b){if(!ie.isUndefined(p)){if(m.indexOf(p)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(p),ie.forEach(p,function(j,P){(!(ie.isUndefined(j)||j===null)&&n.call(s,j,ie.isString(P)?P.trim():P,b,h))===!0&&x(j,b?b.concat(P):[P])}),m.pop()}}if(!ie.isObject(t))throw new TypeError("data must be an object");return x(t),s}function oh(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Am(t,s){this._pairs=[],t&&Lo(t,this,s)}const Nb=Am.prototype;Nb.append=function(s,r){this._pairs.push([s,r])};Nb.toString=function(s){const r=s?function(a){return s.call(this,a,oh)}:oh;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function k_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wb(t,s,r){if(!s)return t;const a=r&&r.encode||k_;ie.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(s,r):i=ie.isURLSearchParams(s)?s.toString():new Am(s,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ch{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){ie.forEach(this.handlers,function(a){a!==null&&s(a)})}}const _b={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},S_=typeof URLSearchParams<"u"?URLSearchParams:Am,C_=typeof FormData<"u"?FormData:null,P_=typeof Blob<"u"?Blob:null,A_={isBrowser:!0,classes:{URLSearchParams:S_,FormData:C_,Blob:P_},protocols:["http","https","file","blob","url","data"]},$m=typeof window<"u"&&typeof document<"u",Bd=typeof navigator=="object"&&navigator||void 0,$_=$m&&(!Bd||["ReactNative","NativeScript","NS"].indexOf(Bd.product)<0),O_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",T_=$m&&window.location.href||"http://localhost",E_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$m,hasStandardBrowserEnv:$_,hasStandardBrowserWebWorkerEnv:O_,navigator:Bd,origin:T_},Symbol.toStringTag,{value:"Module"})),Wt={...E_,...A_};function F_(t,s){return Lo(t,new Wt.classes.URLSearchParams,{visitor:function(r,a,n,i){return Wt.isNode&&ie.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function M_(t){return ie.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function R_(t){const s={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],s[i]=t[i];return s}function kb(t){function s(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),d=i>=r.length;return l=!l&&ie.isArray(n)?n.length:l,d?(ie.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!ie.isObject(n[l]))&&(n[l]=[]),s(r,a,n[l],i)&&ie.isArray(n[l])&&(n[l]=R_(n[l])),!o)}if(ie.isFormData(t)&&ie.isFunction(t.entries)){const r={};return ie.forEachEntry(t,(a,n)=>{s(M_(a),n,r,0)}),r}return null}function D_(t,s,r){if(ie.isString(t))try{return(s||JSON.parse)(t),ie.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Bi={transitional:_b,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=ie.isObject(s);if(i&&ie.isHTMLForm(s)&&(s=new FormData(s)),ie.isFormData(s))return n?JSON.stringify(kb(s)):s;if(ie.isArrayBuffer(s)||ie.isBuffer(s)||ie.isStream(s)||ie.isFile(s)||ie.isBlob(s)||ie.isReadableStream(s))return s;if(ie.isArrayBufferView(s))return s.buffer;if(ie.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return F_(s,this.formSerializer).toString();if((o=ie.isFileList(s))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Lo(o?{"files[]":s}:s,d&&new d,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),D_(s)):s}],transformResponse:[function(s){const r=this.transitional||Bi.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ie.isResponse(s)||ie.isReadableStream(s))return s;if(s&&ie.isString(s)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?$e.from(o,$e.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],t=>{Bi.headers[t]={}});const L_=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I_=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||s[r]&&L_[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},dh=Symbol("internals");function Sn(t){return t&&String(t).trim().toLowerCase()}function Nl(t){return t===!1||t==null?t:ie.isArray(t)?t.map(Nl):String(t)}function q_(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const B_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hc(t,s,r,a,n){if(ie.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!ie.isString(s)){if(ie.isString(a))return s.indexOf(a)!==-1;if(ie.isRegExp(a))return a.test(s)}}function U_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function z_(t,s){const r=ie.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,s,n,i,l)},configurable:!0})})}let ss=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function i(o,d,c){const u=Sn(d);if(!u)throw new Error("header name must be a non-empty string");const m=ie.findKey(n,u);(!m||n[m]===void 0||c===!0||c===void 0&&n[m]!==!1)&&(n[m||d]=Nl(o))}const l=(o,d)=>ie.forEach(o,(c,u)=>i(c,u,d));if(ie.isPlainObject(s)||s instanceof this.constructor)l(s,r);else if(ie.isString(s)&&(s=s.trim())&&!B_(s))l(I_(s),r);else if(ie.isObject(s)&&ie.isIterable(s)){let o={},d,c;for(const u of s){if(!ie.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(d=o[c])?ie.isArray(d)?[...d,u[1]]:[d,u[1]]:u[1]}l(o,r)}else s!=null&&i(r,s,a);return this}get(s,r){if(s=Sn(s),s){const a=ie.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return q_(n);if(ie.isFunction(r))return r.call(this,n,a);if(ie.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Sn(s),s){const a=ie.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Hc(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function i(l){if(l=Sn(l),l){const o=ie.findKey(a,l);o&&(!r||Hc(a,a[o],o,r))&&(delete a[o],n=!0)}}return ie.isArray(s)?s.forEach(i):i(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!s||Hc(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const r=this,a={};return ie.forEach(this,(n,i)=>{const l=ie.findKey(a,i);if(l){r[l]=Nl(n),delete r[i];return}const o=s?U_(i):String(i).trim();o!==i&&delete r[i],r[o]=Nl(n),a[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return ie.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&ie.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[dh]=this[dh]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=Sn(l);a[o]||(z_(n,l),a[o]=!0)}return ie.isArray(s)?s.forEach(i):i(s),this}};ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(ss.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});ie.freezeMethods(ss);function Yc(t,s){const r=this||Bi,a=s||r,n=ss.from(a.headers);let i=a.data;return ie.forEach(t,function(o){i=o.call(r,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function Sb(t){return!!(t&&t.__CANCEL__)}function ln(t,s,r){$e.call(this,t??"canceled",$e.ERR_CANCELED,s,r),this.name="CanceledError"}ie.inherits(ln,$e,{__CANCEL__:!0});function Cb(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new $e("Request failed with status code "+r.status,[$e.ERR_BAD_REQUEST,$e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function W_(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function V_(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(d){const c=Date.now(),u=a[i];l||(l=c),r[n]=d,a[n]=c;let m=i,h=0;for(;m!==n;)h+=r[m++],m=m%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),c-l<s)return;const x=u&&c-u;return x?Math.round(h*1e3/x):void 0}}function K_(t,s){let r=0,a=1e3/s,n,i;const l=(c,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const u=Date.now(),m=u-r;m>=a?l(c,u):(n=c,i||(i=setTimeout(()=>{i=null,l(n)},a-m)))},()=>n&&l(n)]}const Ol=(t,s,r=3)=>{let a=0;const n=V_(50,250);return K_(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,d=l-a,c=n(d),u=l<=o;a=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:d,rate:c||void 0,estimated:c&&o&&u?(o-l)/c:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(m)},r)},uh=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},mh=t=>(...s)=>ie.asap(()=>t(...s)),H_=Wt.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Wt.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Wt.origin),Wt.navigator&&/(msie|trident)/i.test(Wt.navigator.userAgent)):()=>!0,Y_=Wt.hasStandardBrowserEnv?{write(t,s,r,a,n,i,l){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(s)}`];ie.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),ie.isString(a)&&o.push(`path=${a}`),ie.isString(n)&&o.push(`domain=${n}`),i===!0&&o.push("secure"),ie.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function G_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Q_(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Pb(t,s,r){let a=!G_(s);return t&&(a||r==!1)?Q_(t,s):s}const xh=t=>t instanceof ss?{...t}:t;function Zr(t,s){s=s||{};const r={};function a(c,u,m,h){return ie.isPlainObject(c)&&ie.isPlainObject(u)?ie.merge.call({caseless:h},c,u):ie.isPlainObject(u)?ie.merge({},u):ie.isArray(u)?u.slice():u}function n(c,u,m,h){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return a(void 0,c,m,h)}else return a(c,u,m,h)}function i(c,u){if(!ie.isUndefined(u))return a(void 0,u)}function l(c,u){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return a(void 0,c)}else return a(void 0,u)}function o(c,u,m){if(m in s)return a(c,u);if(m in t)return a(void 0,c)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(c,u,m)=>n(xh(c),xh(u),m,!0)};return ie.forEach(Object.keys({...t,...s}),function(u){const m=d[u]||n,h=m(t[u],s[u],u);ie.isUndefined(h)&&m!==o||(r[u]=h)}),r}const Ab=t=>{const s=Zr({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=ss.from(l),s.url=wb(Pb(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ie.isFormData(r)){if(Wt.hasStandardBrowserEnv||Wt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ie.isFunction(r.getHeaders)){const d=r.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([u,m])=>{c.includes(u.toLowerCase())&&l.set(u,m)})}}if(Wt.hasStandardBrowserEnv&&(a&&ie.isFunction(a)&&(a=a(s)),a||a!==!1&&H_(s.url))){const d=n&&i&&Y_.read(i);d&&l.set(n,d)}return s},X_=typeof XMLHttpRequest<"u",J_=X_&&function(t){return new Promise(function(r,a){const n=Ab(t);let i=n.data;const l=ss.from(n.headers).normalize();let{responseType:o,onUploadProgress:d,onDownloadProgress:c}=n,u,m,h,x,p;function b(){x&&x(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(n.method.toUpperCase(),n.url,!0),v.timeout=n.timeout;function j(){if(!v)return;const w=ss.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),f={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:t,request:v};Cb(function(y){r(y),b()},function(y){a(y),b()},f),v=null}"onloadend"in v?v.onloadend=j:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(j)},v.onabort=function(){v&&(a(new $e("Request aborted",$e.ECONNABORTED,t,v)),v=null)},v.onerror=function(C){const f=C&&C.message?C.message:"Network Error",k=new $e(f,$e.ERR_NETWORK,t,v);k.event=C||null,a(k),v=null},v.ontimeout=function(){let C=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const f=n.transitional||_b;n.timeoutErrorMessage&&(C=n.timeoutErrorMessage),a(new $e(C,f.clarifyTimeoutError?$e.ETIMEDOUT:$e.ECONNABORTED,t,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&ie.forEach(l.toJSON(),function(C,f){v.setRequestHeader(f,C)}),ie.isUndefined(n.withCredentials)||(v.withCredentials=!!n.withCredentials),o&&o!=="json"&&(v.responseType=n.responseType),c&&([h,p]=Ol(c,!0),v.addEventListener("progress",h)),d&&v.upload&&([m,x]=Ol(d),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=w=>{v&&(a(!w||w.type?new ln(null,t,v):w),v.abort(),v=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const P=W_(n.url);if(P&&Wt.protocols.indexOf(P)===-1){a(new $e("Unsupported protocol "+P+":",$e.ERR_BAD_REQUEST,t));return}v.send(i||null)})},Z_=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const i=function(c){if(!n){n=!0,o();const u=c instanceof Error?c:this.reason;a.abort(u instanceof $e?u:new ln(u instanceof Error?u.message:u))}};let l=s&&setTimeout(()=>{l=null,i(new $e(`timeout ${s} of ms exceeded`,$e.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:d}=a;return d.unsubscribe=()=>ie.asap(o),d}},e2=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},t2=async function*(t,s){for await(const r of s2(t))yield*e2(r,s)},s2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},hh=(t,s,r,a)=>{const n=t2(t,s);let i=0,l,o=d=>{l||(l=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:c,value:u}=await n.next();if(c){o(),d.close();return}let m=u.byteLength;if(r){let h=i+=m;r(h)}d.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(d){return o(d),n.return()}},{highWaterMark:2})},ph=64*1024,{isFunction:Zi}=ie,r2=(({Request:t,Response:s})=>({Request:t,Response:s}))(ie.global),{ReadableStream:gh,TextEncoder:fh}=ie.global,bh=(t,...s)=>{try{return!!t(...s)}catch{return!1}},a2=t=>{t=ie.merge.call({skipUndefined:!0},r2,t);const{fetch:s,Request:r,Response:a}=t,n=s?Zi(s):typeof fetch=="function",i=Zi(r),l=Zi(a);if(!n)return!1;const o=n&&Zi(gh),d=n&&(typeof fh=="function"?(p=>b=>p.encode(b))(new fh):async p=>new Uint8Array(await new r(p).arrayBuffer())),c=i&&o&&bh(()=>{let p=!1;const b=new r(Wt.origin,{body:new gh,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!b}),u=l&&o&&bh(()=>ie.isReadableStream(new a("").body)),m={stream:u&&(p=>p.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!m[p]&&(m[p]=(b,v)=>{let j=b&&b[p];if(j)return j.call(b);throw new $e(`Response type '${p}' is not supported`,$e.ERR_NOT_SUPPORT,v)})});const h=async p=>{if(p==null)return 0;if(ie.isBlob(p))return p.size;if(ie.isSpecCompliantForm(p))return(await new r(Wt.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(p)||ie.isArrayBuffer(p))return p.byteLength;if(ie.isURLSearchParams(p)&&(p=p+""),ie.isString(p))return(await d(p)).byteLength},x=async(p,b)=>{const v=ie.toFiniteNumber(p.getContentLength());return v??h(b)};return async p=>{let{url:b,method:v,data:j,signal:P,cancelToken:w,timeout:C,onDownloadProgress:f,onUploadProgress:k,responseType:y,headers:F,withCredentials:M="same-origin",fetchOptions:E}=Ab(p),B=s||fetch;y=y?(y+"").toLowerCase():"text";let A=Z_([P,w&&w.toAbortSignal()],C),L=null;const N=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let R;try{if(k&&c&&v!=="get"&&v!=="head"&&(R=await x(F,j))!==0){let $=new r(b,{method:"POST",body:j,duplex:"half"}),I;if(ie.isFormData(j)&&(I=$.headers.get("content-type"))&&F.setContentType(I),$.body){const[K,U]=uh(R,Ol(mh(k)));j=hh($.body,ph,K,U)}}ie.isString(M)||(M=M?"include":"omit");const O=i&&"credentials"in r.prototype,T={...E,signal:A,method:v.toUpperCase(),headers:F.normalize().toJSON(),body:j,duplex:"half",credentials:O?M:void 0};L=i&&new r(b,T);let g=await(i?B(L,E):B(b,T));const D=u&&(y==="stream"||y==="response");if(u&&(f||D&&N)){const $={};["status","statusText","headers"].forEach(q=>{$[q]=g[q]});const I=ie.toFiniteNumber(g.headers.get("content-length")),[K,U]=f&&uh(I,Ol(mh(f),!0))||[];g=new a(hh(g.body,ph,K,()=>{U&&U(),N&&N()}),$)}y=y||"text";let S=await m[ie.findKey(m,y)||"text"](g,p);return!D&&N&&N(),await new Promise(($,I)=>{Cb($,I,{data:S,headers:ss.from(g.headers),status:g.status,statusText:g.statusText,config:p,request:L})})}catch(O){throw N&&N(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new $e("Network Error",$e.ERR_NETWORK,p,L),{cause:O.cause||O}):$e.from(O,O&&O.code,p,L)}}},n2=new Map,$b=t=>{let s=t&&t.env||{};const{fetch:r,Request:a,Response:n}=s,i=[a,n,r];let l=i.length,o=l,d,c,u=n2;for(;o--;)d=i[o],c=u.get(d),c===void 0&&u.set(d,c=o?new Map:a2(s)),u=c;return c};$b();const Om={http:N_,xhr:J_,fetch:{get:$b}};ie.forEach(Om,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const yh=t=>`- ${t}`,i2=t=>ie.isFunction(t)||t===null||t===!1;function l2(t,s){t=ie.isArray(t)?t:[t];const{length:r}=t;let a,n;const i={};for(let l=0;l<r;l++){a=t[l];let o;if(n=a,!i2(a)&&(n=Om[(o=String(a)).toLowerCase()],n===void 0))throw new $e(`Unknown adapter '${o}'`);if(n&&(ie.isFunction(n)||(n=n.get(s))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(yh).join(`
`):" "+yh(l[0]):"as no adapter specified";throw new $e("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n}const Ob={getAdapter:l2,adapters:Om};function Gc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ln(null,t)}function vh(t){return Gc(t),t.headers=ss.from(t.headers),t.data=Yc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ob.getAdapter(t.adapter||Bi.adapter,t)(t).then(function(a){return Gc(t),a.data=Yc.call(t,t.transformResponse,a),a.headers=ss.from(a.headers),a},function(a){return Sb(a)||(Gc(t),a&&a.response&&(a.response.data=Yc.call(t,t.transformResponse,a.response),a.response.headers=ss.from(a.response.headers))),Promise.reject(a)})}const Tb="1.13.2",Io={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Io[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const jh={};Io.transitional=function(s,r,a){function n(i,l){return"[Axios v"+Tb+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,o)=>{if(s===!1)throw new $e(n(l," has been removed"+(r?" in "+r:"")),$e.ERR_DEPRECATED);return r&&!jh[l]&&(jh[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,l,o):!0}};Io.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function o2(t,s,r){if(typeof t!="object")throw new $e("options must be an object",$e.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=s[i];if(l){const o=t[i],d=o===void 0||l(o,i,t);if(d!==!0)throw new $e("option "+i+" must be "+d,$e.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new $e("Unknown option "+i,$e.ERR_BAD_OPTION)}}const wl={assertOptions:o2,validators:Io},Ms=wl.validators;let Qr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new ch,response:new ch}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Zr(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&wl.assertOptions(a,{silentJSONParsing:Ms.transitional(Ms.boolean),forcedJSONParsing:Ms.transitional(Ms.boolean),clarifyTimeoutError:Ms.transitional(Ms.boolean)},!1),n!=null&&(ie.isFunction(n)?r.paramsSerializer={serialize:n}:wl.assertOptions(n,{encode:Ms.function,serialize:Ms.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),wl.assertOptions(r,{baseUrl:Ms.spelling("baseURL"),withXsrfToken:Ms.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&ie.merge(i.common,i[r.method]);i&&ie.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=ss.concat(l,i);const o=[];let d=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(d=d&&b.synchronous,o.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let u,m=0,h;if(!d){const p=[vh.bind(this),void 0];for(p.unshift(...o),p.push(...c),h=p.length,u=Promise.resolve(r);m<h;)u=u.then(p[m++],p[m++]);return u}h=o.length;let x=r;for(;m<h;){const p=o[m++],b=o[m++];try{x=p(x)}catch(v){b.call(this,v);break}}try{u=vh.call(this,x)}catch(p){return Promise.reject(p)}for(m=0,h=c.length;m<h;)u=u.then(c[m++],c[m++]);return u}getUri(s){s=Zr(this.defaults,s);const r=Pb(s.baseURL,s.url,s.allowAbsoluteUrls);return wb(r,s.params,s.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(s){Qr.prototype[s]=function(r,a){return this.request(Zr(a||{},{method:s,url:r,data:(a||{}).data}))}});ie.forEach(["post","put","patch"],function(s){function r(a){return function(i,l,o){return this.request(Zr(o||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Qr.prototype[s]=r(),Qr.prototype[s+"Form"]=r(!0)});let c2=class Eb{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{a.subscribe(o),i=o}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},s(function(i,l,o){a.reason||(a.reason=new ln(i,l,o),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new Eb(function(n){s=n}),cancel:s}}};function d2(t){return function(r){return t.apply(null,r)}}function u2(t){return ie.isObject(t)&&t.isAxiosError===!0}const Ud={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ud).forEach(([t,s])=>{Ud[s]=t});function Fb(t){const s=new Qr(t),r=ub(Qr.prototype.request,s);return ie.extend(r,Qr.prototype,s,{allOwnKeys:!0}),ie.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return Fb(Zr(t,n))},r}const G=Fb(Bi);G.Axios=Qr;G.CanceledError=ln;G.CancelToken=c2;G.isCancel=Sb;G.VERSION=Tb;G.toFormData=Lo;G.AxiosError=$e;G.Cancel=G.CanceledError;G.all=function(s){return Promise.all(s)};G.spread=d2;G.isAxiosError=u2;G.mergeConfig=Zr;G.AxiosHeaders=ss;G.formToJSON=t=>kb(ie.isHTMLForm(t)?new FormData(t):t);G.getAdapter=Ob.getAdapter;G.HttpStatusCode=Ud;G.default=G;const{Axios:zZ,AxiosError:WZ,CanceledError:VZ,isCancel:KZ,CancelToken:HZ,VERSION:YZ,all:GZ,Cancel:QZ,isAxiosError:XZ,spread:JZ,toFormData:ZZ,AxiosHeaders:eee,HttpStatusCode:tee,formToJSON:see,getAdapter:ree,mergeConfig:aee}=G,Ws=Object.create(null);Ws.open="0";Ws.close="1";Ws.ping="2";Ws.pong="3";Ws.message="4";Ws.upgrade="5";Ws.noop="6";const _l=Object.create(null);Object.keys(Ws).forEach(t=>{_l[Ws[t]]=t});const zd={type:"error",data:"parser error"},Mb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rb=typeof ArrayBuffer=="function",Db=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Tm=({type:t,data:s},r,a)=>Mb&&s instanceof Blob?r?a(s):Nh(s,a):Rb&&(s instanceof ArrayBuffer||Db(s))?r?a(s):Nh(new Blob([s]),a):a(Ws[t]+(s||"")),Nh=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function wh(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Qc;function m2(t,s){if(Mb&&t.data instanceof Blob)return t.data.arrayBuffer().then(wh).then(s);if(Rb&&(t.data instanceof ArrayBuffer||Db(t.data)))return s(wh(t.data));Tm(t,!1,r=>{Qc||(Qc=new TextEncoder),s(Qc.encode(r))})}const _h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Un=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<_h.length;t++)Un[_h.charCodeAt(t)]=t;const x2=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,d;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(a=0;a<r;a+=4)i=Un[t.charCodeAt(a)],l=Un[t.charCodeAt(a+1)],o=Un[t.charCodeAt(a+2)],d=Un[t.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|d&63;return c},h2=typeof ArrayBuffer=="function",Em=(t,s)=>{if(typeof t!="string")return{type:"message",data:Lb(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:p2(t.substring(1),s)}:_l[r]?t.length>1?{type:_l[r],data:t.substring(1)}:{type:_l[r]}:zd},p2=(t,s)=>{if(h2){const r=x2(t);return Lb(r,s)}else return{base64:!0,data:t}},Lb=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ib="",g2=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{Tm(i,!1,o=>{a[l]=o,++n===r&&s(a.join(Ib))})})},f2=(t,s)=>{const r=t.split(Ib),a=[];for(let n=0;n<r.length;n++){const i=Em(r[n],s);if(a.push(i),i.type==="error")break}return a};function b2(){return new TransformStream({transform(t,s){m2(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let Xc;function el(t){return t.reduce((s,r)=>s+r.length,0)}function tl(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function y2(t,s){Xc||(Xc=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(el(r)<1)break;const d=tl(r,1);i=(d[0]&128)===128,n=d[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(el(r)<2)break;const d=tl(r,2);n=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),a=3}else if(a===2){if(el(r)<8)break;const d=tl(r,8),c=new DataView(d.buffer,d.byteOffset,d.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(zd);break}n=u*Math.pow(2,32)+c.getUint32(4),a=3}else{if(el(r)<n)break;const d=tl(r,n);o.enqueue(Em(i?d:Xc.decode(d),s)),a=0}if(n===0||n>t){o.enqueue(zd);break}}}})}const qb=4;function gt(t){if(t)return v2(t)}function v2(t){for(var s in gt.prototype)t[s]=gt.prototype[s];return t}gt.prototype.on=gt.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};gt.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};gt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};gt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const qo=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),hs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),j2="arraybuffer";function Bb(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const N2=hs.setTimeout,w2=hs.clearTimeout;function Bo(t,s){s.useNativeTimers?(t.setTimeoutFn=N2.bind(hs),t.clearTimeoutFn=w2.bind(hs)):(t.setTimeoutFn=hs.setTimeout.bind(hs),t.clearTimeoutFn=hs.clearTimeout.bind(hs))}const _2=1.33;function k2(t){return typeof t=="string"?S2(t):Math.ceil((t.byteLength||t.size)*_2)}function S2(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function Ub(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function C2(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function P2(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class A2 extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class Fm extends gt{constructor(s){super(),this.writable=!1,Bo(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new A2(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=Em(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=C2(s);return r.length?"?"+r:""}}class $2 extends Fm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};f2(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,g2(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ub()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let zb=!1;try{zb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const O2=zb;function T2(){}class E2 extends $2{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}class qs extends gt{constructor(s,r,a){super(),this.createRequest=s,Bo(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=Bb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=qs.requestsCount++,qs.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=T2,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qs.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qs.requestsCount=0;qs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kh);else if(typeof addEventListener=="function"){const t="onpagehide"in hs?"pagehide":"unload";addEventListener(t,kh,!1)}}function kh(){for(let t in qs.requests)qs.requests.hasOwnProperty(t)&&qs.requests[t].abort()}const F2=function(){const t=Wb({xdomain:!1});return t&&t.responseType!==null}();class M2 extends E2{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=F2&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new qs(Wb,this.uri(),s)}}function Wb(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||O2))return new XMLHttpRequest}catch{}if(!s)try{return new hs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class R2 extends Fm{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=Vb?{}:Bb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;Tm(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ub()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const Jc=hs.WebSocket||hs.MozWebSocket;class D2 extends R2{createSocket(s,r,a){return Vb?new Jc(s,r,a):r?new Jc(s,r):new Jc(s)}doWrite(s,r){this.ws.send(r)}}class L2 extends Fm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=y2(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=b2();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:d})=>{o||(this.onPacket(d),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const I2={websocket:D2,webtransport:L2,polling:M2},q2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,B2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Wd(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=q2.exec(t||""),i={},l=14;for(;l--;)i[B2[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=U2(i,i.path),i.queryKey=z2(i,i.query),i}function U2(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function z2(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Vd=typeof addEventListener=="function"&&typeof removeEventListener=="function",kl=[];Vd&&addEventListener("offline",()=>{kl.forEach(t=>t())},!1);class Nr extends gt{constructor(s,r){if(super(),this.binaryType=j2,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Wd(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Wd(r.host).host);Bo(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=P2(this.opts.query)),Vd&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},kl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=qb,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Nr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Nr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=k2(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,qo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(Nr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vd&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=kl.indexOf(this._offlineEventListener);a!==-1&&kl.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}Nr.protocol=qb;class W2 extends Nr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;Nr.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!a)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Nr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=m=>{const h=new Error("probe error: "+m);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function o(){l("transport closed")}function d(){l("socket closed")}function c(m){r&&m.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",d),this.off("upgrading",c)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",d),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let V2=class extends W2{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>I2[n]).filter(n=>!!n)),super(s,a)}};function K2(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Wd(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const H2=typeof ArrayBuffer=="function",Y2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Kb=Object.prototype.toString,G2=typeof Blob=="function"||typeof Blob<"u"&&Kb.call(Blob)==="[object BlobConstructor]",Q2=typeof File=="function"||typeof File<"u"&&Kb.call(File)==="[object FileConstructor]";function Mm(t){return H2&&(t instanceof ArrayBuffer||Y2(t))||G2&&t instanceof Blob||Q2&&t instanceof File}function Sl(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Sl(t[r]))return!0;return!1}if(Mm(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sl(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Sl(t[r]))return!0;return!1}function X2(t){const s=[],r=t.data,a=t;return a.data=Kd(r,s),a.attachments=s.length,{packet:a,buffers:s}}function Kd(t,s){if(!t)return t;if(Mm(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=Kd(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=Kd(t[a],s));return r}return t}function J2(t,s){return t.data=Hd(t.data,s),delete t.attachments,t}function Hd(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Hd(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Hd(t[r],s));return t}const Z2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],e1=5;var Le;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class t1{constructor(s){this.replacer=s}encode(s){return(s.type===Le.EVENT||s.type===Le.ACK)&&Sl(s)?this.encodeAsBinary({type:s.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===Le.BINARY_EVENT||s.type===Le.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=X2(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function Sh(t){return Object.prototype.toString.call(t)==="[object Object]"}class Rm extends gt{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===Le.BINARY_EVENT;a||r.type===Le.BINARY_ACK?(r.type=a?Le.EVENT:Le.ACK,this.reconstructor=new s1(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Mm(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(Le[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Le.BINARY_EVENT||a.type===Le.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(Rm.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case Le.CONNECT:return Sh(r);case Le.DISCONNECT:return r===void 0;case Le.CONNECT_ERROR:return typeof r=="string"||Sh(r);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Z2.indexOf(r[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class s1{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=J2(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const r1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Rm,Encoder:t1,get PacketType(){return Le},protocol:e1},Symbol.toStringTag,{value:"Module"}));function Cs(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const a1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Hb extends gt{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Cs(s,"open",this.onopen.bind(this)),Cs(s,"packet",this.onpacket.bind(this)),Cs(s,"error",this.onerror.bind(this)),Cs(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(a1.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Le.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),l.id=u}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(d?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Le.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(s);break;case Le.ACK:case Le.BINARY_ACK:this.onack(s);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:Le.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function on(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}on.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};on.prototype.reset=function(){this.attempts=0};on.prototype.setMin=function(t){this.ms=t};on.prototype.setMax=function(t){this.max=t};on.prototype.setJitter=function(t){this.jitter=t};class Yd extends gt{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Bo(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new on({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||r1;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new V2(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Cs(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Cs(r,"error",i);if(this._timeout!==!1){const o=this._timeout,d=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Cs(s,"ping",this.onping.bind(this)),Cs(s,"data",this.ondata.bind(this)),Cs(s,"error",this.onerror.bind(this)),Cs(s,"close",this.onclose.bind(this)),Cs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){qo(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new Hb(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Cn={};function Wn(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=K2(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=Cn[n]&&i in Cn[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let d;return o?d=new Yd(a,s):(Cn[n]||(Cn[n]=new Yd(a,s)),d=Cn[n]),r.query&&!s.query&&(s.query=r.queryKey),d.socket(r.path,s)}Object.assign(Wn,{Manager:Yd,Socket:Hb,io:Wn,connect:Wn});const Yb="https://123create-construction-app-with-a.launchpulse.ai";G.defaults.baseURL=`${Yb}/api`;G.interceptors.response.use(t=>t,t=>{var s,r;if(t.response){const a=t.response.status,n=((s=t.response.data)==null?void 0:s.message)||"An error occurred";a===401?console.error("Authentication error - clearing session"):a===403?console.error("Access forbidden:",n):a===404?console.error("Resource not found:",(r=t.config)==null?void 0:r.url):a>=500&&console.error("Server error:",n)}else t.request?console.error("Network error - no response received"):console.error("Request setup error:",t.message);return Promise.reject(t)});const re=QN()(Rw((t,s)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null,customer_profile:null,supplier_profile:null,admin_profile:null},cart_state:{items:[],total_items:0,subtotal:0,is_loading:!1,last_updated:null},notification_state:{unread_count:0,notifications:[],is_loading:!1},search_state:{current_query:null,recent_searches:[],active_filters:{},comparison_products:[],is_loading:!1},chat_state:{active_session_id:null,is_open:!1,unread_messages:0,is_connected:!1},ui_state:{sidebar_collapsed:!1,active_modal:null,loading_states:{}},websocket_connection:null,login_user:async(r,a)=>{var n,i;t({authentication_state:{...s().authentication_state,authentication_status:{...s().authentication_state.authentication_status,is_loading:!0},error_message:null}});try{const l=await G.post("/auth/login",{email:r,password:a}),{token:o,user:d,customer:c,supplier:u,admin:m}=l.data;G.defaults.headers.common.Authorization=`Bearer ${o}`,t({authentication_state:{current_user:d,auth_token:o,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:d.user_type},error_message:null,customer_profile:c||null,supplier_profile:u||null,admin_profile:m||null}}),s().connect_websocket(),d.user_type==="customer"&&s().fetch_cart(),s().fetch_notifications()}catch(l){throw t({authentication_state:{...s().authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Login failed"}}),l}},logout_user:async()=>{const r=s().authentication_state.auth_token;try{r&&await G.post("/auth/logout")}catch(a){console.error("Logout error:",a)}finally{delete G.defaults.headers.common.Authorization,s().disconnect_websocket(),t({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null,customer_profile:null,supplier_profile:null,admin_profile:null},cart_state:{items:[],total_items:0,subtotal:0,is_loading:!1,last_updated:null},notification_state:{unread_count:0,notifications:[],is_loading:!1}});try{localStorage.removeItem("app-storage"),sessionStorage.clear()}catch(a){console.error("Error clearing storage:",a)}}},register_customer:async r=>{var a,n;t({authentication_state:{...s().authentication_state,authentication_status:{...s().authentication_state.authentication_status,is_loading:!0},error_message:null}});try{const i=await G.post("/auth/register/customer",r),{token:l,user:o,customer:d}=i.data;G.defaults.headers.common.Authorization=`Bearer ${l}`,t({authentication_state:{current_user:o,auth_token:l,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"customer"},error_message:null,customer_profile:d,supplier_profile:null,admin_profile:null}}),s().connect_websocket(),s().fetch_cart()}catch(i){throw t({authentication_state:{...s().authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Registration failed"}}),i}},register_supplier:async r=>{var a,n;t({authentication_state:{...s().authentication_state,authentication_status:{...s().authentication_state.authentication_status,is_loading:!0},error_message:null}});try{await G.post("/auth/register/supplier",r),t({authentication_state:{...s().authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null}})}catch(i){throw t({authentication_state:{...s().authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Registration failed"}}),i}},initialize_auth:async()=>{var a;const r=s().authentication_state.auth_token;if(!r){t({authentication_state:{...s().authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null}}});return}t({authentication_state:{...s().authentication_state,authentication_status:{...s().authentication_state.authentication_status,is_loading:!0}}});try{G.defaults.headers.common.Authorization=`Bearer ${r}`;const n=await G.get("/users/me");let i=null,l=null,o=null;if(n.data.user_type==="customer")try{i=(await G.get("/customers/me")).data}catch(d){console.error("Failed to fetch customer profile:",d)}else if(n.data.user_type==="supplier")try{l=(await G.get("/suppliers/me")).data,console.log("Supplier profile loaded:",l)}catch(d){console.error("Failed to fetch supplier profile:",d),console.error("Error details:",(a=d.response)==null?void 0:a.data)}else if(n.data.user_type==="admin")try{o=(await G.get("/admins/me")).data}catch(d){console.error("Failed to fetch admin profile:",d)}t({authentication_state:{...s().authentication_state,current_user:n.data,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:n.data.user_type},customer_profile:i,supplier_profile:l,admin_profile:o}}),s().connect_websocket(),n.data.user_type==="customer"&&s().fetch_cart(),s().fetch_notifications()}catch(n){console.error("Initialize auth failed:",n),delete G.defaults.headers.common.Authorization,t({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null,customer_profile:null,supplier_profile:null,admin_profile:null}})}},clear_auth_error:()=>{t({authentication_state:{...s().authentication_state,error_message:null}})},fetch_cart:async()=>{const{is_authenticated:r,user_type:a}=s().authentication_state.authentication_status;if(!(!r||a!=="customer")){t({cart_state:{...s().cart_state,is_loading:!0}});try{const n=await G.get("/api/cart"),{items:i=[],subtotal:l=0}=n.data;t({cart_state:{items:i,total_items:i.reduce((o,d)=>o+d.quantity,0),subtotal:l,is_loading:!1,last_updated:new Date().toISOString()}})}catch(n){console.error("Fetch cart error:",n),t({cart_state:{...s().cart_state,is_loading:!1}})}}},add_to_cart:async(r,a)=>{try{await G.post("/api/cart/items",{product_id:r,quantity:a}),await s().fetch_cart()}catch(n){throw console.error("Add to cart error:",n),n}},update_cart_item:async(r,a)=>{try{await G.patch(`/api/cart/items/${r}`,{quantity:a}),await s().fetch_cart()}catch(n){throw console.error("Update cart item error:",n),n}},remove_from_cart:async r=>{try{await G.delete(`/api/cart/items/${r}`),await s().fetch_cart()}catch(a){throw console.error("Remove from cart error:",a),a}},clear_cart:async()=>{try{await G.delete("/api/cart"),t({cart_state:{items:[],total_items:0,subtotal:0,is_loading:!1,last_updated:new Date().toISOString()}})}catch(r){throw console.error("Clear cart error:",r),r}},fetch_notifications:async()=>{const{is_authenticated:r}=s().authentication_state.authentication_status;if(r){t({notification_state:{...s().notification_state,is_loading:!0}});try{const a=await G.get("/notifications",{params:{limit:20,offset:0}}),{notifications:n=[],unread_count:i=0}=a.data;t({notification_state:{notifications:n,unread_count:i,is_loading:!1}})}catch(a){console.error("Fetch notifications error:",a),t({notification_state:{...s().notification_state,is_loading:!1}})}}},mark_notification_read:async r=>{try{await G.patch(`/api/notifications/${r}/read`),await s().fetch_notifications()}catch(a){console.error("Mark notification read error:",a)}},mark_all_notifications_read:async()=>{try{await G.post("/notifications/read-all"),await s().fetch_notifications()}catch(r){console.error("Mark all notifications read error:",r)}},set_search_query:r=>{t({search_state:{...s().search_state,current_query:r}})},add_to_recent_searches:r=>{const a=s().search_state.recent_searches,n=[r,...a.filter(i=>i!==r)].slice(0,10);t({search_state:{...s().search_state,recent_searches:n}})},add_to_comparison:r=>{const a=s().search_state.comparison_products;a.length>=5||a.includes(r)||t({search_state:{...s().search_state,comparison_products:[...a,r]}})},remove_from_comparison:r=>{t({search_state:{...s().search_state,comparison_products:s().search_state.comparison_products.filter(a=>a!==r)}})},clear_comparison:()=>{t({search_state:{...s().search_state,comparison_products:[]}})},toggle_sidebar:()=>{t({ui_state:{...s().ui_state,sidebar_collapsed:!s().ui_state.sidebar_collapsed}})},open_modal:r=>{t({ui_state:{...s().ui_state,active_modal:r}})},close_modal:()=>{t({ui_state:{...s().ui_state,active_modal:null}})},set_loading_state:(r,a)=>{t({ui_state:{...s().ui_state,loading_states:{...s().ui_state.loading_states,[r]:a}}})},connect_websocket:()=>{const r=s().authentication_state.auth_token;if(!r||s().websocket_connection)return;const a=Wn(Yb,{auth:{token:r},transports:["websocket","polling"]});a.on("connect",()=>{t({chat_state:{...s().chat_state,is_connected:!0}})}),a.on("disconnect",()=>{t({chat_state:{...s().chat_state,is_connected:!1}})}),a.on("order_status_changed",()=>{}),a.on("inventory_update",()=>{}),a.on("chat_message_received",()=>{t({chat_state:{...s().chat_state,unread_messages:s().chat_state.unread_messages+1}})}),t({websocket_connection:a})},disconnect_websocket:()=>{const r=s().websocket_connection;r&&(r.disconnect(),t({websocket_connection:null,chat_state:{active_session_id:null,is_open:!1,unread_messages:0,is_connected:!1}}))}}),{name:"app-storage",partialize:t=>({authentication_state:{...t.authentication_state,authentication_status:{...t.authentication_state.authentication_status,is_loading:!1}},search_state:{...t.search_state,is_loading:!1}})})),Gb="https://123create-construction-app-with-a.launchpulse.ai",n1=async()=>(await G.get(`${Gb}/categories`,{params:{is_active:"true",limit:100,sort_by:"display_order",sort_order:"asc"}})).data,i1=async t=>{var r;return t.length<3?{products:[],suppliers:[],categories:[]}:{products:((r=(await G.get(`${Gb}/products`,{params:{search_query:t,limit:5,status:"active"}})).data.products)==null?void 0:r.slice(0,5).map(a=>({product_id:a.product_id,product_name:a.product_name,price_per_unit:Number(a.price_per_unit||0),primary_image_url:a.primary_image_url,supplier_name:a.business_name||a.supplier_name||""})))||[],suppliers:[],categories:[]}},l1=()=>{const t=ze(),s=wm(),[r,a]=_.useState(""),[n,i]=_.useState(!1),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState({products:[],suppliers:[],categories:[]}),[h,x]=_.useState(!1),p=_.useRef(null),b=_.useRef(null),v=_.useRef(null),{data:j=[],isLoading:P}=ne({queryKey:["categories","active"],queryFn:n1,staleTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1});_.useEffect(()=>{i(!1),o(!1),c(!1)},[s.pathname]),_.useEffect(()=>{const y=F=>{p.current&&!p.current.contains(F.target)&&i(!1)};if(n)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[n]),_.useEffect(()=>{const y=F=>{b.current&&!b.current.contains(F.target)&&c(!1)};if(d)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[d]);const w=_.useCallback(y=>{if(a(y),v.current&&clearTimeout(v.current),y.length<3){m({products:[],suppliers:[],categories:[]}),x(!1);return}x(!0),v.current=setTimeout(async()=>{try{const F=await i1(y);m(F)}catch(F){console.error("Error fetching search suggestions:",F),m({products:[],suppliers:[],categories:[]})}finally{x(!1)}},300)},[]);_.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const C=y=>{y.preventDefault(),r.trim()&&(t(`/products?search_query=${encodeURIComponent(r.trim())}`),c(!1),a(""))},f=y=>{t(`/products?category=${y}`),i(!1)},k=y=>{t(`/product/${y}`),c(!1),a("")};return _.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[l]),e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:e.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs(Q,{to:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"BE"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"BuildEasy"})]}),e.jsxs("div",{className:"hidden md:block relative",ref:p,children:[e.jsxs("button",{onClick:()=>i(!n),className:"flex items-center space-x-1 px-4 py-2 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200","aria-label":"Browse categories","aria-expanded":n,children:[e.jsx("span",{className:"font-medium",children:"Categories"}),e.jsx(Et,{className:`w-4 h-4 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsx("div",{className:"absolute left-0 mt-2 w-96 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4",children:"Browse by Category"}),P?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.slice(0,12).map(y=>e.jsxs("button",{onClick:()=>f(y.category_slug),className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-left",children:[y.icon_url?e.jsx("img",{src:y.icon_url,alt:y.category_name,className:"w-8 h-8 object-contain"}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-xs font-medium",children:y.category_name.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:y.category_name})]},y.category_id))}):e.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"No categories available"}),j.length>12&&e.jsx(Q,{to:"/products",className:"block mt-4 text-center text-sm font-medium text-blue-600 hover:text-blue-700",onClick:()=>i(!1),children:"View All Categories "})]})})]})]}),e.jsxs("div",{className:"hidden md:flex flex-1 max-w-md mx-8 relative",ref:b,children:[e.jsx("form",{onSubmit:C,className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Xe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:r,onChange:y=>w(y.target.value),onFocus:()=>c(!0),placeholder:"Search construction materials...",className:"block w-full pl-10 pr-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200"}),r&&e.jsx("button",{type:"button",onClick:()=>{a(""),m({products:[],suppliers:[],categories:[]})},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"h-4 w-4"})})]})}),d&&r.length>=3&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden max-h-96 overflow-y-auto z-50",children:h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):u.products.length>0?e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Products"}),e.jsx("div",{className:"space-y-2",children:u.products.map(y=>e.jsxs("button",{onClick:()=>k(y.product_id),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-left",children:[y.primary_image_url?e.jsx("img",{src:y.primary_image_url,alt:y.product_name,className:"w-12 h-12 object-cover rounded-md"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.product_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",Number(y.price_per_unit||0).toFixed(2),y.supplier_name&&e.jsxs("span",{className:"ml-2",children:[" ",y.supplier_name]})]})]})]},y.product_id))})]}):r.length>=3?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Try different keywords"})]}):null})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Q,{to:"/help",className:"hidden lg:flex items-center text-gray-700 hover:text-blue-600 transition-colors duration-200","aria-label":"Help center",children:e.jsx(Pl,{className:"w-5 h-5"})}),e.jsx(Q,{to:"/login",className:"hidden sm:block px-4 py-2 text-gray-900 hover:text-blue-600 font-medium rounded-lg hover:bg-gray-100 transition-all duration-200",children:"Sign In"}),e.jsx(Q,{to:"/register",className:"hidden sm:block px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"Sign Up Free"}),e.jsx("button",{onClick:()=>o(!l),className:"md:hidden p-2 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200","aria-label":"Open menu",children:l?e.jsx(ge,{className:"w-6 h-6"}):e.jsx(Fo,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"md:hidden pb-3",children:e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Xe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:r,onChange:y=>w(y.target.value),onFocus:()=>c(!0),placeholder:"Search materials...",className:"block w-full pl-10 pr-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm"})]})})})]})}),l&&e.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>o(!1)}),e.jsx("div",{className:"fixed inset-y-0 right-0 w-full max-w-sm bg-white shadow-xl overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Menu"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[e.jsx(Q,{to:"/login",onClick:()=>o(!1),className:"block w-full px-4 py-3 text-center text-gray-900 bg-gray-100 hover:bg-gray-200 font-medium rounded-lg transition-colors duration-200",children:"Sign In"}),e.jsx(Q,{to:"/register",onClick:()=>o(!1),className:"block w-full px-4 py-3 text-center text-white bg-blue-600 hover:bg-blue-700 font-medium rounded-lg shadow-lg transition-all duration-200",children:"Sign Up Free"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4",children:"Categories"}),P?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):j.length>0?e.jsxs("div",{className:"space-y-2",children:[j.slice(0,8).map(y=>e.jsxs("button",{onClick:()=>{f(y.category_slug),o(!1)},className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-left",children:[y.icon_url?e.jsx("img",{src:y.icon_url,alt:y.category_name,className:"w-6 h-6 object-contain"}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-gray-600 text-xs",children:y.category_name.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.category_name})]},y.category_id)),j.length>8&&e.jsx(Q,{to:"/products",onClick:()=>o(!1),className:"block mt-3 text-sm font-medium text-blue-600 hover:text-blue-700 text-center",children:"View All Categories "})]}):e.jsx("p",{className:"text-gray-500 text-sm py-4",children:"No categories available"})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs(Q,{to:"/help",onClick:()=>o(!1),className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[e.jsx(Pl,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Help Center"})]})})]})})]})]})};function o1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Ch=_.forwardRef(o1);function c1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const d1=_.forwardRef(c1);function u1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Ph=_.forwardRef(u1);function m1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Ah=_.forwardRef(m1);function x1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $h=_.forwardRef(x1);function h1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Oh=_.forwardRef(h1);function p1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Th=_.forwardRef(p1);function g1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const Eh=_.forwardRef(g1);function f1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const b1=_.forwardRef(f1);function y1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const v1=_.forwardRef(y1);function j1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Fh=_.forwardRef(j1);function N1({title:t,titleId:s,...r},a){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?_.createElement("title",{id:s},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const w1=_.forwardRef(N1),_1=async t=>t?(await G.get("/cart")).data:{cart:null,items:[],subtotal:0,total_items:0},k1=async t=>t?(await G.get("/notifications",{params:{limit:10,is_read:!1}})).data:{notifications:[],total:0,unread_count:0},S1=async(t,s)=>{await G.patch(`/notifications/${s}`,{is_read:!0})},C1=async t=>{await G.post("/auth/logout",{})},P1=()=>{const t=ze(),s=Pe(),r=re(S=>S.authentication_state.current_user),a=re(S=>S.authentication_state.auth_token),n=re(S=>S.authentication_state.customer_profile),i=re(S=>S.authentication_state.authentication_status.is_authenticated),l=re(S=>S.logout_user),[o,d]=_.useState(""),[c,u]=_.useState(!1),[m,h]=_.useState(!1),[x,p]=_.useState(!1),b=_.useRef(null),v=_.useRef(null),{data:j,isLoading:P}=ne({queryKey:["cart-summary"],queryFn:()=>_1(a),enabled:i&&!!a,staleTime:3e4,refetchInterval:3e4,retry:1,select:S=>({total_items:S.total_items||0,is_loading:!1})}),{data:w,isLoading:C}=ne({queryKey:["notifications-summary"],queryFn:()=>k1(a),enabled:i&&!!a,staleTime:6e4,refetchInterval:6e4,retry:1,select:S=>({unread_count:S.unread_count||0,latest_notifications:S.notifications||[]})}),f=oe({mutationFn:S=>{if(!a)throw new Error("Not authenticated");return S1(a,S)},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications-summary"]})}}),k=oe({mutationFn:()=>{if(!a)throw new Error("Not authenticated");return C1()},onSuccess:()=>{l(),t("/")}}),y=S=>{S.preventDefault(),o.trim()&&(t(`/products?search_query=${encodeURIComponent(o.trim())}`),d(""))},F=S=>{f.mutate(S.notification_id),h(!1),S.action_url&&t(S.action_url)},M=()=>{p(!1),k.mutate()},E=()=>{h(!m),p(!1)},B=()=>{p(!x),h(!1)},A=()=>{u(!c)};_.useEffect(()=>{const S=$=>{b.current&&!b.current.contains($.target)&&h(!1),v.current&&!v.current.contains($.target)&&p(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]),_.useEffect(()=>{u(!1)},[t]);const L=(j==null?void 0:j.total_items)||0,N=(w==null?void 0:w.unread_count)||0,R=(w==null?void 0:w.latest_notifications)||[],O=(r==null?void 0:r.first_name)||"Customer",T=(r==null?void 0:r.email)||"",g=r==null?void 0:r.profile_photo_url,D=(n==null?void 0:n.account_type)||"retail";return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white shadow-md",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs(Q,{to:"/dashboard",className:"flex items-center space-x-2 transition-opacity hover:opacity-80",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"B"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"BuildEasy"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[e.jsxs(Q,{to:"/orders",className:"text-gray-700 hover:text-blue-600 font-medium text-sm transition-colors duration-200 flex items-center space-x-1",children:[e.jsx(Ah,{className:"w-5 h-5"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(Q,{to:"/projects",className:"text-gray-700 hover:text-blue-600 font-medium text-sm transition-colors duration-200 flex items-center space-x-1",children:[e.jsx(Oh,{className:"w-5 h-5"}),e.jsx("span",{children:"Projects"})]})]})]}),e.jsx("div",{className:"flex-1 max-w-2xl mx-4 hidden lg:block",children:e.jsxs("form",{onSubmit:y,className:"relative",children:[e.jsx("input",{type:"search",value:o,onChange:S=>d(S.target.value),placeholder:"Search construction materials...",className:"w-full px-4 py-2 pl-10 pr-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm"}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-600 transition-colors","aria-label":"Search",children:e.jsx(Th,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Q,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-blue-600 transition-colors duration-200","aria-label":"Shopping cart",children:[e.jsx(b1,{className:"w-6 h-6"}),L>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:L>99?"99+":L}),P&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3",children:e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"})})]}),e.jsxs("div",{className:"relative",ref:b,children:[e.jsxs("button",{onClick:E,className:"relative p-2 text-gray-700 hover:text-blue-600 transition-colors duration-200","aria-label":"Notifications","aria-expanded":m,children:[e.jsx(Ph,{className:"w-6 h-6"}),N>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:N>99?"99+":N})]}),m&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),N>0&&e.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:[N," unread"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:C?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading notifications..."})]}):R.length===0?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(Ph,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:R.map(S=>e.jsx("button",{onClick:()=>F(S),className:"w-full px-4 py-3 hover:bg-blue-50 transition-colors duration-150 text-left",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 ${S.is_read?"bg-transparent":"bg-blue-600"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${S.is_read?"text-gray-600":"text-gray-900"}`,children:S.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:S.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(S.created_date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})},S.notification_id))})}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:e.jsx(Q,{to:"/notifications",onClick:()=>h(!1),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors block text-center",children:"View all notifications"})})]})]}),e.jsx(Q,{to:"/help",className:"p-2 text-gray-700 hover:text-blue-600 transition-colors duration-200 hidden sm:block","aria-label":"Help center",children:e.jsx(Eh,{className:"w-6 h-6"})}),e.jsxs("div",{className:"relative hidden sm:block",ref:v,children:[e.jsxs("button",{onClick:B,className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-100 transition-colors duration-200","aria-label":"Account menu","aria-expanded":x,children:[g?e.jsx("img",{src:g,alt:`${O}'s profile`,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200"}):e.jsx(Fh,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 hidden lg:block",children:O})]}),x&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:O}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:T}),e.jsx("span",{className:`inline-block mt-2 px-2 py-1 text-xs font-medium rounded-full ${D==="trade"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:D==="trade"?"Trade Account":"Retail Account"})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs(Q,{to:"/account",onClick:()=>p(!1),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx($h,{className:"w-5 h-5"}),e.jsx("span",{children:"Account Settings"})]}),e.jsxs(Q,{to:"/account/reviews",onClick:()=>p(!1),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx(v1,{className:"w-5 h-5"}),e.jsx("span",{children:"My Reviews"})]}),e.jsxs(Q,{to:"/wishlist",onClick:()=>p(!1),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("span",{children:"Saved Items"})]}),D==="trade"&&e.jsxs(Q,{to:"/trade-credit",onClick:()=>p(!1),className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),e.jsx("span",{children:"Trade Credit"})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:M,disabled:k.isPending,className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-150 disabled:opacity-50",children:[e.jsx(Ch,{className:"w-5 h-5"}),e.jsx("span",{children:k.isPending?"Signing out...":"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:A,className:"sm:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors","aria-label":"Toggle menu",children:c?e.jsx(w1,{className:"w-6 h-6"}):e.jsx(d1,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"lg:hidden pb-4",children:e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"search",value:o,onChange:S=>d(S.target.value),placeholder:"Search construction materials...",className:"w-full px-4 py-2 pl-10 pr-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm"}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400","aria-label":"Search",children:e.jsx(Th,{className:"w-5 h-5"})})]})})})]}),c&&e.jsx("div",{className:"sm:hidden border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"px-4 py-4 space-y-2",children:[e.jsx("div",{className:"pb-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[g?e.jsx("img",{src:g,alt:`${O}'s profile`,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}):e.jsx(Fh,{className:"w-12 h-12 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:O}),e.jsx("p",{className:"text-xs text-gray-500",children:T})]})]})}),e.jsxs(Q,{to:"/orders",onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[e.jsx(Ah,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Orders"})]}),e.jsxs(Q,{to:"/projects",onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[e.jsx(Oh,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Projects"})]}),e.jsxs(Q,{to:"/wishlist",onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Saved Items"})]}),e.jsxs(Q,{to:"/help",onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[e.jsx(Eh,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Help Center"})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs(Q,{to:"/account",onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[e.jsx($h,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Account Settings"})]}),e.jsxs("button",{onClick:M,disabled:k.isPending,className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50",children:[e.jsx(Ch,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:k.isPending?"Signing out...":"Sign Out"})]})]})})]})})},A1=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me",{headers:{Authorization:`Bearer ${t}`}})).data,$1=async t=>((await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations",{headers:{Authorization:`Bearer ${t}`},params:{conversation_type:"customer_supplier"}})).data||[]).reduce((a,n)=>a+(n.unread_count||0),0),O1=async t=>((await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",{headers:{Authorization:`Bearer ${t}`},params:{limit:1e3}})).data.products||[]).filter(a=>a.stock_quantity<=a.low_stock_threshold).length,T1=async t=>{try{return await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",{headers:{Authorization:`Bearer ${t}`},params:{status_filter:"pending",limit:1}}),0}catch{return 0}},E1=()=>{const t=ze(),s=wm(),r=re(B=>B.authentication_state.current_user),a=re(B=>B.authentication_state.auth_token),n=re(B=>B.authentication_state.supplier_profile),i=re(B=>B.logout_user),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(""),{data:h}=ne({queryKey:["supplier-profile"],queryFn:()=>A1(a||""),enabled:!!a,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:x=0}=ne({queryKey:["supplier-pending-orders-count"],queryFn:()=>T1(a||""),enabled:!!a,staleTime:30*1e3,refetchInterval:30*1e3,refetchOnWindowFocus:!1}),{data:p=0}=ne({queryKey:["supplier-unread-messages"],queryFn:()=>$1(a||""),enabled:!!a,staleTime:30*1e3,refetchInterval:30*1e3,refetchOnWindowFocus:!1}),{data:b=0}=ne({queryKey:["supplier-low-stock-count"],queryFn:()=>O1(a||""),enabled:!!a,staleTime:60*1e3,refetchInterval:60*1e3,refetchOnWindowFocus:!1}),v=_.useCallback(async()=>{await i(),t("/login")},[i,t]),j=_.useCallback(B=>{B.preventDefault(),u.trim()&&(t(`/supplier/products?search_query=${encodeURIComponent(u.trim())}`),m(""))},[u,t]),P=_.useCallback(()=>{o(B=>!B)},[]),w=_.useCallback(()=>{c(B=>!B)},[]);_.useEffect(()=>{c(!1),o(!1)},[s.pathname]),_.useEffect(()=>{const B=A=>{const L=A.target;!L.closest("#account-dropdown-button")&&!L.closest("#account-dropdown-menu")&&c(!1)};if(d)return document.addEventListener("click",B),()=>document.removeEventListener("click",B)},[d]);const C=(h==null?void 0:h.business_name)||(n==null?void 0:n.business_name)||"My Business",f=(h==null?void 0:h.logo_url)||(n==null?void 0:n.logo_url),k=(h==null?void 0:h.verification_status)||(n==null?void 0:n.verification_status)||"pending",y=(h==null?void 0:h.rating_average)||(n==null?void 0:n.rating_average)||0,F=Number(y)||0,M=[{label:"Dashboard",path:"/supplier/dashboard",icon:Js},{label:"Products",path:"/supplier/products",icon:ve,badge:b>0?b:null},{label:"Inventory",path:"/supplier/inventory",icon:ve,badge:b},{label:"Orders",path:"/supplier/orders",icon:Be,badge:x},{label:"Analytics",path:"/supplier/analytics",icon:zs},{label:"Financials",path:"/supplier/financials",icon:Te}],E=B=>s.pathname===B||s.pathname.startsWith(B+"/");return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50 shadow-sm",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx("button",{type:"button",onClick:P,className:"lg:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors","aria-label":"Toggle mobile menu",children:l?e.jsx(ge,{className:"h-6 w-6"}):e.jsx(Fo,{className:"h-6 w-6"})}),e.jsxs(Q,{to:"/supplier/dashboard",className:"flex items-center space-x-2 group",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center group-hover:bg-blue-700 transition-colors",children:e.jsx(Js,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"BuildEasy"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 hidden md:block",children:"Supplier"})]}),e.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:M.map(B=>{const A=B.icon,L=E(B.path);return e.jsxs(Q,{to:B.path,className:`relative flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${L?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:B.label}),B.badge&&B.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center h-5 w-5 text-xs font-bold text-white bg-red-500 rounded-full",children:B.badge>99?"99+":B.badge})]},B.path)})})]}),e.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:e.jsx("form",{onSubmit:j,className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u,onChange:B=>m(B.target.value),placeholder:"Search your products...",className:"w-full px-4 py-2 pl-10 pr-4 text-sm text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all","aria-label":"Search your products"}),e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Q,{to:"/supplier/messages",className:"relative p-2 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors","aria-label":`Messages ${p>0?`(${p} unread)`:""}`,children:[e.jsx(Ft,{className:"h-5 w-5"}),p>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center h-5 w-5 text-xs font-bold text-white bg-red-500 rounded-full",children:p>99?"99+":p})]}),e.jsx(Q,{to:"/notifications",className:"relative p-2 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors","aria-label":"Notifications",children:e.jsx(Ht,{className:"h-5 w-5"})}),e.jsx(Q,{to:"/help",className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors","aria-label":"Help",children:e.jsx(Pl,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{id:"account-dropdown-button",type:"button",onClick:w,className:"flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-haspopup":"true","aria-expanded":d,children:[f?e.jsx("img",{src:f,alt:C,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(Js,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"hidden md:flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 max-w-[150px] truncate",children:C}),e.jsxs("div",{className:"flex items-center space-x-1",children:[k==="verified"&&e.jsx(he,{className:"h-3 w-3 text-green-500"}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(Oe,{className:"h-3 w-3 text-yellow-500 mr-1"}),(isNaN(F)||!isFinite(F)?0:F).toFixed(1)]})]})]}),e.jsx(Et,{className:`h-4 w-4 text-gray-500 transition-transform hidden md:block ${d?"rotate-180":""}`})]}),d&&e.jsxs("div",{id:"account-dropdown-menu",className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",role:"menu","aria-orientation":"vertical",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[k==="verified"?e.jsxs("span",{className:"flex items-center text-xs text-green-600",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Verified"]}):e.jsxs("span",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),k==="pending"?"Pending Verification":"Not Verified"]}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(Oe,{className:"h-3 w-3 text-yellow-500 mr-1"}),(isNaN(F)||!isFinite(F)?0:F).toFixed(1)," rating"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==null?void 0:r.email})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(Q,{to:"/supplier/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",role:"menuitem",children:[e.jsx(Vt,{className:"h-4 w-4 mr-3 text-gray-500"}),"Business Settings"]}),e.jsxs(Q,{to:"/supplier/settings#team",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",role:"menuitem",children:[e.jsx(Js,{className:"h-4 w-4 mr-3 text-gray-500"}),"Team Management"]}),e.jsxs(Q,{to:"/supplier/analytics",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",role:"menuitem",children:[e.jsx(Re,{className:"h-4 w-4 mr-3 text-gray-500"}),"Performance"]}),e.jsxs(Q,{to:"/supplier/education",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",role:"menuitem",children:[e.jsx(Pl,{className:"h-4 w-4 mr-3 text-gray-500"}),"Resources"]})]}),e.jsx("div",{className:"border-t border-gray-200 py-1",children:e.jsxs("button",{type:"button",onClick:v,className:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",role:"menuitem",children:[e.jsx("svg",{className:"h-4 w-4 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})]})]})}),l&&e.jsx("div",{className:"lg:hidden border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"px-4 py-4 space-y-2",children:[e.jsx("form",{onSubmit:j,className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u,onChange:B=>m(B.target.value),placeholder:"Search your products...",className:"w-full px-4 py-2 pl-10 text-sm text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Search products"}),e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})}),M.map(B=>{const A=B.icon,L=E(B.path);return e.jsxs(Q,{to:B.path,className:`flex items-center justify-between px-4 py-3 rounded-lg text-base font-medium transition-all ${L?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>o(!1),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{children:B.label})]}),B.badge&&B.badge>0&&e.jsx("span",{className:"flex items-center justify-center h-6 w-6 text-xs font-bold text-white bg-red-500 rounded-full",children:B.badge>99?"99+":B.badge})]},B.path)}),e.jsxs(Q,{to:"/supplier/messages",className:`flex items-center justify-between px-4 py-3 rounded-lg text-base font-medium transition-all ${E("/supplier/messages")?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>o(!1),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ft,{className:"h-5 w-5"}),e.jsx("span",{children:"Messages"})]}),p>0&&e.jsx("span",{className:"flex items-center justify-center h-6 w-6 text-xs font-bold text-white bg-red-500 rounded-full",children:p>99?"99+":p})]}),e.jsxs(Q,{to:"/supplier/reviews",className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-all ${E("/supplier/reviews")?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>o(!1),children:[e.jsx(Oe,{className:"h-5 w-5"}),e.jsx("span",{children:"Reviews"})]}),e.jsxs(Q,{to:"/supplier/settings",className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-all ${E("/supplier/settings")?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>o(!1),children:[e.jsx(Vt,{className:"h-5 w-5"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 px-4 py-2",children:[f?e.jsx("img",{src:f,alt:C,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(Js,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C}),e.jsx("p",{className:"text-xs text-gray-500",children:r==null?void 0:r.email})]})]}),e.jsxs("button",{type:"button",onClick:()=>{o(!1),v()},className:"w-full mt-2 flex items-center space-x-3 px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Sign Out"})]})]})]})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-40 lg:hidden",onClick:()=>o(!1),"aria-hidden":"true"})]})},F1=()=>{const t=ze(),s=wm(),r=re(w=>w.authentication_state.current_user),a=re(w=>w.authentication_state.admin_profile),n=re(w=>w.authentication_state.auth_token),i=re(w=>w.logout_user),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(!1),h="https://123create-construction-app-with-a.launchpulse.ai",{data:x}=ne({queryKey:["admin-alerts"],queryFn:async()=>{const w=n?{Authorization:`Bearer ${n}`}:{};try{const[C,f,k]=await Promise.all([G.get(`${h}/admin/disputes?status=open&limit=1`,{headers:w}),G.get(`${h}/admin/supplier-applications?application_status=pending_review&limit=1`,{headers:w}),G.get(`${h}/admin/reviews/flagged`,{headers:w})]);return{disputes:Number(C.data.total||C.data.length||0),flagged_content:Number(k.data.length||0),supplier_applications:Number(f.data.length||0)}}catch(C){return console.error("Error fetching admin alerts:",C),{disputes:0,flagged_content:0,supplier_applications:0}}},enabled:!!n,refetchInterval:6e4,staleTime:6e4,retry:1}),{data:p}=ne({queryKey:["system-health"],queryFn:async()=>({status:"operational",uptime_percentage:99.9,api_response_time:120}),refetchInterval:3e4,staleTime:3e4,retry:0}),b=async()=>{try{await i(),t("/login")}catch(w){console.error("Logout error:",w)}};_.useEffect(()=>{const w=C=>{const f=C.target;f.closest(".account-dropdown")||c(!1),f.closest(".users-dropdown")||m(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const v=((x==null?void 0:x.disputes)||0)+((x==null?void 0:x.flagged_content)||0)+((x==null?void 0:x.supplier_applications)||0),j=(p==null?void 0:p.status)==="operational"?"bg-green-500":(p==null?void 0:p.status)==="degraded"?"bg-yellow-500":"bg-red-500",P=w=>s.pathname===w;return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-900 text-white shadow-lg border-b border-gray-700",children:[e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs(Q,{to:"/admin",className:"flex items-center space-x-3 group",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:e.jsx(Mt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"BuildEasy"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Admin Panel"})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-1",children:[e.jsxs(Q,{to:"/admin",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(eh,{className:"w-4 h-4"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs("div",{className:"relative users-dropdown",children:[e.jsxs("button",{onClick:()=>m(!u),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${s.pathname.includes("/admin/customers")||s.pathname.includes("/admin/suppliers")||s.pathname.includes("/admin/supplier-applications")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:"Users"}),e.jsx(Et,{className:"w-3 h-3"})]}),((x==null?void 0:x.supplier_applications)||0)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded-full",children:x==null?void 0:x.supplier_applications}),u&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-2",children:[e.jsx(Q,{to:"/admin/customers",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>m(!1),children:"Customers"}),e.jsx(Q,{to:"/admin/suppliers",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>m(!1),children:"Suppliers"}),e.jsxs(Q,{to:"/admin/supplier-applications",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>m(!1),children:["Supplier Applications",((x==null?void 0:x.supplier_applications)||0)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:x==null?void 0:x.supplier_applications})]})]})]}),e.jsxs(Q,{to:"/admin/orders",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/orders")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(Q,{to:"/admin/disputes",className:`relative px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/disputes")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{children:"Disputes"}),((x==null?void 0:x.disputes)||0)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded-full",children:x==null?void 0:x.disputes})]}),e.jsxs(Q,{to:"/admin/products",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/products")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Al,{className:"w-4 h-4"}),e.jsx("span",{children:"Products"})]}),e.jsxs(Q,{to:"/admin/reviews",className:`relative px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/reviews")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:"Reviews"}),((x==null?void 0:x.flagged_content)||0)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded-full",children:x==null?void 0:x.flagged_content})]}),e.jsxs(Q,{to:"/admin/financials",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/financials")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Financials"})]}),e.jsxs(Q,{to:"/admin/analytics",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/analytics")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs(Q,{to:"/admin/settings",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${P("/admin/settings")?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 px-3 py-1.5 bg-gray-800 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${j} animate-pulse`}),e.jsx("span",{className:"text-xs text-gray-300 font-medium",children:(p==null?void 0:p.status)==="operational"?"Operational":(p==null?void 0:p.status)==="degraded"?"Degraded":"Down"})]}),e.jsxs("button",{className:"relative p-2 text-gray-300 hover:text-white hover:bg-gray-800 rounded-lg transition-all",children:[e.jsx(Ht,{className:"w-5 h-5"}),v>0&&e.jsx("span",{className:"absolute -top-1 -right-1 px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:v})]}),e.jsxs("div",{className:"relative account-dropdown",children:[e.jsxs("button",{onClick:()=>c(!d),className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 hover:text-white transition-all",children:[e.jsx(Ed,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden lg:block text-sm font-medium",children:(r==null?void 0:r.email)||"Admin"}),e.jsx(Et,{className:"w-4 h-4"})]}),d&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(a==null?void 0:a.role)||"Administrator"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==null?void 0:r.email})]}),e.jsx(Q,{to:"/admin/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>c(!1),children:"Profile Settings"}),e.jsx("button",{onClick:b,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Sign Out"})]})]}),e.jsx("button",{onClick:()=>o(!l),className:"lg:hidden p-2 text-gray-300 hover:text-white hover:bg-gray-800 rounded-lg transition-all",children:l?e.jsx(ge,{className:"w-6 h-6"}):e.jsx(Fo,{className:"w-6 h-6"})})]})]})}),l&&e.jsx("div",{className:"lg:hidden bg-gray-800 border-t border-gray-700",children:e.jsxs("div",{className:"px-4 py-3 space-y-2",children:[e.jsx(Q,{to:"/admin",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(eh,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})]})}),e.jsx(Q,{to:"/admin/customers",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Customers"})]})}),e.jsx(Q,{to:"/admin/suppliers",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Suppliers"})]})}),e.jsxs(Q,{to:"/admin/supplier-applications",className:"flex items-center justify-between px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Supplier Applications"})]}),((x==null?void 0:x.supplier_applications)||0)>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:x==null?void 0:x.supplier_applications})]}),e.jsx(Q,{to:"/admin/orders",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Orders"})]})}),e.jsxs(Q,{to:"/admin/disputes",className:"flex items-center justify-between px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(At,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Disputes"})]}),((x==null?void 0:x.disputes)||0)>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:x==null?void 0:x.disputes})]}),e.jsx(Q,{to:"/admin/products",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Al,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Products"})]})}),e.jsxs(Q,{to:"/admin/reviews",className:"flex items-center justify-between px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Reviews"})]}),((x==null?void 0:x.flagged_content)||0)>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:x==null?void 0:x.flagged_content})]}),e.jsx(Q,{to:"/admin/financials",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Financials"})]})}),e.jsx(Q,{to:"/admin/analytics",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(zs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Analytics"})]})}),e.jsx(Q,{to:"/admin/settings",className:"block px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>o(!1),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-700 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"System Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${j}`}),e.jsx("span",{className:"text-xs text-gray-300",children:(p==null?void 0:p.status)==="operational"?"Operational":(p==null?void 0:p.status)==="degraded"?"Degraded":"Down"})]})]}),p&&e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[e.jsxs("p",{children:["Uptime: ",p.uptime_percentage,"%"]}),e.jsxs("p",{children:["Response: ",p.api_response_time,"ms"]})]})]}),e.jsxs("button",{onClick:b,className:"flex items-center space-x-3 w-full px-4 py-3 rounded-lg text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[e.jsx(sw,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})})]}),e.jsx("div",{className:"h-16"})]})},Dm=()=>{const t=re(h=>h.authentication_state.authentication_status.is_authenticated),s=re(h=>h.authentication_state.authentication_status.user_type),[r,a]=_.useState(""),[n,i]=_.useState(!1),[l,o]=_.useState(null),[d,c]=_.useState(null),u=async h=>{if(h.preventDefault(),o(null),c(null),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){c("Please enter a valid email address");return}i(!0);try{await new Promise(p=>setTimeout(p,1e3)),o("Thank you for subscribing! Check your inbox for confirmation."),a("")}catch(p){c(p instanceof Error?p.message:"Failed to subscribe. Please try again.")}finally{i(!1)}},m=new Date().getFullYear();return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"bg-gray-900 border-t border-gray-800",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(Q,{to:"/",className:"inline-block",children:e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"BuildEasy"})}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Your trusted construction supply marketplace"}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(he,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"100+ verified suppliers nationwide"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(he,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"10,000+ construction products"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(he,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{children:"5,000+ orders delivered on time"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"1-800-BUILD-EZ"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),e.jsx("a",{href:"mailto:support@buildeasy.com",className:"hover:text-white transition-colors",children:"support@buildeasy.com"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Nationwide Service"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white mb-4",children:"For Buyers"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(Q,{to:"/products",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Browse Products"})}),e.jsx("li",{children:e.jsx(Q,{to:"/how-it-works",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"How It Works"})}),t&&s==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(Q,{to:"/orders",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Track My Orders"})}),e.jsx("li",{children:e.jsx(Q,{to:"/wishlist",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"My Wishlist"})}),e.jsx("li",{children:e.jsx(Q,{to:"/projects",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"My Projects"})})]}),e.jsx("li",{children:e.jsx(Q,{to:"/surplus",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Surplus Marketplace"})}),!t&&e.jsx("li",{children:e.jsx(Q,{to:"/register/customer",className:"text-sm text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Sign Up Free "})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white mb-4",children:"For Sellers"}),e.jsxs("ul",{className:"space-y-3",children:[!t||s!=="supplier"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(Q,{to:"/register/supplier",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Become a Supplier"})}),e.jsx("li",{children:e.jsx(Q,{to:"/how-it-works",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"How to Sell"})})]}):null,t&&s==="supplier"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(Q,{to:"/supplier/dashboard",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Supplier Dashboard"})}),e.jsx("li",{children:e.jsx(Q,{to:"/supplier/orders",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Manage Orders"})}),e.jsx("li",{children:e.jsx(Q,{to:"/supplier/products",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Manage Products"})}),e.jsx("li",{children:e.jsx(Q,{to:"/supplier/analytics",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Analytics"})})]}),e.jsx("li",{children:e.jsx(Q,{to:"/supplier/education",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Growth Resources"})}),e.jsx("li",{children:e.jsx(Q,{to:"/about",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Pricing & Plans"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-white mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(Q,{to:"/help",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Help Center"})}),e.jsx("li",{children:e.jsx(Q,{to:"/contact",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Contact Us"})}),e.jsx("li",{children:e.jsx(Q,{to:"/support",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Customer Support"})}),e.jsx("li",{children:e.jsx(Q,{to:"/about",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"About BuildEasy"})}),e.jsx("li",{children:e.jsx("a",{href:"#careers",className:"text-sm text-gray-300 hover:text-white transition-colors",children:"Careers"})})]})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-800",children:e.jsxs("div",{className:"max-w-md mx-auto lg:mx-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Stay Updated"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Get exclusive deals, new supplier alerts, and construction tips delivered to your inbox"}),e.jsxs("form",{onSubmit:u,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"email",value:r,onChange:h=>{a(h.target.value),c(null)},placeholder:"Enter your email",disabled:n,className:"flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Email address for newsletter"}),e.jsx("button",{type:"submit",disabled:n||!r,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Subscribing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Subscribe"]})})]}),l&&e.jsxs("div",{className:"flex items-start bg-green-900/30 border border-green-700 text-green-400 px-4 py-3 rounded-lg",children:[e.jsx(he,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:l})]}),d&&e.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-400 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:d})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["By subscribing, you agree to our"," ",e.jsx(Q,{to:"/privacy",className:"text-blue-400 hover:text-blue-300 underline",children:"Privacy Policy"}),". Unsubscribe anytime."]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-400 mb-3",children:"Follow Us"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"https://facebook.com/buildeasy",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Follow us on Facebook",children:e.jsx(rw,{className:"h-5 w-5"})}),e.jsx("a",{href:"https://twitter.com/buildeasy",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Follow us on Twitter",children:e.jsx(aw,{className:"h-5 w-5"})}),e.jsx("a",{href:"https://linkedin.com/company/buildeasy",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Follow us on LinkedIn",children:e.jsx(nw,{className:"h-5 w-5"})})]})]})]})})]}),e.jsx("div",{className:"border-t border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Xn,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"SSL Secure"})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Mt,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Verified Suppliers"})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Fd,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"100% Satisfaction Guarantee"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 sm:gap-6 mb-4",children:[e.jsx(Q,{to:"/terms",className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Terms of Service"}),e.jsx("span",{className:"text-gray-700",children:"|"}),e.jsx(Q,{to:"/privacy",className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Privacy Policy"}),e.jsx("span",{className:"text-gray-700",children:"|"}),e.jsx("a",{href:"#cookie-policy",className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Cookie Policy"}),e.jsx("span",{className:"text-gray-700",children:"|"}),e.jsx("a",{href:"#accessibility",className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Accessibility"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",m," BuildEasy. All rights reserved."]})})]})})]})})},M1=()=>{const t=re(O=>O.authentication_state.auth_token),s=re(O=>O.authentication_state.authentication_status.is_authenticated),r=re(O=>O.authentication_state.authentication_status.user_type),a=re(O=>O.fetch_cart),[n,i]=_.useState(!1),[l,o]=_.useState(""),[d,c]=_.useState(null),[u,m]=_.useState(null),[h,x]=_.useState(null),[p,b]=_.useState(null),[v,j]=_.useState(!1),P=Pe(),{data:w,isLoading:C}=ne({queryKey:["cart"],queryFn:async()=>{if(!t)throw new Error("Not authenticated");return(await G.get("/cart")).data},enabled:!!t&&s&&r==="customer",staleTime:3e4,refetchOnWindowFocus:!1,retry:1,select:O=>({...O,subtotal:Number(O.subtotal||0),total_items:Number(O.total_items||0)})}),f=Z.useMemo(()=>{if(!(w!=null&&w.items))return[];const O={};return w.items.forEach(T=>{const g=T.supplier_id;O[g]||(O[g]={supplier_id:g,supplier_name:T.business_name||"Unknown Supplier",supplier_logo:null,items:[],supplier_subtotal:0}),O[g].items.push({cart_item_id:T.cart_item_id,product_id:T.product_id,product_name:T.product_name,supplier_id:T.supplier_id,quantity:T.quantity,price_per_unit:Number(T.price_per_unit||0),primary_image_url:T.primary_image_url,stock_quantity:Number(T.stock_quantity||0)}),O[g].supplier_subtotal+=T.quantity*Number(T.price_per_unit||0)}),Object.values(O)},[w==null?void 0:w.items]),k=Z.useMemo(()=>{const O=Number((w==null?void 0:w.subtotal)||0),T=0,g=0,D=Number((p==null?void 0:p.discount_amount)||0),S=O+T+g-D;return{subtotal_amount:O,delivery_fee_total:T,tax_amount:g,discount_amount:D,total_amount:S,total_items:Number((w==null?void 0:w.total_items)||0)}},[w,p]),y=oe({mutationFn:async({cart_item_id:O,quantity:T})=>(await G.patch(`/cart/items/${O}`,{quantity:T})).data,onMutate:async({cart_item_id:O})=>{c(O),m(null)},onSuccess:()=>{P.invalidateQueries({queryKey:["cart"]}),a&&a()},onError:O=>{var T,g;m(((g=(T=O.response)==null?void 0:T.data)==null?void 0:g.message)||"Failed to update quantity")},onSettled:()=>{c(null)}}),F=oe({mutationFn:async O=>{await G.delete(`/cart/items/${O}`)},onMutate:async O=>{c(O),m(null)},onSuccess:()=>{P.invalidateQueries({queryKey:["cart"]}),a&&a()},onError:O=>{var T,g;m(((g=(T=O.response)==null?void 0:T.data)==null?void 0:g.message)||"Failed to remove item")},onSettled:()=>{c(null)}}),M=oe({mutationFn:async O=>(await G.post("/promotions/validate",O)).data,onSuccess:O=>{O.valid&&O.promotion?(b({promotion_id:O.promotion.promotion_id,promo_code:O.promotion.promo_code,discount_amount:Number(O.discount_amount||0)}),o(""),x(null)):x(O.message||"Invalid promo code")},onError:O=>{var T,g;x(((g=(T=O.response)==null?void 0:T.data)==null?void 0:g.message)||"Failed to apply promo code")}}),E=(O,T,g)=>{T<1||T>g||y.mutate({cart_item_id:O,quantity:T})},B=O=>{F.mutate(O)},A=O=>{if(O.preventDefault(),x(null),!l.trim()){x("Please enter a promo code");return}M.mutate({promo_code:l.toUpperCase(),cart_total:k.subtotal_amount})},L=()=>{b(null)},N=()=>{i(!1),m(null),x(null)},R=O=>{O.target===O.currentTarget&&N()};return _.useEffect(()=>{const O=T=>{T.key==="Escape"&&n&&N()};return n&&(document.addEventListener("keydown",O),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",O),document.body.style.overflow="unset"}},[n]),_.useEffect(()=>{const O=()=>i(!0);return window.addEventListener("openMiniCart",O),()=>{window.removeEventListener("openMiniCart",O)}},[]),!s||r!=="customer"?null:e.jsx(e.Fragment,{children:n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 transition-opacity duration-300",onClick:R,"aria-label":"Close cart",children:e.jsxs("div",{className:"fixed top-0 right-0 h-full w-full lg:w-[400px] bg-white shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Shopping Cart"}),k.total_items>0&&e.jsxs("span",{className:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[k.total_items," ",k.total_items===1?"item":"items"]})]}),e.jsx("button",{onClick:N,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close cart",children:e.jsx(ge,{className:"h-6 w-6 text-gray-500"})})]}),u&&e.jsxs("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-700",children:u}),e.jsx("button",{onClick:()=>m(null),className:"text-xs text-red-600 hover:text-red-800 mt-1 underline",children:"Dismiss"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:C?e.jsx("div",{className:"space-y-6",children:[1,2,3].map(O=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-3"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]},O))}):!w||f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Be,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Start adding products to get started!"}),e.jsx(Q,{to:"/products",onClick:N,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Start Shopping"})]}):e.jsx("div",{className:"space-y-6",children:f.map(O=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-200",children:[O.supplier_logo&&e.jsx("img",{src:O.supplier_logo,alt:O.supplier_name,className:"w-6 h-6 rounded-full object-cover"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:O.supplier_name}),e.jsx(Q,{to:`/supplier/${O.supplier_id}`,onClick:N,className:"text-xs text-blue-600 hover:text-blue-700 ml-auto",children:"View Shop"})]}),e.jsx("div",{className:"space-y-3",children:O.items.map(T=>{const g=d===T.cart_item_id,D=T.stock_quantity<T.quantity;return e.jsxs("div",{className:"flex space-x-3 p-3 bg-gray-50 rounded-lg relative",children:[e.jsx(Q,{to:`/product/${T.product_id}`,onClick:N,className:"flex-shrink-0",children:T.primary_image_url?e.jsx("img",{src:T.primary_image_url,alt:T.product_name,className:"w-16 h-16 object-cover rounded-lg hover:opacity-80 transition-opacity"}):e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"h-6 w-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Q,{to:`/product/${T.product_id}`,onClick:N,className:"block",children:e.jsx("h4",{className:"text-sm font-medium text-gray-900 hover:text-blue-600 transition-colors line-clamp-2",children:T.product_name})}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",Number(T.price_per_unit||0).toFixed(2)]}),e.jsx("span",{className:"text-xs text-gray-500",children:"per unit"})]}),D&&e.jsxs("div",{className:"mt-1 text-xs text-amber-600 font-medium",children:["Only ",T.stock_quantity," left in stock"]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>E(T.cart_item_id,T.quantity-1,T.stock_quantity),disabled:T.quantity<=1||g,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Decrease quantity",children:e.jsx(_m,{className:"h-4 w-4 text-gray-600"})}),e.jsx("input",{type:"number",value:T.quantity,onChange:S=>{const $=parseInt(S.target.value);isNaN($)||E(T.cart_item_id,$,T.stock_quantity)},min:"1",max:T.stock_quantity,disabled:g,className:"w-12 text-center py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Quantity"}),e.jsx("button",{onClick:()=>E(T.cart_item_id,T.quantity+1,T.stock_quantity),disabled:T.quantity>=T.stock_quantity||g,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Increase quantity",children:e.jsx(dt,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",(T.quantity*Number(T.price_per_unit||0)).toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>B(T.cart_item_id),disabled:g,className:"absolute top-3 right-3 p-1 rounded-md hover:bg-red-50 transition-colors disabled:opacity-50","aria-label":"Remove item",children:e.jsx(_t,{className:"h-4 w-4 text-red-600"})}),g&&e.jsx("div",{className:"absolute inset-0 bg-white/60 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})]},T.cart_item_id)})})]},O.supplier_id))})}),w&&f.length>0&&e.jsxs("div",{className:"border-t border-gray-200 bg-white px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>j(!v),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{children:"Have a promo code?"})]}),v&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("form",{onSubmit:A,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:l,onChange:O=>{o(O.target.value.toUpperCase()),x(null)},placeholder:"Enter code",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"submit",disabled:!l.trim()||M.isPending,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Apply"})]}),h&&e.jsx("p",{className:"text-xs text-red-600",children:h}),p&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:p.promo_code})]}),e.jsx("button",{onClick:L,className:"text-xs text-green-600 hover:text-green-700 underline",children:"Remove"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",Number(k.subtotal_amount).toFixed(2)]})]}),p&&p.discount_amount>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Discount"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-$",Number(p.discount_amount).toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Taxes and delivery calculated at checkout"}),e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",Number(k.total_amount).toFixed(2)]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{to:"/checkout",onClick:N,className:"block w-full py-3 px-6 bg-blue-600 text-white text-center font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"Proceed to Checkout"}),e.jsx(Q,{to:"/cart",onClick:N,className:"block w-full py-3 px-6 bg-gray-100 text-gray-900 text-center font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"View Full Cart"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 pt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure Checkout"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})]}),e.jsx("span",{children:"100% Satisfaction"})]})]})]})]})})})},Qb=()=>{const t=re(H=>H.authentication_state.current_user),s=re(H=>H.authentication_state.auth_token),r=re(H=>H.authentication_state.authentication_status.is_authenticated),a=re(H=>H.websocket_connection),n=Pe(),[i,l]=_.useState(null),[o,d]=_.useState(null),[c,u]=_.useState([]),[m,h]=_.useState(!1),[x,p]=_.useState(!1),[b,v]=_.useState(""),[j,P]=_.useState(!1),[w,C]=_.useState(null),[f,k]=_.useState("disconnected"),[y,F]=_.useState(0),[M]=_.useState(null),[E,B]=_.useState(!1),[A,L]=_.useState(null),N=_.useRef(null),R=_.useRef(null),O=_.useRef(null),T="https://123create-construction-app-with-a.launchpulse.ai",g=_.useCallback(()=>{var H;(H=N.current)==null||H.scrollIntoView({behavior:"smooth"})},[]);_.useEffect(()=>{m&&!x&&c.length>0&&g()},[c,m,x,g]),_.useEffect(()=>{if(!a||!i)return;k(a.connected?"connected":"connecting"),a.emit("join_conversation",{conversation_id:i});const H=be=>{const ke={message_id:be.message_id,sender_id:be.sender_id,sender_type:be.sender_type,sender_name:be.sender_name,message_text:be.message_text,attachments:be.attachments,timestamp:be.timestamp,is_read:be.is_read};u(De=>[...De,ke]),be.sender_id!==(t==null?void 0:t.user_id)&&(!m||x)&&F(De=>De+1),m&&!x&&a&&a.emit("mark_message_read",{message_id:be.message_id})},ee=be=>{be.user_id!==(t==null?void 0:t.user_id)&&(be.is_typing?C({user_id:be.user_id,user_name:be.user_name||"Agent"}):C(null))},ue=be=>{u(ke=>ke.map(De=>De.message_id===be.message_id?{...De,is_read:!0}:De))};return a.on("chat_message_received",H),a.on("user_typing",ee),a.on("chat_message_read",ue),a.on("connect",()=>{k("connected")}),a.on("disconnect",()=>{k("disconnected")}),()=>{a&&(a.off("chat_message_received",H),a.off("user_typing",ee),a.off("chat_message_read",ue),a.emit("leave_conversation",{conversation_id:i}))}},[a,i,t,m,x]);const{data:D,isLoading:S}=ne({queryKey:["chat-messages",i],queryFn:async()=>!i||!s?[]:(await G.get(`${T}/chat/conversations/${i}/messages`,{headers:{Authorization:`Bearer ${s}`},params:{limit:50,offset:0}})).data,enabled:!!i&&!!s&&m,staleTime:6e4,refetchOnWindowFocus:!1});_.useEffect(()=>{D&&D.length>0&&u(D)},[D]);const $=oe({mutationFn:async H=>(await G.post(`${T}/chat/conversations`,H,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:H=>{l(H.conversation_id),d(H.conversation_type),B(!1),u([]),L(null),a&&a.emit("join_conversation",{conversation_id:H.conversation_id})},onError:H=>{console.error("Failed to start conversation:",H),L("Failed to start conversation. Please try again.")}}),I=oe({mutationFn:async H=>{if(!i)throw new Error("No active conversation");return(await G.post(`${T}/chat/conversations/${i}/messages`,H,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data},onMutate:async H=>{const ee={message_id:`temp-${Date.now()}`,sender_id:(t==null?void 0:t.user_id)||"",sender_type:(t==null?void 0:t.user_type)||"customer",sender_name:`${t==null?void 0:t.first_name} ${t==null?void 0:t.last_name}`,message_text:H.message_text,attachments:H.attachments||null,timestamp:new Date().toISOString(),is_read:!1};return u(ue=>[...ue,ee]),v(""),{optimisticMessage:ee}},onError:(H,ee,ue)=>{ue!=null&&ue.optimisticMessage&&u(be=>be.filter(ke=>ke.message_id!==ue.optimisticMessage.message_id)),console.error("Failed to send message:",H),L("Failed to send message. Please try again."),v(ee.message_text)},onSuccess:()=>{L(null),n.invalidateQueries({queryKey:["chat-messages",i]})}}),K=_.useCallback(()=>{h(!0),p(!1),i?y>0&&(F(0),c.forEach(H=>{!H.is_read&&H.sender_id!==(t==null?void 0:t.user_id)&&a&&a.emit("mark_message_read",{message_id:H.message_id})})):B(!0),setTimeout(()=>{var H;return(H=R.current)==null?void 0:H.focus()},100)},[i,c,t,y,a]),U=_.useCallback(()=>{h(!1),p(!1),B(!1)},[]),q=_.useCallback(()=>{p(!0)},[]),z=_.useCallback(()=>{p(!1),y>0&&(F(0),c.forEach(H=>{!H.is_read&&H.sender_id!==(t==null?void 0:t.user_id)&&a&&a.emit("mark_message_read",{message_id:H.message_id})}))},[y,c,t,a]),Y=_.useCallback(H=>{if(!r){L("Please sign in to start a conversation");return}$.mutate({conversation_type:H,related_entity_type:void 0,related_entity_id:void 0})},[r,$]),se=_.useCallback(H=>{H==null||H.preventDefault();const ee=b.trim();!ee||!i||(a&&j&&(a.emit("user_stopped_typing",{conversation_id:i}),P(!1)),I.mutate({message_text:ee,attachments:void 0}))},[b,i,a,j,I]),J=_.useCallback(H=>{const ee=H.target.value;v(ee),L(null),a&&i&&ee.trim()?(j||(P(!0),a.emit("user_typing",{conversation_id:i})),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{P(!1),a&&a.emit("user_stopped_typing",{conversation_id:i})},3e3)):!ee.trim()&&j&&(P(!1),a&&a.emit("user_stopped_typing",{conversation_id:i}))},[a,i,j]),te=_.useCallback(H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),se())},[se]),V=_.useCallback(()=>{L("File upload feature coming soon")},[]);_.useEffect(()=>()=>{O.current&&clearTimeout(O.current)},[]);const W=H=>{const ee=new Date(H),be=new Date().getTime()-ee.getTime(),ke=Math.floor(be/6e4);if(ke<1)return"Just now";if(ke<60)return`${ke} min ago`;const De=Math.floor(ke/60);return De<24?`${De} hour${De>1?"s":""} ago`:ee.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},X=H=>{const ee=H.split(" ");return ee.length>=2?`${ee[0][0]}${ee[1][0]}`.toUpperCase():H.substring(0,2).toUpperCase()};return r?e.jsxs(e.Fragment,{children:[!m&&e.jsxs("button",{onClick:K,className:"fixed bottom-6 right-6 z-50 w-16 h-16 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group focus:outline-none focus:ring-4 focus:ring-blue-100","aria-label":"Open chat widget",children:[e.jsx(zt,{className:"w-7 h-7"}),y>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center border-2 border-white",children:y>9?"9+":y}),y>0&&e.jsx("span",{className:"absolute inset-0 rounded-full bg-blue-600 animate-ping opacity-20"})]}),m&&e.jsxs("div",{className:`fixed z-50 shadow-2xl border border-gray-200 bg-white transition-all duration-300 ${x?"bottom-6 right-6 w-80 h-14":"bottom-6 right-6 w-full sm:w-96 h-[32rem] sm:h-[600px] max-h-[90vh]"} rounded-xl overflow-hidden flex flex-col sm:max-w-md`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:M?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[M.avatar_url?e.jsx("img",{src:M.avatar_url,alt:M.name,className:"w-10 h-10 rounded-full border-2 border-white"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center",children:e.jsx(Xt,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${M.status==="online"?"bg-green-500":M.status==="away"?"bg-yellow-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm truncate",children:M.name}),e.jsx("p",{className:"text-xs text-blue-100 truncate",children:M.status==="online"?"Online now":M.status==="away"?"Away":"Offline"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-8 h-8 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Live Chat"}),e.jsx("p",{className:"text-xs text-blue-100",children:o==="customer_support"?"Support Team":o==="customer_supplier"?"Supplier Chat":"Chat Support"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:`w-2 h-2 rounded-full ${f==="connected"?"bg-green-400":f==="connecting"?"bg-yellow-400 animate-pulse":"bg-red-400"}`})}),!x&&e.jsx("button",{onClick:q,className:"p-1 hover:bg-blue-700 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Minimize chat",children:e.jsx(_m,{className:"w-5 h-5"})}),e.jsx("button",{onClick:U,className:"p-1 hover:bg-blue-700 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Close chat",children:e.jsx(ge,{className:"w-5 h-5"})})]})]}),x&&e.jsxs("button",{onClick:z,className:"flex-1 flex items-center justify-between px-4 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Click to restore chat"}),y>0&&e.jsx("span",{className:"bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:y})]}),!x&&e.jsxs(e.Fragment,{children:[E&&!i&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 bg-gray-50",children:[e.jsx(zt,{className:"w-16 h-16 text-blue-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How can we help?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6 text-center",children:"Choose who you'd like to chat with"}),e.jsxs("div",{className:"space-y-3 w-full",children:[e.jsx("button",{onClick:()=>Y("customer_support"),disabled:$.isPending,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 hover:border-blue-500 rounded-lg text-left transition-all duration-200 group disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:e.jsx(Xt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Customer Support"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Get help with your order or account"})]})]})}),(t==null?void 0:t.user_type)==="customer"&&e.jsx("button",{onClick:()=>Y("customer_supplier"),disabled:$.isPending,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 hover:border-blue-500 rounded-lg text-left transition-all duration-200 group disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center group-hover:bg-green-200 transition-colors",children:e.jsx(zt,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Contact Supplier"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ask about products or orders"})]})]})})]}),$.isPending&&e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Starting conversation..."})]}),i&&e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-4 space-y-4",children:S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(zt,{className:"w-12 h-12 text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Start the conversation!"})]}):e.jsxs(e.Fragment,{children:[c.map(H=>{const ee=H.sender_id===(t==null?void 0:t.user_id),ue=!ee;return e.jsxs("div",{className:`flex ${ee?"justify-end":"justify-start"} items-end space-x-2`,children:[ue&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-semibold text-gray-700",children:X(H.sender_name)}),e.jsxs("div",{className:`max-w-[75%] ${ee?"order-first":""}`,children:[!ee&&e.jsx("p",{className:"text-xs text-gray-500 mb-1 ml-1",children:H.sender_name}),e.jsxs("div",{className:`px-4 py-2 rounded-lg ${ee?"bg-blue-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-900 rounded-bl-none"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:H.message_text}),H.attachments&&H.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:H.attachments.map((be,ke)=>e.jsxs("a",{href:be,target:"_blank",rel:"noopener noreferrer",className:`flex items-center space-x-2 text-xs ${ee?"text-blue-100":"text-blue-600"} hover:underline`,children:[e.jsx($a,{className:"w-3 h-3"}),e.jsxs("span",{children:["Attachment ",ke+1]})]},ke))})]}),e.jsxs("div",{className:`flex items-center space-x-2 mt-1 ${ee?"justify-end":"justify-start"} ml-1`,children:[e.jsx("p",{className:"text-xs text-gray-400",children:W(H.timestamp)}),ee&&H.is_read&&e.jsx("span",{className:"text-xs text-gray-400",children:""})]})]})]},H.message_id)}),w&&e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-semibold text-gray-700",children:X(w.user_name)}),e.jsx("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-lg rounded-bl-none",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:N})]})}),A&&e.jsx("div",{className:"px-4 py-2 bg-red-50 border-t border-red-200",children:e.jsx("p",{className:"text-xs text-red-700",children:A})}),f==="disconnected"&&i&&e.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-t border-yellow-200",children:e.jsx("p",{className:"text-xs text-yellow-700",children:" Disconnected - Reconnecting..."})}),i&&e.jsxs("div",{className:"border-t border-gray-200 bg-white p-4",children:[e.jsxs("form",{onSubmit:se,className:"flex items-end space-x-2",children:[e.jsx("button",{type:"button",onClick:V,className:"flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Attach file",title:"Attach file (coming soon)",children:e.jsx($a,{className:"w-5 h-5"})}),e.jsx("textarea",{ref:R,value:b,onChange:J,onKeyPress:te,placeholder:"Type your message...",rows:1,className:"flex-1 resize-none px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-sm",style:{minHeight:"40px",maxHeight:"120px"}}),e.jsx("button",{type:"submit",disabled:!b.trim()||I.isPending,className:"flex-shrink-0 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Send message",children:I.isPending?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(km,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})]})]})]}):null},R1=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/products",{params:{is_featured:"true",status:"active",limit:12,sort_by:"sales_count",sort_order:"desc"}})).data.products,D1=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:"true",limit:100,sort_by:"display_order",sort_order:"asc"}})).data,L1=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers",{params:{verification_status:"verified",status:"active",limit:12,sort_by:"rating_average",sort_order:"desc"}})).data,I1=()=>{const t=ze(),s=re(x=>x.authentication_state.authentication_status.is_authenticated),r=re(x=>x.authentication_state.authentication_status.user_type),a=re(x=>x.authentication_state.authentication_status.is_loading);_.useEffect(()=>{!a&&s&&(r==="customer"?t("/dashboard",{replace:!0}):r==="supplier"?t("/supplier/dashboard",{replace:!0}):r==="admin"&&t("/admin",{replace:!0}))},[s,r,a,t]);const{data:n=[],isLoading:i}=ne({queryKey:["featured-products"],queryFn:R1,staleTime:5*60*1e3}),{data:l=[],isLoading:o}=ne({queryKey:["featured-categories"],queryFn:D1,staleTime:30*60*1e3}),{data:d,isLoading:c}=ne({queryKey:["featured-suppliers"],queryFn:L1,staleTime:10*60*1e3}),u=(d==null?void 0:d.suppliers)||[],h={total_suppliers:(d==null?void 0:d.total)||0,total_products:n.length>0?1e4:0,total_reviews:u.reduce((x,p)=>x+p.total_reviews,0)};return s&&!a?null:e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"relative bg-gradient-to-br from-blue-50 via-white to-indigo-50 overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:["Your Complete ",e.jsx("span",{className:"text-blue-600",children:"Construction Supply"})," Marketplace"]}),e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Order from 100+ verified suppliers. Compare prices instantly. Track every delivery in real-time."})]}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Real-time Inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Transparent Pricing"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Verified Suppliers"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(Q,{to:"/register",className:"inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:["Sign Up Free",e.jsx(ls,{className:"ml-2 w-5 h-5"})]}),e.jsx(Q,{to:"/products",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-gray-900 font-semibold rounded-lg border-2 border-gray-300 hover:border-blue-500 hover:shadow-lg transition-all duration-200",children:"Browse Products"})]}),!a&&e.jsxs("div",{className:"flex flex-wrap gap-6 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[h.total_suppliers,"+ Suppliers"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[h.total_products.toLocaleString(),"+ Products"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"font-medium",children:[h.total_reviews.toLocaleString(),"+ Reviews"]})]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-3xl transform rotate-3 opacity-10"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Search & Compare"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Find the best prices instantly"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Order Online"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Secure checkout in minutes"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Track Delivery"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Real-time GPS tracking"})]})]})]})]})})]})})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"How BuildEasy Works"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Simple, transparent, and reliable construction supply ordering in 3 easy steps"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"w-10 h-10 text-blue-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full text-sm font-bold",children:"1"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Search & Compare"}),e.jsx("p",{className:"text-gray-600",children:"Browse thousands of construction materials from verified suppliers. Compare prices, stock levels, and delivery times in one place."})]})]}),e.jsx("div",{className:"hidden md:block absolute top-10 right-0 transform translate-x-1/2",children:e.jsx(Ie,{className:"w-8 h-8 text-gray-300"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-10 h-10 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-600 text-white rounded-full text-sm font-bold",children:"2"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Order Online"}),e.jsx("p",{className:"text-gray-600",children:"Add items to cart, select your delivery window, and complete secure checkout. Get instant confirmation and order tracking."})]})]}),e.jsx("div",{className:"hidden md:block absolute top-10 right-0 transform translate-x-1/2",children:e.jsx(Ie,{className:"w-8 h-8 text-gray-300"})})]}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"w-10 h-10 text-purple-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-purple-600 text-white rounded-full text-sm font-bold",children:"3"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Track & Receive"}),e.jsx("p",{className:"text-gray-600",children:"Get real-time delivery tracking with GPS. Know exactly when your materials will arrive at your job site."})]})]})]})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Shop by Category"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Browse our complete range of construction materials"})]}),o?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6",children:[...Array(8)].map((x,p)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})]},p))}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6",children:l.slice(0,8).map(x=>e.jsx(Q,{to:`/products?category=${x.category_id}`,className:"group bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:e.jsx(ve,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center group-hover:text-blue-600 transition-colors",children:x.category_name})]})},x.category_id))}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(Q,{to:"/products",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold text-lg",children:["View All Categories",e.jsx(Ie,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Featured Products"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Top-rated materials from our verified suppliers"})]}),i?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((x,p)=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"})]})]},p))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:n.slice(0,8).map(x=>e.jsxs(Q,{to:`/product/${x.product_id}`,className:"group bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-xl hover:border-blue-300 transition-all duration-200",children:[e.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:x.primary_image_url?e.jsx("img",{src:x.primary_image_url,alt:x.product_name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-200",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:e.jsx(ve,{className:"w-16 h-16 text-gray-400"})})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-600 transition-colors",children:x.product_name}),e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",Number(x.price_per_unit).toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["per ",x.unit_of_measure]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[x.stock_quantity>0?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"In Stock"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Out of Stock"}),x.rating_average&&e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(5)].map((p,b)=>e.jsx(Oe,{className:`w-4 h-4 ${b<Math.floor(Number(x.rating_average))?"text-yellow-400 fill-current":"text-gray-300"}`},b)),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:Number(x.rating_average).toFixed(1)})]})]}),x.business_name&&e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:["by ",x.business_name]})]})]},x.product_id))}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-8 py-4 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors duration-200",children:["View All Products",e.jsx(Ie,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose BuildEasy?"}),e.jsx("p",{className:"text-xl text-gray-600",children:"The smarter way to source construction materials"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-lg flex items-center justify-center mb-6",children:e.jsx(He,{className:"w-7 h-7 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Real-Time Inventory"}),e.jsx("p",{className:"text-gray-600",children:"See exact stock levels updated in real-time. No more calling suppliers or ordering unavailable items."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-lg flex items-center justify-center mb-6",children:e.jsx(Te,{className:"w-7 h-7 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Transparent Pricing"}),e.jsx("p",{className:"text-gray-600",children:"Compare prices across multiple suppliers instantly. Always know you're getting the best deal."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-lg flex items-center justify-center mb-6",children:e.jsx(kt,{className:"w-7 h-7 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Reliable Delivery"}),e.jsx("p",{className:"text-gray-600",children:"Schedule delivery windows that work for you. Track your order with live GPS updates."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 bg-yellow-100 rounded-lg flex items-center justify-center mb-6",children:e.jsx(Mt,{className:"w-7 h-7 text-yellow-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Verified Suppliers"}),e.jsx("p",{className:"text-gray-600",children:"All suppliers are thoroughly vetted and verified. Read real reviews from contractors like you."})]})]})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Trusted Suppliers"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Verified construction supply businesses you can rely on"})]}),c?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((x,p)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mx-auto"})]},p))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:u.slice(0,8).map(x=>e.jsx(Q,{to:`/supplier/${x.supplier_id}`,className:"group bg-white rounded-xl p-6 shadow-lg hover:shadow-2xl transition-all duration-200 border border-gray-100 hover:border-blue-300",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full overflow-hidden flex items-center justify-center",children:x.logo_url?e.jsx("img",{src:x.logo_url,alt:x.business_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-12 h-12 text-gray-400 flex items-center justify-center",children:e.jsx(Mt,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:x.business_name}),e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[[...Array(5)].map((p,b)=>e.jsx(Oe,{className:`w-4 h-4 ${b<Math.floor(Number(x.rating_average))?"text-yellow-400 fill-current":"text-gray-300"}`},b)),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:Number(x.rating_average).toFixed(1)})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.total_reviews," reviews"]}),x.verification_status==="verified"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]})},x.supplier_id))}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-8 py-4 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors duration-200",children:["Explore All Suppliers",e.jsx(Ie,{className:"ml-2 w-5 h-5"})]})})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-r from-blue-600 to-indigo-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-white mb-6 leading-tight",children:"Ready to Transform Your Supply Ordering?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Join thousands of contractors saving time and money with BuildEasy"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(Q,{to:"/register",className:"inline-flex items-center justify-center px-10 py-5 bg-white text-blue-600 font-bold rounded-lg shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-200 text-lg",children:["Get Started Free",e.jsx(ls,{className:"ml-3 w-6 h-6"})]}),e.jsx(Q,{to:"/how-it-works",className:"inline-flex items-center justify-center px-10 py-5 bg-blue-500 text-white font-bold rounded-lg border-2 border-white hover:bg-blue-400 transition-all duration-200 text-lg",children:"Learn More"})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-8 text-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{children:"No credit card required"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{children:"Free to join"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancel anytime"})]})]})]})})]})},q1=async t=>{const s=new URLSearchParams;return Object.keys(t).forEach(a=>{t[a]!==null&&t[a]!==void 0&&t[a]!==""&&s.append(a,String(t[a]))}),(await G.get(`/products?${s.toString()}`)).data},B1=async()=>(await G.get("/categories?is_active=true&limit=100")).data,U1=()=>{var D;const t=re(S=>S.authentication_state.authentication_status.is_authenticated),s=re(S=>S.search_state.comparison_products),r=re(S=>S.add_to_comparison),a=re(S=>S.remove_from_comparison),n=re(S=>S.clear_comparison),[i,l]=Fe(),[o,d]=_.useState(!1),c=_.useMemo(()=>({search_query:i.get("search_query")||null,category:i.get("category")||null,price_min:i.get("price_min")?Number(i.get("price_min")):null,price_max:i.get("price_max")?Number(i.get("price_max")):null,in_stock_only:i.get("in_stock_only")==="true"?!0:null,supplier_rating_min:i.get("supplier_rating_min")?Number(i.get("supplier_rating_min")):null,brands:i.get("brands")?i.get("brands").split(","):null,deals_only:i.get("deals_only")==="true"?!0:null}),[i]),u=_.useMemo(()=>({sort_by:i.get("sort_by")||"created_at",sort_order:i.get("sort_order")||"desc"}),[i]),m=_.useMemo(()=>{const S=i.get("page");return S?Number(S):1},[i]),h=_.useMemo(()=>i.get("view_mode")||"grid",[i]),{data:x,isLoading:p,error:b}=ne({queryKey:["products",c,u,m],queryFn:()=>{var S;return q1({search_query:c.search_query,category:c.category,price_min:c.price_min,price_max:c.price_max,in_stock_only:c.in_stock_only===!0?"true":void 0,supplier_rating_min:c.supplier_rating_min,brands:(S=c.brands)==null?void 0:S.join(","),deals_only:c.deals_only===!0?"true":void 0,status:"active",limit:24,offset:(m-1)*24,sort_by:u.sort_by,sort_order:u.sort_order})},staleTime:3e4,placeholderData:S=>S}),{data:v=[],isLoading:j}=ne({queryKey:["categories"],queryFn:B1,staleTime:3e5}),P=_.useMemo(()=>{if(!(x!=null&&x.products))return[];const S=new Set;return x.products.forEach($=>{$.brand&&S.add($.brand)}),Array.from(S).sort()},[x]),w=_.useMemo(()=>x?Math.ceil(x.total/24):0,[x]),C=S=>{const $=new URLSearchParams(i);Object.keys(S).forEach(I=>{S[I]===null||S[I]===void 0||S[I]===""?$.delete(I):Array.isArray(S[I])?$.set(I,S[I].join(",")):$.set(I,String(S[I]))}),$.set("page","1"),l($)},f=S=>{C({search_query:S})},k=S=>{C({category:S})},y=(S,$)=>{C({price_min:S,price_max:$})},F=S=>{C({in_stock_only:S?"true":null})},M=(S,$)=>{const I=c.brands||[],K=$?[...I,S]:I.filter(U=>U!==S);C({brands:K.length>0?K:null})},E=S=>{C({supplier_rating_min:S})},B=S=>{C({deals_only:S?"true":null})},A=S=>{const $=new URLSearchParams(i);$.set("sort_by",S);const I=S==="price_per_unit"?"asc":"desc";$.set("sort_order",I),l($)},L=S=>{const $=new URLSearchParams(i);$.set("view_mode",S),l($)},N=S=>{const $=new URLSearchParams(i);$.set("page",String(S)),l($),window.scrollTo({top:0,behavior:"smooth"})},R=()=>{l(new URLSearchParams)},O=S=>{const $=new URLSearchParams(i);$.delete(S),$.set("page","1"),l($)},T=(S,$)=>{if($){if(s.length>=5){alert("You can compare up to 5 products");return}r(S)}else a(S)},g=_.useMemo(()=>{let S=0;return c.search_query&&S++,c.category&&S++,(c.price_min||c.price_max)&&S++,c.in_stock_only&&S++,c.supplier_rating_min&&S++,c.brands&&c.brands.length>0&&(S+=c.brands.length),c.deals_only&&S++,S},[c]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search construction materials...",value:c.search_query||"",onChange:S=>f(S.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),c.search_query&&e.jsx("button",{onClick:()=>f(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"size-5"})})]})}),e.jsxs("div",{className:"hidden lg:flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>L("grid"),className:`p-2 rounded transition-all ${h==="grid"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsx($l,{className:"size-5"})}),e.jsx("button",{onClick:()=>L("list"),className:`p-2 rounded transition-all ${h==="list"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(sb,{className:"size-5"})})]}),e.jsxs("select",{value:u.sort_by,onChange:S=>A(S.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"created_at",children:"Newest First"}),e.jsx("option",{value:"price_per_unit",children:"Price: Low to High"}),e.jsx("option",{value:"sales_count",children:"Most Popular"}),e.jsx("option",{value:"product_name",children:"Name: A to Z"})]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(rb,{className:"size-5"}),"Filters",g>0&&e.jsx("span",{className:"bg-white text-blue-600 px-2 py-0.5 rounded-full text-xs font-bold",children:g})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-80 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden sticky top-24",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Filters"}),g>0&&e.jsx("button",{onClick:R,className:"text-white/90 hover:text-white text-sm font-medium underline",children:"Clear All"})]})}),g>0&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.search_query&&e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm",children:[e.jsxs("span",{children:['"',c.search_query,'"']}),e.jsx("button",{onClick:()=>O("search_query"),children:e.jsx(ge,{className:"size-4"})})]}),c.category&&e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:"Category"}),e.jsx("button",{onClick:()=>O("category"),children:e.jsx(ge,{className:"size-4"})})]}),(c.price_min||c.price_max)&&e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm",children:[e.jsxs("span",{children:["$",c.price_min||0," - $",c.price_max||""]}),e.jsx("button",{onClick:()=>y(null,null),children:e.jsx(ge,{className:"size-4"})})]}),c.in_stock_only&&e.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:"In Stock"}),e.jsx("button",{onClick:()=>F(!1),children:e.jsx(ge,{className:"size-4"})})]}),(D=c.brands)==null?void 0:D.map(S=>e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:S}),e.jsx("button",{onClick:()=>M(S,!1),children:e.jsx(ge,{className:"size-4"})})]},S))]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Category"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:j?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading categories..."}):v.map(S=>e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"category",checked:c.category===S.category_id,onChange:$=>k($.target.checked?S.category_id:null),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:S.category_name})]},S.category_id))}),c.category&&e.jsx("button",{onClick:()=>k(null),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear category"})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Price Range"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:c.price_min||"",onChange:S=>y(S.target.value?Number(S.target.value):null,c.price_max),className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100"}),e.jsx("input",{type:"number",placeholder:"Max",value:c.price_max||"",onChange:S=>y(c.price_min,S.target.value?Number(S.target.value):null),className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:c.in_stock_only===!0,onChange:S=>F(S.target.checked),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"In Stock Only"})]})}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Supplier Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map(S=>e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"rating",checked:c.supplier_rating_min===S,onChange:$=>E($.target.checked?S:null),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900 flex items-center gap-1",children:[S,"+ ",e.jsx(Oe,{className:"size-4 fill-amber-400 text-amber-400"})]})]},S))}),c.supplier_rating_min&&e.jsx("button",{onClick:()=>E(null),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear rating"})]}),P.length>0&&e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Brands"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:P.map(S=>{var $;return e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:(($=c.brands)==null?void 0:$.includes(S))||!1,onChange:I=>M(S,I.target.checked),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:S})]},S)})})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:c.deals_only===!0,onChange:S=>B(S.target.checked),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"On Sale Only"})]})})]})]})}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>d(!1)}),e.jsx("div",{className:"fixed inset-y-0 right-0 w-full max-w-sm bg-white shadow-xl",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Filters"}),e.jsx("button",{onClick:()=>d(!1),className:"text-white hover:text-white/80",children:e.jsx(ge,{className:"size-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{R(),d(!1)},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium",children:"Clear All Filters"})})}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsxs("button",{onClick:()=>d(!1),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:["View ",(x==null?void 0:x.total)??0," Results"]})})]})})]}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.search_query?e.jsxs(e.Fragment,{children:['Results for "',c.search_query,'"']}):c.category?e.jsx(e.Fragment,{children:"Products"}):e.jsx(e.Fragment,{children:"All Products"})}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x?`${x.total||0} products found`:"Loading..."})]}),e.jsx("div",{className:"flex lg:hidden items-center gap-2",children:e.jsxs("select",{value:u.sort_by,onChange:S=>A(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"created_at",children:"Newest"}),e.jsx("option",{value:"price_per_unit",children:"Price"}),e.jsx("option",{value:"sales_count",children:"Popular"})]})})]}),p&&e.jsx("div",{className:h==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:[...Array(6)].map((S,$)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},$))}),!p&&x&&x.products.length>0&&e.jsx("div",{className:h==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:x.products.map(S=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200 group",children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs("label",{className:"flex items-center gap-2 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-md cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.includes(S.product_id),onChange:$=>T(S.product_id,$.target.checked),className:"size-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Compare"})]})}),e.jsxs(Q,{to:`/product/${S.product_id}`,className:"block relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:S.primary_image_url?e.jsx("img",{src:S.primary_image_url,alt:S.product_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("span",{className:"text-sm",children:"No image"})})}),e.jsx("div",{className:"absolute top-3 left-3",children:S.stock_quantity>0?e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"In Stock"}):e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"Out of Stock"})})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx(Q,{to:`/product/${S.product_id}`,children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 hover:text-blue-600 transition-colors",children:S.product_name})}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",Number(S.price_per_unit||0).toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["per ",S.unit_of_measure]})]}),e.jsxs(Q,{to:`/supplier/${S.supplier_id}`,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx("span",{children:S.business_name||"Supplier"}),S.rating_average&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"size-4 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"font-medium",children:Number(S.rating_average).toFixed(1)})]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all font-medium flex items-center justify-center gap-2",children:[e.jsx(Be,{className:"size-5"}),"Add to Cart"]}),e.jsx("button",{className:"p-2 border-2 border-gray-200 rounded-lg hover:border-red-500 hover:text-red-500 transition-all",children:e.jsx(Di,{className:"size-5"})})]}):e.jsx(Q,{to:"/register",className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-all font-medium text-center border-2 border-gray-300",children:"Sign up to purchase"})})]})]},S.product_id))}),!p&&x&&x.products.length===0&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Xe,{className:"size-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or search terms"}),g>0&&e.jsx("button",{onClick:R,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:"Clear All Filters"})]})}),b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load products"}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please try again later"})]}),!p&&x&&w>1&&e.jsxs("div",{className:"mt-12 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>N(m-1),disabled:m===1,className:"p-2 border-2 border-gray-200 rounded-lg hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(Rt,{className:"size-5"})}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(Math.min(w,5))].map((S,$)=>{let I;return w<=5||m<=3?I=$+1:m>=w-2?I=w-4+$:I=m-2+$,e.jsx("button",{onClick:()=>N(I),className:`w-10 h-10 rounded-lg font-medium transition-all ${m===I?"bg-blue-600 text-white shadow-lg":"border-2 border-gray-200 text-gray-700 hover:border-blue-500"}`,children:I},I)})}),e.jsx("button",{onClick:()=>N(m+1),disabled:m===w,className:"p-2 border-2 border-gray-200 rounded-lg hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(Ie,{className:"size-5"})})]})]})]})}),s.length>0&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.length," products selected for comparison"]}),e.jsx("button",{onClick:n,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Clear all"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(Q,{to:`/compare?products=${s.join(",")}`,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-all shadow-lg hover:shadow-xl",children:"Compare Now"})})]})})})]})})},z1=async t=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${t}`)).data,W1=async t=>{const s=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/${t}`);return{supplier_id:s.data.supplier_id,business_name:s.data.business_name,logo_url:s.data.logo_url,rating_average:s.data.rating_average,total_reviews:s.data.total_reviews,verification_status:s.data.verification_status,member_since:s.data.member_since}},V1=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/reviews",{params:{product_id:t,status:"published",limit:50,sort_by:"helpful_votes",sort_order:"desc"}})).data,K1=()=>{var O,T;const{product_id:t}=ur(),s=ze(),[r,a]=_.useState(0),[n,i]=_.useState("description"),[l,o]=_.useState(!1),[d,c]=_.useState("purchase"),{data:u,isLoading:m,error:h}=ne({queryKey:["product",t],queryFn:()=>z1(t),enabled:!!t,staleTime:5*60*1e3,retry:1}),{data:x,isLoading:p}=ne({queryKey:["supplier",u==null?void 0:u.supplier_id],queryFn:()=>W1(u.supplier_id),enabled:!!(u!=null&&u.supplier_id),staleTime:10*60*1e3}),{data:b,isLoading:v}=ne({queryKey:["reviews",t],queryFn:()=>V1(t),enabled:!!t,staleTime:5*60*1e3}),j=(u==null?void 0:u.images)||(u!=null&&u.primary_image_url?[u.primary_image_url]:[]),P=j[r]||"/placeholder-product.jpg",w=((O=b==null?void 0:b.reviews)==null?void 0:O.slice(0,3))||[],C=((b==null?void 0:b.total)||0)>3,k=u?u.status==="out_of_stock"||u.stock_quantity===0?{status:"Out of Stock",color:"red",icon:ge}:u.stock_quantity<=u.low_stock_threshold?{status:"Low Stock",color:"amber",icon:ve}:{status:"In Stock",color:"green",icon:je}:{status:"",color:"gray",icon:null},F=(()=>{if(!(b!=null&&b.reviews))return{5:0,4:0,3:0,2:0,1:0};const g={5:0,4:0,3:0,2:0,1:0};return b.reviews.forEach(D=>{const S=D.rating_overall;g[S]++}),g})(),M=g=>{c(g),o(!0)},E=()=>{s("/register/customer")},B=()=>{a(g=>g>0?g-1:j.length-1)},A=()=>{a(g=>g<j.length-1?g+1:0)},L=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(g),N=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),R=(g,D="md")=>{const S={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map($=>e.jsx(Oe,{className:`${S[D]} ${$<=g?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},$))})};return m?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-200 rounded-xl h-96 lg:h-[600px]"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4].map(g=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-20 w-20"},g))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded-lg w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded-lg w-1/2"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded-lg w-1/3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})]})})})})}):h||!u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 text-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx(ve,{className:"h-16 w-16 mx-auto"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The product you're looking for doesn't exist or has been removed."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Browse All Products"})]})})})}):e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:e.jsx(Mt,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:[d==="zoom"&&"Sign Up to Zoom Images",d==="contact"&&"Sign Up to Contact Supplier",d==="reviews"&&"Sign Up to Read All Reviews",d==="purchase"&&"Sign Up to Purchase"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create a free account to unlock all features and start shopping."}),e.jsxs("div",{className:"space-y-3 mb-6 text-left",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:"See exact stock levels and availability"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Real-time delivery tracking"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Secure checkout and order history"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Contact suppliers directly"})]})]}),e.jsx("button",{onClick:E,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 mb-3 shadow-lg hover:shadow-xl",children:"Create Free Account"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Maybe later"})]})})}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("li",{children:e.jsx(Q,{to:"/",className:"text-gray-500 hover:text-gray-700",children:"Home"})}),e.jsx("li",{className:"text-gray-400",children:"/"}),e.jsx("li",{children:e.jsx(Q,{to:"/products",className:"text-gray-500 hover:text-gray-700",children:"Products"})}),e.jsx("li",{className:"text-gray-400",children:"/"}),e.jsx("li",{className:"text-gray-900 font-medium truncate",children:u.product_name})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"relative bg-gray-100 rounded-xl overflow-hidden mb-4 group",children:[e.jsx("img",{src:P,alt:u.product_name,className:"w-full h-auto object-contain",style:{maxHeight:"600px"}}),e.jsx("div",{className:"absolute inset-0 bg-transparent cursor-pointer group-hover:bg-black group-hover:bg-opacity-10 transition-all duration-200 flex items-center justify-center",onClick:()=>M("zoom"),title:"Sign up to zoom",children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2",children:[e.jsx(ab,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Sign up to zoom"})]})}),j.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:B,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 shadow-lg transition-all duration-200","aria-label":"Previous image",children:e.jsx(Rt,{className:"h-6 w-6 text-gray-700"})}),e.jsx("button",{onClick:A,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 shadow-lg transition-all duration-200","aria-label":"Next image",children:e.jsx(Ie,{className:"h-6 w-6 text-gray-700"})})]})]}),j.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:j.slice(0,8).map((g,D)=>e.jsx("button",{onClick:()=>a(D),className:`flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all duration-200 ${r===D?"border-blue-600 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:g,alt:`${u.product_name} view ${D+1}`,className:"h-20 w-20 object-cover"})},D))})]}),e.jsxs("div",{className:"p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2 leading-tight",children:u.product_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",u.sku]})]}),e.jsxs("div",{className:"border-t border-b border-gray-200 py-6",children:[e.jsxs("div",{className:"flex items-baseline space-x-3",children:[e.jsx("span",{className:"text-4xl font-bold text-blue-600",children:L(u.price_per_unit)}),e.jsxs("span",{className:"text-lg text-gray-600",children:["per ",u.unit_of_measure]})]}),u.bulk_pricing&&Object.keys(u.bulk_pricing).length>0&&e.jsx("div",{className:"mt-3",children:e.jsxs("button",{onClick:()=>M("purchase"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1",children:[e.jsx("span",{children:"Volume pricing available"}),e.jsx(Ie,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg bg-${k.color}-50 border border-${k.color}-200`,children:[k.icon&&e.jsx(k.icon,{className:`h-5 w-5 text-${k.color}-600`}),e.jsx("span",{className:`font-semibold text-${k.color}-700`,children:k.status})]}),e.jsx("button",{onClick:()=>M("purchase"),className:"text-sm text-gray-500 hover:text-gray-700",children:"Sign up to see exact quantity"})]}),x&&!p&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[x.logo_url?e.jsx("img",{src:x.logo_url,alt:x.business_name,className:"h-16 w-16 rounded-full object-cover border-2 border-white shadow-md"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:x.business_name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{to:`/supplier/${x.supplier_id}`,className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:x.business_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[R(x.rating_average,"sm"),e.jsxs("span",{className:"text-sm text-gray-600",children:[Number(x.rating_average).toFixed(1)," (",x.total_reviews," reviews)"]})]})]}),x.verification_status==="verified"&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(Mt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Verified"})]})]}),e.jsx("button",{onClick:()=>M("contact"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded-lg font-medium transition-all duration-200 border border-gray-300",children:"Sign Up to Contact Supplier"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[e.jsx("button",{onClick:()=>M("purchase"),className:"w-full bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl mb-4",children:"Sign Up to Purchase"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"See exact stock levels"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Real-time delivery tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Secure checkout"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(kt,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Delivery Information"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Estimated delivery: ",e.jsx("span",{className:"font-medium text-gray-900",children:"2-5 business days"})]}),e.jsx("button",{onClick:()=>M("purchase"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Sign up to see exact delivery windows "})]})]})]}),e.jsxs("div",{className:"mt-12 bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px",children:["description","specifications","reviews"].map(g=>e.jsx("button",{onClick:()=>i(g),className:`flex-1 py-4 px-6 text-center font-medium capitalize transition-colors ${n===g?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900 hover:border-b-2 hover:border-gray-300"}`,children:g},g))})}),e.jsxs("div",{className:"p-6 lg:p-8",children:[n==="description"&&e.jsxs("div",{className:"space-y-6",children:[u.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Product Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:u.description})]}),u.key_features&&u.key_features.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Key Features"}),e.jsx("ul",{className:"space-y-2",children:u.key_features.map((g,D)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:g})]},D))})]}),u.warranty_information&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Mt,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Warranty"}),e.jsx("p",{className:"text-sm text-blue-800",children:u.warranty_information})]})]})})]}),n==="specifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Product Specifications"}),u.specifications&&Object.keys(u.specifications).length>0?e.jsx("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.entries(u.specifications).map(([g,D])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 capitalize bg-gray-50",children:g.replace(/_/g," ")}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:typeof D=="object"?JSON.stringify(D):String(D)})]},g))})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No specifications available"}),(u.brand||u.weight||u.dimensions)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[u.brand&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Brand"}),e.jsx("p",{className:"font-semibold text-gray-900",children:u.brand})]}),u.weight&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weight"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[u.weight," lbs"]})]}),u.dimensions&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dimensions"}),e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:JSON.stringify(u.dimensions)})]})]})]}),n==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[b&&e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:((T=b.average_rating)==null?void 0:T.toFixed(1))||"0.0"}),R(b.average_rating||0,"lg"),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[b.total||0," reviews"]})]}),e.jsx("div",{className:"flex-1 space-y-2",children:[5,4,3,2,1].map(g=>{const D=F[g]||0,S=b.total>0?D/b.total*100:0;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[g," star"]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-yellow-400 h-full rounded-full transition-all duration-300",style:{width:`${S}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-12 text-right",children:D})]},g)})})]})}),v?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsx("div",{className:"animate-pulse bg-gray-100 rounded-lg p-6 h-32"},g))}):w.length>0?e.jsxs("div",{className:"space-y-4",children:[w.map(g=>e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[R(g.rating_overall,"sm"),g.verified_purchase&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-green-100 text-green-800 text-xs font-medium",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Verified Purchase"]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:N(g.review_date)})]}),g.review_text&&e.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:g.review_text}),g.photos&&g.photos.length>0&&e.jsx("div",{className:"flex space-x-2 mt-4",children:g.photos.slice(0,3).map((D,S)=>e.jsx("img",{src:D,alt:`Review photo ${S+1}`,className:"h-20 w-20 object-cover rounded-lg border border-gray-200"},S))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[g.helpful_votes," people found this helpful"]})})]},g.review_id)),C&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"filter blur-sm pointer-events-none space-y-4 mb-4",children:[1,2].map(g=>e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-3",children:R(4,"sm")}),e.jsx("p",{className:"text-gray-700",children:"This is a placeholder for additional reviews that are gated for guests..."})]},g))}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-t from-white via-white/95 to-transparent",children:e.jsxs("div",{className:"text-center bg-white rounded-xl shadow-2xl p-8 max-w-md border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:[b.total-3," More Reviews"]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Sign up to read all ",b.total," customer reviews"]}),e.jsx("button",{onClick:()=>M("reviews"),className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl w-full",children:"Create Free Account"})]})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"No reviews yet"}),e.jsx("button",{onClick:()=>M("purchase"),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Be the first to review (Sign up required)"})]})]})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Similar Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.jsxs("div",{className:"text-center py-12 col-span-full",children:[e.jsx("p",{className:"text-gray-500",children:"Related products will appear here"}),e.jsx(Q,{to:"/products",className:"inline-block mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Browse All Products "})]})})]})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg z-40",children:e.jsxs("button",{onClick:()=>M("purchase"),className:"w-full bg-blue-600 text-white px-6 py-4 rounded-lg font-bold hover:bg-blue-700 transition-all duration-200 shadow-lg",children:["Sign Up to Purchase - ",L(u.price_per_unit)]})})]})},Cr="https://123create-construction-app-with-a.launchpulse.ai/api",H1=async(t,s)=>{const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),(await G.get(`${Cr}/products/${t}`,{headers:r})).data},Y1=async(t,s)=>{const r={"Content-Type":"application/json"};return s&&(r.Authorization=`Bearer ${s}`),(await G.get(`${Cr}/suppliers/${t}`,{headers:r})).data},G1=async(t,s,r,a,n)=>{const i={product_id:t,status:"published",limit:10,offset:(s-1)*10,sort_by:n,sort_order:"desc"};return r&&(i.min_rating=r),a&&(i.verified_purchase=!0),(await G.get(`${Cr}/reviews`,{params:i})).data},Q1=async(t,s)=>(await G.get(`${Cr}/wishlist`,{headers:{Authorization:`Bearer ${s}`}})).data.some(n=>n.product_id===t),X1=async(t,s,r)=>(await G.post(`${Cr}/cart/items`,{product_id:t,quantity:s},{headers:{Authorization:`Bearer ${r}`}})).data,J1=async(t,s,r)=>(await G.post(`${Cr}/wishlist`,{product_id:t,price_when_saved:s,price_drop_alert_enabled:!0,back_in_stock_alert_enabled:!0},{headers:{Authorization:`Bearer ${r}`}})).data,Z1=async(t,s)=>(await G.delete(`${Cr}/wishlist/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,e6=()=>{var V,W;const{product_id:t}=ur(),s=Pe(),r=re(X=>X.authentication_state.auth_token),a=re(X=>X.fetch_cart),n=re(X=>X.cart_state.items),[i,l]=_.useState("description"),[o,d]=_.useState(0),[c,u]=_.useState(!1),[m,h]=_.useState(1),[x,p]=_.useState(1),[b,v]=_.useState({rating:null,verified_only:!1}),[j,P]=_.useState("review_date"),[w,C]=_.useState({stock_quantity:null,last_updated:null,websocket_connected:!1}),{data:f,isLoading:k,error:y}=ne({queryKey:["product",t],queryFn:()=>H1(t,r),enabled:!!t,staleTime:2*60*1e3}),{data:F}=ne({queryKey:["supplier",f==null?void 0:f.supplier_id],queryFn:()=>Y1(f.supplier_id,r),enabled:!!(f!=null&&f.supplier_id),staleTime:5*60*1e3}),{data:M=!1,refetch:E}=ne({queryKey:["wishlist-status",t],queryFn:()=>Q1(t,r),enabled:!!t&&!!r,staleTime:1*60*1e3}),{data:B,isLoading:A}=ne({queryKey:["reviews",t,x,b.rating,b.verified_only,j],queryFn:()=>G1(t,x,b.rating,b.verified_only,j),enabled:!!t&&i==="reviews",staleTime:2*60*1e3}),L=n.some(X=>X.product_id===t),N=((V=n.find(X=>X.product_id===t))==null?void 0:V.quantity)||0,R=oe({mutationFn:X=>X1(t,X,r),onSuccess:()=>{a(),s.invalidateQueries({queryKey:["cart"]}),alert("Added to cart successfully!")},onError:X=>{var H,ee;alert(((ee=(H=X.response)==null?void 0:H.data)==null?void 0:ee.message)||"Failed to add to cart")}}),O=oe({mutationFn:()=>J1(t,f.price_per_unit,r),onSuccess:()=>{E(),alert("Added to wishlist!")},onError:X=>{var H,ee;alert(((ee=(H=X.response)==null?void 0:H.data)==null?void 0:ee.message)||"Failed to add to wishlist")}}),T=oe({mutationFn:async()=>{const H=(await G.get(`${Cr}/wishlist`,{headers:{Authorization:`Bearer ${r}`}})).data.find(ee=>ee.product_id===t);if(H)return Z1(H.wishlist_item_id,r)},onSuccess:()=>{E(),alert("Removed from wishlist")}});_.useEffect(()=>{if(!t||!r)return;const H=Wn("ws://localhost:3000",{auth:{token:r}});return H.on("connect",()=>{C(ee=>({...ee,websocket_connected:!0})),H.emit("subscribe_product",{product_id:t})}),H.on("inventory_update",ee=>{ee.product_id===t&&C({stock_quantity:ee.stock_quantity,last_updated:ee.last_updated_timestamp,websocket_connected:!0})}),H.on("disconnect",()=>{C(ee=>({...ee,websocket_connected:!1}))}),()=>{H.emit("unsubscribe_product",{product_id:t}),H.disconnect()}},[t,r]);const g=()=>{if(!f)return;if(m<f.minimum_order_quantity){alert(`Minimum order quantity is ${f.minimum_order_quantity}`);return}const X=w.stock_quantity??f.stock_quantity;if(m>X){alert(`Only ${X} units available`);return}R.mutate(m)},D=()=>{M?T.mutate():O.mutate()},S=X=>{const H=m+X;if(H>=1){const ee=(f==null?void 0:f.maximum_order_quantity)||(w.stock_quantity??(f==null?void 0:f.stock_quantity))||999;h(Math.min(H,ee))}},$=X=>{d(X)},I=()=>{u(!0)},K=()=>{u(!1)},U=()=>{f!=null&&f.images&&d(X=>X===0?f.images.length-1:X-1)},q=()=>{f!=null&&f.images&&d(X=>X===f.images.length-1?0:X+1)},z=w.stock_quantity??(f==null?void 0:f.stock_quantity)??0,Y=z===0?"out_of_stock":z<=((f==null?void 0:f.low_stock_threshold)||10)?"low_stock":"in_stock",se=()=>f!=null&&f.bulk_pricing?Object.entries(f.bulk_pricing).sort((H,ee)=>parseInt(H[0])-parseInt(ee[0])):null,J=()=>{if(!f)return 0;const X=se();if(!X)return f.price_per_unit;for(let H=X.length-1;H>=0;H--){const[ee,ue]=X[H];if(m>=parseInt(ee))return ue}return f.price_per_unit};if(k)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading product details..."})]})})});if(y||!f)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-lg text-center",children:[e.jsx(de,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),e.jsx(Q,{to:"/products",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Browse Products"})]})})});const te=((W=f.images)==null?void 0:W[o])||f.primary_image_url;return e.jsxs(e.Fragment,{children:[c&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:[e.jsx("button",{onClick:K,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors","aria-label":"Close",children:e.jsx(ge,{className:"h-8 w-8"})}),e.jsx("button",{onClick:U,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors","aria-label":"Previous image",children:e.jsx(Rt,{className:"h-12 w-12"})}),e.jsx("img",{src:te||"",alt:f.product_name,className:"max-w-full max-h-[90vh] object-contain"}),e.jsx("button",{onClick:q,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors","aria-label":"Next image",children:e.jsx(Ie,{className:"h-12 w-12"})}),f.images&&f.images.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 bg-black bg-opacity-50 p-2 rounded-lg",children:f.images.map((X,H)=>e.jsx("button",{onClick:()=>d(H),className:`h-16 w-16 rounded overflow-hidden border-2 transition-all ${H===o?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:X,alt:`Thumbnail ${H+1}`,className:"h-full w-full object-cover"})},H))})]}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-6",children:[e.jsx(Q,{to:"/",className:"hover:text-blue-600 transition-colors",children:"Home"}),e.jsx(Ie,{className:"h-4 w-4"}),e.jsx(Q,{to:"/products",className:"hover:text-blue-600 transition-colors",children:"Products"}),e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{className:"text-gray-900 font-medium",children:f.product_name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-zoom-in group relative",onClick:I,children:e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:te||"",alt:f.product_name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity flex items-center justify-center",children:e.jsx(ab,{className:"h-16 w-16 text-white"})})]})}),f.images&&f.images.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:f.images.map((X,H)=>e.jsx("button",{onClick:()=>$(H),className:`flex-shrink-0 h-20 w-20 rounded-lg overflow-hidden border-2 transition-all ${H===o?"border-blue-600 scale-105 shadow-lg":"border-gray-200 hover:border-blue-400"}`,children:e.jsx("img",{src:X,alt:`View ${H+1}`,className:"h-full w-full object-cover"})},H))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:f.product_name}),e.jsx("button",{onClick:D,disabled:O.isPending||T.isPending,className:"flex-shrink-0 ml-4 p-2 rounded-full hover:bg-gray-100 transition-colors disabled:opacity-50","aria-label":M?"Remove from wishlist":"Add to wishlist",children:e.jsx(Di,{className:`h-6 w-6 transition-colors ${M?"fill-red-500 text-red-500":"text-gray-400"}`})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["SKU: ",f.sku]}),f.brand&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Brand: ",f.brand]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"flex items-baseline space-x-3 mb-2",children:[e.jsxs("span",{className:"text-4xl font-bold text-blue-600",children:["$",J().toFixed(2)]}),e.jsxs("span",{className:"text-lg text-gray-600",children:["/ ",f.unit_of_measure]})]}),se()&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Volume Pricing:"}),e.jsx("div",{className:"space-y-1",children:se().map(([X,H])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[X,"+ units:"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(H).toFixed(2)]})]},X))})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Y==="in_stock"&&e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"In Stock"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[z," units available"]})]})]}),Y==="low_stock"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-900",children:"Low Stock"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Only ",z," left!"]})]})]}),Y==="out_of_stock"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"Out of Stock"}),f.expected_restock_date&&e.jsxs("p",{className:"text-sm text-red-700",children:["Expected: ",new Date(f.expected_restock_date).toLocaleDateString()]})]})]})]}),w.last_updated&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${w.websocket_connected?"bg-green-500":"bg-gray-400"}`}),e.jsxs("span",{children:["Updated ",new Date(w.last_updated).toLocaleTimeString()]})]})]}),Y!=="out_of_stock"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>S(-1),disabled:m<=1,className:"px-4 py-3 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),e.jsx("input",{type:"number",value:m,onChange:X=>{const H=parseInt(X.target.value);!isNaN(H)&&H>=1&&h(Math.min(H,z))},className:"w-20 text-center py-3 border-x border-gray-300 focus:outline-none"}),e.jsx("button",{onClick:()=>S(1),disabled:m>=z,className:"px-4 py-3 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"+"})]}),f.minimum_order_quantity>1&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Min order: ",f.minimum_order_quantity]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:g,disabled:Y==="out_of_stock"||R.isPending,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:[e.jsx(Be,{className:"h-5 w-5"}),e.jsx("span",{children:L?"Update Cart":"Add to Cart"})]}),L&&e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[N," already in cart"]})]}),F&&e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[F.logo_url&&e.jsx("img",{src:F.logo_url,alt:F.business_name,className:"h-16 w-16 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:F.business_name}),F.verification_status==="verified"&&e.jsx(Sm,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[[...Array(5)].map((X,H)=>e.jsx(Oe,{className:`h-4 w-4 ${H<Math.floor(F.rating_average)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},H)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[Number(F.rating_average).toFixed(1)," (",F.total_reviews," reviews)"]})]}),F.response_time_average&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mb-3",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsxs("span",{children:["Replies within ",Number(F.response_time_average).toFixed(1)," hours"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Q,{to:`/supplier/${F.supplier_id}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"View Shop"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Contact Supplier"})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(kt,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Delivery Information"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Standard delivery: 2-5 business days"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select delivery window at checkout"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-12",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>l("description"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="description"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Description"}),e.jsx("button",{onClick:()=>l("specifications"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="specifications"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Specifications"}),e.jsxs("button",{onClick:()=>l("reviews"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="reviews"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Reviews ",B&&`(${B.total})`]})]})}),e.jsxs("div",{className:"p-6",children:[i==="description"&&e.jsxs("div",{className:"prose max-w-none",children:[f.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Product Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:f.description})]}),f.key_features&&f.key_features.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Key Features"}),e.jsx("ul",{className:"space-y-2",children:f.key_features.map((X,H)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(he,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:X})]},H))})]}),f.warranty_information&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Warranty"}),e.jsx("p",{className:"text-sm text-gray-700",children:f.warranty_information})]})]}),i==="specifications"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Technical Specifications"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"min-w-full divide-y divide-gray-200",children:e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[f.specifications&&Object.entries(f.specifications).map(([X,H])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900 capitalize",children:X.replace(/_/g," ")}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:typeof H=="object"?JSON.stringify(H):String(H)})]},X)),f.dimensions&&e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Dimensions"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:JSON.stringify(f.dimensions)})]}),f.weight&&e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Weight"}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-700",children:[f.weight," lbs"]})]}),f.material&&e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Material"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:f.material})]}),f.compliance_certifications&&f.compliance_certifications.length>0&&e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:"Certifications"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:f.compliance_certifications.join(", ")})]})]})})})]}),i==="reviews"&&e.jsx("div",{children:A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):B?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 pb-6 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("span",{className:"text-5xl font-bold text-gray-900",children:Number(B.average_rating).toFixed(1)}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center space-x-1 mb-1",children:[...Array(5)].map((X,H)=>e.jsx(Oe,{className:`h-6 w-6 ${H<Math.floor(Number(B.average_rating))?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},H))}),e.jsxs("p",{className:"text-sm text-gray-600",children:[B.total," reviews"]})]})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsxs("select",{value:b.rating||"",onChange:X=>{v(H=>({...H,rating:X.target.value?parseInt(X.target.value):null})),p(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All ratings"}),e.jsx("option",{value:"5",children:"5 stars"}),e.jsx("option",{value:"4",children:"4+ stars"}),e.jsx("option",{value:"3",children:"3+ stars"})]}),e.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:b.verified_only,onChange:X=>{v(H=>({...H,verified_only:X.target.checked})),p(1)},className:"rounded text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Verified purchases only"})]}),e.jsxs("select",{value:j,onChange:X=>{P(X.target.value),p(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"review_date",children:"Most Recent"}),e.jsx("option",{value:"rating_overall",children:"Highest Rated"}),e.jsx("option",{value:"helpful_votes",children:"Most Helpful"})]})]})]}),e.jsx("div",{className:"space-y-6",children:B.reviews.map(X=>e.jsxs("div",{className:"border-b border-gray-200 pb-6 last:border-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((H,ee)=>e.jsx(Oe,{className:`h-4 w-4 ${ee<X.rating_overall?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ee))}),X.verified_purchase&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium",children:"Verified Purchase"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[X.is_anonymous?"Anonymous":"Customer","  ",new Date(X.review_date).toLocaleDateString()]})]})}),X.review_text&&e.jsx("p",{className:"text-gray-700 mb-3 leading-relaxed",children:X.review_text}),X.photos&&X.photos.length>0&&e.jsx("div",{className:"flex space-x-2 mb-3",children:X.photos.map((H,ee)=>e.jsx("img",{src:H,alt:`Review photo ${ee+1}`,className:"h-20 w-20 rounded-lg object-cover cursor-pointer hover:opacity-80 transition-opacity"},ee))}),X.supplier_response&&e.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 border-l-4 border-blue-600",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Supplier Response"}),e.jsx("p",{className:"text-sm text-gray-700",children:X.supplier_response}),X.supplier_response_date&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Responded ",new Date(X.supplier_response_date).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-600",children:e.jsxs("span",{children:[X.helpful_votes," found this helpful"]})})]},X.review_id))}),B.total>10&&e.jsxs("div",{className:"flex justify-center mt-8 space-x-2",children:[e.jsx("button",{onClick:()=>p(X=>Math.max(1,X-1)),disabled:x===1,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700",children:["Page ",x," of ",Math.ceil(B.total/10)]}),e.jsx("button",{onClick:()=>p(X=>Math.min(Math.ceil(B.total/10),X+1)),disabled:x>=Math.ceil(B.total/10),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No reviews yet for this product."})})})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Similar Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.jsx("div",{className:"text-center text-gray-500 col-span-full py-8",children:"Related products would be displayed here"})})]})]})})]})},t6=async t=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/${t}`)).data,s6=async(t,s,r,a=1)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/${t}/products`,{params:{status:"active",category:s,search_query:r,limit:24,offset:(a-1)*24}})).data,r6=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/reviews",{params:{supplier_id:t,status:"published",limit:3,sort_by:"review_date",sort_order:"desc"}})).data,Mh=({isOpen:t,onClose:s,feature:r})=>{const a=ze();if(!t)return null;const n=r==="contact"?{title:"Contact This Supplier",description:"Create a free account to message suppliers directly and get real-time responses.",benefits:["Direct messaging with suppliers","Real-time order tracking","Save favorite suppliers","Exclusive trade pricing"]}:{title:"Read All Reviews",description:"Create a free account to access all verified customer reviews and make informed decisions.",benefits:["Read all verified reviews","See detailed ratings breakdown","Compare supplier performance","Leave your own reviews"]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative animate-fadeIn",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r==="contact"?e.jsx(Ft,{className:"w-8 h-8 text-blue-600"}):e.jsx(Oe,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.title}),e.jsx("p",{className:"text-gray-600",children:n.description})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"font-semibold text-blue-900 mb-3",children:"With a free account, you can:"}),e.jsx("ul",{className:"space-y-2",children:n.benefits.map((i,l)=>e.jsxs("li",{className:"flex items-start text-blue-800 text-sm",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),i]},l))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>a("/register/customer"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Create Free Account"}),e.jsx("button",{onClick:()=>a("/login"),className:"w-full bg-gray-100 text-gray-900 py-3 px-6 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Sign In"})]}),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Free forever. No credit card required."})]})})})},a6=()=>{const{supplier_id:t}=ur(),[s,r]=Fe(),a=s.get("tab")||"about",n=s.get("product_category")||"",i=s.get("product_search")||"",l=s.get("product_page")||"1",[o,d]=_.useState(a),[c,u]=_.useState(n),[m,h]=_.useState(i),[x,p]=_.useState(parseInt(l)),[b,v]=_.useState(!1),[j,P]=_.useState(!1);_.useEffect(()=>{d(a)},[a]),_.useEffect(()=>{u(n)},[n]),_.useEffect(()=>{h(i)},[i]),_.useEffect(()=>{p(parseInt(l))},[l]);const w=g=>{d(g),r({tab:g})},{data:C,isLoading:f,error:k}=ne({queryKey:["supplier",t],queryFn:()=>t6(t),enabled:!!t,staleTime:5*60*1e3,retry:1}),{data:y,isLoading:F}=ne({queryKey:["supplier-products",t,c,m,x],queryFn:()=>s6(t,c,m,x),enabled:!!t&&o==="products",staleTime:2*60*1e3,retry:1}),{data:M,isLoading:E}=ne({queryKey:["supplier-reviews",t],queryFn:()=>r6(t),enabled:!!t&&o==="reviews",staleTime:5*60*1e3,retry:1}),B=g=>new Date(g).getFullYear().toString(),A=(g,D)=>g?g.length<=D?g:g.substring(0,D)+"...":"",L=()=>y?Math.ceil(y.total/24):0,N=g=>{g.preventDefault(),p(1);const D={tab:"products"};c&&(D.product_category=c),m&&(D.product_search=m),D.product_page="1",r(D)},R=g=>{p(g);const D={tab:"products"};c&&(D.product_category=c),m&&(D.product_search=m),D.product_page=g.toString(),r(D),window.scrollTo({top:0,behavior:"smooth"})};if(k)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Supplier Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The supplier you're looking for doesn't exist or has been removed."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Browse All Products"})]})})});if(f)return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"w-full h-64 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16",children:e.jsxs("div",{className:"flex items-end space-x-4 mb-8",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-white border-4 border-white shadow-xl bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 animate-pulse"})]})]})})]})});if(!C)return null;const O=(M==null?void 0:M.reviews.reduce((g,D)=>(g[D.rating_overall]=(g[D.rating_overall]||0)+1,g),{}))||{},T=(M==null?void 0:M.total)||0;return e.jsxs(e.Fragment,{children:[e.jsx(Mh,{isOpen:b,onClose:()=>v(!1),feature:"contact"}),e.jsx(Mh,{isOpen:j,onClose:()=>P(!1),feature:"reviews"}),e.jsxs("div",{className:"w-full h-64 bg-gradient-to-br from-blue-600 to-indigo-700 relative overflow-hidden",children:[C.cover_photo_url?e.jsx("img",{src:C.cover_photo_url,alt:`${C.business_name} cover`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-indigo-700"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16 relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end space-y-4 md:space-y-0 md:space-x-6 mb-8",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-white border-4 border-white shadow-xl overflow-hidden flex-shrink-0",children:C.logo_url?e.jsx("img",{src:C.logo_url,alt:`${C.business_name} logo`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-blue-600 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-bold text-white",children:C.business_name.charAt(0)})})}),e.jsxs("div",{className:"flex-1 pb-0 md:pb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:C.business_name}),C.verification_status==="verified"&&e.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-800 px-3 py-1 rounded-full",children:[e.jsx(Sm,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-5 h-5 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Number(C.rating_average).toFixed(1)}),e.jsxs("span",{className:"text-sm",children:["(",C.total_reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Member since ",B(C.member_since)]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsxs("span",{children:[C.total_orders,"+ orders fulfilled"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Ft,{className:"w-5 h-5"}),e.jsx("span",{children:"Contact Supplier"})]}),e.jsxs("button",{onClick:()=>w("products"),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-all duration-200 border border-gray-300",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{children:"View Products"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[{id:"about",label:"About",icon:Re},{id:"products",label:"Products",icon:ve},{id:"reviews",label:"Reviews",icon:Oe}].map(({id:g,label:D,icon:S})=>e.jsxs("button",{onClick:()=>w(g),className:`
                  flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
                  ${o===g?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:D})]},g))})}),e.jsxs("div",{className:"pb-16",children:[o==="about"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"About"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:C.business_description||"No description available."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Policies"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Return Policy"}),e.jsx("p",{className:"text-gray-600 text-sm",children:A(C.return_policy,200)}),e.jsx("button",{onClick:()=>v(!0),className:"text-blue-600 text-sm font-medium hover:text-blue-700 mt-2",children:"View full policy "})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Shipping Policy"}),e.jsx("p",{className:"text-gray-600 text-sm",children:A(C.shipping_policy,200)}),e.jsx("button",{onClick:()=>v(!0),className:"text-blue-600 text-sm font-medium hover:text-blue-700 mt-2",children:"View full policy "})]}),C.minimum_order_value&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Minimum Order"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["$",C.minimum_order_value.toFixed(2)," minimum order value"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Supplier Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Orders Fulfilled"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[C.total_orders.toLocaleString(),"+"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Average Rating"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-semibold text-gray-900",children:Number(C.rating_average).toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Member Since"}),e.jsx("span",{className:"font-semibold text-gray-900",children:B(C.member_since)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-blue-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Need Help?"}),e.jsx("p",{className:"text-gray-700 text-sm mb-4",children:"Create an account to contact this supplier directly and get real-time responses."}),e.jsx("button",{onClick:()=>v(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Contact Supplier"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl shadow-lg border border-green-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Ready to Buy?"}),e.jsx("p",{className:"text-gray-700 text-sm mb-4",children:"Create a free account to purchase from this supplier and hundreds more."}),e.jsx(Q,{to:"/register/customer",className:"block w-full bg-green-600 text-white text-center py-2 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Sign Up Free"})]})]})]}),o==="products"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("form",{onSubmit:N,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:m,onChange:g=>h(g.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Search"})]})}),F?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((g,D)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},D))}):y&&y.products.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.products.map(g=>e.jsxs(Q,{to:`/product/${g.product_id}`,className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gray-100 h-64",children:[g.primary_image_url?e.jsx("img",{src:g.primary_image_url,alt:g.product_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(ve,{className:"w-16 h-16"})}),g.stock_quantity>0?e.jsx("div",{className:"absolute top-3 right-3 bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:"In Stock"}):e.jsx("div",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:"Out of Stock"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:g.product_name}),e.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",Number(g.price_per_unit||0).toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["per ",g.unit_of_measure]})]}),g.brand&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Brand: ",g.brand]})]})]},g.product_id))}),L()>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[e.jsx("button",{onClick:()=>R(x-1),disabled:x===1,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex space-x-2",children:[...Array(L())].map((g,D)=>{const S=D+1;return S===1||S===L()||S>=x-1&&S<=x+1?e.jsx("button",{onClick:()=>R(S),className:`
                                  px-4 py-2 rounded-lg font-medium transition-all
                                  ${S===x?"bg-blue-600 text-white shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}
                                `,children:S},S):S===x-2||S===x+2?e.jsx("span",{className:"px-2 py-2",children:"..."},S):null})}),e.jsx("button",{onClick:()=>R(x+1),disabled:x===L(),className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m||c?"Try different search terms or filters.":"This supplier hasn't added any products yet."}),(m||c)&&e.jsx("button",{onClick:()=>{h(""),u(""),r({tab:"products"})},className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Clear Filters"})]})]}),o==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-2 mb-2",children:[e.jsx("span",{className:"text-5xl font-bold text-gray-900",children:Number(C.rating_average).toFixed(1)}),e.jsx(Oe,{className:"w-12 h-12 text-yellow-500 fill-current"})]}),e.jsxs("p",{className:"text-gray-600 mb-1",children:["Based on ",T," reviews"]}),e.jsx("div",{className:"flex items-center justify-center md:justify-start space-x-1",children:[1,2,3,4,5].map(g=>e.jsx(Oe,{className:`w-6 h-6 ${g<=Math.round(Number(C.rating_average))?"text-yellow-500 fill-current":"text-gray-300"}`},g))})]}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(g=>{const D=O[g]||0,S=T>0?D/T*100:0;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 w-8",children:[g,""]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-yellow-500 h-full transition-all duration-300",style:{width:`${S}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-12 text-right",children:D})]},g)})})]})}),E?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},g))}):M&&M.reviews.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:M.reviews.map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(D=>e.jsx(Oe,{className:`w-5 h-5 ${D<=g.rating_overall?"text-yellow-500 fill-current":"text-gray-300"}`},D))}),g.verified_purchase&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"Verified Purchase"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(g.review_date).toLocaleDateString()})]}),g.review_text&&e.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:g.review_text}),g.helpful_votes>0&&e.jsxs("p",{className:"text-sm text-gray-500",children:[g.helpful_votes," people found this helpful"]})]},g.review_id))}),T>3&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg border border-blue-200 p-8 text-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:["Want to read all ",T," reviews?"]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Create a free account to see all verified customer reviews and ratings."}),e.jsx("button",{onClick:()=>P(!0),className:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"Sign Up to Read All Reviews"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-gray-600",children:"This supplier hasn't received any reviews yet."})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-4",children:["Ready to Order from ",C.business_name,"?"]}),e.jsx("p",{className:"text-blue-100 text-lg mb-8 max-w-2xl mx-auto",children:"Create your free account to access real-time inventory, compare prices, and track deliveries."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx(Q,{to:"/register/customer",className:"px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-100 transition-colors shadow-xl",children:"Create Free Account"}),e.jsx(Q,{to:"/login",className:"px-8 py-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-400 transition-colors",children:"Sign In"})]})]})})]})},Uo="https://123create-construction-app-with-a.launchpulse.ai",n6=async t=>{const{data:s}=await G.get(`${Uo}/suppliers/${t}`);return s},i6=async(t,s,r)=>{const a={status:s.status||"active",limit:12,offset:(r-1)*12,sort_by:s.sort_by,sort_order:s.sort_order};s.category_id&&(a.category=s.category_id),s.search_query&&(a.search_query=s.search_query),s.price_min!==null&&(a.price_min=s.price_min),s.price_max!==null&&(a.price_max=s.price_max),s.in_stock_only&&(a.in_stock_only=!0);const{data:n}=await G.get(`${Uo}/suppliers/${t}/products`,{params:a});return n},l6=async(t,s,r,a)=>{const n={supplier_id:t,status:"published",limit:10,offset:(r-1)*10,sort_by:s.sort_by,sort_order:"desc"};s.rating!==null&&(n.min_rating=s.rating),s.verified_only&&(n.verified_purchase=!0);const{data:i}=await G.get(`${Uo}/reviews`,{params:n,headers:{Authorization:`Bearer ${a}`}});return i},o6=async(t,s)=>{const{data:r}=await G.patch(`${Uo}/customers/me`,{preferred_suppliers:t},{headers:{Authorization:`Bearer ${s}`}});return r},c6=async(t,s,r)=>{const{data:a}=await G.post("/cart/items",{product_id:t,quantity:s});return a},d6=async(t,s)=>{const{data:r}=await G.post("/chat/conversations",{conversation_type:"customer_supplier",supplier_id:t});return r},u6=()=>{const{supplier_id:t}=ur(),s=Pe(),r=re($=>$.authentication_state.auth_token),a=re($=>$.authentication_state.customer_profile),n=re($=>$.fetch_cart),[i,l]=_.useState("about"),[o,d]=_.useState(!1),[c,u]=_.useState(1),[m,h]=_.useState(1),[x,p]=_.useState({category_id:null,search_query:null,price_min:null,price_max:null,in_stock_only:null,sort_by:"created_at",sort_order:"desc"}),[b,v]=_.useState({rating:null,verified_only:!1,sort_by:"review_date"}),[j,P]=_.useState(!1),w=_.useMemo(()=>!(a!=null&&a.preferred_suppliers)||!t?!1:a.preferred_suppliers.includes(t),[a==null?void 0:a.preferred_suppliers,t]),{data:C,isLoading:f,error:k}=ne({queryKey:["supplier",t],queryFn:()=>n6(t),enabled:!!t,staleTime:5*60*1e3}),{data:y,isLoading:F}=ne({queryKey:["supplier-products",t,x,c],queryFn:()=>i6(t,x,c),enabled:!!t&&i==="products",staleTime:2*60*1e3,select:$=>({products:$.products,total_count:$.total,total_pages:Math.ceil($.total/12)})}),{data:M,isLoading:E}=ne({queryKey:["supplier-reviews",t,b,m],queryFn:()=>l6(t,b,m,r),enabled:!!t&&!!r&&i==="reviews",staleTime:2*60*1e3,select:$=>({reviews:$.reviews,total_count:$.total,average_rating:$.average_rating,total_pages:Math.ceil($.total/10),rating_distribution:N($.reviews)})}),B=oe({mutationFn:async()=>{const $=(a==null?void 0:a.preferred_suppliers)||[],I=w?$.filter(K=>K!==t):[...$,t];return o6(I,r)},onSuccess:()=>{s.invalidateQueries({queryKey:["customer-profile"]})}}),A=oe({mutationFn:({product_id:$,quantity:I})=>c6($,I),onSuccess:()=>{n()}}),L=oe({mutationFn:()=>d6(t),onSuccess:()=>{d(!1)}}),N=$=>{const I={5:0,4:0,3:0,2:0,1:0};return $.forEach(K=>{const U=Math.floor(K.rating_overall);U>=1&&U<=5&&I[U]++}),I},R=$=>{const I=new Date($),K=new Date,U=K.getFullYear()-I.getFullYear();if(U>0)return`${U} year${U>1?"s":""}`;const q=(K.getFullYear()-I.getFullYear())*12+K.getMonth()-I.getMonth();return`${q} month${q>1?"s":""}`},O=()=>{B.mutate()},T=$=>{A.mutate({product_id:$,quantity:1})},g=()=>{L.mutate()},D=($,I)=>{p(K=>({...K,[$]:I})),u(1)},S=($,I)=>{v(K=>({...K,[$]:I})),h(1)};return f?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading supplier profile..."})]})})}):k||!C?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsx("div",{className:"max-w-md w-full text-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-200",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ge,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Supplier Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The supplier you're looking for doesn't exist or has been removed."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Browse All Products"})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-64 md:h-80 bg-gradient-to-br from-blue-500 to-indigo-600 relative overflow-hidden",children:C.cover_photo_url?e.jsx("img",{src:C.cover_photo_url,alt:`${C.business_name} cover`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ve,{className:"w-32 h-32 text-white opacity-20"})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"relative -mt-16 sm:-mt-20",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-white rounded-full shadow-lg border-4 border-white overflow-hidden",children:C.logo_url?e.jsx("img",{src:C.logo_url,alt:`${C.business_name} logo`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-indigo-100 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:C.business_name.charAt(0)})})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 truncate",children:C.business_name}),C.verification_status==="verified"&&e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full",children:[e.jsx(Sm,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map($=>e.jsx(Oe,{className:`w-5 h-5 ${$<=Math.round(C.rating_average)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},$))}),e.jsx("span",{className:"font-medium text-gray-900",children:Number(C.rating_average).toFixed(1)}),e.jsxs("span",{children:["(",C.total_reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:["Member for ",R(C.member_since)]})]}),C.response_time_average!==null&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Replies within ",Number(C.response_time_average).toFixed(1)," hours"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:O,disabled:B.isPending,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${w?"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(Di,{className:`w-5 h-5 ${w?"fill-current":""}`}),e.jsx("span",{className:"hidden sm:inline",children:w?"Following":"Follow"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:[e.jsx(zt,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Contact"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(y==null?void 0:y.total_count)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total_orders}),e.jsx("div",{className:"text-sm text-gray-600",children:"Orders"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Number(C.fulfillment_rate).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fulfillment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total_reviews}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reviews"})]})]})]})})})]}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex gap-8",children:["about","products","reviews","contact"].map($=>e.jsx("button",{onClick:()=>l($),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i===$?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:$.charAt(0).toUpperCase()+$.slice(1)},$))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i==="about"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"About"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:C.business_description||"No description provided."})]}),C.service_areas&&C.service_areas.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5 text-blue-600"}),"Service Areas"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.service_areas.map(($,I)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:$},I))})]}),C.operating_hours&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-blue-600"}),"Operating Hours"]}),e.jsx("div",{className:"space-y-2",children:Object.entries(C.operating_hours).map(([$,I])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:$}),e.jsx("span",{className:"text-gray-600",children:String(I)})]},$))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.return_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Return Policy"}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-4",children:C.return_policy}),e.jsx("button",{onClick:()=>l("contact"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",children:"View full policy "})]}),C.shipping_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Shipping Policy"}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-4",children:C.shipping_policy}),e.jsx("button",{onClick:()=>l("contact"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",children:"View full policy "})]})]})]}),i==="products"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:x.search_query||"",onChange:$=>D("search_query",$.target.value||null),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})}),e.jsxs("button",{onClick:()=>P(!j),className:"sm:hidden flex items-center gap-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(ys,{className:"w-5 h-5"}),"Filters"]}),e.jsxs("select",{value:x.sort_by,onChange:$=>D("sort_by",$.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 bg-white",children:[e.jsx("option",{value:"created_at",children:"Newest"}),e.jsx("option",{value:"price_per_unit",children:"Price: Low to High"}),e.jsx("option",{value:"sales_count",children:"Most Popular"}),e.jsx("option",{value:"product_name",children:"Name A-Z"})]})]}),(j||window.innerWidth>=640)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:x.in_stock_only||!1,onChange:$=>D("in_stock_only",$.target.checked||null),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"In Stock Only"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min $",value:x.price_min||"",onChange:$=>D("price_min",$.target.value?Number($.target.value):null),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max $",value:x.price_max||"",onChange:$=>D("price_max",$.target.value?Number($.target.value):null),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]})]})})]}),F?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map(($,I)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},I))}):y&&y.products.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.products.map($=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-shadow",children:[e.jsx(Q,{to:`/product/${$.product_id}`,children:e.jsxs("div",{className:"relative h-64 bg-gray-100",children:[$.primary_image_url?e.jsx("img",{src:$.primary_image_url,alt:$.product_name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ve,{className:"w-16 h-16 text-gray-300"})}),$.is_featured&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded",children:"FEATURED"}),$.stock_quantity>0?e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"In Stock"}):e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Out of Stock"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(Q,{to:`/product/${$.product_id}`,children:e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition-colors",children:$.product_name})}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",Number($.price_per_unit||0).toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",$.unit_of_measure]})]}),e.jsxs("button",{onClick:()=>T($.product_id),disabled:$.stock_quantity===0||A.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Be,{className:"w-5 h-5"}),$.stock_quantity===0?"Out of Stock":"Add to Cart"]})]})]},$.product_id))}),y.total_pages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>u($=>Math.max(1,$-1)),disabled:c===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 text-sm font-medium text-gray-700",children:["Page ",c," of ",y.total_pages]}),e.jsx("button",{onClick:()=>u($=>Math.min(y.total_pages,$+1)),disabled:c===y.total_pages,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-200",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600",children:"This supplier hasn't listed any products yet."})]})]}),i==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[M&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:Number(M.average_rating).toFixed(1)}),e.jsx("div",{className:"flex items-center justify-center md:justify-start gap-1 mb-2",children:[1,2,3,4,5].map($=>e.jsx(Oe,{className:`w-6 h-6 ${$<=Math.round(Number(M.average_rating))?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},$))}),e.jsxs("p",{className:"text-gray-600",children:["Based on ",M.total_count," reviews"]})]}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map($=>{const I=M.rating_distribution[$]||0,K=M.total_count>0?I/M.total_count*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 w-12",children:[$," star"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400 rounded-full transition-all",style:{width:`${K}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-12 text-right",children:I})]},$)})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 flex flex-wrap gap-3",children:[e.jsxs("select",{value:b.rating||"",onChange:$=>S("rating",$.target.value?Number($.target.value):null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"",children:"All ratings"}),e.jsx("option",{value:"5",children:"5 stars"}),e.jsx("option",{value:"4",children:"4+ stars"}),e.jsx("option",{value:"3",children:"3+ stars"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:b.verified_only,onChange:$=>S("verified_only",$.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verified only"})]}),e.jsxs("select",{value:b.sort_by,onChange:$=>S("sort_by",$.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"review_date",children:"Most Recent"}),e.jsx("option",{value:"rating_overall",children:"Highest Rating"}),e.jsx("option",{value:"helpful_votes",children:"Most Helpful"})]})]})]}),E?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map(($,I)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},I))}):M&&M.reviews.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:M.reviews.map($=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("div",{className:"flex items-start justify-between gap-4 mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(I=>e.jsx(Oe,{className:`w-5 h-5 ${I<=$.rating_overall?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},I))}),$.verified_purchase&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"Verified Purchase"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[$.is_anonymous?"Anonymous":"Customer"," "," ",new Date($.review_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),$.review_text&&e.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:$.review_text}),$.photos&&$.photos.length>0&&e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:$.photos.map((I,K)=>e.jsx("img",{src:I,alt:`Review photo ${K+1}`,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"},K))}),$.supplier_response&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 bg-blue-50 -mx-6 -mb-6 px-6 py-4 rounded-b-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm font-bold",children:C.business_name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-1",children:[C.business_name," responded"]}),e.jsx("p",{className:"text-sm text-gray-700",children:$.supplier_response})]})]})})]},$.review_id))}),M.total_pages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>h($=>Math.max(1,$-1)),disabled:m===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 text-sm font-medium text-gray-700",children:["Page ",m," of ",M.total_pages]}),e.jsx("button",{onClick:()=>h($=>Math.min(M.total_pages,$+1)),disabled:m===M.total_pages,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-200",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-gray-600",children:"Be the first to review this supplier!"})]})]}),i==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center gap-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(zt,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Send Message"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Chat with ",C.business_name]})]})]}),C.response_time_average!==null&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(He,{className:"w-6 h-6 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Response Time"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Usually replies within ",Number(C.response_time_average).toFixed(1)," hours"]})]})]})]})]}),C.return_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Return Policy"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:C.return_policy})]}),C.shipping_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Shipping Policy"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:C.shipping_policy})]}),C.minimum_order_value!==null&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Minimum Order"}),e.jsxs("p",{className:"text-gray-700",children:["Minimum order value: ",e.jsxs("span",{className:"font-bold text-gray-900",children:["$",C.minimum_order_value.toFixed(2)]})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Contact Supplier"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:g,disabled:L.isPending,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(zt,{className:"w-5 h-5"}),L.isPending?"Starting chat...":"Start Chat"]}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Our team typically responds within"," ",C.response_time_average!==null?`${Number(C.response_time_average).toFixed(1)} hours`:"a few hours"]})]})]})})]})})},m6=()=>{const[t,s]=_.useState(null),[r,a]=_.useState(null),n=ze(),i=()=>{s("customer"),n("/register/customer")},l=()=>{s("supplier"),n("/register/supplier")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 leading-tight",children:"Join BuildEasy"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Choose how you want to use our platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("button",{onClick:i,onMouseEnter:()=>a("customer"),onMouseLeave:()=>a(null),className:`
                group relative bg-white rounded-2xl shadow-lg border-2 transition-all duration-300 ease-in-out
                hover:shadow-2xl hover:scale-105 hover:border-blue-500
                p-8 text-left cursor-pointer
                ${r==="customer"?"border-blue-500 shadow-2xl transform scale-105":"border-gray-200"}
                ${t==="customer"?"ring-4 ring-blue-200":""}
              `,children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:`
                  inline-flex items-center justify-center w-20 h-20 rounded-2xl transition-all duration-300
                  ${r==="customer"?"bg-blue-600 shadow-lg":"bg-blue-100"}
                `,children:e.jsx(Be,{className:`
                      w-10 h-10 transition-colors duration-300
                      ${r==="customer"?"text-white":"text-blue-600"}
                    `})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"I want to buy construction materials"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Perfect for contractors, builders, and DIY enthusiasts looking for quality materials"}),e.jsxs("div",{className:"space-y-3 mb-8",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Compare suppliers and find the best prices instantly"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Real-time inventory updates from 100+ verified suppliers"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Track every delivery with live GPS updates"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Secure payments with multiple options"})]})]}),e.jsxs("div",{className:`
                inline-flex items-center justify-center w-full px-6 py-3 rounded-lg font-semibold text-base transition-all duration-300
                ${r==="customer"?"bg-blue-600 text-white shadow-lg":"bg-blue-600 text-white"}
              `,children:["Create Customer Account",e.jsx("svg",{className:"ml-2 w-5 h-5 transition-transform duration-300 group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),r==="customer"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded-full",children:"Select"})})]}),e.jsxs("button",{onClick:l,onMouseEnter:()=>a("supplier"),onMouseLeave:()=>a(null),className:`
                group relative bg-white rounded-2xl shadow-lg border-2 transition-all duration-300 ease-in-out
                hover:shadow-2xl hover:scale-105 hover:border-indigo-500
                p-8 text-left cursor-pointer
                ${r==="supplier"?"border-indigo-500 shadow-2xl transform scale-105":"border-gray-200"}
                ${t==="supplier"?"ring-4 ring-indigo-200":""}
              `,children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:`
                  inline-flex items-center justify-center w-20 h-20 rounded-2xl transition-all duration-300
                  ${r==="supplier"?"bg-indigo-600 shadow-lg":"bg-indigo-100"}
                `,children:e.jsx(Js,{className:`
                      w-10 h-10 transition-colors duration-300
                      ${r==="supplier"?"text-white":"text-indigo-600"}
                    `})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"I want to sell construction materials"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Perfect for supply shops, distributors, and wholesalers ready to grow"}),e.jsxs("div",{className:"space-y-3 mb-8",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Reach thousands of contractors and builders nationwide"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Manage inventory and orders from one powerful dashboard"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Grow your sales with automated marketing tools"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Flexible payout options with transparent pricing"})]})]}),e.jsxs("div",{className:`
                inline-flex items-center justify-center w-full px-6 py-3 rounded-lg font-semibold text-base transition-all duration-300
                ${r==="supplier"?"bg-indigo-600 text-white shadow-lg":"bg-indigo-600 text-white"}
              `,children:["Create Supplier Account",e.jsx("svg",{className:"ml-2 w-5 h-5 transition-transform duration-300 group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),r==="supplier"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"bg-indigo-600 text-white text-xs font-semibold px-3 py-1 rounded-full",children:"Select"})})]})]}),e.jsx("div",{className:"text-center pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(Q,{to:"/login",className:"font-semibold text-blue-600 hover:text-blue-700 transition-colors duration-200",children:"Sign in"})]})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"100+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Verified Suppliers"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"10,000+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Products Available"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"4.8"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]})})]})})})},x6=t=>{let s=0;return t.length>=8&&s++,t.length>=12&&s++,/[a-z]/.test(t)&&/[A-Z]/.test(t)&&s++,/\d/.test(t)&&s++,/[^a-zA-Z0-9]/.test(t)&&s++,Math.min(s,4)},h6=t=>{switch(t){case 0:case 1:return{label:"Weak",color:"text-red-600"};case 2:return{label:"Fair",color:"text-yellow-600"};case 3:return{label:"Good",color:"text-blue-600"};case 4:return{label:"Strong",color:"text-green-600"};default:return{label:"Weak",color:"text-red-600"}}},p6=t=>{const s=t.replace(/\D/g,"");return s.length<=3?s:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6,10)}`},Rh=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),g6=t=>t.replace(/\D/g,"").length===10,f6=()=>{var M,E,B,A,L;const t=ze();Fe();const s=re(N=>N.authentication_state.authentication_status.is_authenticated),r=re(N=>N.register_customer);_.useEffect(()=>{s&&t("/dashboard",{replace:!0})},[s,t]);const[a,n]=_.useState({email:"",password:"",confirm_password:"",first_name:"",last_name:"",phone_number:"",account_type:"retail",default_delivery_address:null}),[i,l]=_.useState({}),[o,d]=_.useState(0),[c,u]=_.useState(!1),[m,h]=_.useState(!1),[x,p]=_.useState(!1),[b,v]=_.useState(!1),j=oe({mutationFn:async N=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/auth/register/customer",N)).data,onSuccess:async()=>{await r({email:a.email,password:a.password,first_name:a.first_name,last_name:a.last_name,phone_number:a.phone_number,account_type:a.account_type})},onError:N=>{var R,O;if(((R=N.response)==null?void 0:R.status)===409)l(T=>({...T,email:"An account with this email already exists. Try signing in instead."}));else if(((O=N.response)==null?void 0:O.status)===400){const T=N.response.data.errors||{};l(g=>({...g,...T}))}else l(T=>({...T,general:"Registration failed. Please try again."}))}}),P=N=>{n(R=>({...R,password:N})),d(x6(N)),l(R=>{const O={...R};return delete O.password,delete O.confirm_password,O})},w=N=>{n(R=>({...R,confirm_password:N})),l(R=>{const O={...R};return delete O.confirm_password,O})},C=N=>{n(R=>({...R,email:N})),l(R=>{const O={...R};return delete O.email,O})},f=N=>{const R=p6(N);n(O=>({...O,phone_number:R})),l(O=>{const T={...O};return delete T.phone_number,T})},k=_.useCallback(()=>{const N={};return a.email?Rh(a.email)||(N.email="Please enter a valid email address"):N.email="Email is required",a.first_name.trim()||(N.first_name="First name is required"),a.last_name.trim()||(N.last_name="Last name is required"),a.phone_number?g6(a.phone_number)||(N.phone_number="Please enter a valid 10-digit phone number"):N.phone_number="Phone number is required",a.password?a.password.length<8?N.password="Password must be at least 8 characters":o<2&&(N.password="Password is too weak. Add uppercase, numbers, or special characters."):N.password="Password is required",a.confirm_password?a.password!==a.confirm_password&&(N.confirm_password="Passwords do not match"):N.confirm_password="Please confirm your password",c||(N.terms="You must accept the Terms of Service and Privacy Policy"),l(N),Object.keys(N).length===0},[a,o,c]),y=async N=>{if(N.preventDefault(),l({}),!k())return;const R={email:a.email.toLowerCase(),password:a.password,first_name:a.first_name,last_name:a.last_name,phone_number:a.phone_number.replace(/\D/g,""),account_type:a.account_type};a.default_delivery_address&&a.default_delivery_address.street_address&&(R.default_delivery_address=a.default_delivery_address),j.mutate(R)},F=h6(o);return a.email&&a.password&&a.confirm_password&&a.first_name&&a.last_name&&a.phone_number&&c&&Object.keys(i).length,e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Create Your Customer Account"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Start ordering construction materials from 100+ verified suppliers"})]}),e.jsx("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-xl border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-8 lg:p-12",children:[i.general&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:i.general})]}),j.isSuccess&&!((M=j.data)!=null&&M.token)&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"Account created successfully!"}),e.jsx("p",{className:"text-sm text-green-600",children:"Please check your email to verify your account before signing in."})]})]}),e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-900 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:a.first_name,onChange:N=>{n(R=>({...R,first_name:N.target.value})),l(R=>{const O={...R};return delete O.first_name,O})},disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${i.first_name?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"John",autoComplete:"given-name"}),i.first_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.first_name})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-900 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:a.last_name,onChange:N=>{n(R=>({...R,last_name:N.target.value})),l(R=>{const O={...R};return delete O.last_name,O})},disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${i.last_name?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"Doe",autoComplete:"family-name"}),i.last_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.last_name})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:N=>C(N.target.value),disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${i.email?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"john.doe@example.com",autoComplete:"email"}),i.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.email})]}),!i.email&&a.email&&Rh(a.email)&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center space-x-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Valid email format"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-medium text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:a.phone_number,onChange:N=>f(N.target.value),disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${i.phone_number?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"(555) 123-4567",autoComplete:"tel"}),i.phone_number&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.phone_number})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"We'll use this for order and delivery updates"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3",children:"Account Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{n(N=>({...N,account_type:"trade"})),l(N=>{const R={...N};return delete R.account_type,R})},disabled:j.isPending,className:`relative p-6 rounded-xl border-2 transition-all duration-200 text-left ${a.account_type==="trade"?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${a.account_type==="trade"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(iw,{className:`h-6 w-6 ${a.account_type==="trade"?"text-blue-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Professional/Trade"}),a.account_type==="trade"&&e.jsx(je,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"For contractors and construction professionals"}),e.jsxs("ul",{className:"mt-3 space-y-1",children:[e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"Trade pricing available"})]}),e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"Bulk order discounts"})]}),e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"Trade credit options"})]})]})]})]})}),e.jsx("button",{type:"button",onClick:()=>{n(N=>({...N,account_type:"retail"})),l(N=>{const R={...N};return delete R.account_type,R})},disabled:j.isPending,className:`relative p-6 rounded-xl border-2 transition-all duration-200 text-left ${a.account_type==="retail"?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${a.account_type==="retail"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(Be,{className:`h-6 w-6 ${a.account_type==="retail"?"text-blue-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"DIY/Personal Use"}),a.account_type==="retail"&&e.jsx(je,{className:"h-5 w-5 text-blue-600"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"For home improvement and personal projects"}),e.jsxs("ul",{className:"mt-3 space-y-1",children:[e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"Retail pricing"})]}),e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"Project planning tools"})]}),e.jsxs("li",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{children:"DIY guides & tips"})]})]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3",children:"Account Security"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:a.password,onChange:N=>P(N.target.value),disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 pr-12 ${i.password?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"Create a strong password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>h(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,children:m?e.jsx(Oa,{className:"h-5 w-5"}):e.jsx(xt,{className:"h-5 w-5"})})]}),a.password&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-sm font-medium ${F.color}`,children:F.label})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${o===0||o===1?"bg-red-500":o===2?"bg-yellow-500":o===3?"bg-blue-500":"bg-green-500"}`,style:{width:`${o/4*100}%`}})}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[a.password.length>=8?e.jsx(je,{className:"h-3 w-3 text-green-600"}):e.jsx(ge,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:"At least 8 characters"})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[/[A-Z]/.test(a.password)?e.jsx(je,{className:"h-3 w-3 text-green-600"}):e.jsx(ge,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:"One uppercase letter"})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[/\d/.test(a.password)?e.jsx(je,{className:"h-3 w-3 text-green-600"}):e.jsx(ge,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:"One number"})]})]})]}),i.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.password})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-900 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",id:"confirm_password",name:"confirm_password",value:a.confirm_password,onChange:N=>w(N.target.value),disabled:j.isPending,className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 pr-12 ${i.confirm_password?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":a.confirm_password&&a.password===a.confirm_password?"border-green-300 bg-green-50 focus:border-green-500 focus:ring-4 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} disabled:opacity-50 disabled:cursor-not-allowed`,placeholder:"Re-enter your password",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,children:x?e.jsx(Oa,{className:"h-5 w-5"}):e.jsx(xt,{className:"h-5 w-5"})})]}),i.confirm_password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.confirm_password})]}),!i.confirm_password&&a.confirm_password&&a.password===a.confirm_password&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center space-x-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Passwords match"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Delivery Address ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(Optional)"})]}),e.jsx("button",{type:"button",onClick:()=>v(!b),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:b?"Skip for now":"Add address"})]}),b&&e.jsxs("div",{className:"space-y-4 bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"street_address",className:"block text-sm font-medium text-gray-900 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",id:"street_address",value:((E=a.default_delivery_address)==null?void 0:E.street_address)||"",onChange:N=>{n(R=>{var O,T,g;return{...R,default_delivery_address:{street_address:N.target.value,city:((O=R.default_delivery_address)==null?void 0:O.city)||"",state:((T=R.default_delivery_address)==null?void 0:T.state)||"",postal_code:((g=R.default_delivery_address)==null?void 0:g.postal_code)||""}}})},disabled:j.isPending,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50",placeholder:"123 Main St",autoComplete:"street-address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-900 mb-2",children:"City"}),e.jsx("input",{type:"text",id:"city",value:((B=a.default_delivery_address)==null?void 0:B.city)||"",onChange:N=>{n(R=>{var O,T,g;return{...R,default_delivery_address:{street_address:((O=R.default_delivery_address)==null?void 0:O.street_address)||"",city:N.target.value,state:((T=R.default_delivery_address)==null?void 0:T.state)||"",postal_code:((g=R.default_delivery_address)==null?void 0:g.postal_code)||""}}})},disabled:j.isPending,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50",placeholder:"Austin",autoComplete:"address-level2"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-900 mb-2",children:"State"}),e.jsx("input",{type:"text",id:"state",value:((A=a.default_delivery_address)==null?void 0:A.state)||"",onChange:N=>{n(R=>{var O,T,g;return{...R,default_delivery_address:{street_address:((O=R.default_delivery_address)==null?void 0:O.street_address)||"",city:((T=R.default_delivery_address)==null?void 0:T.city)||"",state:N.target.value,postal_code:((g=R.default_delivery_address)==null?void 0:g.postal_code)||""}}})},disabled:j.isPending,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50",placeholder:"TX",maxLength:2,autoComplete:"address-level1"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-900 mb-2",children:"Zip Code"}),e.jsx("input",{type:"text",id:"postal_code",value:((L=a.default_delivery_address)==null?void 0:L.postal_code)||"",onChange:N=>{n(R=>{var O,T,g;return{...R,default_delivery_address:{street_address:((O=R.default_delivery_address)==null?void 0:O.street_address)||"",city:((T=R.default_delivery_address)==null?void 0:T.city)||"",state:((g=R.default_delivery_address)==null?void 0:g.state)||"",postal_code:N.target.value}}})},disabled:j.isPending,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50",placeholder:"78701",maxLength:10,autoComplete:"postal-code"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can add more addresses later in your account settings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"terms_accepted",checked:c,onChange:N=>{u(N.target.checked),l(R=>{const O={...R};return delete O.terms,O})},disabled:j.isPending,className:"mt-1 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-4 focus:ring-blue-100 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsxs("label",{htmlFor:"terms_accepted",className:"text-sm text-gray-700 leading-relaxed",children:["I agree to the"," ",e.jsx(Q,{to:"/terms",target:"_blank",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Terms of Service"})," ","and"," ",e.jsx(Q,{to:"/privacy",target:"_blank",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Privacy Policy"}),e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]})]}),i.terms&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1 ml-8",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:i.terms})]})]}),e.jsxs("div",{className:"pt-6",children:[e.jsx("button",{type:"submit",disabled:j.isPending||!c,className:"w-full px-6 py-4 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600 disabled:hover:shadow-lg",children:j.isPending?e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ut,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Creating Account..."})]}):"Create Account"}),e.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(Q,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign in instead"})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4 text-center",children:"What you'll get with your account:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(je,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Compare Suppliers"}),e.jsx("p",{className:"text-xs text-gray-600",children:"See prices from 100+ suppliers instantly"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(je,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Real-Time Inventory"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Know exactly what's in stock"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(je,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Track Deliveries"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Live GPS tracking for every order"})]})]})]})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{children:"Your information is secure and encrypted"})]})})]})})})},b6=async t=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/auth/register/supplier",t,{headers:{"Content-Type":"application/json"}})).data,y6=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],v6=()=>{const t=ze(),[s,r]=_.useState(1),[a,n]=_.useState({email:"",password:"",confirm_password:"",business_name:"",business_registration_number:"",business_type:"LLC",contact_person_name:"",phone_number:"",business_address:"",city:"",state:"",postal_code:"",country:"USA",business_description:""}),[i,l]=_.useState({}),[o,d]=_.useState(!1),[c,u]=_.useState(null),m=oe({mutationFn:b6,onSuccess:()=>{u(5)},onError:N=>{var O,T,g,D,S,$;const R=((T=(O=N.response)==null?void 0:O.data)==null?void 0:T.message)||N.message||"Application submission failed. Please try again.";if(((g=N.response)==null?void 0:g.status)===409)l({email:"An account with this email already exists. Please sign in instead."}),r(1);else if(((D=N.response)==null?void 0:D.status)===400){const I=(($=(S=N.response)==null?void 0:S.data)==null?void 0:$.errors)||{};l(I)}else l({general:R})}});_.useEffect(()=>{if(c!==null){if(c===0){t("/login");return}const N=setTimeout(()=>{u(c-1)},1e3);return()=>clearTimeout(N)}},[c,t]);const h=N=>N?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N)?null:"Please enter a valid email address":"Email is required",x=N=>N?N.length<8?"Password must be at least 8 characters":/[A-Z]/.test(N)?/[a-z]/.test(N)?/[0-9]/.test(N)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password is required",p=(N,R)=>R?N!==R?"Passwords do not match":null:"Please confirm your password",b=N=>N?/^[\d\s\-()+]+$/.test(N)?N.replace(/\D/g,"").length<10?"Phone number must be at least 10 digits":null:"Please enter a valid phone number":"Phone number is required",v=()=>{const N={};a.business_name?a.business_name.length<2&&(N.business_name="Business name must be at least 2 characters"):N.business_name="Business name is required",a.business_registration_number?a.business_registration_number.length<3&&(N.business_registration_number="Registration number must be at least 3 characters"):N.business_registration_number="Business registration number is required",a.contact_person_name?a.contact_person_name.length<2&&(N.contact_person_name="Name must be at least 2 characters"):N.contact_person_name="Contact person name is required";const R=h(a.email);R&&(N.email=R);const O=b(a.phone_number);return O&&(N.phone_number=O),l(N),Object.keys(N).length===0},j=()=>{const N={};return a.business_address?a.business_address.length<10&&(N.business_address="Please enter a complete street address"):N.business_address="Street address is required",a.city||(N.city="City is required"),a.state||(N.state="State is required"),a.postal_code?/^\d{5}(-\d{4})?$/.test(a.postal_code)||(N.postal_code="Please enter a valid postal code (e.g., 12345 or 12345-6789)"):N.postal_code="Postal code is required",l(N),Object.keys(N).length===0},P=()=>{const N={},R=x(a.password);R&&(N.password=R);const O=p(a.password,a.confirm_password);return O&&(N.confirm_password=O),o||(N.terms="You must agree to the terms to continue"),l(N),Object.keys(N).length===0},w=(N,R)=>{n(T=>({...T,[N]:R}));const O=N;i[O]&&l(T=>{const g={...T};return delete g[O],g})},C=()=>{v()&&(r(2),window.scrollTo({top:0,behavior:"smooth"}))},f=()=>{j()&&(r(3),window.scrollTo({top:0,behavior:"smooth"}))},k=()=>{r(1),window.scrollTo({top:0,behavior:"smooth"})},y=()=>{r(2),window.scrollTo({top:0,behavior:"smooth"})},F=async()=>{if(!P())return;l(O=>{const T={...O};return delete T.general,T});const N=`${a.business_address}, ${a.city}, ${a.state} ${a.postal_code}, ${a.country}`,R={email:a.email.toLowerCase().trim(),password:a.password,business_name:a.business_name.trim(),business_registration_number:a.business_registration_number.trim(),business_type:a.business_type,contact_person_name:a.contact_person_name.trim(),phone_number:a.phone_number.trim(),business_address:N,business_description:a.business_description.trim()};m.mutate(R)},M=()=>{t("/login")},B=(N=>{let R=0;return N.length>=8&&R++,N.length>=12&&R++,/[A-Z]/.test(N)&&R++,/[a-z]/.test(N)&&R++,/[0-9]/.test(N)&&R++,/[^A-Za-z0-9]/.test(N)&&R++,Math.min(R,4)})(a.password),A=N=>N===0?"Too weak":N===1?"Weak":N===2?"Fair":N===3?"Good":"Strong",L=N=>N===0?"bg-red-500":N===1?"bg-orange-500":N===2?"bg-yellow-500":N===3?"bg-blue-500":"bg-green-500";return e.jsxs(e.Fragment,{children:[m.isSuccess&&m.data&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-2xl w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 px-8 py-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-6 shadow-lg",children:e.jsx("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Application Received!"}),e.jsx("p",{className:"text-xl text-green-50",children:"Thank you for applying to join BuildEasy"})]}),e.jsxs("div",{className:"px-8 py-10",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-800 text-lg font-medium mb-4",children:"What happens next?"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-gray-700",children:"Your application is now under review by our verification team"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsxs("span",{className:"text-gray-700",children:["We've sent a confirmation email to ",e.jsx("strong",{children:a.email})]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-gray-700",children:["We'll contact you within ",e.jsx("strong",{children:"2-3 business days"})," with a decision"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{className:"text-gray-700",children:["Application ID: ",e.jsx("strong",{className:"font-mono",children:m.data.application_id})]})]})]})]})}),c!==null&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Redirecting to login in ",e.jsx("strong",{className:"text-blue-600",children:c})," seconds..."]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-1000 ease-linear",style:{width:`${(5-c)/5*100}%`}})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:M,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 shadow-md hover:shadow-lg",children:"Go to Login Now"}),e.jsx(Q,{to:"/",className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors duration-200 text-center border border-gray-300",children:"Back to Home"})]})]})]})})}),!m.isSuccess&&e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:"Become a BuildEasy Supplier"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Join our marketplace and reach thousands of construction professionals"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s>=1?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"} font-semibold transition-colors duration-200`,children:s>1?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 hidden sm:inline",children:"Business Info"})]}),e.jsx("div",{className:`w-16 h-1 ${s>=2?"bg-blue-600":"bg-gray-300"} transition-colors duration-200`}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s>=2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"} font-semibold transition-colors duration-200`,children:s>2?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 hidden sm:inline",children:"Details"})]}),e.jsx("div",{className:`w-16 h-1 ${s>=3?"bg-blue-600":"bg-gray-300"} transition-colors duration-200`}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${s>=3?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"} font-semibold transition-colors duration-200`,children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 hidden sm:inline",children:"Account"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"px-6 sm:px-10 py-8",children:[i.general&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-sm",children:i.general})]}),s===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Business Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your construction supply business"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"business_name",value:a.business_name,onChange:N=>w("business_name",N.target.value),placeholder:"e.g., Acme Building Supply Co.",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.business_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.business_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.business_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_registration_number",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"business_registration_number",value:a.business_registration_number,onChange:N=>w("business_registration_number",N.target.value),placeholder:"e.g., EIN 12-3456789",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.business_registration_number?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.business_registration_number&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.business_registration_number]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_type",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"business_type",value:a.business_type,onChange:N=>w("business_type",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:border-blue-500 focus:ring-blue-100 transition-all duration-200",children:[e.jsx("option",{value:"Corporation",children:"Corporation"}),e.jsx("option",{value:"LLC",children:"LLC (Limited Liability Company)"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact_person_name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Contact Person Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"contact_person_name",value:a.contact_person_name,onChange:N=>w("contact_person_name",N.target.value),placeholder:"e.g., John Smith",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.contact_person_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.contact_person_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.contact_person_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:a.email,onChange:N=>w("email",N.target.value),placeholder:"your.email@company.com",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"We recommend using a business email address"}),i.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone_number",value:a.phone_number,onChange:N=>w("phone_number",N.target.value),placeholder:"(555) 123-4567",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.phone_number?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.phone_number&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.phone_number]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:C,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:"Continue"}),e.jsx(Q,{to:"/register",className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors duration-200 text-center border border-gray-300",children:"Back"})]})]}),s===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Business Details"}),e.jsx("p",{className:"text-gray-600",children:"Provide your business location and description"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_address",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Street Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"business_address",value:a.business_address,onChange:N=>w("business_address",N.target.value),placeholder:"123 Main Street",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.business_address?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.business_address&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.business_address]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-semibold text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"city",value:a.city,onChange:N=>w("city",N.target.value),placeholder:"Austin",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.city?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.city&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.city]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"state",className:"block text-sm font-semibold text-gray-700 mb-2",children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"state",value:a.state,onChange:N=>w("state",N.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.state?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,children:[e.jsx("option",{value:"",children:"Select a state..."}),y6.map(N=>e.jsx("option",{value:N.code,children:N.name},N.code))]}),i.state&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.state]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Postal Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postal_code",value:a.postal_code,onChange:N=>w("postal_code",N.target.value),placeholder:"78701",maxLength:10,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.postal_code?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.postal_code&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.postal_code]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Country"}),e.jsx("input",{type:"text",id:"country",value:a.country,readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_description",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Brief Business Description",e.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"(Optional)"})]}),e.jsx("textarea",{id:"business_description",value:a.business_description,onChange:N=>{N.target.value.length<=200&&w("business_description",N.target.value)},placeholder:"Tell us about your business and what you specialize in...",rows:4,maxLength:200,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:border-blue-500 focus:ring-blue-100 transition-all duration-200 resize-none"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 text-right",children:[a.business_description.length,"/200 characters"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:f,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:"Continue"}),e.jsx("button",{type:"button",onClick:k,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors duration-200 border border-gray-300",children:"Back"})]})]}),s===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Setup"}),e.jsx("p",{className:"text-gray-600",children:"Create your secure login credentials"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",id:"password",value:a.password,onChange:N=>w("password",N.target.value),placeholder:"Create a strong password",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),a.password&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password strength:"}),e.jsx("span",{className:`text-sm font-semibold ${B===0?"text-red-600":B===1?"text-orange-600":B===2?"text-yellow-600":B===3?"text-blue-600":"text-green-600"}`,children:A(B)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L(B)}`,style:{width:`${B/4*100}%`}})})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Password must contain:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-xs ${a.password.length>=8?"text-green-600":"text-gray-500"}`,children:[a.password.length>=8?"":""," 8+ characters"]}),e.jsxs("span",{className:`text-xs ${/[A-Z]/.test(a.password)?"text-green-600":"text-gray-500"}`,children:[/[A-Z]/.test(a.password)?"":""," Uppercase"]}),e.jsxs("span",{className:`text-xs ${/[a-z]/.test(a.password)?"text-green-600":"text-gray-500"}`,children:[/[a-z]/.test(a.password)?"":""," Lowercase"]}),e.jsxs("span",{className:`text-xs ${/[0-9]/.test(a.password)?"text-green-600":"text-gray-500"}`,children:[/[0-9]/.test(a.password)?"":""," Number"]})]})]}),i.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.password]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",id:"confirm_password",value:a.confirm_password,onChange:N=>w("confirm_password",N.target.value),placeholder:"Re-enter your password",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 transition-all duration-200 ${i.confirm_password?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`}),i.confirm_password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.confirm_password]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("label",{className:"flex items-start cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:N=>{d(N.target.checked),N.target.checked&&i.terms&&l(R=>{const O={...R};return delete O.terms,O})},className:"w-5 h-5 text-blue-600 border-2 border-gray-300 rounded focus:ring-4 focus:ring-blue-100 mt-0.5"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-700 leading-relaxed",children:["I agree to the BuildEasy"," ",e.jsx(Q,{to:"/terms",className:"text-blue-600 hover:text-blue-700 font-medium underline",target:"_blank",children:"Supplier Agreement"}),","," ",e.jsx(Q,{to:"/terms",className:"text-blue-600 hover:text-blue-700 font-medium underline",target:"_blank",children:"Terms of Service"}),", and"," ",e.jsx(Q,{to:"/privacy",className:"text-blue-600 hover:text-blue-700 font-medium underline",target:"_blank",children:"Privacy Policy"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),i.terms&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center ml-8",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.terms]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:F,disabled:m.isPending,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting Application..."]}):"Submit Application"}),e.jsx("button",{type:"button",onClick:y,disabled:m.isPending,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors duration-200 border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"})]})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx(Q,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold underline",children:"Sign in instead"})]})})]})})]})},j6=()=>{const t=ze(),[s]=Fe(),r=re(N=>N.authentication_state.authentication_status.is_authenticated),a=re(N=>N.authentication_state.authentication_status.is_loading),n=re(N=>N.authentication_state.error_message),i=re(N=>N.authentication_state.authentication_status.user_type),l=re(N=>N.login_user),o=re(N=>N.clear_auth_error),[d,c]=_.useState(""),[u,m]=_.useState(""),[h,x]=_.useState(!1),[p,b]=_.useState(!1),[v,j]=_.useState({email:null,password:null}),P=s.get("redirect_url"),w=s.get("email");_.useEffect(()=>{w&&c(w)},[w]),_.useEffect(()=>{r&&(P&&C(P)?t(P,{replace:!0}):i==="customer"?t("/dashboard",{replace:!0}):i==="supplier"?t("/supplier/dashboard",{replace:!0}):i==="admin"?t("/admin",{replace:!0}):t("/",{replace:!0}))},[r,i,t,P]);const C=N=>N?N.startsWith("/")&&!N.includes("://"):!1,f=N=>N.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N)?null:"Please enter a valid email address":"Email address is required",k=N=>N?N.length<8?"Password must be at least 8 characters":null:"Password is required",y=N=>{const R=N.target.value;c(R),v.email&&j(O=>({...O,email:null})),n&&o()},F=N=>{const R=N.target.value;m(R),v.password&&j(O=>({...O,password:null})),n&&o()},M=()=>{const N=f(d);j(R=>({...R,email:N}))},E=()=>{const N=k(u);j(R=>({...R,password:N}))},B=async N=>{N.preventDefault(),o();const R=f(d),O=k(u);if(R||O){j({email:R,password:O});return}j({email:null,password:null});try{await l(d.toLowerCase().trim(),u)}catch(T){console.error("Login error:",T)}},A=()=>{b(!p)},L=()=>{const N=d?`?email=${encodeURIComponent(d)}`:"";t(`/forgot-password${N}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-8 pt-8 pb-6 bg-gradient-to-r from-blue-600 to-indigo-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Sign in to access your BuildEasy account"})]})}),e.jsxs("div",{className:"px-8 py-8",children:[n&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:n})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(jt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:d,onChange:y,onBlur:M,disabled:a,placeholder:"you@example.com",className:`
                        block w-full pl-10 pr-4 py-3 
                        border-2 rounded-lg
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        disabled:opacity-50 disabled:cursor-not-allowed
                        ${v.email?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                      `})]}),v.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),v.email]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("button",{type:"button",onClick:L,className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Xn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:p?"text":"password",autoComplete:"current-password",required:!0,value:u,onChange:F,onBlur:E,disabled:a,placeholder:"Enter your password",className:`
                        block w-full pl-10 pr-12 py-3 
                        border-2 rounded-lg
                        text-gray-900 placeholder-gray-400
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        disabled:opacity-50 disabled:cursor-not-allowed
                        ${v.password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                      `}),e.jsx("button",{type:"button",onClick:A,disabled:a,className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:opacity-70 transition-opacity disabled:opacity-50","aria-label":p?"Hide password":"Show password",children:p?e.jsx(Oa,{className:"h-5 w-5 text-gray-400"}):e.jsx(xt,{className:"h-5 w-5 text-gray-400"})})]}),v.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),v.password]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:h,onChange:N=>x(N.target.checked),disabled:a,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Keep me signed in for 7 days"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a,className:`
                      w-full flex justify-center items-center
                      px-6 py-3 rounded-lg
                      bg-blue-600 hover:bg-blue-700
                      text-white font-medium
                      shadow-lg hover:shadow-xl
                      transition-all duration-200
                      focus:outline-none focus:ring-4 focus:ring-blue-100
                      disabled:opacity-50 disabled:cursor-not-allowed
                    `,children:a?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"New to BuildEasy?"})})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(Q,{to:"/register",className:`
                    w-full flex justify-center items-center
                    px-6 py-3 rounded-lg
                    bg-gray-100 hover:bg-gray-200
                    text-gray-900 font-medium
                    border-2 border-gray-300
                    transition-all duration-200
                    focus:outline-none focus:ring-4 focus:ring-gray-100
                  `,children:"Create an Account"})}),e.jsxs("div",{className:"mt-8 text-center space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Need help?"," ",e.jsx(Q,{to:"/help",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Visit our Help Center"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["By signing in, you agree to our"," ",e.jsx(Q,{to:"/terms",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Terms of Service"})," ","and"," ",e.jsx(Q,{to:"/privacy",className:"text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Privacy Policy"})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center bg-white rounded-full px-4 py-2 shadow-md border border-gray-100",children:[e.jsx("svg",{className:"h-4 w-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Secure Login  256-bit Encryption"})]})})]})})})},N6=()=>{const[t,s]=_.useState(""),[r,a]=_.useState(!1),[n,i]=_.useState(null),[l,o]=_.useState(null),[d,c]=_.useState(!1),u=p=>p?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)?(i(null),!0):(i("Please enter a valid email address"),!1):(i("Email address is required"),!1),m=async p=>{var b,v;if(p.preventDefault(),i(null),o(null),!!u(t)){a(!0);try{const j=await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/auth/forgot-password",{email:t.toLowerCase().trim()},{headers:{"Content-Type":"application/json"}});c(!0),o(j.data.message||"Password reset email sent successfully"),s("")}catch(j){(v=(b=j.response)==null?void 0:b.data)!=null&&v.message?i(j.response.data.message):j.message==="Network Error"?i("Connection error. Please check your internet connection."):i("Failed to send reset email. Please try again.")}finally{a(!1)}}},h=p=>{s(p.target.value),n&&i(null)},x=()=>{t&&u(t)};return _.useEffect(()=>{const p=document.getElementById("email-input");p&&p.focus()},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(Q,{to:"/login",className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors duration-200",children:[e.jsx(ir,{className:"mr-2 h-4 w-4"}),"Back to Login"]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-10",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(he,{className:"h-12 w-12 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Check Your Email"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed mb-4",children:"We've sent a password reset link to your email address."})]}),l&&e.jsx("div",{className:"mb-6 bg-green-50 border-2 border-green-200 text-green-700 px-4 py-3 rounded-lg",role:"alert","aria-live":"polite",children:e.jsx("p",{className:"text-sm font-medium",children:l})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"What's next?"}),e.jsxs("ol",{className:"text-sm text-gray-600 space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"Check your email inbox for the reset link"}),e.jsx("li",{children:"Click the link in the email (valid for 1 hour)"}),e.jsx("li",{children:"Create your new password"}),e.jsx("li",{children:"Sign in with your new password"})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{className:"font-semibold",children:"Didn't receive the email?"}),e.jsx("br",{}),"Check your spam or junk folder. If you still don't see it, you can try requesting another reset link."]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{to:"/login",className:`
                        w-full inline-flex items-center justify-center
                        px-6 py-3 rounded-lg font-medium text-white
                        bg-blue-600 hover:bg-blue-700
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        shadow-lg hover:shadow-xl
                      `,children:"Back to Login"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),o(null),i(null)},className:`
                        w-full px-6 py-3 rounded-lg font-medium
                        bg-gray-100 hover:bg-gray-200 text-gray-900
                        border border-gray-300
                        focus:outline-none focus:ring-4 focus:ring-gray-100
                        transition-all duration-200
                      `,children:"Send Another Reset Link"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(jt,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No worries! Enter your email address and we'll send you a secure link to reset your password."})]}),n&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg",role:"alert","aria-live":"polite",children:e.jsx("p",{className:"text-sm font-medium",children:n})}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email-input",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h,onBlur:x,placeholder:"Enter your email address",disabled:r,className:`
                          w-full px-4 py-3 rounded-lg border-2 
                          focus:outline-none focus:ring-4 focus:ring-blue-100
                          transition-all duration-200
                          ${n?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                          ${r?"bg-gray-50 cursor-not-allowed":"bg-white"}
                        `,"aria-invalid":n?"true":"false","aria-describedby":n?"email-error":void 0})]}),e.jsx("button",{type:"submit",disabled:r||!t,className:`
                        w-full px-6 py-3 rounded-lg font-medium text-white
                        bg-blue-600 hover:bg-blue-700
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        transition-all duration-200
                        disabled:opacity-50 disabled:cursor-not-allowed
                        shadow-lg hover:shadow-xl
                      `,children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Reset Link..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700 leading-relaxed",children:[e.jsx("strong",{className:"font-semibold",children:"Security Note:"})," For your protection, the reset link will expire in 1 hour. If you don't receive an email, please check your spam folder."]})})]})}),!d&&e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(Q,{to:"/login",className:"font-semibold text-blue-600 hover:text-blue-700 transition-colors",children:"Sign in instead"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(Q,{to:"/support",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Need help? Contact Support"})})]})})})},w6=t=>{if(!t)return 0;if(t.length<8)return 1;let s=2;const r=/[A-Z]/.test(t),a=/[a-z]/.test(t),n=/\d/.test(t),i=/[!@#$%^&*()_+=[\]{};':"\\|,.<>/?-]/.test(t);return(r||a)&&n&&(s=3),r&&a&&n&&i&&(s=4),s},_6=t=>{switch(t){case 0:return"";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return""}},k6=t=>{switch(t){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-blue-500";case 4:return"bg-green-500";default:return"bg-gray-200"}},S6=t=>[{label:"At least 8 characters",met:t.length>=8},{label:"Contains uppercase letter",met:/[A-Z]/.test(t)},{label:"Contains lowercase letter",met:/[a-z]/.test(t)},{label:"Contains number",met:/\d/.test(t)},{label:"Contains special character (!@#$%^&*)",met:/[!@#$%^&*()_+=[\]{};':"\\|,.<>/?-]/.test(t)}],C6=()=>{const t=ze(),[s]=Fe(),[r]=_.useState(s.get("reset_token")||s.get("token")||""),[a]=_.useState(s.get("email")||""),[n,i]=_.useState(""),[l,o]=_.useState(""),[d,c]=_.useState(null),[u,m]=_.useState(0),[h,x]=_.useState(!0),[p,b]=_.useState(!1),[v,j]=_.useState(!1),[P,w]=_.useState(!1),[C,f]=_.useState([]),k=oe({mutationFn:async A=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/auth/reset-password",A)).data,onSuccess:()=>{b(!0),c(null),setTimeout(()=>{t("/login",{state:{message:"Password reset successfully. Please sign in with your new password."}})},3e3)},onError:A=>{var L,N,R;if(G.isAxiosError(A)){const O=((N=(L=A.response)==null?void 0:L.data)==null?void 0:N.message)||"Failed to reset password. Please try again.";c(O),((R=A.response)==null?void 0:R.status)===400&&x(!1)}else c("An unexpected error occurred. Please try again.")}}),y=k.isPending;_.useEffect(()=>{r||(x(!1),c("Invalid or missing reset token. Please request a new password reset link."))},[r]),_.useEffect(()=>{const A=w6(n);m(A);const L=S6(n);f(L),d&&c(null)},[n,d]);const M=l?n===l:!0,E=()=>h&&n.length>0&&l.length>0&&M&&u>=3&&!y,B=async A=>{if(A.preventDefault(),c(null),!r){c("Invalid reset token. Please request a new password reset link.");return}if(n.length<8){c("Password must be at least 8 characters long.");return}if(!M){c("Passwords do not match.");return}if(u<3){c("Please choose a stronger password.");return}k.mutate({token:r,new_password:n})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-8 pt-8 pb-6 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:p?e.jsx(he,{className:"w-8 h-8 text-green-600"}):h?e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}):e.jsx(Ve,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:p?"Password Reset!":h?"Reset Your Password":"Invalid Token"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:p?"Your password has been successfully reset.":h?"Choose a strong password for your account.":"This reset link is invalid or has expired."})]}),p&&e.jsxs("div",{className:"px-8 pb-8",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(he,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Password Changed Successfully"}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:"You can now sign in with your new password."})]})]})}),e.jsx(Q,{to:"/login",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:"Sign In Now"}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Redirecting to login in 3 seconds..."})]}),!p&&!h&&e.jsxs("div",{className:"px-8 pb-8",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ve,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 text-sm font-medium",children:"Reset Link Invalid"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:"This password reset link is invalid or has expired. Links expire after 1 hour."})]})]})}),e.jsx(Q,{to:"/forgot-password",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:"Request New Reset Link"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(Q,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:" Back to Sign In"})})]}),!p&&h&&e.jsxs("form",{onSubmit:B,className:"px-8 pb-8",children:[a&&e.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Resetting password for:"})," ",a]})}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-red-800 text-sm",children:d})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"new_password",name:"new_password",type:v?"text":"password",required:!0,value:n,onChange:A=>i(A.target.value),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Enter new password",disabled:y}),e.jsx("button",{type:"button",onClick:()=>j(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:v?e.jsx(Oa,{className:"w-5 h-5"}):e.jsx(xt,{className:"w-5 h-5"})})]}),n&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:_6(u)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${k6(u)}`,style:{width:`${u/4*100}%`}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",name:"confirm_password",type:P?"text":"password",required:!0,value:l,onChange:A=>o(A.target.value),className:`block w-full px-4 py-3 border-2 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 transition-all duration-200 ${l&&!M?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}`,placeholder:"Re-enter new password",disabled:y}),e.jsx("button",{type:"button",onClick:()=>w(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:P?e.jsx(Oa,{className:"w-5 h-5"}):e.jsx(xt,{className:"w-5 h-5"})})]}),l&&e.jsx("div",{className:"mt-2",children:M?e.jsxs("p",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Passwords match"]}):e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Passwords do not match"]})})]}),n&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-3",children:"Password Requirements:"}),e.jsx("div",{className:"space-y-2",children:C.map((A,L)=>e.jsxs("div",{className:"flex items-center",children:[A.met?e.jsx(he,{className:"w-4 h-4 text-green-600 mr-2 flex-shrink-0"}):e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full mr-2 flex-shrink-0"}),e.jsx("span",{className:`text-xs ${A.met?"text-green-700 font-medium":"text-gray-600"}`,children:A.label})]},L))})]}),e.jsx("button",{type:"submit",disabled:!E(),className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:y?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"}),e.jsx("div",{className:"text-center",children:e.jsx(Q,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:" Back to Sign In"})})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"For security reasons, password reset links expire after 1 hour. If your link has expired, please request a new one."})})]})})})},P6=()=>{const t=ze(),s=re($=>$.authentication_state.current_user),r=re($=>$.authentication_state.auth_token),a=re($=>$.authentication_state.customer_profile);_.useEffect(()=>{a!=null&&a.onboarding_completed&&t("/dashboard",{replace:!0})},[a,t]);const[n,i]=_.useState(!0),[l,o]=_.useState(1),d=3,[c,u]=_.useState({street_address:"",city:"",state:"",postal_code:"",latitude:null,longitude:null}),[m,h]=_.useState([]),[x,p]=_.useState({email:!0,sms:!0,push:!0,order_updates:!0,promotions:!0}),[b,v]=_.useState(null),[j,P]=_.useState(null),[w,C]=_.useState({}),{data:f,isLoading:k}=ne({queryKey:["categories","active"],queryFn:async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:!0,limit:100}})).data,enabled:l===2||l===3,staleTime:3e5,retry:1,refetchOnWindowFocus:!1}),y=f||[],F=oe({mutationFn:async $=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/addresses",$,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,onSuccess:$=>{v($.address_id),P(null),C({}),o(2)},onError:$=>{var K,U;const I=((U=(K=$.response)==null?void 0:K.data)==null?void 0:U.message)||"Failed to save delivery address. Please try again.";P(I)}}),M=oe({mutationFn:async $=>(await G.patch("https://123create-construction-app-with-a.launchpulse.ai/api/customers/me",$,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{setTimeout(()=>{t("/dashboard",{replace:!0})},1e3)},onError:$=>{var K,U;const I=((U=(K=$.response)==null?void 0:K.data)==null?void 0:U.message)||"Failed to save preferences. Please try again.";P(I)}}),E=()=>{const $={};return c.street_address.trim()||($.street_address="Street address is required"),c.city.trim()||($.city="City is required"),c.state.trim()||($.state="State is required"),c.postal_code.trim()?/^\d{5}(-\d{4})?$/.test(c.postal_code)||($.postal_code="Invalid postal code format"):$.postal_code="Postal code is required",C($),Object.keys($).length===0},B=()=>{i(!1),o(1)},A=()=>{if(P(null),C({}),l===1){if(!E())return;const $={label:"Home",full_name:`${(s==null?void 0:s.first_name)||""} ${(s==null?void 0:s.last_name)||""}`.trim()||"Customer",phone_number:(s==null?void 0:s.phone_number)||"",street_address:c.street_address,city:c.city,state:c.state,postal_code:c.postal_code,country:"USA",is_default:!0,address_type:"residential",latitude:null,longitude:null};F.mutate($)}else l===2&&o(3)},L=()=>{P(null),C({}),l>1&&o(l-1)},N=()=>{P(null);const $={preferred_categories:m.length>0?m:void 0,notification_preferences:x,onboarding_completed:!0,default_delivery_address_id:b||void 0};M.mutate($)},R=()=>{const $={onboarding_completed:!0};M.mutate($)},O=$=>{h(I=>I.includes($)?I.filter(K=>K!==$):[...I,$])},T=$=>{p(I=>({...I,[$]:!I[$]}))},g=F.isPending||M.isPending,D=M.isSuccess;if(n)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"max-w-4xl w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"px-8 py-12 sm:px-12 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-6",children:e.jsx(he,{className:"w-12 h-12 text-blue-600"})}),e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:["Welcome to BuildEasy, ",(s==null?void 0:s.first_name)||"there","!"]}),e.jsx("p",{className:"text-xl text-gray-600",children:"Let's set up your account to give you the best experience"})]}),e.jsxs("div",{className:"grid gap-6 mb-12",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Real-time inventory from 100+ suppliers"}),e.jsx("p",{className:"text-gray-600",children:"See exact stock levels and availability instantly"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Transparent pricing, compare instantly"}),e.jsx("p",{className:"text-gray-600",children:"Find the best deals across multiple suppliers"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Reliable delivery tracking"}),e.jsx("p",{className:"text-gray-600",children:"Track your orders in real-time from warehouse to job site"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Secure payments, multiple options"}),e.jsx("p",{className:"text-gray-600",children:"Pay with credit cards, trade credit, or digital wallets"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:B,className:"w-full sm:w-auto px-8 py-4 bg-blue-600 text-white rounded-lg font-semibold text-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:["Get Started",e.jsx(ls,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:R,disabled:g,className:"w-full sm:w-auto px-8 py-4 bg-gray-100 text-gray-700 rounded-lg font-medium text-lg hover:bg-gray-200 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip for now"})]})]})})})});if(D)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl overflow-hidden text-center px-8 py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-green-100 rounded-full mb-6",children:e.jsx(he,{className:"w-16 h-16 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"You're all set! "}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Your account is ready. Let's start building!"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-8 text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Start Tips:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Start searching for construction materials"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Compare prices across suppliers instantly"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Track every delivery in real-time"})]})]})]}),e.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Redirecting to dashboard..."})]})})});const S=l/d*100;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg px-6 py-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Setup"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",l," of ",d]})]}),e.jsx("button",{onClick:R,disabled:g,className:"text-sm text-gray-500 hover:text-gray-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip for now"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${S}%`}})})]}),j&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg px-6 py-4 mb-6 flex items-start gap-3",children:[e.jsx(ge,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:j})}),e.jsx("button",{onClick:()=>P(null),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg px-8 py-10",children:[l===1&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Where should we deliver?"}),e.jsx("p",{className:"text-gray-600",children:"Set your default delivery address to see accurate availability and delivery times"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"street_address",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Street Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"street_address",type:"text",value:c.street_address,onChange:$=>{u(I=>({...I,street_address:$.target.value})),C(I=>({...I,street_address:""}))},placeholder:"123 Construction Blvd",className:`w-full px-4 py-3 rounded-lg border-2 ${w.street_address?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all duration-200`}),w.street_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.street_address})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-semibold text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"city",type:"text",value:c.city,onChange:$=>{u(I=>({...I,city:$.target.value})),C(I=>({...I,city:""}))},placeholder:"Austin",className:`w-full px-4 py-3 rounded-lg border-2 ${w.city?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all duration-200`}),w.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"state",className:"block text-sm font-semibold text-gray-700 mb-2",children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"state",value:c.state,onChange:$=>{u(I=>({...I,state:$.target.value})),C(I=>({...I,state:""}))},className:`w-full px-4 py-3 rounded-lg border-2 ${w.state?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all duration-200 bg-white`,children:[e.jsx("option",{value:"",children:"Select State"}),e.jsx("option",{value:"TX",children:"Texas"}),e.jsx("option",{value:"CA",children:"California"}),e.jsx("option",{value:"NY",children:"New York"}),e.jsx("option",{value:"FL",children:"Florida"}),e.jsx("option",{value:"IL",children:"Illinois"}),e.jsx("option",{value:"PA",children:"Pennsylvania"}),e.jsx("option",{value:"OH",children:"Ohio"}),e.jsx("option",{value:"GA",children:"Georgia"})]}),w.state&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.state})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_code",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Postal Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"postal_code",type:"text",value:c.postal_code,onChange:$=>{u(I=>({...I,postal_code:$.target.value})),C(I=>({...I,postal_code:""}))},placeholder:"78701",maxLength:10,className:`w-full px-4 py-3 rounded-lg border-2 ${w.postal_code?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all duration-200`}),w.postal_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.postal_code})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"save_default",type:"checkbox",checked:!0,disabled:!0,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"save_default",className:"ml-3 text-sm text-gray-700",children:"Save as my default delivery address"})]})})]})]}),l===2&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx($l,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What do you typically need?"}),e.jsx("p",{className:"text-gray-600",children:"Select categories to personalize your experience (select all that apply)"})]}),k?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):y.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:y.slice(0,12).map($=>{const I=m.includes($.category_id);return e.jsxs("button",{type:"button",onClick:()=>O($.category_id),className:`relative p-6 rounded-xl border-2 transition-all duration-200 ${I?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}`,children:[I&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[$.icon_url?e.jsx("img",{src:$.icon_url,alt:$.category_name,className:"w-12 h-12 object-contain"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx($l,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:`text-sm font-medium ${I?"text-blue-900":"text-gray-900"}`,children:$.category_name})]})]},$.category_id)})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No categories available. You can skip this step."})}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-4 py-3",children:e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.jsx("strong",{children:m.length})," ",m.length===1?"category":"categories"," selected"]})})]}),l===3&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(Ht,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Stay updated on your orders"}),e.jsx("p",{className:"text-gray-600",children:"Choose how you'd like to receive notifications"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:"Order Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about order status changes and delivery updates"})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email + SMS"}),e.jsx("button",{type:"button",role:"switch","aria-checked":x.order_updates,onClick:()=>T("order_updates"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x.order_updates?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.order_updates?"translate-x-5":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:"Delivery Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"SMS alerts when your delivery is approaching"})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"SMS"}),e.jsx("button",{type:"button",role:"switch","aria-checked":x.sms,onClick:()=>T("sms"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x.sms?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.sms?"translate-x-5":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:"Price Drop Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Email notifications when items in your wishlist go on sale"})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("button",{type:"button",role:"switch","aria-checked":x.email,onClick:()=>T("email"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x.email?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.email?"translate-x-5":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:"Weekly Deals"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get exclusive deals and offers delivered to your inbox"})]}),e.jsxs("div",{className:"ml-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("button",{type:"button",role:"switch","aria-checked":x.promotions,onClick:()=>T("promotions"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x.promotions?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.promotions?"translate-x-5":"translate-x-0"}`})})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-10 pt-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:L,disabled:l===1||g,className:"flex items-center gap-2 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ir,{className:"w-5 h-5"}),"Back"]}),l<d?e.jsx("button",{type:"button",onClick:A,disabled:g,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsxs(e.Fragment,{children:["Continue",e.jsx(ls,{className:"w-5 h-5"})]})}):e.jsx("button",{type:"button",onClick:N,disabled:g,className:"flex items-center gap-2 px-8 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Completing..."]}):e.jsxs(e.Fragment,{children:["Complete Setup",e.jsx(he,{className:"w-5 h-5"})]})})]})]})]})})})},zo="https://123create-construction-app-with-a.launchpulse.ai/api",A6=async t=>((await G.get(`${zo}/orders`,{headers:{Authorization:`Bearer ${t}`},params:{status_filter:"pending,processing,shipped,in_transit",limit:3,sort_by:"order_date",sort_order:"desc"}})).data.orders||[]).map(a=>{var n,i,l,o,d,c,u,m;return{order_id:a.order_id,order_number:a.order_number,order_date:a.order_date,status:a.status,total_amount:Number(a.total_amount||0),delivery_status:((n=a.delivery)==null?void 0:n.delivery_status)||"unknown",estimated_delivery:((i=a.delivery)==null?void 0:i.delivery_window_end)||null,primary_product:{product_name:((o=(l=a.items)==null?void 0:l[0])==null?void 0:o.product_name)||"N/A",product_id:((c=(d=a.items)==null?void 0:d[0])==null?void 0:c.product_id)||"",thumbnail_url:((m=(u=a.items)==null?void 0:u[0])==null?void 0:m.primary_image_url)||"/placeholder-product.png"}}}),$6=async t=>(await G.get(`${zo}/products`,{headers:{Authorization:`Bearer ${t}`},params:{limit:12,sort_by:"sales_count",sort_order:"desc",in_stock_only:!0}})).data.products||[],O6=async t=>((await G.get(`${zo}/wishlist`,{headers:{Authorization:`Bearer ${t}`}})).data||[]).length,T6=async t=>((await G.get(`${zo}/projects`,{headers:{Authorization:`Bearer ${t}`}})).data||[]).length,Zc=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/(1e3*60*60*24));return n===0?"Today":n===1?"Yesterday":n<7?`${n} days ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Pn=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),E6=t=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",in_transit:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",F6=()=>{var b;const t=re(v=>v.authentication_state.current_user),s=re(v=>v.authentication_state.customer_profile),r=re(v=>v.authentication_state.auth_token),a=re(v=>v.cart_state.total_items),{data:n=[],isLoading:i,error:l,refetch:o}=ne({queryKey:["active-orders",{limit:3}],queryFn:()=>A6(r),enabled:!!r,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),{data:d=[],isLoading:c,error:u}=ne({queryKey:["recommended-products",{limit:12}],queryFn:()=>$6(r),enabled:!!r,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),{data:m=0}=ne({queryKey:["wishlist-count"],queryFn:()=>O6(r),enabled:!!r,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),{data:h=0}=ne({queryKey:["projects-count"],queryFn:()=>T6(r),enabled:!!r,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),x=n.filter(v=>["scheduled","out_for_delivery","preparing"].includes(v.delivery_status)).map(v=>({delivery_id:`del_${v.order_id}`,order_id:v.order_id,order_number:v.order_number,supplier_name:"Supplier",delivery_window_start:v.estimated_delivery||"",delivery_window_end:v.estimated_delivery||"",delivery_status:v.delivery_status})).slice(0,1),p={spending_this_month:n.reduce((v,j)=>v+j.total_amount,0),orders_this_month:n.length,trade_credit_available:(s==null?void 0:s.trade_credit_balance)||null,trade_credit_limit:(s==null?void 0:s.trade_credit_limit)||null};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[t!=null&&t.profile_photo_url?e.jsx("img",{src:t.profile_photo_url,alt:`${t.first_name} ${t.last_name}`,className:"h-16 w-16 rounded-full object-cover border-2 border-blue-200"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-600 flex items-center justify-center text-white text-2xl font-bold",children:((b=t==null?void 0:t.first_name)==null?void 0:b.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:["Welcome back, ",(t==null?void 0:t.first_name)||"Customer","!"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(s==null?void 0:s.account_type)==="trade"&&e.jsx("div",{className:"hidden md:block",children:e.jsxs("span",{className:"inline-flex items-center px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold text-sm shadow-lg",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Trade Account"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(Q,{to:"/products",className:"flex flex-col items-center justify-center p-6 rounded-lg border-2 border-gray-200 hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center mb-3 group-hover:bg-blue-600 transition-colors",children:e.jsx(Xe,{className:"h-6 w-6 text-blue-600 group-hover:text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-center",children:"Search Products"})]}),e.jsxs("button",{onClick:()=>{n.length>0&&alert("Reorder functionality coming soon")},disabled:n.length===0,className:"flex flex-col items-center justify-center p-6 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:bg-green-50 transition-all duration-200 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200 disabled:hover:bg-white",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mb-3 group-hover:bg-green-600 transition-colors",children:e.jsx(vt,{className:"h-6 w-6 text-green-600 group-hover:text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-center",children:"Reorder Last"})]}),e.jsxs(Q,{to:"/wishlist",className:"flex flex-col items-center justify-center p-6 rounded-lg border-2 border-gray-200 hover:border-red-500 hover:bg-red-50 transition-all duration-200 group relative",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center mb-3 group-hover:bg-red-600 transition-colors",children:e.jsx(Di,{className:"h-6 w-6 text-red-600 group-hover:text-white"})}),m>0&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center",children:m}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-center",children:"Saved Items"})]}),e.jsxs(Q,{to:"/projects",className:"flex flex-col items-center justify-center p-6 rounded-lg border-2 border-gray-200 hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group relative",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center mb-3 group-hover:bg-purple-600 transition-colors",children:e.jsx(Md,{className:"h-6 w-6 text-purple-600 group-hover:text-white"})}),h>0&&e.jsx("span",{className:"absolute top-2 right-2 bg-purple-600 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center",children:h}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-center",children:"My Projects"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Active Orders"}),e.jsxs(Q,{to:"/orders",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center transition-colors",children:["View All",e.jsx(Ie,{className:"h-4 w-4 ml-1"})]})]}),i&&e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"bg-gray-200 h-20 w-20 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"bg-gray-200 h-4 w-1/3 rounded"}),e.jsx("div",{className:"bg-gray-200 h-3 w-1/2 rounded"}),e.jsx("div",{className:"bg-gray-200 h-3 w-1/4 rounded"})]})]})},v))}),l&&!i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Failed to load orders"}),e.jsxs("button",{onClick:()=>o(),className:"text-red-600 hover:text-red-700 text-sm font-medium mt-2 flex items-center",children:[e.jsx(vt,{className:"h-4 w-4 mr-1"}),"Try again"]})]})]})}),!i&&!l&&n.length>0&&e.jsx("div",{className:"space-y-4",children:n.map(v=>e.jsx(Q,{to:`/orders/${v.order_id}`,className:"block border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:v.primary_product.thumbnail_url,alt:v.primary_product.product_name,className:"h-20 w-20 rounded-lg object-cover border border-gray-200",onError:j=>{const P=j.target;P.src="/placeholder-product.png"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-600",children:["Order #",v.order_number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${E6(v.status)}`,children:v.status.replace("_"," ")})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate mb-1",children:v.primary_product.product_name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Zc(v.order_date)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:Pn(v.total_amount)}),v.estimated_delivery&&e.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:["Arriving ",Zc(v.estimated_delivery)]})]})]})]})},v.order_id))}),!i&&!l&&n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No active orders"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start shopping to place your first order"}),e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[e.jsx(Xe,{className:"h-5 w-5 mr-2"}),"Browse Products"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recommended For You"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Based on your preferences"})]}),c&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(v=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-48 rounded-lg mb-2"}),e.jsx("div",{className:"bg-gray-200 h-4 w-3/4 rounded mb-2"}),e.jsx("div",{className:"bg-gray-200 h-3 w-1/2 rounded"})]},v))}),u&&!c&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-yellow-800 text-sm",children:"Unable to load recommendations"})}),!c&&!u&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.slice(0,8).map(v=>e.jsx(Q,{to:`/product/${v.product_id}`,className:"group",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-xl hover:border-blue-500 transition-all duration-200",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[e.jsx("img",{src:v.primary_image_url||"/placeholder-product.png",alt:v.product_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:j=>{const P=j.target;P.src="/placeholder-product.png"}}),v.stock_quantity>0&&v.stock_quantity<=10&&e.jsx("span",{className:"absolute top-2 right-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Low Stock"})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate mb-1 group-hover:text-blue-600",children:v.product_name}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:Pn(Number(v.price_per_unit||0))}),v.stock_quantity>0?e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"In Stock"}):e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Out of Stock"})]})]})},v.product_id))}),d.length>8&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(Q,{to:"/products",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium transition-colors",children:["See All Recommendations",e.jsx(ls,{className:"h-4 w-4 ml-1"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(mt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Activity tracking coming soon"})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Account Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Spending This Month"}),e.jsx("p",{className:"text-2xl font-bold",children:Pn(p.spending_this_month)})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Orders This Month"}),e.jsx("p",{className:"text-2xl font-bold",children:p.orders_this_month})]}),p.trade_credit_limit&&e.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Available Credit"}),e.jsx("p",{className:"text-2xl font-bold",children:Pn(p.trade_credit_available||0)}),e.jsxs("p",{className:"text-blue-100 text-xs mt-1",children:["of ",Pn(p.trade_credit_limit)," limit"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 mr-2 text-blue-600"}),"Upcoming Deliveries"]}),x.length>0?e.jsx("div",{className:"space-y-4",children:x.map(v=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Order #",v.order_number]}),e.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:v.delivery_status})]}),v.delivery_window_end&&e.jsxs("div",{className:"flex items-center text-gray-900 mb-2",children:[e.jsx(mt,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:Zc(v.delivery_window_end)})]}),e.jsxs(Q,{to:`/orders/${v.order_id}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center mt-3",children:["Track Order",e.jsx(ls,{className:"h-4 w-4 ml-1"})]})]},v.delivery_id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No scheduled deliveries"})]})]}),a>0&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(nb,{className:"h-6 w-6 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Cart"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a," items waiting"]})]})]})}),e.jsx(Q,{to:"/cart",className:"block w-full bg-green-600 text-white text-center py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors shadow-lg hover:shadow-xl",children:"View Cart & Checkout"})]})]})]})})]})})},M6=async(t,s)=>{const r="https://123create-construction-app-with-a.launchpulse.ai",a={"Content-Type":"application/json"};return s&&(a.Authorization=`Bearer ${s}`),(await G.get(`${r}/api/products/compare`,{params:{product_ids:t.join(",")},headers:a})).data.filter(i=>i!==null)},R6=async(t,s)=>(await G.post("/cart/items",{product_id:t,quantity:1})).data,D6=()=>{const t=ze(),s=Pe(),[r,a]=Fe(),n=re(D=>D.authentication_state.auth_token),i=re(D=>D.authentication_state.authentication_status.is_authenticated),l=re(D=>D.fetch_cart),o=_.useMemo(()=>{var D;return((D=r.get("product_ids"))==null?void 0:D.split(",").filter(S=>S.trim()))||[]},[r]),[d,c]=_.useState(!1),[u,m]=_.useState(0),[h,x]=_.useState(!1),p=5;_.useEffect(()=>{i||t("/login?redirect_url=/compare")},[i,t]);const{data:b=[],isLoading:v,error:j,refetch:P}=ne({queryKey:["comparison-products",o.join(",")],queryFn:()=>M6(o,n),enabled:o.length>=2&&o.length<=p,staleTime:2*60*1e3,select:D=>D.map(S=>({...S,price_per_unit:Number(S.price_per_unit||0),stock_quantity:Number(S.stock_quantity||0),rating_average:Number(S.rating_average||0)}))}),w=oe({mutationFn:D=>R6(D),onSuccess:()=>{l(),s.invalidateQueries({queryKey:["cart"]})}}),C=_.useMemo(()=>{if(!b)return[];const D=b.map(S=>S.product_id);return o.filter(S=>!D.includes(S))},[o,b]),f=_.useMemo(()=>{if(b.length===0)return[];const D=[{attribute_key:"product_name",attribute_label:"Product Name",values:b.map($=>$.product_name),has_differences:new Set(b.map($=>$.product_name)).size>1},{attribute_key:"price_per_unit",attribute_label:"Price",values:b.map($=>$.price_per_unit),has_differences:new Set(b.map($=>$.price_per_unit)).size>1},{attribute_key:"supplier",attribute_label:"Supplier",values:b.map($=>$.business_name||"Unknown"),has_differences:new Set(b.map($=>$.business_name)).size>1},{attribute_key:"rating",attribute_label:"Rating",values:b.map($=>$.rating_average||0),has_differences:new Set(b.map($=>$.rating_average)).size>1},{attribute_key:"stock_quantity",attribute_label:"In Stock",values:b.map($=>$.stock_quantity>0?"Yes":"No"),has_differences:new Set(b.map($=>$.stock_quantity>0)).size>1},{attribute_key:"brand",attribute_label:"Brand",values:b.map($=>$.brand||"N/A"),has_differences:new Set(b.map($=>$.brand)).size>1},{attribute_key:"sku",attribute_label:"SKU",values:b.map($=>$.sku),has_differences:new Set(b.map($=>$.sku)).size>1},{attribute_key:"delivery_time",attribute_label:"Delivery Time",values:b.map($=>$.handling_time_days?`${$.handling_time_days} days`:"N/A"),has_differences:new Set(b.map($=>$.handling_time_days)).size>1}],S=new Set;return b.forEach($=>{$.specifications&&Object.keys($.specifications).forEach(I=>S.add(I))}),S.forEach($=>{const I=b.map(K=>{var U,q;return((q=(U=K.specifications)==null?void 0:U[$])==null?void 0:q.toString())||"N/A"});D.push({attribute_key:`spec_${$}`,attribute_label:$.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase()),values:I,has_differences:new Set(I).size>1})}),D},[b]),k=_.useMemo(()=>d?f.filter(D=>D.has_differences):f,[f,d]),y=_.useMemo(()=>{if(b.length===0)return{};const D=b.map(se=>se.price_per_unit),S=Math.min(...D),$=D.indexOf(S),I=b.map(se=>se.handling_time_days||999),K=Math.min(...I),U=I.indexOf(K),q=b.map(se=>se.rating_average||0),z=Math.max(...q),Y=q.indexOf(z);return{bestPrice:$,fastestDelivery:U,highestRated:Y}},[b]),F=D=>{const S=o.filter($=>$!==D);if(S.length<2){t("/products");return}a({product_ids:S.join(",")})},M=async D=>{try{await w.mutateAsync(D.product_id)}catch(S){console.error("Failed to add to cart:",S)}},E=async()=>{try{for(const D of b)await w.mutateAsync(D.product_id)}catch(D){console.error("Failed to add all to cart:",D)}},B=()=>{const D=window.location.href;navigator.clipboard.writeText(D).then(()=>{x(!0),setTimeout(()=>x(!1),3e3)})},A=()=>{window.print()},L=()=>{c(!d)},N=()=>{m(D=>D<b.length-1?D+1:D)},R=()=>{m(D=>D>0?D-1:D)};if(o.length===0)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(de,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Products Selected"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Select products from the catalog to compare them side-by-side."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]})})});if(o.length===1)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(de,{className:"w-16 h-16 text-amber-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add More Products to Compare"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need at least 2 products to make a comparison."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add More Products"})]})})});if(o.length>p)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(de,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Too Many Products"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["You can compare up to ",p," products at once."]}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Products"})]})})});if(v)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading comparison..."})]})})})})});if(j)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(de,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Failed to Load Products"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"There was an error loading the comparison data."}),e.jsxs("button",{onClick:()=>P(),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})})});const O=()=>C.length===0?null:e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:"Some Products Not Found"}),e.jsxs("p",{className:"text-sm text-amber-700",children:[C.length," product",C.length>1?"s":""," could not be loaded. Showing comparison with available products only."]})]})]})}),T=()=>e.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-gray-50 px-6 py-4 text-left text-sm font-semibold text-gray-900 min-w-[200px]",children:"Attributes"}),b.map((D,S)=>e.jsx("th",{className:"px-6 py-4 min-w-[280px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>F(D.product_id),className:"absolute -top-2 -right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors","aria-label":"Remove product from comparison",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-1 justify-center min-h-[24px]",children:[y.bestPrice===S&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Best Price"]}),y.fastestDelivery===S&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Fastest"]}),y.highestRated===S&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Top Rated"]})]}),e.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:D.primary_image_url||"https://via.placeholder.com/280",alt:D.product_name,className:"w-full h-full object-cover"})})]})]})},D.product_id))]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[k.map((D,S)=>e.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"sticky left-0 z-10 px-6 py-4 text-sm font-medium text-gray-900 bg-inherit",children:D.attribute_label}),D.values.map(($,I)=>e.jsx("td",{className:`px-6 py-4 text-sm text-gray-700 ${D.attribute_key==="price_per_unit"&&y.bestPrice===I?"bg-green-50 font-semibold":D.attribute_key==="delivery_time"&&y.fastestDelivery===I?"bg-blue-50 font-semibold":D.attribute_key==="rating"&&y.highestRated===I?"bg-yellow-50 font-semibold":""}`,children:D.attribute_key==="price_per_unit"?`$${Number($).toFixed(2)}`:D.attribute_key==="rating"?`${Number($).toFixed(1)} `:$},I))]},D.attribute_key)),e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"sticky left-0 z-10 px-6 py-4 text-sm font-medium text-gray-900 bg-white",children:"Actions"}),b.map(D=>e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>M(D),disabled:w.isPending||D.stock_quantity===0,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Adding...":e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})}),e.jsx(Q,{to:`/product/${D.product_id}`,className:"block w-full text-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"View Details"})]})},D.product_id))]})]})]})}),g=()=>{const D=b[u];return D?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:R,disabled:u===0,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center space-x-2",children:b.map((S,$)=>e.jsx("button",{onClick:()=>m($),className:`w-2 h-2 rounded-full transition-colors ${$===u?"bg-blue-600":"bg-gray-300"}`,"aria-label":`View product ${$+1}`},$))}),e.jsx("button",{onClick:N,disabled:u===b.length-1,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[y.bestPrice===u&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Best Price"]}),y.fastestDelivery===u&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Fastest Delivery"]}),y.highestRated===u&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Top Rated"]})]}),e.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4",children:e.jsx("img",{src:D.primary_image_url||"https://via.placeholder.com/400",alt:D.product_name,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:D.product_name}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-4",children:["$",Number(D.price_per_unit||0).toFixed(2)]}),e.jsx("div",{className:"space-y-3 mb-6",children:k.map(S=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:S.attribute_label}),e.jsx("span",{className:"text-sm text-gray-900",children:S.attribute_key==="price_per_unit"?`$${Number(S.values[u]).toFixed(2)}`:S.attribute_key==="rating"?`${Number(S.values[u]).toFixed(1)} `:S.values[u]})]},S.attribute_key))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>M(D),disabled:w.isPending||D.stock_quantity===0,className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Adding...":e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-5 h-5 mr-2"}),"Add to Cart"]})}),e.jsx(Q,{to:`/product/${D.product_id}`,className:"block w-full text-center px-4 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"View Full Details"}),e.jsxs("button",{onClick:()=>F(D.product_id),className:"w-full flex items-center justify-center px-4 py-3 border border-red-200 text-red-600 font-medium rounded-lg hover:bg-red-50 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"Remove from Comparison"]})]})]})]}):null};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Compare Products"}),e.jsxs("p",{className:"text-gray-600",children:["Comparing ",b.length," product",b.length!==1?"s":""]})]}),e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Add More Products"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("button",{onClick:L,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:d?"Show All Attributes":"Highlight Differences Only"}),e.jsxs("button",{onClick:E,disabled:w.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-2"}),"Add All to Cart"]}),e.jsxs("button",{onClick:B,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(lw,{className:"w-4 h-4 inline mr-2"}),h?"Link Copied!":"Share"]}),e.jsxs("button",{onClick:A,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium hidden md:block",children:[e.jsx(ow,{className:"w-4 h-4 inline mr-2"}),"Print"]})]})]}),e.jsx(O,{}),b.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[e.jsx(de,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products to Compare"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The selected products could not be loaded."}),e.jsx(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(T,{})}),e.jsx("div",{className:"block md:hidden",children:e.jsx(g,{})})]}),b.length>0&&e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Comparison Tips"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Green highlights indicate the best price among compared products"}),e.jsx("li",{children:" Blue highlights show the fastest delivery time"}),e.jsx("li",{children:" Gold highlights indicate the highest-rated product"}),e.jsx("li",{children:' Use "Highlight Differences Only" to focus on key distinctions'}),e.jsx("li",{children:" Add products to your cart directly from the comparison"})]})]})]})})})},L6=t=>{const s={};return t.forEach(r=>{s[r.supplier_id]||(s[r.supplier_id]={supplier_info:{supplier_id:r.supplier_id,business_name:r.business_name||"Unknown Supplier",logo_url:null},items:[],supplier_subtotal:0}),s[r.supplier_id].items.push(r),s[r.supplier_id].supplier_subtotal+=r.quantity*r.price_per_unit}),s},I6=(t,s)=>{const r=Object.values(t).reduce((c,u)=>c+u.supplier_subtotal,0),a=Object.values(t).reduce((c,u)=>c+u.items.reduce((m,h)=>m+h.quantity,0),0),n=Object.keys(t).length,i=n*50,l=r*.08,o=(s==null?void 0:s.discount_applied)||0,d=r+i+l-o;return{items_subtotal:r,total_delivery_fees:i,estimated_tax:l,promo_discount:o,grand_total:d,total_item_count:a,total_supplier_count:n}},q6=t=>{const s=[];return t.forEach(r=>{r.stock_quantity!==void 0&&r.stock_quantity<r.quantity&&s.push({cart_item_id:r.cart_item_id,warning_type:r.stock_quantity===0?"out_of_stock":"stock_reduced",message:r.stock_quantity===0?`${r.product_name} is now out of stock`:`Only ${r.stock_quantity} units available (you have ${r.quantity} in cart)`})}),s},B6=()=>{const t=ze(),s=Pe(),r=re(U=>U.authentication_state.auth_token),a=re(U=>{var q;return(q=U.authentication_state.current_user)==null?void 0:q.user_id}),n=re(U=>U.fetch_cart),[i,l]=_.useState(""),[o,d]=_.useState(null),[c,u]=_.useState(null),[m,h]=_.useState(!1),[x,p]=_.useState(""),[b,v]=_.useState(""),[j,P]=_.useState(new Set),w="https://123create-construction-app-with-a.launchpulse.ai/api",{data:C,isLoading:f,error:k,refetch:y}=ne({queryKey:["cart",a],queryFn:async()=>{if(!r)throw new Error("Not authenticated");return(await G.get(`${w}/cart`,{headers:{Authorization:`Bearer ${r}`}})).data},enabled:!!r&&!!a,staleTime:6e4,refetchOnWindowFocus:!1,retry:1,select:U=>{const q=L6(U.items||[]),z=q6(U.items||[]);return{cart:U.cart,items:U.items||[],items_by_supplier:q,subtotal:Number(U.subtotal||0),total_items:Number(U.total_items||0),warnings:z}}}),F=(C==null?void 0:C.items_by_supplier)||{},M=(C==null?void 0:C.warnings)||[],E=I6(F,o),B=oe({mutationFn:async({cart_item_id:U,quantity:q})=>(await G.patch(`${w}/cart/items/${U}`,{quantity:q},{headers:{Authorization:`Bearer ${r}`}})).data,onMutate:async U=>{u(U.cart_item_id)},onSuccess:()=>{s.invalidateQueries({queryKey:["cart"]}),n()},onError:U=>{console.error("Failed to update quantity:",U)},onSettled:()=>{u(null)}}),A=oe({mutationFn:async U=>{await G.delete(`${w}/cart/items/${U}`,{headers:{Authorization:`Bearer ${r}`}})},onMutate:async U=>{P(q=>new Set(q).add(U))},onSuccess:()=>{s.invalidateQueries({queryKey:["cart"]}),n()},onError:(U,q)=>{P(z=>{const Y=new Set(z);return Y.delete(q),Y}),console.error("Failed to remove item:",U)}}),L=oe({mutationFn:async()=>{await G.delete(`${w}/cart`,{headers:{Authorization:`Bearer ${r}`}})},onSuccess:()=>{s.invalidateQueries({queryKey:["cart"]}),n()}}),N=oe({mutationFn:async U=>(await G.post(`${w}/promotions/validate`,{promo_code:U.toUpperCase(),cart_total:E.items_subtotal},{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:U=>{U.valid&&U.promotion&&(d({promotion_id:U.promotion.promotion_id,promo_code:U.promotion.promo_code,discount_type:U.promotion.discount_type,discount_value:Number(U.promotion.discount_value||0),discount_applied:Number(U.discount_amount||0)}),l(""))},onError:U=>{console.error("Promo validation failed:",U)}}),R=oe({mutationFn:async({project_name:U,description:q})=>(await G.post(`${w}/cart/save`,{project_name:U,description:q},{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{h(!1),p(""),v("")}}),O=(U,q)=>{q<1||B.mutate({cart_item_id:U,quantity:q})},T=U=>{A.mutate(U)},g=U=>{U.preventDefault(),i.trim()&&N.mutate(i.trim())},D=()=>{d(null)},S=()=>{window.confirm("Are you sure you want to clear your cart?")&&L.mutate()},$=U=>{U.preventDefault(),x.trim()&&R.mutate({project_name:x.trim(),description:b.trim()})},I=()=>{t("/checkout")};return f?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ut,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your cart..."})]})})}):k?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(de,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Cart"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't load your shopping cart. Please try again."}),e.jsx("button",{onClick:()=>y(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})})}):!C||C.total_items===0||Object.keys(F).length===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Be,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:"Start adding products to build your order"}),e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-8 py-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Browse Products"]})]})})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Shopping Cart"}),e.jsx(Q,{to:"/products",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Continue Shopping"})]}),e.jsxs("p",{className:"text-gray-600 text-lg",children:[E.total_item_count," ",E.total_item_count===1?"item":"items"," from ",E.total_supplier_count," ",E.total_supplier_count===1?"supplier":"suppliers"]})]}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[M.length>0&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(de,{className:"w-5 h-5 text-amber-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-800 mb-2",children:"Cart Items Need Attention"}),e.jsx("ul",{className:"text-sm text-amber-700 space-y-1",children:M.map((U,q)=>e.jsxs("li",{children:[" ",U.message]},q))})]})]})}),Object.entries(F).map(([U,q])=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:e.jsx(ve,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:q.supplier_info.business_name}),e.jsx(Q,{to:`/supplier/${U}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Visit Shop"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",q.supplier_subtotal.toFixed(2)]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:q.items.map(z=>{const Y=j.has(z.cart_item_id),se=c===z.cart_item_id,J=M.some(te=>te.cart_item_id===z.cart_item_id);return e.jsx("div",{className:`p-6 transition-all duration-300 ${Y?"opacity-50":"opacity-100"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx(Q,{to:`/product/${z.product_id}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-full sm:w-32 h-32 bg-gray-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all duration-200",children:z.primary_image_url?e.jsx("img",{src:z.primary_image_url,alt:z.product_name||"Product",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ve,{className:"w-12 h-12 text-gray-400"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{to:`/product/${z.product_id}`,className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors line-clamp-2",children:z.product_name||"Product"}),z.sku&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["SKU: ",z.sku]}),J?e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),"Limited Stock"]})}):e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"In Stock"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Price per unit"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",Number(z.price_per_unit||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border-2 border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>O(z.cart_item_id,z.quantity-1),disabled:z.quantity<=1||se,className:"w-10 h-10 flex items-center justify-center bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Decrease quantity",children:e.jsx(_m,{className:"w-4 h-4 text-gray-700"})}),e.jsx("input",{type:"number",min:"1",value:z.quantity,onChange:te=>{const V=parseInt(te.target.value);V>0&&O(z.cart_item_id,V)},disabled:se,className:"w-16 h-10 text-center font-semibold text-gray-900 border-none focus:ring-0 disabled:bg-gray-50","aria-label":"Product quantity"}),e.jsx("button",{onClick:()=>O(z.cart_item_id,z.quantity+1),disabled:se,className:"w-10 h-10 flex items-center justify-center bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Increase quantity",children:e.jsx(dt,{className:"w-4 h-4 text-gray-700"})})]}),se&&e.jsx(ut,{className:"w-4 h-4 animate-spin text-blue-600"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(z.quantity*Number(z.price_per_unit||0)).toFixed(2)]})]}),e.jsx("button",{onClick:()=>T(z.cart_item_id),disabled:Y,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50","aria-label":"Remove item",children:e.jsx(_t,{className:"w-5 h-5"})})]})]})]})]})},z.cart_item_id)})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated Delivery: ",e.jsx("span",{className:"font-semibold text-gray-900",children:"2-3 business days"})]})})]},U)),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center px-6 py-3 bg-white border-2 border-gray-200 text-gray-900 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:[e.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Save as Project"]}),e.jsxs("button",{onClick:S,disabled:L.isPending,className:"flex items-center px-6 py-3 bg-white border-2 border-red-200 text-red-600 rounded-lg font-medium hover:bg-red-50 transition-all duration-200 disabled:opacity-50",children:[e.jsx(_t,{className:"w-5 h-5 mr-2"}),"Clear Cart"]})]})]}),e.jsx("div",{className:"lg:col-span-4 mt-8 lg:mt-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 sticky top-24",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Items Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",E.items_subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Estimated Delivery"}),e.jsxs("span",{className:"font-semibold",children:["$",E.total_delivery_fees.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Estimated Tax"}),e.jsxs("span",{className:"font-semibold",children:["$",E.estimated_tax.toFixed(2)]})]}),o&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Promo Discount"}),e.jsx("button",{onClick:D,className:"ml-2 p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Remove promo code",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsxs("span",{className:"font-semibold",children:["-$",E.promo_discount.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between text-gray-900",children:[e.jsx("span",{className:"text-xl font-bold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",E.grand_total.toFixed(2)]})]})})]}),!o&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("form",{onSubmit:g,className:"space-y-2",children:[e.jsx("label",{htmlFor:"promo_code",className:"block text-sm font-medium text-gray-700",children:"Have a promo code?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"promo_code",type:"text",value:i,onChange:U=>l(U.target.value.toUpperCase()),placeholder:"ENTER CODE",disabled:N.isPending,className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all disabled:bg-gray-50"}),e.jsx("button",{type:"submit",disabled:!i.trim()||N.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?e.jsx(ut,{className:"w-5 h-5 animate-spin"}):"Apply"})]}),N.isError&&e.jsx("p",{className:"text-sm text-red-600",children:"Invalid or expired promo code"}),N.isSuccess&&!o&&e.jsx("p",{className:"text-sm text-red-600",children:"Promo code not valid for this cart"})]})}),o&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Aa,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-800",children:o.promo_code}),e.jsx("p",{className:"text-xs text-green-700",children:o.discount_type==="percentage"?`${o.discount_value}% off`:`$${o.discount_value} off`})]})]}),e.jsx("button",{onClick:D,className:"text-green-600 hover:text-green-700","aria-label":"Remove promo code",children:e.jsx(ge,{className:"w-5 h-5"})})]})})}),e.jsxs("button",{onClick:I,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-semibold text-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center",children:["Proceed to Checkout",e.jsx(ls,{className:"w-5 h-5 ml-2"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Secure Checkout"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Money-Back Guarantee"]})]})})]})]})})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Save Cart as Project"}),e.jsx("button",{onClick:()=>{h(!1),p(""),v("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(ge,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project Name *"}),e.jsx("input",{id:"project_name",type:"text",value:x,onChange:U=>p(U.target.value),placeholder:"e.g., Deck Build, Kitchen Reno",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"project_description",value:b,onChange:U=>v(U.target.value),placeholder:"Add project details...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),p(""),v("")},className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!x.trim()||R.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-5 h-5 animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Save Project"]})})]}),R.isSuccess&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg text-sm",children:["Project saved successfully! ",e.jsx(Q,{to:"/projects",className:"font-semibold underline",children:"View Projects"})]}),R.isError&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm",children:"Failed to save project. Please try again."})]})]})})]})},U6=async(t,s)=>{const r=new URLSearchParams;return t&&r.append("sort_by",t),s&&r.append("filter_by",s),(await G.get(`/wishlist?${r.toString()}`)).data.map(n=>({wishlist_item_id:n.wishlist_item_id,product_id:n.product_id,product_name:n.product_name,price_when_saved:Number(n.price_when_saved||0),current_price:Number(n.price_per_unit||0),price_drop_amount:Math.max(0,Number(n.price_when_saved||0)-Number(n.price_per_unit||0)),stock_quantity:Number(n.stock_quantity||0),stock_status:Number(n.stock_quantity||0)>0?"in_stock":"out_of_stock",primary_image_url:n.primary_image_url,supplier_name:n.business_name,supplier_id:"",added_date:n.added_date,price_drop_alert_enabled:n.price_drop_alert_enabled,back_in_stock_alert_enabled:n.back_in_stock_alert_enabled}))},Dh=async(t,s=1)=>(await G.post("/cart/items",{product_id:t,quantity:s})).data,z6=async t=>{await G.delete(`/wishlist/${t}`)},W6=async(t,s,r)=>(await G.patch(`/wishlist/${t}`,{price_drop_alert_enabled:s,back_in_stock_alert_enabled:r})).data,V6=()=>{var O,T;const[t,s]=Fe(),r=Pe(),a=t.get("sort_by")||"date_added",n=t.get("filter_by")||"",[i,l]=_.useState("grid"),[o,d]=_.useState([]),[c,u]=_.useState(a),[m,h]=_.useState(n),x=re(g=>g.authentication_state.authentication_status.is_authenticated),p=re(g=>g.fetch_cart);_.useEffect(()=>{u(a),h(n)},[a,n]);const{data:b=[],isLoading:v,error:j,refetch:P}=ne({queryKey:["wishlist",c,m],queryFn:()=>U6(c,m),enabled:x,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),w=oe({mutationFn:({product_id:g,quantity:D})=>Dh(g,D),onSuccess:()=>{p(),r.invalidateQueries({queryKey:["cart"]})}}),C=oe({mutationFn:z6,onSuccess:()=>{r.invalidateQueries({queryKey:["wishlist"]})}}),f=oe({mutationFn:({wishlist_item_id:g,price_drop_alert_enabled:D,back_in_stock_alert_enabled:S})=>W6(g,D,S),onSuccess:()=>{r.invalidateQueries({queryKey:["wishlist"]})}}),k=g=>{u(g);const D=new URLSearchParams(t);D.set("sort_by",g),s(D)},y=g=>{h(g);const D=new URLSearchParams(t);g?D.set("filter_by",g):D.delete("filter_by"),s(D)},F=(g,D)=>{w.mutate({product_id:g,quantity:1},{onSuccess:()=>{alert(`${D} added to cart!`)},onError:S=>{var $,I;alert(((I=($=S.response)==null?void 0:$.data)==null?void 0:I.message)||"Failed to add item to cart")}})},M=(g,D)=>{window.confirm(`Remove "${D}" from wishlist?`)&&C.mutate(g,{onError:S=>{var $,I;alert(((I=($=S.response)==null?void 0:$.data)==null?void 0:I.message)||"Failed to remove item")}})},E=(g,D,S)=>{D==="price"?f.mutate({wishlist_item_id:g,price_drop_alert_enabled:!S}):f.mutate({wishlist_item_id:g,back_in_stock_alert_enabled:!S})},B=g=>{d(D=>D.includes(g)?D.filter(S=>S!==g):[...D,g])},A=()=>{o.length===b.length?d([]):d(b.map(g=>g.wishlist_item_id))},L=()=>{const g=b.filter(I=>o.includes(I.wishlist_item_id));let D=0,S=0;const $=g.map(I=>Dh(I.product_id,1).then(()=>{D++}).catch(()=>{S++}));Promise.all($).then(()=>{p(),d([]),alert(`Added ${D} items to cart${S>0?`, ${S} failed`:""}`),r.invalidateQueries({queryKey:["cart"]})})},R=[...b.filter(g=>m==="in_stock_only"?g.stock_quantity>0:m==="price_drops"?g.price_drop_amount>0:!0)].sort((g,D)=>c==="price"?g.current_price-D.current_price:new Date(D.added_date).getTime()-new Date(g.added_date).getTime());return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Wishlist"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[b.length," ",b.length===1?"item":"items"," saved"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-md transition-all ${i==="grid"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Grid view",children:e.jsx($l,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-md transition-all ${i==="list"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,"aria-label":"List view",children:e.jsx(sb,{className:"w-5 h-5"})})]}),e.jsxs("select",{value:c,onChange:g=>k(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"date_added",children:"Recently Added"}),e.jsx("option",{value:"price",children:"Price: Low to High"})]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>y(""),className:`px-4 py-2 rounded-lg border transition-all ${m===""?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-500"}`,children:"All Items"}),e.jsx("button",{onClick:()=>y("in_stock_only"),className:`px-4 py-2 rounded-lg border transition-all ${m==="in_stock_only"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-500"}`,children:"In Stock Only"}),e.jsx("button",{onClick:()=>y("price_drops"),className:`px-4 py-2 rounded-lg border transition-all ${m==="price_drops"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-500"}`,children:"Price Drops"})]}),R.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:A,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:o.length===R.length?"Deselect All":"Select All"}),o.length>0&&e.jsxs("button",{onClick:L,disabled:w.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsxs("span",{children:["Add ",o.length," to Cart"]})]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[j&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Failed to load wishlist"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:G.isAxiosError(j)?((T=(O=j.response)==null?void 0:O.data)==null?void 0:T.message)||j.message:"An error occurred"}),e.jsx("button",{onClick:()=>P(),className:"mt-3 text-sm text-red-600 hover:text-red-700 font-medium underline",children:"Try again"})]})]}),v&&e.jsx("div",{className:i==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:[1,2,3,4,5,6].map(g=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},g))}),!v&&!j&&R.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Di,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m?"No items match your filter criteria":"Start saving products you love!"}),m?e.jsx("button",{onClick:()=>y(""),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all",children:"Clear Filters"}):e.jsx(Q,{to:"/products",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all",children:"Browse Products"})]}),!v&&!j&&R.length>0&&i==="grid"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:R.map(g=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-all group",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:o.includes(g.wishlist_item_id),onChange:()=>B(g.wishlist_item_id),className:"absolute top-3 left-3 w-5 h-5 rounded cursor-pointer z-10"}),g.price_drop_amount>0&&e.jsxs("div",{className:"absolute top-3 right-3 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium z-10",children:["Price Drop! -",(g.price_drop_amount/g.price_when_saved*100).toFixed(0),"%"]}),e.jsx(Q,{to:`/product/${g.product_id}`,className:"block w-full h-full",children:g.primary_image_url?e.jsx("img",{src:g.primary_image_url,alt:g.product_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})})}),e.jsx("button",{onClick:()=>M(g.wishlist_item_id,g.product_name),disabled:C.isPending,className:"absolute bottom-3 right-3 bg-white p-2 rounded-full shadow-lg hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 disabled:opacity-50","aria-label":"Remove from wishlist",children:e.jsx(_t,{className:"w-4 h-4 text-red-600"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(Q,{to:`/product/${g.product_id}`,className:"block",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition-colors",children:g.product_name})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.supplier_name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",g.current_price.toFixed(2)]}),g.price_drop_amount>0&&e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",g.price_when_saved.toFixed(2)]})]}),g.price_drop_amount>0&&e.jsxs("p",{className:"text-sm text-green-600 font-medium mt-1",children:["Save $",g.price_drop_amount.toFixed(2)]})]}),e.jsx("div",{className:"mb-4",children:g.stock_quantity>0?e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"In Stock"}):e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:"Out of Stock"})}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4 text-sm",children:[e.jsxs("button",{onClick:()=>E(g.wishlist_item_id,"price",g.price_drop_alert_enabled),disabled:f.isPending,className:`flex items-center space-x-1 transition-colors ${g.price_drop_alert_enabled?"text-blue-600":"text-gray-400 hover:text-blue-600"}`,children:[g.price_drop_alert_enabled?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Xi,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Price alerts"})]}),e.jsxs("button",{onClick:()=>E(g.wishlist_item_id,"stock",g.back_in_stock_alert_enabled),disabled:f.isPending,className:`flex items-center space-x-1 transition-colors ${g.back_in_stock_alert_enabled?"text-blue-600":"text-gray-400 hover:text-blue-600"}`,children:[g.back_in_stock_alert_enabled?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Xi,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Stock alerts"})]})]}),e.jsxs("button",{onClick:()=>F(g.product_id,g.product_name),disabled:g.stock_quantity===0||w.isPending,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{children:g.stock_quantity===0?"Out of Stock":"Add to Cart"})]})]})]},g.wishlist_item_id))}),!v&&!j&&R.length>0&&i==="list"&&e.jsx("div",{className:"space-y-4",children:R.map(g=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsxs("div",{className:"sm:w-48 sm:h-48 relative bg-gray-100 flex-shrink-0",children:[e.jsx("input",{type:"checkbox",checked:o.includes(g.wishlist_item_id),onChange:()=>B(g.wishlist_item_id),className:"absolute top-3 left-3 w-5 h-5 rounded cursor-pointer z-10"}),g.price_drop_amount>0&&e.jsxs("div",{className:"absolute top-3 right-3 bg-green-600 text-white px-3 py-1 rounded-full text-xs font-medium z-10",children:["-",(g.price_drop_amount/g.price_when_saved*100).toFixed(0),"%"]}),e.jsx(Q,{to:`/product/${g.product_id}`,className:"block w-full h-full",children:g.primary_image_url?e.jsx("img",{src:g.primary_image_url,alt:g.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})})})]}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex-1 mb-4 sm:mb-0",children:[e.jsx(Q,{to:`/product/${g.product_id}`,children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors",children:g.product_name})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.supplier_name}),e.jsx("div",{className:"mb-3",children:g.stock_quantity>0?e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"In Stock"}):e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:"Out of Stock"})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("button",{onClick:()=>E(g.wishlist_item_id,"price",g.price_drop_alert_enabled),disabled:f.isPending,className:`flex items-center space-x-1 transition-colors ${g.price_drop_alert_enabled?"text-blue-600":"text-gray-400 hover:text-blue-600"}`,children:[g.price_drop_alert_enabled?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Xi,{className:"w-4 h-4"}),e.jsx("span",{children:"Price alerts"})]}),e.jsxs("button",{onClick:()=>E(g.wishlist_item_id,"stock",g.back_in_stock_alert_enabled),disabled:f.isPending,className:`flex items-center space-x-1 transition-colors ${g.back_in_stock_alert_enabled?"text-blue-600":"text-gray-400 hover:text-blue-600"}`,children:[g.back_in_stock_alert_enabled?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Xi,{className:"w-4 h-4"}),e.jsx("span",{children:"Stock alerts"})]})]})]}),e.jsxs("div",{className:"sm:ml-6 flex-shrink-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-baseline space-x-2",children:e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",g.current_price.toFixed(2)]})}),g.price_drop_amount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["$",g.price_when_saved.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Save $",g.price_drop_amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>F(g.product_id,g.product_name),disabled:g.stock_quantity===0||w.isPending,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{children:g.stock_quantity===0?"Out of Stock":"Add to Cart"})]}),e.jsxs("button",{onClick:()=>M(g.wishlist_item_id,g.product_name),disabled:C.isPending,className:"w-full sm:w-auto px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[e.jsx(_t,{className:"w-5 h-5"}),e.jsx("span",{children:"Remove"})]})]})]})]})})]})},g.wishlist_item_id))}),!v&&!j&&R.length>0&&e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsxs("p",{children:["Watching ",R.length," ",R.length===1?"product":"products"," for price changes and stock updates"]})})]})]})},Wo="https://123create-construction-app-with-a.launchpulse.ai",K6=async t=>(await G.get(`${Wo}/api/projects`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,H6=async(t,s)=>(await G.post(`${Wo}/api/projects/${t}/load-to-cart`,{},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,Y6=async(t,s)=>{await G.delete(`${Wo}/api/projects/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})},G6=async(t,s)=>(await G.post(`${Wo}/api/projects`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,Lh=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),ed=t=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t)),Q6=t=>({total_projects:t.length,total_estimated_value:t.reduce((s,r)=>s+(r.total_value||0),0),most_recent_project_date:t.length>0?t.sort((s,r)=>new Date(r.created_date).getTime()-new Date(s.created_date).getTime())[0].created_date:null}),X6=()=>{const t=ze(),s=Pe(),r=re(M=>M.authentication_state.auth_token),a=re(M=>{var E;return(E=M.authentication_state.customer_profile)==null?void 0:E.customer_id}),n=re(M=>M.fetch_cart),[i,l]=_.useState(null),[o,d]=_.useState(!1),[c,u]=_.useState(null),{data:m=[],isLoading:h,error:x,refetch:p}=ne({queryKey:["projects",a],queryFn:()=>K6(r),enabled:!!r,staleTime:6e4,retry:1}),b=Z.useMemo(()=>Q6(m),[m]),v=oe({mutationFn:M=>H6(M,r),onSuccess:M=>{var E;s.invalidateQueries({queryKey:["cart"]}),n(),((E=M.unavailable_items)==null?void 0:E.length)>0?u({type:"success",message:`${M.added_items} items added to cart. ${M.unavailable_items.length} items unavailable.`}):u({type:"success",message:`${M.added_items} items added to cart`}),setTimeout(()=>{t("/cart")},1500)},onError:M=>{var E,B;u({type:"error",message:((B=(E=M.response)==null?void 0:E.data)==null?void 0:B.message)||"Failed to load project to cart"})}}),j=oe({mutationFn:M=>Y6(M,r),onSuccess:()=>{s.invalidateQueries({queryKey:["projects"]}),d(!1),l(null),u({type:"success",message:"Project deleted successfully"})},onError:M=>{var E,B;u({type:"error",message:((B=(E=M.response)==null?void 0:E.data)==null?void 0:B.message)||"Failed to delete project"}),d(!1)}}),P=oe({mutationFn:({project_name:M,description:E})=>G6({project_name:M,description:E},r),onSuccess:()=>{s.invalidateQueries({queryKey:["projects"]}),u({type:"success",message:"Project duplicated successfully"})},onError:M=>{var E,B;u({type:"error",message:((B=(E=M.response)==null?void 0:E.data)==null?void 0:B.message)||"Failed to duplicate project"})}}),w=M=>{v.mutate(M)},C=M=>{l(M),d(!0)},f=()=>{i&&j.mutate(i)},k=()=>{d(!1),l(null)},y=M=>{P.mutate({project_name:`${M.project_name} (Copy)`,description:M.description})},F=()=>{t("/cart")};return Z.useEffect(()=>{if(c){const M=setTimeout(()=>{u(null)},5e3);return()=>clearTimeout(M)}},[c]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 leading-tight",children:"My Projects"}),e.jsx("p",{className:"mt-2 text-base text-gray-600 leading-relaxed",children:"Save your cart as a project template for quick reordering"})]}),e.jsxs("button",{onClick:F,className:"inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Create New Project"]})]}),m.length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Projects"}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:b.total_projects})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Md,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Estimated Value"}),e.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:Lh(b.total_estimated_value)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Te,{className:"w-6 h-6 text-green-600"})})]})}),b.most_recent_project_date&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Created"}),e.jsx("p",{className:"mt-1 text-base font-semibold text-gray-900",children:ed(b.most_recent_project_date)})]}),e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(mt,{className:"w-6 h-6 text-indigo-600"})})]})})]})]}),h&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(M=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-4"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-10"})]})]},M))}),x&&!h&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Projects"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x.message||"An error occurred while loading your projects"}),e.jsx("button",{onClick:()=>p(),className:"inline-flex items-center px-6 py-3 rounded-lg font-medium text-white bg-red-600 hover:bg-red-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"Try Again"})]}),!h&&!x&&m.length===0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-lg p-12 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-blue-100 rounded-full mb-4",children:e.jsx(Md,{className:"w-12 h-12 text-blue-600"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Projects Yet"}),e.jsx("p",{className:"text-base text-gray-600 mb-8 max-w-md mx-auto leading-relaxed",children:"Save your cart as a project template for quick reordering. Perfect for recurring purchases and different project sizes."}),e.jsxs("button",{onClick:F,className:"inline-flex items-center px-8 py-4 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Create Your First Project"]})]}),!h&&!x&&m.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(M=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-lg hover:shadow-xl transition-all duration-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 pb-4 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:M.project_name}),M.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:M.description})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ve,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Items"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:M.item_count})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Te,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Value"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:Lh(M.total_value||0)})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Created ",ed(M.created_date)]}),e.jsxs("span",{children:["Updated ",ed(M.last_updated_date)]})]})})]}),e.jsxs("div",{className:"p-6 pt-4 space-y-3",children:[e.jsx("button",{onClick:()=>w(M.project_id),disabled:v.isPending,className:"w-full inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-blue-100",children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-5 h-5 mr-2"}),"Load to Cart"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{to:`/projects/${M.project_id}`,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium text-gray-900 bg-gray-100 hover:bg-gray-200 border border-gray-300 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-gray-100",children:[e.jsx(ib,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>y(M),disabled:P.isPending,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium text-gray-900 bg-gray-100 hover:bg-gray-200 border border-gray-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-gray-100",title:"Duplicate Project",children:[e.jsx(Cm,{className:"w-4 h-4 mr-2"}),"Copy"]}),e.jsx("button",{onClick:()=>C(M.project_id),disabled:j.isPending,className:"inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium text-white bg-red-600 hover:bg-red-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-red-100",title:"Delete Project",children:e.jsx(_t,{className:"w-4 h-4"})})]})]})]},M.project_id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(_t,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 text-center mb-2",children:"Delete Project?"}),e.jsx("p",{className:"text-base text-gray-600 text-center leading-relaxed",children:"Are you sure you want to delete this project? This action cannot be undone."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:k,disabled:j.isPending,className:"flex-1 px-6 py-3 rounded-lg font-medium text-gray-900 bg-gray-100 hover:bg-gray-200 border border-gray-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-gray-100",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:j.isPending,className:"flex-1 px-6 py-3 rounded-lg font-medium text-white bg-red-600 hover:bg-red-700 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-red-100",children:j.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})}),c&&e.jsx("div",{className:"fixed bottom-8 right-8 z-50 animate-in slide-in-from-bottom-4 duration-300",children:e.jsxs("div",{className:`rounded-xl shadow-2xl px-6 py-4 flex items-center space-x-3 max-w-md ${c.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[c.type==="success"?e.jsx("svg",{className:"w-6 h-6 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{className:"font-medium",children:c.message}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto flex-shrink-0 hover:bg-white/20 rounded-lg p-1 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})})})},J6=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${t}`,{headers:{Authorization:`Bearer ${s}`}})).data,Z6=async(t,s,r)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${t}`,s,{headers:{Authorization:`Bearer ${r}`}})).data,e4=async(t,s)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/projects/${t}/load-to-cart`,{},{headers:{Authorization:`Bearer ${s}`}})).data,t4=()=>{var O,T;const{project_id:t}=ur(),s=ze(),r=Pe(),a=re(g=>g.authentication_state.auth_token),n=re(g=>g.fetch_cart),[i,l]=_.useState(!1),[o,d]=_.useState(""),[c,u]=_.useState(""),[m,h]=_.useState(1),[x,p]=_.useState(!1),[b,v]=_.useState(!1),{data:j,isLoading:P,error:w,refetch:C}=ne({queryKey:["project",t],queryFn:()=>J6(t,a),enabled:!!t&&!!a,staleTime:6e4,refetchOnWindowFocus:!1,select:g=>{const D=(g.items||[]).map(S=>{const $=Number(S.price_per_unit||0),I=$,K=Number(S.quantity||0),U=Number(S.stock_quantity||0);return{project_item_id:S.project_item_id,product_id:S.product_id,product_name:S.product_name,sku:"N/A",quantity:K,saved_price:$,current_price:I,price_change:I-$,stock_quantity:U,availability_status:U>=K?"available":"insufficient_stock",primary_image_url:S.primary_image_url,supplier_name:"Unknown Supplier",supplier_id:"",line_total_saved:K*$,line_total_current:K*I}});return{project:g.project,items:D}}});_.useEffect(()=>{j!=null&&j.project&&(d(j.project.project_name||""),u(j.project.description||""))},[j]),_.useEffect(()=>{var g,D;if(w){const S=w;(((g=S.response)==null?void 0:g.status)===404||((D=S.response)==null?void 0:D.status)===403)&&setTimeout(()=>s("/projects"),3e3)}},[w,s]);const f=oe({mutationFn:g=>Z6(t,g,a),onSuccess:()=>{r.invalidateQueries({queryKey:["project",t]}),r.invalidateQueries({queryKey:["projects"]}),l(!1),v(!1)},onError:g=>{var D,S;alert(`Failed to update project: ${((S=(D=g.response)==null?void 0:D.data)==null?void 0:S.message)||g.message}`)}}),k=oe({mutationFn:()=>e4(t,a),onSuccess:async g=>{await n(),r.invalidateQueries({queryKey:["cart"]}),g.unavailable_items&&g.unavailable_items.length>0?alert(`Added ${g.added_items} items to cart. ${g.unavailable_items.length} items were unavailable.`):alert(`Successfully added ${g.added_items} items to cart!`),s("/cart")},onError:g=>{var D,S;alert(`Failed to load project to cart: ${((S=(D=g.response)==null?void 0:D.data)==null?void 0:S.message)||g.message}`)}}),y=_.useMemo(()=>{if(!(j!=null&&j.items))return{saved_total:0,current_total:0,price_difference:0,price_change_percentage:0};const g=j.items.reduce((I,K)=>I+K.line_total_saved,0),D=j.items.reduce((I,K)=>I+K.line_total_current,0),S=D-g,$=g>0?S/g*100:0;return{saved_total:g,current_total:D,price_difference:S,price_change_percentage:$}},[j==null?void 0:j.items]),F=_.useMemo(()=>!(j!=null&&j.items)||m===1?{}:j.items.reduce((g,D)=>(g[D.project_item_id]=Math.ceil(D.quantity*m),g),{}),[j==null?void 0:j.items,m]),M=_.useMemo(()=>j!=null&&j.items?j.items.filter(g=>g.availability_status==="insufficient_stock"):[],[j==null?void 0:j.items]),E=()=>{if(!b){l(!1);return}f.mutate({project_name:o,description:c||void 0})},B=()=>{d((j==null?void 0:j.project.project_name)||""),u((j==null?void 0:j.project.description)||""),l(!1),v(!1)},A=()=>{M.length>0&&!window.confirm(`${M.length} items have insufficient stock. Do you want to continue loading available items to cart?`)||k.mutate()},L=()=>{m!==1&&(p(!1),alert("Scaling preview shown. Backend endpoint for applying scale not yet implemented."))};if(P)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},g))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},g))})]})})});if(w){const g=w,D=((O=g.response)==null?void 0:O.status)===404,S=((T=g.response)==null?void 0:T.status)===403;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(At,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:D?"Project Not Found":S?"Access Denied":"Error Loading Project"}),e.jsx("p",{className:"text-gray-600 mb-6",children:D?"The project you're looking for doesn't exist or has been deleted.":S?"You don't have permission to view this project.":"Something went wrong while loading the project. Please try again."}),e.jsxs("div",{className:"space-y-3",children:[!D&&!S&&e.jsx("button",{onClick:()=>C(),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"}),e.jsx(Q,{to:"/projects",className:"block w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Projects"})]})]})})})})}if(!j||!j.items||j.items.length===0)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(Q,{to:"/projects",className:"text-blue-600 hover:text-blue-700 font-medium mb-4 inline-flex items-center transition-colors",children:" Back to Projects"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:(j==null?void 0:j.project.project_name)||"Project"}),(j==null?void 0:j.project.description)&&e.jsx("p",{className:"text-gray-600 mt-2 leading-relaxed",children:j.project.description})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4",children:e.jsx(ve,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"This project is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add products to this project to create a reusable template for future orders."}),e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(dt,{className:"h-5 w-5 mr-2"}),"Browse Products"]})]})]})})});const N=j.project,R=j.items;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(Q,{to:"/projects",className:"text-blue-600 hover:text-blue-700 font-medium mb-4 inline-flex items-center transition-colors",children:" Back to Projects"}),e.jsx("div",{className:"mt-4",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),e.jsx("input",{id:"project_name",type:"text",value:o,onChange:g=>{d(g.target.value),v(!0)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project_description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"project_description",value:c,onChange:g=>{u(g.target.value),v(!0)},rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Add a description for this project"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:E,disabled:f.isPending||!b,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-5 w-5 mr-2"}),"Save Changes"]})}),e.jsxs("button",{onClick:B,disabled:f.isPending,className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"Cancel"]})]})]}):e.jsx("div",{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:N.project_name}),N.description&&e.jsx("p",{className:"text-gray-600 mt-2 leading-relaxed",children:N.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(N.created_date).toLocaleDateString()]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Last updated: ",new Date(N.last_updated_date).toLocaleDateString()]})]})]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Edit Info"]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.length})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(ve,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Original Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",y.saved_total.toFixed(2)]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(Re,{className:"h-6 w-6 text-gray-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",y.current_total.toFixed(2)]}),y.price_difference!==0&&e.jsxs("div",{className:`inline-flex items-center mt-2 text-sm font-medium ${y.price_difference>0?"text-red-600":"text-green-600"}`,children:[y.price_difference>0?e.jsx(Re,{className:"h-4 w-4 mr-1"}):e.jsx(Jn,{className:"h-4 w-4 mr-1"}),y.price_difference>0?"+":"","$",Math.abs(y.price_difference).toFixed(2),"(",y.price_change_percentage>0?"+":"",y.price_change_percentage.toFixed(1),"%)"]})]}),e.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${y.price_difference>0?"bg-red-100":y.price_difference<0?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Re,{className:`h-6 w-6 ${y.price_difference>0?"text-red-600":y.price_difference<0?"text-green-600":"text-gray-600"}`})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cw,{className:"h-5 w-5 text-gray-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Scale Project Quantities"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale_multiplier",className:"block text-sm font-medium text-gray-700 mb-2",children:"Scale Multiplier"}),e.jsx("input",{id:"scale_multiplier",type:"number",min:"0.1",max:"10",step:"0.1",value:m,onChange:g=>{const D=parseFloat(g.target.value);!isNaN(D)&&D>0&&h(D)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Example: 2.0 doubles all quantities, 0.5 halves them"})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>p(!x),disabled:m===1,className:"w-full px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Hide Preview":"Preview Scaled Quantities"})}),e.jsx("div",{children:e.jsx("button",{onClick:L,disabled:m===1,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Scaling"})})]}),x&&m!==1&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scaled Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(g=>{const D=F[g.project_item_id]||g.quantity,S=D-g.quantity;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:g.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:D}),e.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium ${S>0?"text-green-600":S<0?"text-red-600":"text-gray-500"}`,children:[S>0?"+":"",S]})]},g.project_item_id)})})]})})]}),M.length>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(At,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-2",children:"Stock Availability Issues"}),e.jsxs("p",{className:"text-sm text-amber-800 mb-3",children:[M.length," ",M.length===1?"item has":"items have"," insufficient stock:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-amber-700",children:M.map(g=>e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:g.product_name})," - ","Needed: ",g.quantity,", Available: ",g.stock_quantity]},g.project_item_id))})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Project Items (",R.length,")"]}),e.jsx("button",{onClick:A,disabled:k.isPending||R.length===0,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-5 w-5 mr-2"}),"Load All to Cart"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(g=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[g.primary_image_url?e.jsx("img",{src:g.primary_image_url,alt:g.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ve,{className:"h-16 w-16 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 right-3",children:g.availability_status==="available"?e.jsx("span",{className:"px-3 py-1 bg-green-600 text-white text-xs font-medium rounded-full",children:"In Stock"}):e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-xs font-medium rounded-full",children:"Low Stock"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(Q,{to:`/product/${g.product_id}`,className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors line-clamp-2 mb-2",children:g.product_name}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:x&&m!==1?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"line-through text-gray-400 mr-2",children:g.quantity}),e.jsx("span",{className:"text-blue-600",children:F[g.project_item_id]})]}):g.quantity})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Original Price:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",g.saved_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current Price:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",g.current_price.toFixed(2)]})]}),g.price_change!==0&&e.jsx("div",{className:"pt-2",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${g.price_change>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:g.price_change>0?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"+$",Math.abs(g.price_change).toFixed(2)," per unit"]}):e.jsxs(e.Fragment,{children:[e.jsx(Jn,{className:"h-3 w-3 mr-1"}),"-$",Math.abs(g.price_change).toFixed(2)," per unit"]})})}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal (Original):"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",g.line_total_saved.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal (Current):"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",g.line_total_current.toFixed(2)]})]})]}),g.availability_status==="insufficient_stock"&&e.jsx("div",{className:"pt-3",children:e.jsxs("div",{className:"flex items-center px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(At,{className:"h-4 w-4 text-amber-600 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"text-xs text-amber-800",children:["Only ",g.stock_quantity," available"]})]})})]}),e.jsx(Q,{to:`/product/${g.product_id}`,className:"mt-4 w-full inline-flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm",children:"View Product Details"})]})]},g.project_item_id))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Ready to order?"}),e.jsx("p",{children:"Load all items to your cart and proceed to checkout."})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:A,disabled:k.isPending||R.length===0,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-5 w-5 mr-2"}),"Load to Cart (",R.length," items)"]})})})]})})]})})})},cn="https://123create-construction-app-with-a.launchpulse.ai",s4=async t=>{const{data:s}=await G.get(`${cn}/cart`,{headers:{Authorization:`Bearer ${t}`}});return s},r4=async t=>{const{data:s}=await G.get(`${cn}/addresses`,{headers:{Authorization:`Bearer ${t}`}});return s},a4=async t=>{const{data:s}=await G.get(`${cn}/payment-methods`,{headers:{Authorization:`Bearer ${t}`}});return s},n4=async(t,s)=>{const{data:r}=await G.post(`${cn}/addresses`,s,{headers:{Authorization:`Bearer ${t}`}});return r},i4=async(t,s)=>{const{data:r}=await G.post(`${cn}/payment-methods`,s,{headers:{Authorization:`Bearer ${t}`}});return r},l4=async(t,s)=>{const{data:r}=await G.post(`${cn}/orders`,s,{headers:{Authorization:`Bearer ${t}`}});return r},o4=()=>{const t=ze(),s=Pe(),r=re(H=>H.authentication_state.auth_token),a=re(H=>H.authentication_state.current_user),n=re(H=>H.authentication_state.customer_profile),[i,l]=_.useState(null),[o,d]=_.useState(!1),[c,u]=_.useState({full_name:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim(),phone_number:(a==null?void 0:a.phone_number)||"",street_address:"",apt_suite:"",city:"",state:"",postal_code:"",delivery_instructions:"",address_type:"residential"}),[m,h]=_.useState({}),[x,p]=_.useState(null),[b,v]=_.useState(!1),[j,P]=_.useState(!1),[w,C]=_.useState({card_number:"",card_expiry_month:"",card_expiry_year:"",cvv:"",cardholder_name:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim(),save_for_future:!0}),[f,k]=_.useState(""),[y,F]=_.useState(!1),[M,E]=_.useState({}),[B,A]=_.useState(!1),{data:L,isLoading:N}=ne({queryKey:["cart"],queryFn:()=>s4(r),enabled:!!r,staleTime:0}),{data:R,isLoading:O}=ne({queryKey:["addresses"],queryFn:()=>r4(r),enabled:!!r}),{data:T,isLoading:g}=ne({queryKey:["paymentMethods"],queryFn:()=>a4(r),enabled:!!r}),D=Array.isArray(R)?R:[],S=Array.isArray(T)?T:[],$=oe({mutationFn:H=>n4(r,H),onSuccess:H=>{s.invalidateQueries({queryKey:["addresses"]}),l(H.address_id),d(!1),u({full_name:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim(),phone_number:(a==null?void 0:a.phone_number)||"",street_address:"",apt_suite:"",city:"",state:"",postal_code:"",delivery_instructions:"",address_type:"residential"})},onError:H=>{E(ee=>{var ue,be;return{...ee,address:((be=(ue=H.response)==null?void 0:ue.data)==null?void 0:be.message)||"Failed to add address"}})}}),I=oe({mutationFn:H=>i4(r,H),onSuccess:H=>{s.invalidateQueries({queryKey:["paymentMethods"]}),p(H.payment_method_id),v(!1),C({card_number:"",card_expiry_month:"",card_expiry_year:"",cvv:"",cardholder_name:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim(),save_for_future:!0})}}),K=oe({mutationFn:H=>l4(r,H),onSuccess:H=>{s.invalidateQueries({queryKey:["cart"]}),s.invalidateQueries({queryKey:["orders"]}),t(`/order-confirmation?order_id=${H.order_id}`)},onError:H=>{E(ee=>{var ue,be;return{...ee,submit:((be=(ue=H.response)==null?void 0:ue.data)==null?void 0:be.message)||"Failed to place order. Please try again."}})}}),U=_.useMemo(()=>{if(!(L!=null&&L.items))return[];const H={};return L.items.forEach(ee=>{H[ee.supplier_id]||(H[ee.supplier_id]={supplier_id:ee.supplier_id,supplier_name:ee.business_name||ee.supplier_name||"Unknown Supplier",logo_url:null,items:[],supplier_subtotal:0}),H[ee.supplier_id].items.push(ee),H[ee.supplier_id].supplier_subtotal+=ee.quantity*ee.price_per_unit}),Object.values(H)},[L]),q=_.useMemo(()=>{const H=U.reduce((De,ht)=>De+ht.supplier_subtotal,0),ee=U.length*50,ue=(H+ee)*.08,be=0,ke=H+ee+ue-be;return{subtotal_amount:H,delivery_fee_total:ee,tax_amount:ue,discount_amount:be,total_amount:ke}},[U]);_.useEffect(()=>{if(D.length>0&&!i){const H=D.find(ee=>ee.is_default)||D[0];l(H.address_id)}},[D,i]),_.useEffect(()=>{if(S.length>0&&!x&&!j){const H=S.find(ee=>ee.is_default)||S[0];p(H.payment_method_id)}},[S,x,j]);const z=async()=>{if(E(H=>{const{address:ee,...ue}=H;return ue}),!c.full_name||!c.phone_number||!c.street_address||!c.city||!c.state||!c.postal_code){E(H=>({...H,address:"All required fields must be filled"}));return}await $.mutateAsync({user_id:a==null?void 0:a.user_id,...c})},Y=async()=>{E({});const H={};if(i||(H.address="Please select a delivery address"),U.filter(ue=>!m[ue.supplier_id]).length>0&&(H.delivery="Please select delivery windows for all suppliers"),!j&&!x&&!b&&(H.payment="Please select a payment method"),b&&((!w.card_number||w.card_number.length<15)&&(H.card_number="Valid card number required"),(!w.card_expiry_month||!w.card_expiry_year)&&(H.card_expiry="Valid expiry date required"),(!w.cvv||w.cvv.length<3)&&(H.cvv="Valid CVV required"),w.cardholder_name||(H.cardholder_name="Cardholder name required")),y||(H.terms="You must accept the Terms of Service"),Object.keys(H).length>0){E(H);return}try{b&&!j&&await I.mutateAsync({user_id:a==null?void 0:a.user_id,payment_type:"credit_card",card_brand:se(w.card_number),card_last_four:w.card_number.slice(-4),card_expiry_month:w.card_expiry_month,card_expiry_year:w.card_expiry_year,cardholder_name:w.cardholder_name,payment_token:`tok_${Date.now()}`,is_default:w.save_for_future});const ue=Object.entries(m).map(([be])=>{const ke=new Date;ke.setDate(ke.getDate()+1);const De=new Date(ke);De.setHours(9,0,0);const ht=new Date(ke);return ht.setHours(12,0,0),{supplier_id:be,delivery_window_start:De.toISOString(),delivery_window_end:ht.toISOString(),delivery_method:"standard_delivery"}});await K.mutateAsync({delivery_address_id:i,payment_method:j?"trade_credit":"credit_card",customer_notes:f||null,promo_code_used:null,delivery_windows:ue})}catch(ue){console.error("Order submission error:",ue)}},se=H=>{const ee=H.replace(/\s/g,"");return ee.startsWith("4")?"Visa":ee.startsWith("5")?"Mastercard":ee.startsWith("3")?"Amex":"Unknown"},J=H=>(H.replace(/\D/g,"").match(/.{1,4}/g)||[]).join(" ").substring(0,19),te=N||O||g,V=K.isPending||$.isPending||I.isPending;if(te)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4 sticky top-24",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded"})]})})]})]})})})});if(!(L!=null&&L.items)||L.items.length===0)return t("/cart"),null;const W=D.find(H=>H.address_id===i),X=(n==null?void 0:n.trade_credit_balance)||0;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 sm:py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Complete your order securely"})]}),e.jsx("div",{className:"mb-8 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center",children:e.jsx(je,{className:"w-5 h-5"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Cart"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-blue-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-semibold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Checkout"})]}),e.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Confirmation"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Dt,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Address"})]}),M.address&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:M.address})]}),D.length>0&&!o&&e.jsx("div",{className:"space-y-3",children:D.map(H=>e.jsxs("label",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ${i===H.address_id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"address",value:H.address_id,checked:i===H.address_id,onChange:()=>l(H.address_id),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:H.full_name}),H.is_default&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[H.street_address,H.apt_suite&&`, ${H.apt_suite}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[H.city,", ",H.state," ",H.postal_code]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:H.phone_number}),H.delivery_instructions&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 italic",children:["Note: ",H.delivery_instructions]})]})]},H.address_id))}),o&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:c.full_name,onChange:H=>u(ee=>({...ee,full_name:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:c.phone_number,onChange:H=>u(ee=>({...ee,phone_number:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),e.jsx("input",{type:"text",value:c.street_address,onChange:H=>u(ee=>({...ee,street_address:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apt/Suite"}),e.jsx("input",{type:"text",value:c.apt_suite,onChange:H=>u(ee=>({...ee,apt_suite:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:c.city,onChange:H=>u(ee=>({...ee,city:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",value:c.state,onChange:H=>u(ee=>({...ee,state:H.target.value})),maxLength:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),e.jsx("input",{type:"text",value:c.postal_code,onChange:H=>u(ee=>({...ee,postal_code:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),e.jsx("textarea",{value:c.delivery_instructions,onChange:H=>u(ee=>({...ee,delivery_instructions:H.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Leave at back door, call on arrival"})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:z,disabled:$.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:$.isPending?"Saving...":"Save Address"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})]})]}),!o&&e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 flex items-center text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Add New Address"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(kt,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Scheduling"})]}),M.delivery&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:M.delivery})]}),W&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Delivering to:"}),e.jsxs("p",{className:"text-blue-700",children:[W.street_address,", ",W.city,", ",W.state," ",W.postal_code]})]}),e.jsx("div",{className:"space-y-6",children:U.map(H=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:H.supplier_name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[H.items.length," item",H.items.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:["morning","afternoon"].map(ee=>{const ue=`${H.supplier_id}_${ee}`,be=new Date;be.setDate(be.getDate()+1);const ke=be.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),De=ee==="morning"?"9AM - 12PM":"1PM - 5PM";return e.jsxs("label",{className:`flex items-start p-3 border-2 rounded-lg cursor-pointer transition-all ${m[H.supplier_id]===ue?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`delivery_${H.supplier_id}`,value:ue,checked:m[H.supplier_id]===ue,onChange:()=>h(ht=>({...ht,[H.supplier_id]:ue})),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ke}),e.jsx("div",{className:"text-sm text-gray-600",children:De}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"$50.00 delivery"})]}),m[H.supplier_id]===ue&&e.jsx(je,{className:"w-5 h-5 text-blue-600 ml-2"})]},ue)})})]},H.supplier_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8",children:[e.jsxs("button",{type:"button",onClick:()=>A(!B),className:"flex items-center justify-between w-full mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Review Your Order"})]}),B?e.jsx(Ss,{className:"w-5 h-5 text-gray-500"}):e.jsx(Et,{className:"w-5 h-5 text-gray-500"})]}),B&&e.jsx("div",{className:"space-y-4 pt-2",children:U.map(H=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:H.supplier_name}),e.jsx("div",{className:"space-y-3",children:H.items.map(ee=>e.jsxs("div",{className:"flex items-center space-x-3",children:[ee.primary_image_url&&e.jsx("img",{src:ee.primary_image_url,alt:ee.product_name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ee.product_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",ee.quantity,"  $",Number(ee.price_per_unit||0).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",(ee.quantity*Number(ee.price_per_unit||0)).toFixed(2)]})]},ee.cart_item_id))}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supplier Subtotal"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",H.supplier_subtotal.toFixed(2)]})]})]},H.supplier_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(es,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Method"})]}),M.payment&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:M.payment})]}),X>0&&(n==null?void 0:n.account_type)==="trade"&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:H=>{P(H.target.checked),H.target.checked&&(p(null),v(!1))},className:"mt-1 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("div",{className:"font-semibold text-green-900",children:"Use Trade Credit"}),e.jsxs("div",{className:"text-sm text-green-700 mt-1",children:["Available: $",X.toFixed(2)," | Terms: Net 30 Days"]}),q.total_amount>X&&e.jsxs("div",{className:"text-xs text-green-600 mt-2",children:["$",Number(q.total_amount).toFixed(2)," exceeds available credit. Additional payment required."]})]})]})}),!j&&e.jsxs(e.Fragment,{children:[S.length>0&&!b&&e.jsx("div",{className:"space-y-3 mb-4",children:S.map(H=>e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${x===H.payment_method_id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"payment",value:H.payment_method_id,checked:x===H.payment_method_id,onChange:()=>p(H.payment_method_id),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsxs("div",{className:"ml-3 flex-1 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[H.card_brand,"  ",H.card_last_four]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Expires ",H.card_expiry_month,"/",H.card_expiry_year]})]}),H.is_default&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Default"})]})]},H.payment_method_id))}),b&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number *"}),e.jsx("input",{type:"text",value:w.card_number,onChange:H=>{const ee=J(H.target.value);C(ue=>({...ue,card_number:ee})),E(ue=>{const{card_number:be,...ke}=ue;return ke})},maxLength:19,placeholder:"1234 5678 9012 3456",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${M.card_number?"border-red-300":"border-gray-300"}`}),M.card_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.card_number})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month *"}),e.jsx("input",{type:"text",value:w.card_expiry_month,onChange:H=>{const ee=H.target.value.replace(/\D/g,"").substring(0,2);C(ue=>({...ue,card_expiry_month:ee}))},placeholder:"MM",maxLength:2,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${M.card_expiry?"border-red-300":"border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year *"}),e.jsx("input",{type:"text",value:w.card_expiry_year,onChange:H=>{const ee=H.target.value.replace(/\D/g,"").substring(0,4);C(ue=>({...ue,card_expiry_year:ee}))},placeholder:"YYYY",maxLength:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${M.card_expiry?"border-red-300":"border-gray-300"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV *"}),e.jsx("input",{type:"text",value:w.cvv,onChange:H=>{const ee=H.target.value.replace(/\D/g,"").substring(0,4);C(ue=>({...ue,cvv:ee}))},placeholder:"123",maxLength:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${M.cvv?"border-red-300":"border-gray-300"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name *"}),e.jsx("input",{type:"text",value:w.cardholder_name,onChange:H=>C(ee=>({...ee,cardholder_name:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w.save_for_future,onChange:H=>C(ee=>({...ee,save_for_future:H.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Save this card for future purchases"})]}),e.jsx("button",{type:"button",onClick:()=>{v(!1),C({card_number:"",card_expiry_month:"",card_expiry_year:"",cvv:"",cardholder_name:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim(),save_for_future:!0})},className:"text-sm text-gray-600 hover:text-gray-800",children:"Cancel"})]}),!b&&!j&&e.jsxs("button",{type:"button",onClick:()=>{v(!0),p(null)},className:"flex items-center text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Add New Card"]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex items-center justify-center space-x-6 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xn,{className:"w-4 h-4 mr-1"}),"SSL Secure"]}),e.jsx("div",{children:"PCI Compliant"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Notes (Optional)"}),e.jsx("textarea",{value:f,onChange:H=>k(H.target.value),rows:3,maxLength:1e3,placeholder:"Any special instructions? (e.g., gate code, preferred contact time)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[f.length,"/1000 characters"]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 lg:p-8 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Subtotal (",(L==null?void 0:L.total_items)||0," items)"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(q.subtotal_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Fees"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(q.delivery_fee_total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Tax"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(q.tax_amount).toFixed(2)]})]}),q.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-$",Number(q.discount_amount).toFixed(2)]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",Number(q.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-start cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:H=>{F(H.target.checked),E(ee=>{const{terms:ue,...be}=ee;return be})},className:`mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 ${M.terms?"border-red-300":""}`}),e.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["I agree to the"," ",e.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})]}),M.terms&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:M.terms})]}),M.submit&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:M.submit})]}),e.jsx("button",{type:"button",onClick:Y,disabled:V,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl flex items-center justify-center",children:V?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xn,{className:"w-5 h-5 mr-2"}),"Place Order  $",Number(q.total_amount).toFixed(2)]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 space-y-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(je,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{children:"Secure 256-bit SSL encryption"})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(je,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{children:"PCI DSS compliant payments"})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(je,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{children:"100% purchase protection"})]})]})]})})]})]})})})},c4=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,d4=async(t,s)=>{const a=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=n,i.setAttribute("download",`invoice-${t}.pdf`),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n)},u4=t=>{const s={};return t.forEach(r=>{s[r.supplier_id]||(s[r.supplier_id]={supplier_name:`Supplier ${r.supplier_id.slice(0,8)}`,supplier_logo:null,items:[]}),s[r.supplier_id].items.push({order_item_id:r.order_item_id,product_id:r.product_id,product_name:r.product_name,sku:r.sku,quantity:r.quantity,price_per_unit:r.price_per_unit,line_total:r.line_total})}),s},m4=t=>new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),x4=(t,s)=>{const r=new Date(t),a=new Date(s),n=r.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),i=r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),l=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${n} | ${i} - ${l}`},h4=t=>{navigator.clipboard.writeText(t).catch(s=>{console.error("Failed to copy:",s)})},p4=()=>{const t=ze(),[s]=Fe(),r=re(f=>f.authentication_state.auth_token),a=re(f=>f.authentication_state.current_user),n=s.get("order_id"),[i,l]=_.useState(!1),[o,d]=_.useState({}),{data:c,isLoading:u,error:m}=ne({queryKey:["order-confirmation",n],queryFn:()=>c4(n,r),enabled:!!n&&!!r,staleTime:6e4,refetchOnWindowFocus:!1});_.useEffect(()=>{n||t("/orders",{replace:!0})},[n,t]);const h=c==null?void 0:c.order,x=c?u4(c.items):{},p=c!=null&&c.delivery?Array.isArray(c.delivery)?c.delivery:[c.delivery]:[],b=()=>{h!=null&&h.order_number&&(h4(h.order_number),l(!0),setTimeout(()=>l(!1),2e3))},v=async()=>{if(h&&r)try{await d4(h.order_id,r)}catch(f){console.error("Failed to download invoice:",f)}},j=()=>{h&&t(`/orders/${h.order_id}`)},P=()=>{t("/products")},w=()=>{window.print()},C=f=>{d(k=>({...k,[f]:!k[f]}))};return u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 animate-pulse",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"})]}),e.jsxs("div",{className:"mt-12 space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"})]})]})})})}):m||!h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find the order confirmation you're looking for."}),e.jsx("button",{onClick:()=>t("/orders"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"View My Orders"})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"w-24 h-24 text-white animate-bounce",strokeWidth:2}),e.jsx("div",{className:"absolute inset-0 bg-white rounded-full animate-ping opacity-20"})]})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Order Confirmed! "}),e.jsxs("p",{className:"text-xl text-green-50",children:["Thank you for your order, ",(a==null?void 0:a.first_name)||"valued customer","!"]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Order Number"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.order_number})]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors","aria-label":"Copy order number",children:[e.jsx(Cm,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:i?"Copied!":"Copy"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Placed on ",m4(h.order_date)]})]})]}),p.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(kt,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Estimated Delivery"})]}),e.jsx("div",{className:"space-y-4",children:p.map(f=>{const k=x[f.supplier_id];return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:(k==null?void 0:k.supplier_name)||"Supplier"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:x4(f.delivery_window_start,f.delivery_window_end)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Delivery Method: ",f.delivery_method.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase())]})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Track"})]})},f.delivery_id)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ve,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Summary"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(x).map(([f,k])=>{const y=o[f]??!0;return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>C(f),className:"w-full px-4 py-3 bg-gray-50 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(ve,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:k.supplier_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[k.items.length," ",k.items.length===1?"item":"items"]})]})]}),y?e.jsx(Ss,{className:"w-5 h-5 text-gray-600"}):e.jsx(Et,{className:"w-5 h-5 text-gray-600"})]}),y&&e.jsx("div",{className:"p-4 space-y-3",children:k.items.map(F=>e.jsxs("div",{className:"flex items-start gap-4 py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:F.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",F.sku]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Qty: ",F.quantity]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["$",Number(F.price_per_unit||0).toFixed(2)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",F.line_total.toFixed(2)]})})]},F.order_item_id))})]},f)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",Number(h.subtotal_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Delivery"}),e.jsxs("span",{children:["$",Number(h.delivery_fee_total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Taxes"}),e.jsxs("span",{children:["$",Number(h.tax_amount).toFixed(2)]})]}),h.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-$",Number(h.discount_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-2 border-t border-gray-300",children:[e.jsx("span",{children:"Total Paid"}),e.jsxs("span",{children:["$",Number(h.total_amount).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",h.payment_method==="credit_card"&&"Credit Card",h.payment_method==="debit_card"&&"Debit Card",h.payment_method==="trade_credit"&&"Trade Credit"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"What Happens Next"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Order Confirmed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your order has been received and is being processed"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ve,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Supplier Preparing"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your supplier(s) will prepare your order within 24 hours"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Out for Delivery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You'll receive live GPS tracking when your order is on the way"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Dt,{className:"w-5 h-5 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Delivered"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your order will arrive during the scheduled delivery window"})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:" You'll receive updates via email and SMS at every step"})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:j,className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 hover:shadow-lg transition-all duration-200",children:[e.jsx(kt,{className:"w-5 h-5"}),e.jsx("span",{children:"Track Order"})]}),e.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-900 border border-gray-300 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Download Invoice"})]}),e.jsxs("button",{onClick:w,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-900 border border-gray-300 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),e.jsx("span",{children:"Print"})]}),e.jsxs("button",{onClick:P,className:"flex items-center justify-center gap-2 px-6 py-3 bg-white text-blue-600 border border-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:[e.jsx(nb,{className:"w-5 h-5"}),e.jsx("span",{children:"Continue Shopping"})]})]})}),h.customer_notes&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Notes"}),e.jsx("p",{className:"text-gray-700",children:h.customer_notes})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6 mt-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Need help with your order?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>t("/support"),className:"px-6 py-2 bg-white text-blue-600 border border-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:"Contact Support"}),e.jsx("button",{onClick:()=>t("/help"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Visit Help Center"})]})]})})]})})})},Ih=[{value:"pending",label:"Pending",color:"orange"},{value:"processing",label:"Processing",color:"orange"},{value:"shipped",label:"Shipped",color:"blue"},{value:"in_transit",label:"In Transit",color:"blue"},{value:"delivered",label:"Delivered",color:"green"},{value:"cancelled",label:"Cancelled",color:"red"}],qh=[{value:"all_time",label:"All Time"},{value:"today",label:"Today"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"last_3_months",label:"Last 3 Months"},{value:"last_6_months",label:"Last 6 Months"},{value:"last_year",label:"Last Year"}],td=[{value:"order_date_desc",label:"Newest First",sort_by:"order_date",sort_order:"desc"},{value:"order_date_asc",label:"Oldest First",sort_by:"order_date",sort_order:"asc"},{value:"total_amount_desc",label:"Highest Value",sort_by:"total_amount",sort_order:"desc"},{value:"total_amount_asc",label:"Lowest Value",sort_by:"total_amount",sort_order:"asc"}],Xb=20,g4=async(t,s,r,a,n,i,l,o)=>{const d=Xb,c=(l-1)*d,u={limit:d,offset:c,sort_by:n,sort_order:i};return s&&(u.status_filter=s),r!=="all_time"&&(u.date_range=r),a&&(u.supplier_id=a),(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/orders",{headers:{Authorization:`Bearer ${t}`},params:u})).data},f4=()=>{var N,R;const t=re(O=>O.authentication_state.auth_token),s=re(O=>{var T;return(T=O.authentication_state.customer_profile)==null?void 0:T.customer_id}),[r,a]=Fe(),n=r.get("status_filter"),i=r.get("date_range")||"all_time",l=r.get("supplier_id"),o=r.get("sort_by")||"order_date_desc",d=parseInt(r.get("page")||"1",10),[c,u]=_.useState(""),[m,h]=_.useState(""),x=_.useMemo(()=>{const O=td.find(T=>T.value===o)||td[0];return{sort_by:O.sort_by,sort_order:O.sort_order}},[o]);_.useEffect(()=>{const O=setTimeout(()=>{h(c)},300);return()=>clearTimeout(O)},[c]);const{data:p,isLoading:b,isError:v,error:j,refetch:P}=ne({queryKey:["orders",s,n,i,l,x.sort_by,x.sort_order,d,m],queryFn:()=>g4(t,n,i,l,x.sort_by,x.sort_order,d),enabled:!!t&&!!s,staleTime:3e4,refetchOnWindowFocus:!1}),w=(p==null?void 0:p.orders)||[],C=(p==null?void 0:p.total)||0,f=Math.ceil(C/Xb),k=O=>{const T=new URLSearchParams(r);O?T.set("status_filter",O):T.delete("status_filter"),T.set("page","1"),a(T)},y=O=>{const T=new URLSearchParams(r);T.set("date_range",O),T.set("page","1"),a(T)},F=O=>{const T=new URLSearchParams(r);T.set("sort_by",O),T.set("page","1"),a(T)},M=O=>{const T=new URLSearchParams(r);T.set("page",O.toString()),a(T),window.scrollTo({top:0,behavior:"smooth"})},E=()=>{a({}),u("")},B=n||i!=="all_time"||l||c,A=O=>{switch(O){case"pending":case"processing":return"bg-orange-100 text-orange-800 border-orange-200";case"shipped":case"in_transit":return"bg-blue-100 text-blue-800 border-blue-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";case"cancelled":case"refunded":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=O=>{switch(O){case"pending":case"processing":return e.jsx(ve,{className:"w-4 h-4"});case"shipped":case"in_transit":return e.jsx(kt,{className:"w-4 h-4"});case"delivered":return e.jsx(Dt,{className:"w-4 h-4"});case"cancelled":return e.jsx(ge,{className:"w-4 h-4"});default:return e.jsx(ve,{className:"w-4 h-4"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Track and manage all your construction material orders"})]}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Xe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:c,onChange:O=>u(O.target.value),placeholder:"Search orders by number or product...",className:"block w-full pl-10 pr-3 py-3 border-2 border-gray-200 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),c&&e.jsx("button",{onClick:()=>u(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(ge,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden sticky top-24",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"w-5 h-5 mr-2"}),"Filters"]}),B&&e.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Clear"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Order Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>k(null),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n?"text-gray-700 hover:bg-gray-50 border-2 border-transparent":"bg-blue-50 text-blue-700 border-2 border-blue-200"}`,children:"All Orders"}),Ih.map(O=>e.jsx("button",{onClick:()=>k(O.value),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n===O.value?"bg-blue-50 text-blue-700 border-2 border-blue-200":"text-gray-700 hover:bg-gray-50 border-2 border-transparent"}`,children:O.label},O.value))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Date Range"}),e.jsx("div",{className:"space-y-2",children:qh.map(O=>e.jsx("button",{onClick:()=>y(O.value),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${i===O.value?"bg-blue-50 text-blue-700 border-2 border-blue-200":"text-gray-700 hover:bg-gray-50 border-2 border-transparent"}`,children:O.label},O.value))})]})]})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[B&&e.jsx("div",{className:"mb-6 lg:hidden",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Filters:"}),n&&e.jsxs("button",{onClick:()=>k(null),className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:["Status: ",(N=Ih.find(O=>O.value===n))==null?void 0:N.label,e.jsx(ge,{className:"ml-2 w-3 h-3"})]}),i!=="all_time"&&e.jsxs("button",{onClick:()=>y("all_time"),className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:[(R=qh.find(O=>O.value===i))==null?void 0:R.label,e.jsx(ge,{className:"ml-2 w-3 h-3"})]}),e.jsx("button",{onClick:E,className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Clear All"})]})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium text-gray-900",children:C}),e.jsxs("span",{className:"ml-1",children:[C===1?"order":"orders"," found"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"sort",className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsx("select",{id:"sort",value:o,onChange:O=>F(O.target.value),className:"block w-48 pl-3 pr-10 py-2 text-sm border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-lg transition-all duration-200",children:td.map(O=>e.jsx("option",{value:O.value,children:O.label},O.value))})]})]}),b&&e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(O=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]})},O))}),v&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx(de,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-red-700 mb-4",children:G.isAxiosError(j)?j.message:"An unexpected error occurred"}),e.jsxs("button",{onClick:()=>P(),className:"inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Retry"]})]}),!b&&!v&&w.length===0&&e.jsxs("div",{className:"bg-white rounded-xl border-2 border-dashed border-gray-300 p-12 text-center",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:B?"No Orders Found":"No Orders Yet"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:B?"No orders match your current filters. Try adjusting your search or filters.":"You haven't placed any orders yet. Start browsing construction materials to get started."}),B?e.jsxs("button",{onClick:E,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Clear Filters"]}):e.jsxs(Q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Browse Products"]})]}),!b&&!v&&w.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:w.map(O=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg hover:border-blue-200 transition-all duration-200 group",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[O.primary_product_thumbnail&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:O.primary_product_thumbnail,alt:"Order product",className:"w-20 h-20 object-cover rounded-lg border-2 border-gray-100"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.order_number}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${A(O.status)}`,children:[L(O.status),e.jsx("span",{className:"ml-1.5 capitalize",children:O.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:["Placed on"," ",new Date(O.order_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",Number(O.total_amount).toFixed(2)]})]}),O.items_count&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:[O.items_count," ",O.items_count===1?"item":"items"]})]})]})]})]})}),e.jsxs("div",{className:"flex lg:flex-col items-center lg:items-end space-x-2 lg:space-x-0 lg:space-y-2",children:[e.jsxs(Q,{to:`/orders/${O.order_id}`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-all duration-200 hover:shadow-lg",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"View Details"]}),O.status==="delivered"&&e.jsxs(Q,{to:`/orders/${O.order_id}/reorder`,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-all duration-200 border border-gray-300",children:[e.jsx(lb,{className:"w-4 h-4 mr-2"}),"Reorder"]})]})]})})},O.order_id))}),f>1&&e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-lg shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>M(d-1),disabled:d===1,className:"relative inline-flex items-center px-4 py-2 rounded-l-lg border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Rt,{className:"w-5 h-5"})}),Array.from({length:Math.min(f,7)},(O,T)=>{let g;return f<=7||d<=4?g=T+1:d>=f-3?g=f-6+T:g=d-3+T,e.jsx("button",{onClick:()=>M(g),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors ${d===g?"z-10 bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:g},g)}),e.jsx("button",{onClick:()=>M(d+1),disabled:d===f,className:"relative inline-flex items-center px-4 py-2 rounded-r-lg border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]})}),f>1&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Showing page ",d," of ",f," (",C," total orders)"]})]})]})]})})]})})},b4=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,y4=async(t,s,r)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}/cancel`,{cancellation_reason:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,v4=async(t,s,r,a)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/deliveries/${t}/reschedule`,{delivery_window_start:s,delivery_window_end:r},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,j4=async(t,s)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}/reorder`,{},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,N4=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}/invoice`,{headers:{Authorization:`Bearer ${s}`},responseType:"blob"})).data,w4=()=>{var J,te,V,W;const{order_id:t}=ur(),s=ze(),r=Pe(),a=re(X=>X.authentication_state.auth_token),n=re(X=>X.fetch_cart),i=re(X=>X.websocket_connection),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(""),[h,x]=_.useState(""),[p,b]=_.useState(""),[v,j]=_.useState(null),[P,w]=_.useState(null),{data:C,isLoading:f,error:k}=ne({queryKey:["order",t],queryFn:()=>b4(t||"",a||""),enabled:!!t&&!!a,staleTime:3e4,retry:1}),y=oe({mutationFn:X=>y4(t||"",X,a||""),onSuccess:()=>{r.invalidateQueries({queryKey:["order",t]}),o(!1),m("")}}),F=oe({mutationFn:({delivery_id:X,start:H,end:ee})=>v4(X,H,ee,a||""),onSuccess:()=>{r.invalidateQueries({queryKey:["order",t]}),c(!1),x(""),b("")}}),M=oe({mutationFn:()=>j4(t||"",a||""),onSuccess:()=>{n(),s("/cart")}});if(_.useEffect(()=>{if(!i||!t||!C)return;i.emit("subscribe_order",{order_id:t});const X=C.delivery;X&&X.delivery_status==="out_for_delivery"&&i.emit("subscribe_delivery",{delivery_id:X.delivery_id});const H=ue=>{ue.order_id===t&&r.invalidateQueries({queryKey:["order",t]})},ee=ue=>{if(ue.current_latitude&&ue.current_longitude&&(j({latitude:ue.current_latitude,longitude:ue.current_longitude}),ue.estimated_arrival_time)){const be=new Date(ue.estimated_arrival_time).getTime()-Date.now();w(Math.max(0,Math.floor(be/6e4)))}};return i.on("order_status_changed",H),i.on("delivery_location_updated",ee),()=>{i.off("order_status_changed",H),i.off("delivery_location_updated",ee),i.emit("unsubscribe_order",{order_id:t}),X&&i.emit("unsubscribe_delivery",{delivery_id:X.delivery_id})}},[i,t,C,r]),!t)return s("/orders"),null;if(!a)return s("/login"),null;if(!C)return null;const E=C.order,B=C.items||[],A=C.delivery,L=C.timeline||[],N=B.reduce((X,H)=>(X[H.supplier_id]||(X[H.supplier_id]=[]),X[H.supplier_id].push(H),X),{}),R=["pending","processing"].includes(E.status),O=A&&["scheduled","preparing"].includes(A.delivery_status),T=A&&A.delivery_status==="out_for_delivery",g=!["cancelled","refunded"].includes(E.status),D=E.status==="delivered",S=E.status==="delivered",$={pending:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},processing:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-300"},shipped:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-300"},in_transit:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-300"},delivered:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},cancelled:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"},refunded:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300"}},I=$[E.status]||$.pending,K=X=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(X),U=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),q=async()=>{try{const X=await N4(t,a),H=window.URL.createObjectURL(X),ee=document.createElement("a");ee.href=H,ee.download=`Invoice-${E.order_number}.pdf`,document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL(H),document.body.removeChild(ee)}catch(X){console.error("Invoice download failed:",X)}},z=()=>{u.trim()&&y.mutate(u)},Y=()=>{!A||!h||!p||F.mutate({delivery_id:A.delivery_id,start:h,end:p})},se=()=>{M.mutate()};return e.jsxs(e.Fragment,{children:[f&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading order details..."})]})}),k&&e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white border-2 border-red-200 rounded-xl p-8 shadow-lg text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(At,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find this order. It may have been removed or you may not have access to it."}),e.jsx(Q,{to:"/orders",className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"View All Orders"})]})})}),!f&&!k&&C&&e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(Q,{to:"/orders",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4 rotate-180 mr-1"}),"Back to Orders"]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",E.order_number]}),e.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-semibold border ${I.bg} ${I.text} ${I.border}`,children:E.status.replace("_"," ").toUpperCase()})]}),e.jsxs("p",{className:"text-gray-600",children:["Placed on ",U(E.order_date)]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[R&&e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Cancel Order"]}),D&&e.jsxs("button",{onClick:se,disabled:M.isPending,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(lb,{className:"w-4 h-4 mr-2"}),M.isPending?"Adding to cart...":"Reorder"]}),e.jsxs("button",{onClick:q,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors border border-gray-300",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Download Invoice"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Timeline"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-4 left-4 h-full w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-6",children:L.map((X,H)=>{const ee=X.status==="completed",ue=H===L.length-1&&!["delivered","cancelled","refunded"].includes(E.status);return e.jsxs("div",{className:"relative flex items-start gap-4",children:[e.jsx("div",{className:`relative z-10 flex items-center justify-center w-8 h-8 rounded-full border-4 ${ee?"bg-green-500 border-green-200":ue?"bg-blue-500 border-blue-200 animate-pulse":"bg-gray-300 border-gray-100"}`,children:ee&&e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 pb-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base font-semibold ${ee?"text-gray-900":"text-gray-600"}`,children:X.milestone.replace(/_/g," ").replace(/\b\w/g,be=>be.toUpperCase())}),X.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:X.description})]}),e.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap ml-4",children:new Date(X.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U(X.timestamp)})]})]},H)})})]})]}),T&&A&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Live Delivery Tracking"}),P!==null&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 rounded-lg",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold",children:["ETA: ",P," min"]})]})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg h-96 flex items-center justify-center border-2 border-gray-300 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Live GPS Tracking"}),v&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Location: ",v.latitude.toFixed(6),", ",v.longitude.toFixed(6)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Driver: ",A.driver_name||"En route"]})]})}),A.driver_name&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Xt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:A.driver_name}),e.jsx("p",{className:"text-sm text-gray-600",children:A.carrier||"Delivery Driver"})]})]}),A.driver_phone&&e.jsxs("a",{href:`tel:${A.driver_phone}`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Call Driver"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Items"}),Object.entries(N).map(([X,H])=>{var ee;return e.jsxs("div",{className:"mb-6 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-200",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-600"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Supplier: ",(ee=H[0])==null?void 0:ee.supplier_id]})]}),e.jsx("div",{className:"space-y-3",children:H.map(ue=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ve,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Q,{to:`/product/${ue.product_id}`,className:"font-semibold text-gray-900 hover:text-blue-600 transition-colors truncate block",children:ue.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",ue.sku]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",ue.quantity]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[K(ue.price_per_unit)," each"]}),e.jsx("p",{className:"font-bold text-gray-900",children:K(ue.line_total)})]})]},ue.order_item_id))})]},X)})]}),A&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Delivery Information"}),O&&e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Reschedule"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(kt,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-900",children:A.delivery_status.replace("_"," ").replace(/\b\w/g,X=>X.toUpperCase())})]}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Delivery Window: ",U(A.delivery_window_start)," - ",new Date(A.delivery_window_end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),A.tracking_number&&e.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:["Tracking: ",A.tracking_number]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Delivery Address"}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:E.delivery_address_id}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["(Address details loaded from address_id: ",E.delivery_address_id,")"]})]})]}),A.delivery_status==="delivered"&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-900",children:"Delivered Successfully"})]}),e.jsxs("p",{className:"text-sm text-green-800",children:["Delivered on ",A.actual_delivery_time?U(A.actual_delivery_time):"N/A"]}),A.delivery_proof_photo_url&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-green-800 mb-2",children:"Delivery Proof:"}),e.jsx("img",{src:A.delivery_proof_photo_url,alt:"Delivery proof",className:"rounded-lg border border-green-300 max-w-xs"})]}),A.delivery_notes&&e.jsxs("p",{className:"text-sm text-green-800 mt-2",children:["Note: ",A.delivery_notes]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:K(E.subtotal_amount)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Delivery Fee:"}),e.jsx("span",{children:K(E.delivery_fee_total)})]}),e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:K(E.tax_amount)})]}),E.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",K(E.discount_amount)]})]}),e.jsx("div",{className:"pt-3 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:K(E.total_amount)})]})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(es,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"capitalize",children:E.payment_method.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:E.payment_status})]}),E.promo_code_used&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Promo code applied: ",E.promo_code_used]})]}),E.customer_notes&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Order Notes"}),e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',E.customer_notes,'"']})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[g&&e.jsxs(Q,{to:`/report-issue?order_id=${t}`,className:"w-full inline-flex items-center justify-center px-4 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(At,{className:"w-4 h-4 mr-2"}),"Report Issue"]}),e.jsxs("button",{onClick:()=>s("/support"),className:"w-full inline-flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors border border-gray-300",children:[e.jsx(zt,{className:"w-4 h-4 mr-2"}),"Contact Support"]}),S&&e.jsx(Q,{to:`/account/reviews?order_id=${t}`,className:"w-full inline-flex items-center justify-center px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Leave Review"})]})]})]})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Cancel Order"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to cancel this order? This action cannot be undone."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for cancellation"}),e.jsx("textarea",{id:"cancellation_reason",value:u,onChange:X=>m(X.target.value),rows:3,placeholder:"Please tell us why you're cancelling...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),y.error&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:G.isAxiosError(y.error)?((te=(J=y.error.response)==null?void 0:J.data)==null?void 0:te.message)||"Failed to cancel order":"An error occurred"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{o(!1),m("")},disabled:y.isPending,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Keep Order"}),e.jsx("button",{onClick:z,disabled:y.isPending||!u.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?"Cancelling...":"Yes, Cancel Order"})]})]})}),d&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Reschedule Delivery"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Choose a new delivery window for your order."}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_start",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Delivery Start"}),e.jsx("input",{type:"datetime-local",id:"new_start",value:h,onChange:X=>x(X.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new_end",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Delivery End"}),e.jsx("input",{type:"datetime-local",id:"new_end",value:p,onChange:X=>b(X.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),F.error&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:G.isAxiosError(F.error)?((W=(V=F.error.response)==null?void 0:V.data)==null?void 0:W.message)||"Failed to reschedule delivery":"An error occurred"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{c(!1),x(""),b("")},disabled:F.isPending,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:F.isPending||!h||!p,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?"Rescheduling...":"Confirm"})]})]})})]})},_4=async(t,s)=>{const r=new URLSearchParams;return s.notification_type&&s.notification_type!=="all"&&r.append("notification_type",s.notification_type),s.is_read!==void 0&&r.append("is_read",String(s.is_read)),r.append("limit",String(s.limit)),r.append("offset",String(s.offset)),(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/notifications?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},k4=async(t,s)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/notifications/${s}/read`,{},{headers:{Authorization:`Bearer ${t}`}})).data,S4=async t=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/notifications/read-all",{},{headers:{Authorization:`Bearer ${t}`}})).data,C4=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/6e4),i=Math.floor(a/36e5),l=Math.floor(a/864e5);return n<1?"Just now":n<60?`${n} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:l<7?`${l} day${l>1?"s":""} ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})},P4=t=>{switch(t){case"order_update":return ve;case"promotion":return Aa;case"price_drop":return Jn;case"back_in_stock":return he;case"message":return Ft;case"system":default:return uw}},A4=t=>{switch(t){case"order_update":return"text-blue-600 bg-blue-100";case"promotion":return"text-purple-600 bg-purple-100";case"price_drop":return"text-green-600 bg-green-100";case"back_in_stock":return"text-emerald-600 bg-emerald-100";case"message":return"text-amber-600 bg-amber-100";case"system":default:return"text-gray-600 bg-gray-100"}},$4=t=>{switch(t){case"all":return"All";case"order_update":return"Orders";case"promotion":case"price_drop":case"back_in_stock":return"Alerts";default:return"All"}},O4=()=>{const t=ze(),[s,r]=Fe(),a=Pe(),n=re(T=>T.authentication_state.auth_token),[i,l]=_.useState([]),o=s.get("filter_type")||"all",d=s.get("unread_only")==="true",c=parseInt(s.get("page")||"1",10),u=20,{data:m,isLoading:h,isError:x,error:p,refetch:b}=ne({queryKey:["notifications",o,d,c,u],queryFn:()=>{if(!n)throw new Error("Authentication required");return _4(n,{notification_type:o==="orders"?"order_update":o==="alerts"?void 0:o!=="all"?o:void 0,is_read:d?!1:void 0,limit:u,offset:(c-1)*u})},enabled:!!n,staleTime:3e4,refetchOnWindowFocus:!0}),v=oe({mutationFn:T=>{if(!n)throw new Error("Authentication required");return k4(n,T)},onSuccess:()=>{a.invalidateQueries({queryKey:["notifications"]}),m&&m.unread_count>0}}),j=oe({mutationFn:()=>{if(!n)throw new Error("Authentication required");return S4(n)},onSuccess:()=>{a.invalidateQueries({queryKey:["notifications"]}),l([])}}),P=T=>{const g=new URLSearchParams(s);T==="all"?g.delete("filter_type"):g.set("filter_type",T),g.delete("page"),r(g),l([])},w=()=>{const T=new URLSearchParams(s);d?T.delete("unread_only"):T.set("unread_only","true"),T.delete("page"),r(T),l([])},C=T=>{const g=new URLSearchParams(s);T===1?g.delete("page"):g.set("page",String(T)),r(g),l([])},f=async T=>{T.is_read||await v.mutateAsync(T.notification_id),T.action_url&&t(T.action_url)},k=T=>{l(g=>g.includes(T)?g.filter(D=>D!==T):[...g,T])},y=()=>{m&&(i.length===m.notifications.length?l([]):l(m.notifications.map(T=>T.notification_id)))},F=async()=>{if(i.length!==0)try{await Promise.all(i.map(T=>v.mutateAsync(T))),l([])}catch(T){console.error("Failed to mark notifications as read:",T)}},M=async()=>{try{await j.mutateAsync()}catch(T){console.error("Failed to mark all as read:",T)}},E=(m==null?void 0:m.notifications)||[],B=(m==null?void 0:m.total)||0,A=(m==null?void 0:m.unread_count)||0,L=Math.ceil(B/u),N=[{value:"all",label:"All"},{value:"orders",label:"Orders"},{value:"alerts",label:"Alerts"}],R=i.length>0,O=E.length>0&&i.length===E.length;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ht,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),A>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[A," unread notification",A!==1?"s":""]})]})]}),A>0&&e.jsxs("button",{onClick:M,disabled:j.isPending,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[j.isPending?e.jsx(ut,{className:"w-4 h-4 animate-spin"}):e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Mark All as Read"})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mt-6 border-b border-gray-200",children:N.map(T=>e.jsx("button",{onClick:()=>P(T.value),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${o===T.value?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:T.label},T.value))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:w,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Unread only"})]}),E.length>0&&e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:y,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Select all"})]})]}),R&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[i.length," selected"]}),e.jsxs("button",{onClick:F,disabled:v.isPending,className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:[v.isPending?e.jsx(ut,{className:"w-4 h-4 animate-spin"}):e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{children:"Mark as Read"})]})]})]})}),h&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx(ut,{className:"w-8 h-8 text-blue-600 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Loading notifications..."})]})}),x&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-1",children:"Failed to load notifications"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:p instanceof Error?p.message:"An error occurred"}),e.jsx("button",{onClick:()=>b(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Try Again"})]})]})}),!h&&!x&&e.jsxs(e.Fragment,{children:[E.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(dw,{className:"w-12 h-12 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d?"No unread notifications":o!=="all"?`No ${$4(o).toLowerCase()} notifications`:"No notifications yet"}),e.jsx("p",{className:"text-sm text-gray-600",children:d?"You're all caught up!":"We'll notify you when there's something new"})]}),(d||o!=="all")&&e.jsx("button",{onClick:()=>{const T=new URLSearchParams;r(T)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View all notifications"})]})}):e.jsx("div",{className:"space-y-3",children:E.map(T=>{const g=P4(T.notification_type),D=A4(T.notification_type),S=i.includes(T.notification_id);return e.jsx("div",{className:`bg-white rounded-lg shadow-sm border transition-all ${T.is_read?"border-gray-200 hover:border-gray-300":"border-blue-200 bg-blue-50/30 hover:border-blue-300"} ${S?"ring-2 ring-blue-500":""}`,children:e.jsxs("div",{className:"p-4 flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx("input",{type:"checkbox",checked:S,onChange:()=>k(T.notification_id),onClick:$=>$.stopPropagation(),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-2 rounded-lg ${D}`,children:e.jsx(g,{className:"w-5 h-5"})})}),e.jsxs("button",{onClick:()=>f(T),className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:`text-sm font-semibold ${T.is_read?"text-gray-700":"text-gray-900"}`,children:T.title}),!T.is_read&&e.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsx("p",{className:`text-sm ${T.is_read?"text-gray-500":"text-gray-700"} line-clamp-2`,children:T.message})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("span",{className:"text-xs text-gray-500",children:C4(T.created_date)})})]}),T.related_entity_type&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-gray-100 text-xs text-gray-600",children:[T.related_entity_type==="order"&&"Order",T.related_entity_type==="product"&&"Product",T.related_entity_type==="delivery"&&"Delivery",!["order","product","delivery"].includes(T.related_entity_type)&&T.related_entity_type]})})]}),!T.is_read&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("button",{onClick:$=>{$.stopPropagation(),v.mutate(T.notification_id)},disabled:v.isPending,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Mark as read",children:e.jsx(je,{className:"w-5 h-5"})})})]})},T.notification_id)})}),L>1&&E.length>0&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(c-1)*u+1," to"," ",Math.min(c*u,B)," of ",B," ","notifications"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(c-1),disabled:c===1,className:"p-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,L)},(T,g)=>{let D;return L<=5||c<=3?D=g+1:c>=L-2?D=L-4+g:D=c-2+g,e.jsx("button",{onClick:()=>C(D),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c===D?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:D},D)})}),e.jsx("button",{onClick:()=>C(c+1),disabled:c===L,className:"p-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]})]})})]})]})})})},vs="https://123create-construction-app-with-a.launchpulse.ai/api",js=t=>({headers:t?{Authorization:`Bearer ${t}`}:{}}),T4=async t=>(await G.get(`${vs}/users/me`,js(t))).data,E4=async t=>(await G.get(`${vs}/customers/me`,js(t))).data,F4=async(t,s)=>(await G.patch(`${vs}/users/me`,s,js(t))).data,Bh=async(t,s)=>(await G.patch(`${vs}/customers/me`,s,js(t))).data,M4=async t=>(await G.get(`${vs}/addresses`,js(t))).data,R4=async(t,s)=>(await G.post(`${vs}/addresses`,s,js(t))).data,D4=async(t,s,r)=>(await G.patch(`${vs}/addresses/${s}`,r,js(t))).data,L4=async(t,s)=>{await G.delete(`${vs}/addresses/${s}`,js(t))},I4=async t=>(await G.get(`${vs}/payment-methods`,js(t))).data,q4=async(t,s,r)=>(await G.patch(`${vs}/payment-methods/${s}`,r,js(t))).data,B4=async(t,s)=>{await G.delete(`${vs}/payment-methods/${s}`,js(t))},U4=async(t,s)=>{await G.post(`${vs}/users/me/change-password`,s,js(t))},z4=()=>{var Gx,Qx,Xx,Jx,Zx;const t=ze(),[s]=Fe(),r=Pe(),a=re(ae=>ae.authentication_state.auth_token),[n,i]=_.useState(s.get("section")||"profile"),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(null),[h,x]=_.useState(null),[p,b]=_.useState(!1),[v,j]=_.useState(null),[P,w]=_.useState(null),[C,f]=_.useState({}),[k,y]=_.useState(null),[F,M]=_.useState({first_name:"",last_name:"",phone_number:"",profile_photo_url:""}),[E,B]=_.useState({label:"",full_name:"",phone_number:"",street_address:"",apt_suite:"",city:"",state:"",postal_code:"",country:"USA",address_type:"residential",delivery_instructions:"",is_default:!1}),[A,L]=_.useState({current_password:"",new_password:"",confirm_password:""}),[N,R]=_.useState({card_expiry_month:"",card_expiry_year:"",billing_address_id:"",is_default:!1}),[O,T]=_.useState({email:!0,sms:!0,push:!0,order_updates:!0,promotions:!0}),{data:g,isLoading:D}=ne({queryKey:["userProfile"],queryFn:()=>T4(a),enabled:!!a,staleTime:6e4}),{data:S,isLoading:$}=ne({queryKey:["customerProfile"],queryFn:()=>E4(a),enabled:!!a,staleTime:6e4}),{data:I=[],isLoading:K}=ne({queryKey:["addresses"],queryFn:()=>M4(a),enabled:!!a&&n==="addresses",staleTime:6e4}),{data:U=[],isLoading:q}=ne({queryKey:["paymentMethods"],queryFn:()=>I4(a),enabled:!!a&&n==="payments",staleTime:6e4}),z=oe({mutationFn:ae=>F4(a,ae),onSuccess:()=>{r.invalidateQueries({queryKey:["userProfile"]}),o(!1),y("Profile updated successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({profile:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to update profile"})}});oe({mutationFn:ae=>Bh(a,ae),onSuccess:()=>{r.invalidateQueries({queryKey:["customerProfile"]}),y("Preferences updated successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({customer:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to update preferences"})}});const Y=oe({mutationFn:ae=>R4(a,ae),onSuccess:()=>{r.invalidateQueries({queryKey:["addresses"]}),c(!1),ke(),y("Address added successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({address:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to add address"})}}),se=oe({mutationFn:({address_id:ae,data:ce})=>D4(a,ae,ce),onSuccess:()=>{r.invalidateQueries({queryKey:["addresses"]}),m(null),ke(),y("Address updated successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({address:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to update address"})}}),J=oe({mutationFn:ae=>L4(a,ae),onSuccess:()=>{r.invalidateQueries({queryKey:["addresses"]}),j(null),w(null),y("Address deleted successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({address:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to delete address"})}}),te=oe({mutationFn:({payment_method_id:ae,data:ce})=>q4(a,ae,ce),onSuccess:()=>{r.invalidateQueries({queryKey:["paymentMethods"]}),x(null),y("Payment method updated successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({payment:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to update payment method"})}}),V=oe({mutationFn:ae=>B4(a,ae),onSuccess:()=>{r.invalidateQueries({queryKey:["paymentMethods"]}),j(null),w(null),y("Payment method deleted successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({payment:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to delete payment method"})}}),W=oe({mutationFn:ae=>U4(a,ae),onSuccess:()=>{b(!1),L({current_password:"",new_password:"",confirm_password:""}),y("Password changed successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({password:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to change password"})}}),X=oe({mutationFn:ae=>Bh(a,{notification_preferences:ae}),onSuccess:()=>{r.invalidateQueries({queryKey:["customerProfile"]}),y("Notification preferences updated successfully"),setTimeout(()=>y(null),3e3)},onError:ae=>{var ce,Ne;f({notifications:((Ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:Ne.message)||"Failed to update preferences"})}});_.useEffect(()=>{g&&M({first_name:g.first_name||"",last_name:g.last_name||"",phone_number:g.phone_number||"",profile_photo_url:g.profile_photo_url||""})},[g]),_.useEffect(()=>{S!=null&&S.notification_preferences&&T(S.notification_preferences)},[S]),_.useEffect(()=>{const ae=s.get("section");ae&&i(ae)},[s]);const H=ae=>{i(ae),t(`/account?section=${ae}`,{replace:!0}),f({}),y(null)},ee=()=>{o(!0),f({})},ue=()=>{if(f({}),!F.first_name||!F.last_name){f({profile:"First and last name are required"});return}z.mutate({first_name:F.first_name,last_name:F.last_name,phone_number:F.phone_number,profile_photo_url:F.profile_photo_url})},be=()=>{o(!1),f({}),g&&M({first_name:g.first_name||"",last_name:g.last_name||"",phone_number:g.phone_number||"",profile_photo_url:g.profile_photo_url||""})},ke=()=>{B({label:"",full_name:"",phone_number:"",street_address:"",apt_suite:"",city:"",state:"",postal_code:"",country:"USA",address_type:"residential",delivery_instructions:"",is_default:!1})},De=ae=>{m(ae.address_id),B({label:ae.label||"",full_name:ae.full_name,phone_number:ae.phone_number,street_address:ae.street_address,apt_suite:ae.apt_suite||"",city:ae.city,state:ae.state,postal_code:ae.postal_code,country:ae.country,address_type:ae.address_type||"residential",delivery_instructions:ae.delivery_instructions||"",is_default:ae.is_default})},ht=()=>{if(f({}),!E.full_name||!E.phone_number||!E.street_address||!E.city||!E.state||!E.postal_code){f({address:"All required fields must be filled"});return}u?se.mutate({address_id:u,data:E}):Y.mutate(E)},me=()=>{m(null),c(!1),ke(),f({})},We=ae=>{j(ae),w("address")},Fs=()=>{P==="address"&&v?J.mutate(v):P==="payment"&&v&&V.mutate(v)},ds=()=>{j(null),w(null)},Er=ae=>{x(ae.payment_method_id),R({card_expiry_month:ae.card_expiry_month||"",card_expiry_year:ae.card_expiry_year||"",billing_address_id:ae.billing_address_id||"",is_default:ae.is_default})},Uc=()=>{f({}),h&&te.mutate({payment_method_id:h,data:N})},pe=()=>{x(null),f({})},rt=ae=>{j(ae),w("payment")},ma=()=>{if(f({}),!A.current_password||!A.new_password||!A.confirm_password){f({password:"All password fields are required"});return}if(A.new_password!==A.confirm_password){f({password:"New passwords do not match"});return}if(A.new_password.length<8){f({password:"Password must be at least 8 characters"});return}W.mutate({current_password:A.current_password,new_password:A.new_password})},zc=()=>{X.mutate(O)},HN=ae=>{se.mutate({address_id:ae,data:{is_default:!0}})},YN=ae=>{te.mutate({payment_method_id:ae,data:{is_default:!0}})},Fr=(ae,ce,Ne)=>e.jsxs("button",{onClick:()=>H(ae),className:`flex items-center space-x-3 w-full px-4 py-3 rounded-lg transition-all duration-200 ${n===ae?"bg-blue-50 text-blue-700 font-medium border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-100 border-l-4 border-transparent"}`,children:[ce,e.jsx("span",{children:Ne})]}),GN=ae=>{switch(ae){case"commercial":return e.jsx(kr,{className:"h-5 w-5 text-gray-400"});case"warehouse":return e.jsx(xw,{className:"h-5 w-5 text-gray-400"});default:return e.jsx(mw,{className:"h-5 w-5 text-gray-400"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Account Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),k&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-6 py-4 rounded-lg flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{children:k})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 space-y-2 sticky top-24",children:[Fr("profile",e.jsx(Xt,{className:"h-5 w-5"}),"Profile"),Fr("addresses",e.jsx(Dt,{className:"h-5 w-5"}),"Addresses"),Fr("payments",e.jsx(es,{className:"h-5 w-5"}),"Payment Methods"),Fr("security",e.jsx(Mt,{className:"h-5 w-5"}),"Security"),Fr("notifications",e.jsx(Ht,{className:"h-5 w-5"}),"Notifications"),Fr("privacy",e.jsx(Xn,{className:"h-5 w-5"}),"Privacy"),(S==null?void 0:S.account_type)==="trade"&&Fr("trade_credit",e.jsx(Te,{className:"h-5 w-5"}),"Trade Credit")]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8",children:[n==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Information"}),!l&&e.jsxs("button",{onClick:ee,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Profile"})]})]}),D?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg animate-pulse"})]}):e.jsxs("div",{className:"space-y-6",children:[C.profile&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C.profile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-2xl font-bold",children:[(Gx=g==null?void 0:g.first_name)==null?void 0:Gx[0],(Qx=g==null?void 0:g.last_name)==null?void 0:Qx[0]]}),l&&e.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Change Photo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:F.first_name,onChange:ae=>{M(ce=>({...ce,first_name:ae.target.value})),f(ce=>({...ce,profile:""}))},disabled:!l,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:F.last_name,onChange:ae=>{M(ce=>({...ce,last_name:ae.target.value})),f(ce=>({...ce,profile:""}))},disabled:!l,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"email",value:(g==null?void 0:g.email)||"",disabled:!0,className:"flex-1 px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 cursor-not-allowed"}),g!=null&&g.email_verified?e.jsxs("span",{className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium flex items-center space-x-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Verified"})]}):e.jsx("span",{className:"px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium",children:"Unverified"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Email changes require verification"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:F.phone_number,onChange:ae=>{M(ce=>({...ce,phone_number:ae.target.value})),f(ce=>({...ce,profile:""}))},disabled:!l,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),e.jsx("span",{className:`inline-flex px-4 py-2 rounded-lg font-medium ${(S==null?void 0:S.account_type)==="trade"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:(S==null?void 0:S.account_type)==="trade"?"Trade/Professional":"Retail/DIY"})]}),l&&e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:ue,disabled:z.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z.isPending?"Saving...":"Save Changes"}),e.jsx("button",{onClick:be,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}),n==="addresses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Delivery Addresses"}),e.jsxs("button",{onClick:()=>{c(!0),ke(),f({})},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Address"})]})]}),K?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg animate-pulse"})]}):e.jsxs(e.Fragment,{children:[I.length===0&&!d?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No addresses saved yet"}),e.jsx("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add Your First Address"})]}):e.jsx("div",{className:"space-y-4",children:I.map(ae=>e.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-blue-300 transition-colors",children:u===ae.address_id?e.jsxs("div",{className:"space-y-4",children:[C.address&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C.address})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Label"}),e.jsx("input",{type:"text",value:E.label,onChange:ce=>B(Ne=>({...Ne,label:ce.target.value})),placeholder:"e.g., Home, Office, Job Site",className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:E.full_name,onChange:ce=>B(Ne=>({...Ne,full_name:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:E.phone_number,onChange:ce=>B(Ne=>({...Ne,phone_number:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),e.jsx("input",{type:"text",value:E.street_address,onChange:ce=>B(Ne=>({...Ne,street_address:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apt/Suite"}),e.jsx("input",{type:"text",value:E.apt_suite,onChange:ce=>B(Ne=>({...Ne,apt_suite:ce.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:E.city,onChange:ce=>B(Ne=>({...Ne,city:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",value:E.state,onChange:ce=>B(Ne=>({...Ne,state:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),e.jsx("input",{type:"text",value:E.postal_code,onChange:ce=>B(Ne=>({...Ne,postal_code:ce.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Type"}),e.jsxs("select",{value:E.address_type,onChange:ce=>B(Ne=>({...Ne,address_type:ce.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"residential",children:"Residential"}),e.jsx("option",{value:"commercial",children:"Commercial"}),e.jsx("option",{value:"warehouse",children:"Warehouse"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),e.jsx("textarea",{value:E.delivery_instructions,onChange:ce=>B(Ne=>({...Ne,delivery_instructions:ce.target.value})),rows:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.is_default,onChange:ce=>B(Ne=>({...Ne,is_default:ce.target.checked})),className:"h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as default delivery address"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:ht,disabled:se.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:se.isPending?"Saving...":"Save Address"}),e.jsx("button",{onClick:me,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[GN(ae.address_type),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx("span",{children:ae.label||"Address"}),ae.is_default&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-md font-medium",children:"Default"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:ae.full_name})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>De(ae),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Is,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>We(ae.address_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_t,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1 text-gray-700",children:[e.jsxs("p",{children:[ae.street_address,ae.apt_suite?`, ${ae.apt_suite}`:""]}),e.jsxs("p",{children:[ae.city,", ",ae.state," ",ae.postal_code]}),e.jsx("p",{className:"text-sm text-gray-500",children:ae.phone_number}),ae.delivery_instructions&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:["Note: ",ae.delivery_instructions]})]}),!ae.is_default&&e.jsx("button",{onClick:()=>HN(ae.address_id),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Set as Default"})]})},ae.address_id))}),d&&!u&&e.jsxs("div",{className:"border-2 border-blue-300 rounded-xl p-6 bg-blue-50",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Add New Address"}),C.address&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C.address})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Label"}),e.jsx("input",{type:"text",value:E.label,onChange:ae=>B(ce=>({...ce,label:ae.target.value})),placeholder:"e.g., Home, Office, Job Site",className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:E.full_name,onChange:ae=>B(ce=>({...ce,full_name:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:E.phone_number,onChange:ae=>B(ce=>({...ce,phone_number:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),e.jsx("input",{type:"text",value:E.street_address,onChange:ae=>B(ce=>({...ce,street_address:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apt/Suite"}),e.jsx("input",{type:"text",value:E.apt_suite,onChange:ae=>B(ce=>({...ce,apt_suite:ae.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsx("input",{type:"text",value:E.city,onChange:ae=>B(ce=>({...ce,city:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),e.jsx("input",{type:"text",value:E.state,onChange:ae=>B(ce=>({...ce,state:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),e.jsx("input",{type:"text",value:E.postal_code,onChange:ae=>B(ce=>({...ce,postal_code:ae.target.value})),required:!0,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Type"}),e.jsxs("select",{value:E.address_type,onChange:ae=>B(ce=>({...ce,address_type:ae.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"residential",children:"Residential"}),e.jsx("option",{value:"commercial",children:"Commercial"}),e.jsx("option",{value:"warehouse",children:"Warehouse"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Instructions"}),e.jsx("textarea",{value:E.delivery_instructions,onChange:ae=>B(ce=>({...ce,delivery_instructions:ae.target.value})),rows:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.is_default,onChange:ae=>B(ce=>({...ce,is_default:ae.target.checked})),className:"h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as default delivery address"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:ht,disabled:Y.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Y.isPending?"Adding...":"Add Address"}),e.jsx("button",{onClick:me,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]})]})]}),n==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Methods"})}),q?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"})]}):e.jsx(e.Fragment,{children:U.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(es,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No payment methods saved yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add a payment method to checkout faster"})]}):e.jsx("div",{className:"space-y-4",children:U.map(ae=>e.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-blue-300 transition-colors",children:h===ae.payment_method_id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Month"}),e.jsx("input",{type:"text",value:N.card_expiry_month,onChange:ce=>R(Ne=>({...Ne,card_expiry_month:ce.target.value})),placeholder:"MM",maxLength:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Year"}),e.jsx("input",{type:"text",value:N.card_expiry_year,onChange:ce=>R(Ne=>({...Ne,card_expiry_year:ce.target.value})),placeholder:"YYYY",maxLength:4,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.is_default,onChange:ce=>R(Ne=>({...Ne,is_default:ce.target.checked})),className:"h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as default payment method"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Uc,disabled:te.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:te.isPending?"Saving...":"Save Changes"}),e.jsx("button",{onClick:pe,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(es,{className:"h-6 w-6 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsxs("span",{children:[ae.card_brand||"Card","  ",ae.card_last_four]}),ae.is_default&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-md font-medium",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expires ",ae.card_expiry_month,"/",ae.card_expiry_year]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Er(ae),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Is,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>rt(ae.payment_method_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_t,{className:"h-4 w-4"})})]})]}),ae.cardholder_name&&e.jsx("p",{className:"text-sm text-gray-600",children:ae.cardholder_name}),!ae.is_default&&e.jsx("button",{onClick:()=>YN(ae.payment_method_id),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Set as Default"})]})},ae.payment_method_id))})})]}),n==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your password regularly for security"})]}),!p&&e.jsx("button",{onClick:()=>{b(!0),f({})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Change Password"})]}),p&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[C.password&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:A.current_password,onChange:ae=>{L(ce=>({...ce,current_password:ae.target.value})),f(ce=>({...ce,password:""}))},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:A.new_password,onChange:ae=>{L(ce=>({...ce,new_password:ae.target.value})),f(ce=>({...ce,password:""}))},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"At least 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:A.confirm_password,onChange:ae=>{L(ce=>({...ce,confirm_password:ae.target.value})),f(ce=>({...ce,password:""}))},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:ma,disabled:W.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:W.isPending?"Changing...":"Update Password"}),e.jsx("button",{onClick:()=>{b(!1),L({current_password:"",new_password:"",confirm_password:""}),f({})},className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}),e.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Enable 2FA"})]})}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Active Sessions"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Current Session"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last active: Just now"})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-md font-medium",children:"Active"})]})})]})]}),n==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Preferences"}),$?e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg animate-pulse"}):e.jsxs(e.Fragment,{children:[C.notifications&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C.notifications})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Notification Channels"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]}),e.jsx("input",{type:"checkbox",checked:O.email,onChange:ae=>T(ce=>({...ce,email:ae.target.checked})),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via text message"})]}),e.jsx("input",{type:"checkbox",checked:O.sms,onChange:ae=>T(ce=>({...ce,sms:ae.target.checked})),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications"})]}),e.jsx("input",{type:"checkbox",checked:O.push,onChange:ae=>T(ce=>({...ce,push:ae.target.checked})),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Notification Types"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Order Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Status updates for your orders"})]}),e.jsx("input",{type:"checkbox",checked:O.order_updates,onChange:ae=>T(ce=>({...ce,order_updates:ae.target.checked})),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Promotional Emails"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Deals and special offers"})]}),e.jsx("input",{type:"checkbox",checked:O.promotions,onChange:ae=>T(ce=>({...ce,promotions:ae.target.checked})),className:"h-5 w-5 text-blue-600 rounded focus:ring-blue-500"})]})]})]}),e.jsx("button",{onClick:zc,disabled:X.isPending,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:X.isPending?"Saving...":"Save Preferences"})]})]})]}),n==="privacy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Privacy & Data"}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Data Export"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Download a copy of your account data"}),e.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Download My Data"})]}),e.jsxs("div",{className:"border-2 border-red-200 rounded-xl p-6 bg-red-50",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-red-700 text-sm mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsx("button",{className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Delete My Account"})]})]}),n==="trade_credit"&&(S==null?void 0:S.account_type)==="trade"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Trade Credit"}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 bg-gradient-to-br from-purple-50 to-blue-50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Credit Limit"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((Xx=S.trade_credit_limit)==null?void 0:Xx.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Credit"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",((Jx=S.trade_credit_balance)==null?void 0:Jx.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Used Credit"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",((Zx=S.trade_credit_used)==null?void 0:Zx.toFixed(2))||"0.00"]})]})]}),S.trade_credit_status==="approved"&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Request Credit Increase"})})]})]})]})})]})]})}),v&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Confirm Deletion"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",P==="address"?"address":"payment method","? This action cannot be undone."]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:Fs,disabled:J.isPending||V.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J.isPending||V.isPending?"Deleting...":"Delete"}),e.jsx("button",{onClick:ds,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})})]})},sl="https://123create-construction-app-with-a.launchpulse.ai",sd=t=>{const s=new Date(t).getTime(),r=Date.now(),a=30*24*60*60*1e3;return r-s<=a},Uh=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),W4=()=>{const t=re(N=>N.authentication_state.current_user),s=re(N=>N.authentication_state.auth_token),r=(t==null?void 0:t.user_type)==="customer"?t.user_id:null,a=Pe(),[n,i]=_.useState({sort_by:"review_date",sort_order:"desc",status_filter:"all"}),[l,o]=_.useState({review_id:null,review_text:"",photos:[],is_editing:!1,validation_errors:{}}),[d,c]=_.useState({is_open:!1,review_id:null}),[u,m]=_.useState(!1),{data:h,isLoading:x,error:p,refetch:b}=ne({queryKey:["my-reviews",r,n],queryFn:async()=>{if(!r||!s)throw new Error("Authentication required");const N=await G.get(`${sl}/reviews`,{params:{user_id:r,limit:50,offset:0,sort_by:n.sort_by,sort_order:n.sort_order,...n.status_filter!=="all"&&{status:n.status_filter}},headers:{Authorization:`Bearer ${s}`}});return{reviews:N.data.reviews||[],pagination:{current_page:1,total_pages:Math.ceil((N.data.total||0)/50),total_count:N.data.total||0}}},enabled:!!r&&!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),v=oe({mutationFn:async({review_id:N,review_text:R,photos:O})=>{if(!s)throw new Error("Authentication required");return(await G.patch(`${sl}/reviews/${N}`,{review_text:R,photos:O},{headers:{Authorization:`Bearer ${s}`}})).data},onSuccess:()=>{a.invalidateQueries({queryKey:["my-reviews"]}),o({review_id:null,review_text:"",photos:[],is_editing:!1,validation_errors:{}})},onError:N=>{o(R=>{var O,T;return{...R,validation_errors:{submit:((T=(O=N.response)==null?void 0:O.data)==null?void 0:T.message)||"Failed to update review. Please try again."}}})}}),j=oe({mutationFn:async N=>{if(!s)throw new Error("Authentication required");await G.delete(`${sl}/reviews/${N}`,{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["my-reviews"]}),c({is_open:!1,review_id:null})},onError:N=>{var R,O;alert(((O=(R=N.response)==null?void 0:R.data)==null?void 0:O.message)||"Failed to delete review. Please try again.")}}),P=_.useCallback(N=>{i(R=>({...R,sort_by:N,sort_order:R.sort_by===N&&R.sort_order==="desc"?"asc":"desc"}))},[]),w=_.useCallback(N=>{i(R=>({...R,status_filter:N}))},[]),C=_.useCallback(N=>{if(!sd(N.review_date)){alert("Reviews can only be edited within 30 days of posting.");return}o({review_id:N.review_id,review_text:N.review_text||"",photos:N.photos||[],is_editing:!0,validation_errors:{}})},[]),f=_.useCallback(()=>{o({review_id:null,review_text:"",photos:[],is_editing:!1,validation_errors:{}})},[]),k=_.useCallback(()=>{const N={};if(l.review_text.trim().length<10&&(N.review_text="Review must be at least 10 characters long."),l.review_text.length>2e3&&(N.review_text="Review must not exceed 2000 characters."),Object.keys(N).length>0){o(R=>({...R,validation_errors:N}));return}l.review_id&&v.mutate({review_id:l.review_id,review_text:l.review_text,photos:l.photos})},[l,v]),y=_.useCallback(N=>{c({is_open:!0,review_id:N})},[]),F=_.useCallback(()=>{d.review_id&&j.mutate(d.review_id)},[d.review_id,j]),M=_.useCallback(()=>{c({is_open:!1,review_id:null})},[]),E=_.useCallback(async N=>{const R=N.target.files;if(!(!R||R.length===0)){m(!0);try{const O=Array.from(R).map(async g=>{const D=await G.post(`${sl}/uploads/request-url`,{file_type:g.type,file_size:g.size,upload_context:"review",entity_id:l.review_id},{headers:{Authorization:`Bearer ${s}`}}),{upload_url:S,cdn_url:$}=D.data;return await G.put(S,g,{headers:{"Content-Type":g.type}}),$}),T=await Promise.all(O);o(g=>({...g,photos:[...g.photos,...T]}))}catch(O){o(T=>{var g,D;return{...T,validation_errors:{photos:((D=(g=O.response)==null?void 0:g.data)==null?void 0:D.message)||"Failed to upload photos. Please try again."}}})}finally{m(!1)}}},[l.review_id,s]),B=_.useCallback(N=>{o(R=>({...R,photos:R.photos.filter(O=>O!==N)}))},[]),A=N=>e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(R=>e.jsx(Oe,{className:`w-5 h-5 ${R<=N?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200"}`},R))}),L=N=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[N.rating_product!==null&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 mb-1",children:"Product Quality"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[A(N.rating_product),e.jsxs("span",{className:"text-gray-700 font-medium",children:[N.rating_product,"/5"]})]})]}),N.rating_service!==null&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 mb-1",children:"Service"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[A(N.rating_service),e.jsxs("span",{className:"text-gray-700 font-medium",children:[N.rating_service,"/5"]})]})]}),N.rating_delivery!==null&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 mb-1",children:"Delivery"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[A(N.rating_delivery),e.jsxs("span",{className:"text-gray-700 font-medium",children:[N.rating_delivery,"/5"]})]})]})]});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"My Reviews"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Manage your product and supplier reviews. You can edit reviews within 30 days of posting."})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>P("review_date"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n.sort_by==="review_date"?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Date ",n.sort_by==="review_date"&&(n.sort_order==="desc"?"":"")]}),e.jsxs("button",{onClick:()=>P("rating_overall"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n.sort_by==="rating_overall"?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Rating ",n.sort_by==="rating_overall"&&(n.sort_order==="desc"?"":"")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:n.status_filter,onChange:N=>w(N.target.value),className:"px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-sm font-medium text-gray-700 transition-all",children:[e.jsx("option",{value:"all",children:"All Reviews"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),h&&e.jsxs("div",{className:"text-sm text-gray-600",children:[h.pagination.total_count," ",h.pagination.total_count===1?"review":"reviews"]})]})}),x&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your reviews..."})]}),p&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error Loading Reviews"}),e.jsx("p",{className:"text-red-700 mb-4",children:p instanceof Error?p.message:"An unexpected error occurred."}),e.jsx("button",{onClick:()=>b(),className:"bg-red-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Try Again"})]})]})}),!x&&!p&&h&&h.reviews.length===0&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Oe,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Reviews Yet"}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"You haven't written any reviews yet. After receiving your orders, you can share your experience to help other buyers make informed decisions."}),e.jsx(Q,{to:"/orders",className:"inline-block bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"View My Orders"})]})}),!x&&!p&&h&&h.reviews.length>0&&e.jsx("div",{className:"space-y-6",children:h.reviews.map(N=>e.jsx("article",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between mb-6 pb-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[N.product_id&&e.jsx(Q,{to:`/product/${N.product_id}`,className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://via.placeholder.com/80?text=Product",alt:"Product",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Review for Order #",N.order_id.slice(0,8)]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),Uh(N.review_date)]}),N.verified_purchase&&e.jsxs("span",{className:"flex items-center bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Verified Purchase"]}),e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${N.status==="published"?"bg-green-50 text-green-700":N.status==="pending"?"bg-amber-50 text-amber-700":"bg-red-50 text-red-700"}`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[A(N.rating_overall),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[N.rating_overall,"/5"]})]}),(N.rating_product!==null||N.rating_service!==null||N.rating_delivery!==null)&&e.jsx("div",{className:"mt-4",children:L(N)})]})]}),e.jsxs("div",{className:"flex md:flex-col space-x-2 md:space-x-0 md:space-y-2 mt-4 md:mt-0",children:[sd(N.review_date)&&e.jsxs("button",{onClick:()=>C(N),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium text-sm",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>y(N.review_id),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-all duration-200 font-medium text-sm",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]})]}),N.review_text&&e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.review_text})}),N.photos&&N.photos.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:N.photos.map((R,O)=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 hover:opacity-90 transition-opacity cursor-pointer",children:e.jsx("img",{src:R,alt:`Review photo ${O+1}`,className:"w-full h-full object-cover"})},O))})}),N.supplier_response&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"S"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Supplier Response"}),N.supplier_response_date&&e.jsx("span",{className:"text-xs text-gray-500",children:Uh(N.supplier_response_date)})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:N.supplier_response})]})]})}),e.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1 text-green-600"}),N.helpful_votes," ",N.helpful_votes===1?"person":"people"," found this helpful"]}),N.would_buy_again&&e.jsxs("span",{className:"flex items-center",children:["Would buy again:"," ",e.jsx("span",{className:`ml-1 font-medium ${N.would_buy_again==="yes"?"text-green-600":N.would_buy_again==="no"?"text-red-600":"text-amber-600"}`,children:N.would_buy_again==="yes"?"Yes":N.would_buy_again==="no"?"No":"Maybe"})]}),!sd(N.review_date)&&e.jsx("span",{className:"text-gray-400 italic",children:"Edit window expired (30 days)"})]})]})},N.review_id))}),l.is_editing&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit Review"}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(ge,{className:"w-6 h-6 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"review_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),e.jsx("textarea",{id:"review_text",value:l.review_text,onChange:N=>{o(R=>({...R,review_text:N.target.value,validation_errors:{...R.validation_errors,review_text:""}}))},rows:6,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none transition-all",placeholder:"Share your experience with this product..."}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[l.review_text.length," / 2000 characters"]}),l.validation_errors.review_text&&e.jsx("span",{className:"text-sm text-red-600",children:l.validation_errors.review_text})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos (Optional)"}),l.photos.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:l.photos.map((N,R)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100",children:[e.jsx("img",{src:N,alt:`Review photo ${R+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>B(N),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors shadow-lg","aria-label":"Remove photo",children:e.jsx(ge,{className:"w-4 h-4"})})]},R))}),l.photos.length<5&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"photo_upload",className:`flex items-center justify-center space-x-2 px-6 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 cursor-pointer ${u?"opacity-50 cursor-not-allowed":""}`,children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{className:"w-5 h-5 text-gray-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Add Photos (",l.photos.length,"/5)"]})]})}),e.jsx("input",{id:"photo_upload",type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,onChange:E,disabled:u,className:"hidden"})]}),l.validation_errors.photos&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:l.validation_errors.photos})]}),l.validation_errors.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-700",children:l.validation_errors.submit})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:f,disabled:v.isPending,className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:v.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"})]})]})}),d.is_open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Delete Review"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Are you sure you want to delete this review? This action cannot be undone."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your review helps other buyers make informed decisions. Consider editing instead of deleting."})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3 rounded-b-xl",children:[e.jsx("button",{onClick:M,disabled:j.isPending,className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:j.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Review"})]})]})})]})})})},V4=async(t,s)=>{const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{headers:{Authorization:`Bearer ${s}`}});return{order:{order_id:r.data.order.order_id,order_number:r.data.order.order_number,order_date:r.data.order.order_date,status:r.data.order.status,total_amount:r.data.order.total_amount},items:r.data.items.map(a=>({order_item_id:a.order_item_id,product_id:a.product_id,product_name:a.product_name,sku:a.sku,quantity:a.quantity,supplier_id:a.supplier_id}))}},K4=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/uploads/request-url",{file_type:t.type,file_size:t.size,upload_context:"issue"},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,H4=async(t,s)=>{await G.put(s,t,{headers:{"Content-Type":t.type}})},Y4=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/issues",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,G4=()=>{const t=ze(),[s]=Fe(),r=re(N=>N.authentication_state.auth_token),a=s.get("order_id"),[n,i]=_.useState({order_id:a||null,issue_type:"",affected_items:[],description:"",evidence_photos:[],desired_resolution:""}),[l,o]=_.useState({}),[d,c]=_.useState(!1),[u,m]=_.useState(null),[h,x]=_.useState([]),[p,b]=_.useState({}),[v,j]=_.useState([]),{data:P,isLoading:w}=ne({queryKey:["order-context",a],queryFn:()=>V4(a,r),enabled:!!a&&!!r,staleTime:5*60*1e3,retry:1});_.useEffect(()=>{P&&!n.order_id&&i(N=>({...N,order_id:P.order.order_id}))},[P,n.order_id]);const C=N=>{i(R=>({...R,issue_type:N})),o(R=>({...R,issue_type:void 0}))},f=N=>{i(R=>{const O=R.affected_items.includes(N);return{...R,affected_items:O?R.affected_items.filter(T=>T!==N):[...R.affected_items,N]}}),o(R=>({...R,affected_items:void 0}))},k=N=>{i(R=>({...R,description:N})),o(R=>({...R,description:void 0}))},y=N=>{i(R=>({...R,desired_resolution:N})),o(R=>({...R,desired_resolution:void 0}))},F=async N=>{const R=N.target.files;if(!R||R.length===0)return;j([]);const O=n.evidence_photos.length,T=R.length;if(O+T>10){j(["Maximum 10 photos allowed"]);return}try{const g=[];for(let D=0;D<R.length;D++){const S=R[D],$=S.name;if(!["image/jpeg","image/png","image/webp"].includes(S.type)){j(I=>[...I,`${$}: Invalid file type. Only JPG, PNG, WEBP allowed.`]);continue}if(S.size>5*1024*1024){j(I=>[...I,`${$}: File too large. Maximum 5MB.`]);continue}x(I=>[...I,$]),b(I=>({...I,[$]:0}));try{const I=await K4(S,r);b(K=>({...K,[$]:30})),await H4(S,I.upload_url),b(K=>({...K,[$]:100})),g.push(I.cdn_url)}catch(I){j(K=>[...K,`${$}: Upload failed`]),console.error(`Upload error for ${$}:`,I)}finally{x(I=>I.filter(K=>K!==$)),setTimeout(()=>{b(I=>{const K={...I};return delete K[$],K})},1e3)}}g.length>0&&i(D=>({...D,evidence_photos:[...D.evidence_photos,...g]}))}catch(g){j(D=>[...D,"Upload failed. Please try again."]),console.error("Photo upload error:",g)}},M=N=>{i(R=>({...R,evidence_photos:R.evidence_photos.filter(O=>O!==N)}))},E=()=>{const N={};return n.issue_type||(N.issue_type="Please select an issue type"),n.order_id?n.affected_items.length===0&&(N.affected_items="Please select at least one affected item"):N.affected_items="No order selected",(!n.description||n.description.trim().length<50)&&(N.description="Please provide at least 50 characters describing the issue"),n.description&&n.description.length>2e3&&(N.description="Description must be less than 2000 characters"),n.desired_resolution||(N.desired_resolution="Please select your desired resolution"),o(N),Object.keys(N).length===0},B=async N=>{var R,O;if(N.preventDefault(),m(null),!!E()){if(!n.order_id){m("No order selected. Please select an order to report an issue.");return}c(!0);try{const T={order_id:n.order_id,issue_type:n.issue_type,affected_items:n.affected_items,description:n.description,evidence_photos:n.evidence_photos,desired_resolution:n.desired_resolution},g=await Y4(T,r);t(`/issues/${g.issue_id}`)}catch(T){console.error("Issue submission error:",T),m(((O=(R=T.response)==null?void 0:R.data)==null?void 0:O.message)||"Failed to submit issue. Please try again.")}finally{c(!1)}}},A=[{value:"late_delivery",label:"Late Delivery",icon:""},{value:"wrong_item",label:"Wrong Item Delivered",icon:""},{value:"damaged_item",label:"Damaged Item",icon:""},{value:"missing_item",label:"Missing Item(s)",icon:""},{value:"quality_issue",label:"Quality Issue",icon:""},{value:"billing_issue",label:"Overcharged/Billing Issue",icon:""},{value:"delivery_not_attempted",label:"Delivery Not Attempted",icon:""},{value:"other",label:"Other",icon:""}],L=[{value:"full_refund",label:"Full Refund"},{value:"partial_refund",label:"Partial Refund"},{value:"replacement",label:"Replacement Item"},{value:"credit",label:"Credit for Future Purchase"},{value:"no_action",label:"Just Want to Report (No Action Needed)"}];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Report an Issue"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Help us resolve your concern by providing detailed information about the issue you experienced."})]}),w&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})}),P&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Order Context"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Order Number:"})," ",P.order.order_number]}),e.jsxs("p",{className:"text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Order Date:"})," ",new Date(P.order.order_date).toLocaleDateString()]}),e.jsxs("p",{className:"text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",P.order.status]}),e.jsxs("p",{className:"text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Total:"})," $",Number(P.order.total_amount).toFixed(2)]})]})]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[P.items.length," item",P.items.length!==1?"s":""]})]})}),e.jsxs("form",{onSubmit:B,className:"space-y-8",children:[u&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:u})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"What went wrong?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(N=>e.jsxs("button",{type:"button",onClick:()=>C(N.value),className:`
                      relative p-4 rounded-lg border-2 transition-all duration-200 text-left
                      ${n.issue_type===N.value?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:bg-blue-50"}
                    `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:N.icon}),e.jsx("span",{className:"font-medium text-gray-900",children:N.label})]}),n.issue_type===N.value&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},N.value))}),l.issue_type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.issue_type})]}),P&&P.items.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Which items are affected?"}),e.jsx("div",{className:"space-y-3",children:P.items.map(N=>e.jsxs("label",{className:`
                        flex items-start p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                        ${n.affected_items.includes(N.order_item_id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}
                      `,children:[e.jsx("input",{type:"checkbox",checked:n.affected_items.includes(N.order_item_id),onChange:()=>f(N.order_item_id),className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.product_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["SKU: ",N.sku]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Quantity: ",N.quantity]})]})]},N.order_item_id))}),l.affected_items&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.affected_items})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Tell us what happened"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Issue Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",rows:6,value:n.description,onChange:N=>k(N.target.value),placeholder:"Please describe what happened in detail. Include dates, times, and any relevant information that will help us understand the situation...",className:`
                    w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200
                    ${l.description?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}
                  `}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 50 characters, maximum 2000 characters"}),e.jsxs("p",{className:`text-xs font-medium ${n.description.length<50||n.description.length>2e3?"text-red-500":"text-gray-500"}`,children:[n.description.length," / 2000"]})]}),l.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Add Evidence Photos ",e.jsx("span",{className:"text-gray-500 text-sm font-normal",children:"(Optional but recommended)"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"photo-upload",className:`
                    flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-all duration-200
                    ${h.length>0?"border-blue-400 bg-blue-50 cursor-not-allowed":"border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50"}
                  `,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, or WEBP (Max 5MB per file, up to 10 files)"})]}),e.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/jpeg,image/png,image/webp",onChange:F,disabled:h.length>0,className:"hidden"})]}),h.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:h.map(N=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 truncate flex-1 mr-2",children:N}),e.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:[p[N]||0,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${p[N]||0}%`}})})]},N))}),v.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:v.map((N,R)=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:N})},R))}),n.evidence_photos.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-3",children:["Uploaded Photos (",n.evidence_photos.length,"/10)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.evidence_photos.map((N,R)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:N,alt:`Evidence ${R+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{type:"button",onClick:()=>M(N),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600","aria-label":"Remove photo",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},R))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"What would you like us to do?"}),e.jsx("div",{className:"space-y-3",children:L.map(N=>e.jsxs("label",{className:`
                      flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
                      ${n.desired_resolution===N.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}
                    `,children:[e.jsx("input",{type:"radio",name:"desired_resolution",value:N.value,checked:n.desired_resolution===N.value,onChange:R=>y(R.target.value),className:"h-5 w-5 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900",children:N.label})]},N.value))}),l.desired_resolution&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.desired_resolution})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{type:"submit",disabled:d||h.length>0,className:"flex-1 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting Issue..."]}):h.length>0?`Uploading ${h.length} photo${h.length!==1?"s":""}...`:"Submit Issue Report"}),e.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 border border-gray-300",children:"Cancel"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 text-center",children:"We'll review your issue and get back to you within 24-48 hours."})]})]})]})})})},Vo="https://123create-construction-app-with-a.launchpulse.ai",Q4=async(t,s)=>{const r=await G.get(`${Vo}/api/issues/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return{issue:r.data.issue,messages:r.data.messages||[]}},X4=async(t,s,r)=>(await G.post(`${Vo}/api/issues/${t}/messages`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,J4=async(t,s)=>(await G.post(`${Vo}/api/issues/${t}/accept-resolution`,{},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.issue,Z4=async(t,s)=>{await G.post(`${Vo}/api/issues/${t}/escalate`,{},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})},e5=t=>({open:"bg-orange-100 text-orange-800 border-orange-200",under_review:"bg-blue-100 text-blue-800 border-blue-200",awaiting_response:"bg-yellow-100 text-yellow-800 border-yellow-200",resolved:"bg-green-100 text-green-800 border-green-200",closed:"bg-gray-100 text-gray-800 border-gray-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",t5=t=>({late_delivery:"Late Delivery",wrong_item:"Wrong Item Delivered",damaged_item:"Damaged Item",missing_item:"Missing Item",quality_issue:"Quality Issue",billing_issue:"Billing Issue",delivery_not_attempted:"Delivery Not Attempted",other:"Other Issue"})[t]||t,zh=t=>({full_refund:"Full Refund",partial_refund:"Partial Refund",replacement:"Replacement Item",credit:"Store Credit",no_action:"No Action Needed"})[t]||t,Gd=t=>{const s=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(s)},s5=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/6e4),i=Math.floor(a/36e5),l=Math.floor(a/864e5);return n<1?"Just now":n<60?`${n}m ago`:i<24?`${i}h ago`:l<7?`${l}d ago`:Gd(t)},r5=()=>{const{issue_id:t}=ur(),s=Pe(),r=re(E=>E.authentication_state.auth_token),[a,n]=_.useState(""),[i,l]=_.useState([]),[o,d]=_.useState(!1),[c,u]=_.useState(null),{data:m,isLoading:h,error:x}=ne({queryKey:["issue",t],queryFn:()=>Q4(t,r),enabled:!!t&&!!r,staleTime:3e4,refetchOnWindowFocus:!0,retry:1}),p=oe({mutationFn:E=>X4(t,E,r),onSuccess:()=>{s.invalidateQueries({queryKey:["issue",t]}),n(""),l([])},onError:E=>{var B,A;alert(((A=(B=E.response)==null?void 0:B.data)==null?void 0:A.message)||"Failed to send message. Please try again.")}}),b=oe({mutationFn:()=>J4(t,r),onSuccess:()=>{s.invalidateQueries({queryKey:["issue",t]})},onError:E=>{var B,A;alert(((A=(B=E.response)==null?void 0:B.data)==null?void 0:A.message)||"Failed to accept resolution. Please try again.")}}),v=oe({mutationFn:()=>Z4(t,r),onSuccess:()=>{s.invalidateQueries({queryKey:["issue",t]})},onError:E=>{var B,A;alert(((A=(B=E.response)==null?void 0:B.data)==null?void 0:A.message)||"Failed to escalate issue. Please try again.")}}),j=E=>{E.preventDefault(),a.trim()&&p.mutate({message_text:a.trim(),attachments:i})},P=()=>{window.confirm("Are you sure you want to accept this resolution? This action cannot be undone.")&&b.mutate()},w=()=>{window.confirm("This will escalate your issue to BuildEasy admin support. Do you want to continue?")&&v.mutate()},C=E=>{u(E),d(!0)},f=(m==null?void 0:m.issue)||null,k=(m==null?void 0:m.messages)||[],y=!!(f!=null&&f.resolution_offered),F=(f==null?void 0:f.status)==="open"&&!(f!=null&&f.escalated_to_admin),M=(f==null?void 0:f.status)==="resolved"||(f==null?void 0:f.status)==="closed";return h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsx("div",{className:"h-32 bg-gray-200 rounded"})})]})})})}):x?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx(de,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Issue Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find this issue or you don't have permission to view it."}),e.jsxs(Q,{to:"/orders",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ir,{className:"mr-2 h-5 w-5"}),"Back to Orders"]})]})})})}):f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(Q,{to:"/orders",className:"inline-flex items-center text-gray-600 hover:text-gray-900 font-medium transition-colors",children:[e.jsx(ir,{className:"mr-2 h-5 w-5"}),"Back to Orders"]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Issue #",f.issue_id.slice(-8).toUpperCase()]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${e5(f.status)}`,children:f.status.replace("_"," ").toUpperCase()}),f.escalated_to_admin&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200",children:"ESCALATED TO ADMIN"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"mr-2 h-4 w-4"}),"Opened ",Gd(f.opened_date)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsxs(Q,{to:`/orders/${f.order_id}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:["Order #",f.order_id.slice(-8).toUpperCase()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),t5(f.issue_type)]})]})]})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Issue Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-900 leading-relaxed",children:f.description})]}),f.affected_items&&f.affected_items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Affected Items"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.affected_items.map((E,B)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-md border border-gray-200",children:E},B))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Desired Resolution"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-blue-50 text-blue-700 text-sm font-medium rounded-md border border-blue-200",children:zh(f.desired_resolution)})]}),f.evidence_photos&&f.evidence_photos.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Evidence Photos"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:f.evidence_photos.map((E,B)=>e.jsxs("button",{onClick:()=>C(E),className:"relative aspect-square rounded-lg overflow-hidden border-2 border-gray-200 hover:border-blue-500 transition-all group",children:[e.jsx("img",{src:E,alt:`Evidence ${B+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity flex items-center justify-center",children:e.jsx(Zn,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]},B))})]})]})]}),y&&f.resolution_offered&&!M&&e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg border-2 border-green-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(he,{className:"h-6 w-6 text-green-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Resolution Offered"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[f.assigned_admin_id?"BuildEasy Admin":"Supplier"," has offered a resolution for your issue:"]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Resolution Type"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:zh(f.resolution_offered)})]}),f.resolution_amount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Amount"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",Number(f.resolution_amount||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:P,disabled:b.isPending,className:"flex-1 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Accepting..."]}):"Accept Resolution"}),e.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-white text-gray-700 font-medium rounded-lg border-2 border-gray-300 hover:bg-gray-50 transition-colors",children:"Decline & Continue Discussion"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Communication Thread"}),e.jsx("div",{className:"space-y-4 mb-6",children:k.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(zt,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),e.jsx("p",{children:"No messages yet. Start the conversation below."})]}):k.map(E=>{const B=E.sender_type==="customer",A=E.sender_type==="system";return e.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xl ${B?"ml-12":"mr-12"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 ${B?"justify-end":"justify-start"}`,children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:[B&&"You",E.sender_type==="supplier"&&"Supplier",E.sender_type==="admin"&&"BuildEasy Admin",A&&"System"]}),e.jsx("span",{className:"text-xs text-gray-400",children:""}),e.jsx("span",{className:"text-xs text-gray-400",children:s5(E.timestamp)})]}),e.jsxs("div",{className:`rounded-lg px-4 py-3 ${B?"bg-blue-600 text-white":A?"bg-gray-100 text-gray-700 border border-gray-200":"bg-white text-gray-900 border border-gray-200 shadow-sm"}`,children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:E.message_text}),E.attachments&&E.attachments.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/30 space-y-1",children:E.attachments.map((L,N)=>e.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:`flex items-center text-xs ${B?"text-blue-100 hover:text-white":"text-blue-600 hover:text-blue-700"}`,children:[e.jsx($a,{className:"mr-1 h-3 w-3"}),"Attachment ",N+1]},N))})]})]})},E.message_id)})}),!M&&e.jsxs("form",{onSubmit:j,className:"border-t border-gray-200 pt-6",children:[e.jsx("label",{htmlFor:"message_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Add a Message"}),e.jsx("textarea",{id:"message_text",value:a,onChange:E=>n(E.target.value),placeholder:"Type your message here...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none",disabled:p.isPending}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx($a,{className:"mr-2 h-4 w-4"}),"Attach Files"]}),i.length>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[i.length," file(s) attached"]})]}),e.jsx("button",{type:"submit",disabled:!a.trim()||p.isPending,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(km,{className:"mr-2 h-4 w-4"}),"Send Message"]})})]})]}),M&&e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx(he,{className:"mx-auto h-8 w-8 text-green-600 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"This issue has been resolved"}),f.resolved_date&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Resolved on ",Gd(f.resolved_date)]})]})})]}),F&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(hw,{className:"h-5 w-5 text-amber-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Need Additional Help?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If the supplier's response is not satisfactory, you can escalate this issue to BuildEasy admin support for review."}),e.jsx("button",{onClick:w,disabled:v.isPending,className:"inline-flex items-center px-4 py-2 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Escalating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(At,{className:"mr-2 h-4 w-4"}),"Escalate to Admin Support"]})})]})]})})]})}),o&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors",children:e.jsx(ge,{className:"h-8 w-8"})}),e.jsx("img",{src:c,alt:"Evidence",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:E=>E.stopPropagation()})]})})]}):null},a5=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/orders",{headers:{Authorization:`Bearer ${t}`},params:{limit:10,sort_by:"order_date",sort_order:"desc"}})).data.orders||[],n5=async(t,s,r)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/support/tickets",{user_id:s,order_id:t.order_id,issue_category:t.issue_category,subject:t.subject,message:t.message,attachments:t.attachments,priority:t.priority},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,i5=()=>{const t=re(k=>k.authentication_state.current_user),s=re(k=>k.authentication_state.auth_token),[r,a]=_.useState({issue_category:"",subject:"",message:"",order_id:null,attachments:[],priority:"normal"}),[n,i]=_.useState({issue_category:null,subject:null,message:null}),[l,o]=_.useState({is_submitting:!1,submission_success:!1,ticket_id:null,error_message:null}),[d,c]=_.useState([]),[u,m]=_.useState({}),[h,x]=_.useState(!1),{data:p=[],isLoading:b}=ne({queryKey:["userOrders",t==null?void 0:t.user_id],queryFn:()=>a5(s||""),enabled:!!s&&!!(t!=null&&t.user_id),staleTime:5*60*1e3}),v=k=>{i(y=>({...y,[k]:null}))},j=()=>{const k={issue_category:null,subject:null,message:null};let y=!0;return r.issue_category||(k.issue_category="Please select an issue category",y=!1),r.subject.trim()?r.subject.length>255&&(k.subject="Subject must be less than 255 characters",y=!1):(k.subject="Subject is required",y=!1),r.message.trim()?r.message.trim().length<50?(k.message="Message must be at least 50 characters",y=!1):r.message.length>5e3&&(k.message="Message must be less than 5000 characters",y=!1):(k.message="Message is required",y=!1),i(k),y},P=async k=>{const y=Array.from(k.target.files||[]);if(r.attachments.length+y.length>5){alert("Maximum 5 attachments allowed");return}const F=[];for(const M of y){if(M.size>5*1024*1024){alert(`${M.name} exceeds 5MB limit`);continue}if(!["image/jpeg","image/png","application/pdf"].includes(M.type)){alert(`${M.name} has invalid type. Only JPG, PNG, and PDF allowed`);continue}F.push(M)}if(F.length!==0){x(!0),c(F);try{const M=[];for(const E of F){m(A=>({...A,[E.name]:0})),await new Promise(A=>setTimeout(A,1e3));const B=`https://cdn.buildeasy.com/support/${Date.now()}_${E.name}`;M.push(B),m(A=>({...A,[E.name]:100}))}a(E=>({...E,attachments:[...E.attachments,...M]})),c([]),m({})}catch(M){console.error("Upload error:",M),alert("Failed to upload files. Please try again.")}finally{x(!1)}}},w=k=>{a(y=>({...y,attachments:y.attachments.filter((F,M)=>M!==k)}))},C=async k=>{var y,F;if(k.preventDefault(),!!j()){if(!(t!=null&&t.user_id)||!s){o(M=>({...M,error_message:"Authentication required. Please log in again."}));return}o({is_submitting:!0,submission_success:!1,ticket_id:null,error_message:null});try{const M=await n5(r,t.user_id,s);o({is_submitting:!1,submission_success:!0,ticket_id:M.ticket_id,error_message:null}),a({issue_category:"",subject:"",message:"",order_id:null,attachments:[],priority:"normal"})}catch(M){console.error("Ticket submission error:",M);const E=((F=(y=M.response)==null?void 0:y.data)==null?void 0:F.message)||M.message||"Failed to submit support ticket. Please try again.";o({is_submitting:!1,submission_success:!1,ticket_id:null,error_message:E})}}},f=()=>{a({issue_category:"",subject:"",message:"",order_id:null,attachments:[],priority:"normal"}),i({issue_category:null,subject:null,message:null}),o({is_submitting:!1,submission_success:!1,ticket_id:null,error_message:null})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(Q,{to:"/dashboard",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})}),l.submission_success&&l.ticket_id&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(he,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Support Ticket Created! "}),e.jsxs("p",{className:"text-lg text-gray-600 mb-6",children:["Your support ticket ",e.jsxs("span",{className:"font-semibold text-blue-600",children:["#",l.ticket_id]})," has been created successfully."]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"What happens next?"}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"You'll receive a confirmation email within a few minutes"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"Our support team will review your ticket (within 24 hours)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"You'll receive updates via email and in-app notifications"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(Q,{to:"/support/tickets",className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),"View My Tickets"]}),e.jsx("button",{onClick:f,className:"inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-medium rounded-lg border-2 border-gray-200 hover:bg-gray-50 transition-colors",children:"Submit Another Ticket"})]})]})}),!l.submission_success&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-blue-100",children:"We're here to help. Fill out the form below and we'll get back to you within 24 hours."})]}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3 font-medium",children:"Need immediate assistance?"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("a",{href:"tel:1-800-BUILD-EZ",className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"1-800-BUILD-EZ"]}),e.jsxs("a",{href:"mailto:support@buildeasy.com",className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"support@buildeasy.com"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Live Chat"]})]})]})]}),l.error_message&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6",role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"Error Submitting Ticket"}),e.jsx("p",{className:"text-sm text-red-700",children:l.error_message})]}),e.jsx("button",{onClick:()=>o(k=>({...k,error_message:null})),className:"text-red-600 hover:text-red-700",children:e.jsx(ge,{className:"w-5 h-5"})})]})}),e.jsx("form",{onSubmit:C,className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"issue_category",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Issue Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"issue_category",value:r.issue_category,onChange:k=>{a(y=>({...y,issue_category:k.target.value})),v("issue_category")},className:`w-full px-4 py-3 rounded-lg border-2 ${n.issue_category?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 focus:outline-none transition-all`,children:[e.jsx("option",{value:"",children:"Select an issue category"}),e.jsx("option",{value:"delivery",children:"Delivery Issue"}),e.jsx("option",{value:"product_quality",children:"Product Quality"}),e.jsx("option",{value:"payment",children:"Payment or Billing"}),e.jsx("option",{value:"account",children:"Account Issue"}),e.jsx("option",{value:"technical",children:"Technical Problem"}),e.jsx("option",{value:"other",children:"Other"})]}),n.issue_category&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",role:"alert",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),n.issue_category]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"order_id",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Related Order (Optional)"}),b?e.jsxs("div",{className:"flex items-center text-gray-500 text-sm py-3",children:[e.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading your orders..."]}):p.length>0?e.jsxs("select",{id:"order_id",value:r.order_id||"",onChange:k=>a(y=>({...y,order_id:k.target.value||null})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-all",children:[e.jsx("option",{value:"",children:"Not related to a specific order"}),p.map(k=>e.jsxs("option",{value:k.order_id,children:[k.order_number," - ",new Date(k.order_date).toLocaleDateString()," - $",Number(k.total_amount).toFixed(2)]},k.order_id))]}):e.jsx("p",{className:"text-sm text-gray-500 py-3",children:"No recent orders found"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"If your issue relates to a specific order, select it here for faster resolution"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Subject ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{id:"subject",type:"text",value:r.subject,onChange:k=>{a(y=>({...y,subject:k.target.value})),v("subject")},placeholder:"Brief summary of your issue",maxLength:255,className:`w-full px-4 py-3 rounded-lg border-2 ${n.subject?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 focus:outline-none transition-all`}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.subject?e.jsxs("p",{className:"text-sm text-red-600 flex items-center",role:"alert",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),n.subject]}):e.jsx("p",{className:"text-xs text-gray-500",children:'Example: "Damaged product in Order #12345"'}),e.jsxs("span",{className:"text-xs text-gray-400",children:[r.subject.length,"/255"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Detailed Description ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{id:"message",value:r.message,onChange:k=>{a(y=>({...y,message:k.target.value})),v("message")},placeholder:"Please describe your issue in detail. Include relevant information like dates, product names, or error messages.",rows:8,maxLength:5e3,className:`w-full px-4 py-3 rounded-lg border-2 ${n.message?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 focus:outline-none transition-all resize-none leading-relaxed`}),e.jsxs("div",{className:"mt-2 flex justify-between items-start",children:[e.jsx("div",{className:"flex-1",children:n.message?e.jsxs("p",{className:"text-sm text-red-600 flex items-center",role:"alert",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),n.message]}):e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 50 characters. Be as detailed as possible to help us assist you better."})}),e.jsxs("span",{className:`text-xs ml-4 flex-shrink-0 ${r.message.trim().length<50?"text-red-500":r.message.length>4500?"text-amber-500":"text-gray-400"}`,children:[r.message.length,"/5000"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Attachments (Optional)"}),r.attachments.length<5&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"file_upload",className:`flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-lg cursor-pointer transition-all ${h?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-blue-300 bg-blue-50 hover:bg-blue-100 hover:border-blue-400"}`,children:[e.jsx(os,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:h?"Uploading...":"Upload Files (JPG, PNG, PDF)"})]}),e.jsx("input",{id:"file_upload",type:"file",multiple:!0,accept:"image/jpeg,image/png,application/pdf",onChange:P,disabled:h,className:"hidden"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum 5 files, 5MB each. Supported: JPG, PNG, PDF"})]}),d.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:d.map(k=>e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate flex-1",children:k.name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[(k.size/1024).toFixed(0),"KB"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u[k.name]||0}%`}})})]},k.name))}),r.attachments.length>0&&e.jsx("div",{className:"space-y-2",children:r.attachments.map((k,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-green-50 rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-700 truncate",children:["Attachment ",y+1]})]}),e.jsx("button",{type:"button",onClick:()=>w(y),className:"ml-3 text-red-600 hover:text-red-700 transition-colors flex-shrink-0",children:e.jsx(ge,{className:"w-5 h-5"})})]},y))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Priority Level"}),e.jsxs("select",{id:"priority",value:r.priority,onChange:k=>a(y=>({...y,priority:k.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-all",children:[e.jsx("option",{value:"low",children:"Low - General inquiry"}),e.jsx("option",{value:"normal",children:"Normal - Standard support"}),e.jsx("option",{value:"high",children:"High - Urgent issue"}),e.jsx("option",{value:"urgent",children:"Urgent - Critical problem"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"High and Urgent priorities receive faster response times"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:l.is_submitting||h,className:"flex-1 inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:l.is_submitting?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-5 h-5 mr-2 animate-spin"}),"Submitting Ticket..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),"Submit Support Ticket"]})}),e.jsx("button",{type:"button",onClick:f,disabled:l.is_submitting,className:"sm:w-auto px-8 py-4 bg-white text-gray-700 font-medium rounded-lg border-2 border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Clear Form"})]})]})}),e.jsx("div",{className:"mt-8 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Before submitting a ticket"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["You might find answers faster in our"," ",e.jsx(Q,{to:"/help",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Knowledge Base"}),". Common topics include:"]}),e.jsxs("ul",{className:"space-y-2 ml-6",children:[e.jsx("li",{className:"text-gray-700",children:e.jsx(Q,{to:"/help/article/tracking-orders",className:"text-blue-600 hover:text-blue-700",children:" How to track your order"})}),e.jsx("li",{className:"text-gray-700",children:e.jsx(Q,{to:"/help/article/returns",className:"text-blue-600 hover:text-blue-700",children:" Return and refund policies"})}),e.jsx("li",{className:"text-gray-700",children:e.jsx(Q,{to:"/help/article/payment",className:"text-blue-600 hover:text-blue-700",children:" Payment methods and issues"})}),e.jsx("li",{className:"text-gray-700",children:e.jsx(Q,{to:"/help/article/account",className:"text-blue-600 hover:text-blue-700",children:" Managing your account"})})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Tip:"})," For order-specific issues, you can also report directly from the"," ",e.jsx(Q,{to:"/orders",className:"underline font-medium",children:"order details page"}),"."]})})]})})]})]})})})},l5=(t,s)=>{if(!s||s<=t)return null;const r=s-t,a=(r/s*100).toFixed(0);return{amount:r,percent:a}},o5=t=>{const s={new:"bg-green-100 text-green-800 border-green-200",like_new:"bg-blue-100 text-blue-800 border-blue-200",used:"bg-gray-100 text-gray-800 border-gray-200",refurbished:"bg-purple-100 text-purple-800 border-purple-200"};return s[t]||s.used},rd=t=>({new:"New",like_new:"Like New",used:"Used",refurbished:"Refurbished"})[t]||t,rl=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),c5=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/(1e3*60*60*24));return n===0?"Today":n===1?"Yesterday":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d5=()=>{var I;const t=ze(),[s]=Fe(),r=re(K=>K.authentication_state.auth_token),a=re(K=>{var U;return(U=K.authentication_state.customer_profile)==null?void 0:U.customer_id}),[n,i]=_.useState({search_query:null,category_id:null,condition:null,price_min:null,price_max:null,location_distance:null,shipping_available:null}),[l,o]=_.useState({sort_by:"created_date",sort_order:"desc"}),[d,c]=_.useState(1),[u,m]=_.useState(""),[h,x]=_.useState(!1),[p,b]=_.useState({latitude:null,longitude:null,address:null}),v=24,j="https://123create-construction-app-with-a.launchpulse.ai";_.useEffect(()=>{const K=s.get("search_query"),U=s.get("category"),q=s.get("condition"),z=s.get("price_min"),Y=s.get("price_max"),se=s.get("location_distance"),J=s.get("shipping_available"),te=s.get("sort_by"),V=s.get("page");if(i({search_query:K||null,category_id:U||null,condition:q||null,price_min:z?parseFloat(z):null,price_max:Y?parseFloat(Y):null,location_distance:se?parseFloat(se):null,shipping_available:J==="true"?!0:J==="false"?!1:null}),K&&m(K),(te==="asking_price"||te==="views_count"||te==="created_date")&&o(W=>({...W,sort_by:te})),V){const W=parseInt(V);W>0&&c(W)}},[s]);const{data:P}=ne({queryKey:["categories","surplus"],queryFn:async()=>(await G.get(`${j}/categories`,{params:{is_active:!0},headers:r?{Authorization:`Bearer ${r}`}:{}})).data,staleTime:5*60*1e3,select:K=>K.map(U=>({category_id:U.category_id,category_name:U.category_name,parent_category_id:U.parent_category_id}))}),{data:w}=ne({queryKey:["customer-profile",a],queryFn:async()=>(await G.get(`${j}/customers/me`,{headers:{Authorization:`Bearer ${r}`}})).data,enabled:!!r&&!!a&&n.location_distance!==null,staleTime:10*60*1e3,select:K=>{var q;const U=(q=K.addresses)==null?void 0:q.find(z=>z.is_default);return U?{latitude:U.latitude,longitude:U.longitude,address:`${U.city}, ${U.state}`}:null}});_.useEffect(()=>{w&&b(w)},[w]);const{data:C,isLoading:f,error:k,refetch:y}=ne({queryKey:["surplus-listings",n,l,d],queryFn:async()=>{const K={status:"active",limit:v,offset:(d-1)*v,sort_by:l.sort_by,sort_order:l.sort_order};return n.search_query&&(K.query=n.search_query),n.category_id&&(K.category_id=n.category_id),n.condition&&(K.condition=n.condition),n.price_min!==null&&(K.price_min=n.price_min),n.price_max!==null&&(K.price_max=n.price_max),n.location_distance!==null&&(K.location_distance=n.location_distance),n.shipping_available!==null&&(K.shipping_available=n.shipping_available),(await G.get(`${j}/surplus`,{params:K,headers:{Authorization:`Bearer ${r}`}})).data},staleTime:6e4,refetchOnWindowFocus:!1,retry:1,select:K=>({listings:K.listings.map(U=>({...U,asking_price:Number(U.asking_price||0),original_price:U.original_price?Number(U.original_price):null,shipping_rate:U.shipping_rate?Number(U.shipping_rate):null,photos:U.photos||[]})),total:K.total||0})}),F=(C==null?void 0:C.listings)||[],M=(C==null?void 0:C.total)||0,E=Math.ceil(M/v),B=(K,U=1)=>{const q=new URLSearchParams,z={...n,...K};z.search_query&&q.set("search_query",z.search_query),z.category_id&&q.set("category",z.category_id),z.condition&&q.set("condition",z.condition),z.price_min!==null&&q.set("price_min",z.price_min.toString()),z.price_max!==null&&q.set("price_max",z.price_max.toString()),z.location_distance!==null&&q.set("location_distance",z.location_distance.toString()),z.shipping_available!==null&&q.set("shipping_available",z.shipping_available.toString()),l.sort_by!=="created_date"&&q.set("sort_by",l.sort_by),U>1&&q.set("page",U.toString()),t(`?${q.toString()}`,{replace:!0})},A=(K,U)=>{const q={...n,[K]:U};i(q),c(1),B(q,1)},L=K=>{K.preventDefault(),A("search_query",u||null)},N=()=>{i({search_query:null,category_id:null,condition:null,price_min:null,price_max:null,location_distance:null,shipping_available:null}),m(""),c(1),t("/surplus",{replace:!0})},R=K=>{const U={sort_by:K,sort_order:l.sort_by===K&&l.sort_order==="asc"?"desc":"asc"};o(U),c(1),B(n,1)},O=K=>{c(K),B(n,K),window.scrollTo({top:0,behavior:"smooth"})},T=_.useMemo(()=>{let K=0;return n.search_query&&K++,n.category_id&&K++,n.condition&&K++,(n.price_min!==null||n.price_max!==null)&&K++,n.location_distance!==null&&K++,n.shipping_available!==null&&K++,K},[n]),g=K=>e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${o5(K)}`,children:rd(K)}),D=K=>{const U=l5(K.asking_price,K.original_price);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:rl(K.asking_price)}),K.price_type==="negotiable"&&e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Negotiable"})]}),U&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 line-through",children:rl(K.original_price)}),e.jsxs("span",{className:"inline-flex items-center text-xs font-semibold text-green-700 bg-green-50 px-2 py-0.5 rounded",children:[e.jsx(Jn,{className:"w-3 h-3 mr-1"}),"Save ",rl(U.amount)," (",U.percent,"%)"]})]})]})},S=K=>{const U=K.photos&&K.photos.length>0?K.photos[0]:"https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=400";return e.jsxs(Q,{to:`/surplus/${K.listing_id}`,className:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-200 overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[e.jsx("img",{src:U,alt:K.product_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),e.jsx("div",{className:"absolute top-3 right-3",children:g(K.condition)}),K.photos&&K.photos.length>1&&e.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/60 text-white px-2 py-1 rounded text-xs font-medium",children:[K.photos.length," photos"]})]}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg line-clamp-2 group-hover:text-blue-600 transition-colors",children:K.product_name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:K.description}),D(K),e.jsxs("div",{className:"pt-3 border-t border-gray-100 space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Dt,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate",children:K.pickup_location||"Location not specified"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[K.shipping_available?e.jsxs("span",{className:"flex items-center text-green-700 font-medium",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Shipping available",K.shipping_rate&&K.shipping_rate>0&&e.jsxs("span",{className:"ml-1 text-gray-600",children:["(",rl(K.shipping_rate),")"]})]}):e.jsx("span",{className:"text-gray-600",children:"Pickup only"}),e.jsxs("span",{className:"text-gray-500",children:["Qty: ",K.quantity]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Posted ",c5(K.created_date)]})]})]})]},K.listing_id)},$=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Category"}),e.jsxs("select",{value:n.category_id||"",onChange:K=>A("category_id",K.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Categories"}),P==null?void 0:P.map(K=>e.jsx("option",{value:K.category_id,children:K.category_name},K.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Condition"}),e.jsxs("div",{className:"space-y-2",children:[["new","like_new","used","refurbished"].map(K=>e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"condition",value:K,checked:n.condition===K,onChange:U=>A("condition",U.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:rd(K)})]},K)),n.condition&&e.jsx("button",{onClick:()=>A("condition",null),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear condition"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Price Range"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:n.price_min||"",onChange:K=>A("price_min",K.target.value?parseFloat(K.target.value):null),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",min:"0"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:n.price_max||"",onChange:K=>A("price_max",K.target.value?parseFloat(K.target.value):null),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",min:"0"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Distance from you"}),p.address?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 flex items-center",children:[e.jsx(Dt,{className:"w-3 h-3 mr-1"}),p.address]}),e.jsx("input",{type:"range",min:"5",max:"100",step:"5",value:n.location_distance||50,onChange:K=>A("location_distance",parseFloat(K.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"5 mi"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[n.location_distance||50," miles"]}),e.jsx("span",{children:"100 mi"})]}),n.location_distance!==null&&e.jsx("button",{onClick:()=>A("location_distance",null),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Remove distance filter"})]}):e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{children:"Add a delivery address to filter by distance"}),e.jsx(Q,{to:"/account#addresses",className:"text-blue-600 hover:text-blue-700 font-medium mt-2 inline-block",children:"Add address "})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Delivery Options"}),e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:n.shipping_available===!0,onChange:K=>A("shipping_available",K.target.checked?!0:null),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700 group-hover:text-gray-900",children:"Shipping available only"})]})]}),T>0&&e.jsxs("button",{onClick:N,className:"w-full py-2 px-4 border-2 border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:["Clear all filters (",T,")"]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[e.jsx(Q,{to:"/",className:"hover:text-blue-600 transition-colors",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"Surplus Marketplace"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Surplus Materials Marketplace"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Buy and sell unused construction materials from fellow contractors"})]}),e.jsx(Q,{to:"/surplus/create",className:"inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"+ List Your Materials"})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("form",{onSubmit:L,className:"relative",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search surplus materials...",value:u,onChange:K=>m(K.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-base"})]}),e.jsx("button",{type:"submit",className:"ml-3 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Search"}),e.jsxs("button",{type:"button",onClick:()=>x(!0),className:"ml-3 lg:hidden px-4 py-4 bg-white border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors relative",children:[e.jsx(rb,{className:"w-5 h-5 text-gray-700"}),T>0&&e.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-600 text-white text-xs font-bold rounded-full flex items-center justify-center",children:T})]})]})})}),T>0&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active filters:"}),n.search_query&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:['Search: "',n.search_query,'"',e.jsx("button",{onClick:()=>{m(""),A("search_query",null)},className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),n.category_id&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:["Category: ",(I=P==null?void 0:P.find(K=>K.category_id===n.category_id))==null?void 0:I.category_name,e.jsx("button",{onClick:()=>A("category_id",null),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),n.condition&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:["Condition: ",rd(n.condition),e.jsx("button",{onClick:()=>A("condition",null),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),(n.price_min!==null||n.price_max!==null)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:["Price: $",n.price_min||0," - $",n.price_max||"",e.jsx("button",{onClick:()=>{A("price_min",null),A("price_max",null)},className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),n.shipping_available&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 border border-blue-200",children:["Shipping available",e.jsx("button",{onClick:()=>A("shipping_available",null),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:N,className:"text-sm text-blue-600 hover:text-blue-700 font-medium underline",children:"Clear all"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"hidden lg:block w-72 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Filters"}),T>0&&e.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[T," active"]})]}),$()]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-3 sm:space-y-0",children:[e.jsx("div",{children:f?e.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse"}):e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:M})," ",M===1?"listing":"listings"," found"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:l.sort_by,onChange:K=>R(K.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 bg-white text-sm font-medium",children:[e.jsx("option",{value:"created_date",children:"Newest First"}),e.jsx("option",{value:"asking_price",children:"Price: Low to High"}),e.jsx("option",{value:"views_count",children:"Most Viewed"})]})]})]}),f&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[...Array(6)].map((K,U)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"aspect-square bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/2"})]})]},U))}),k&&!f&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load listings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(k==null?void 0:k.message)||"Something went wrong. Please try again."}),e.jsx("button",{onClick:()=>y(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"})]}),!f&&!k&&F.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(ve,{className:"w-16 h-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No listings found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:T>0?"Try adjusting your filters to see more results":"Be the first to list surplus materials!"}),T>0?e.jsx("button",{onClick:N,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Clear all filters"}):e.jsx(Q,{to:"/surplus/create",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"+ Create Listing"})]}),!f&&!k&&F.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:F.map(K=>S(K))}),E>1&&e.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>O(d-1),disabled:d===1,className:"px-4 py-2 border-2 border-gray-200 rounded-lg font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(Math.min(E,5))].map((K,U)=>{let q;return E<=5||d<=3?q=U+1:d>=E-2?q=E-4+U:q=d-2+U,e.jsx("button",{onClick:()=>O(q),className:`w-10 h-10 rounded-lg font-medium transition-colors ${d===q?"bg-blue-600 text-white":"border-2 border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:q},q)})}),e.jsx("button",{onClick:()=>O(d+1),disabled:d===E,className:"px-4 py-2 border-2 border-gray-200 rounded-lg font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>x(!1)}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-sm bg-white shadow-2xl overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5 text-gray-600"})})]}),$(),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>x(!1),className:"w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:["Show Results (",M,")"]})})]})})]})]})})},u5=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Surplus Listing Details"}),e.jsx("p",{className:"text-gray-600",children:"This page is under construction."})]})}),m5=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:!0},headers:t?{Authorization:`Bearer ${t}`}:void 0})).data,x5=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/surplus",t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,h5=()=>{var A;const t=ze(),s=re(L=>{var N;return(N=L.authentication_state.customer_profile)==null?void 0:N.customer_id}),r=re(L=>L.authentication_state.auth_token),[a,n]=_.useState(1),[i,l]=_.useState(!1),[o,d]=_.useState([]),[c,u]=_.useState([]),[m,h]=_.useState({product_name:"",category_id:"",description:"",condition:"used",photos:[],asking_price:0,original_price:0,price_type:"fixed",quantity:1,pickup_location:"",pickup_instructions:"",shipping_available:!1,shipping_rate:0,reason_for_selling:""}),[x,p]=_.useState({}),{data:b=[],isLoading:v}=ne({queryKey:["categories","active"],queryFn:()=>m5(r),staleTime:10*60*1e3}),j=oe({mutationFn:L=>x5(L,r||""),onSuccess:L=>{t("/surplus/my-listings",{state:{message:"Listing created successfully!",listingId:L.listing_id}})},onError:L=>{var R,O;const N=((O=(R=L.response)==null?void 0:R.data)==null?void 0:O.message)||"Failed to create listing. Please try again.";p({submit:N}),window.scrollTo({top:0,behavior:"smooth"})}}),P=L=>{const N=Array.from(L.target.files||[]);if(o.length+N.length>10){p({photos:"Maximum 10 photos allowed"});return}const R=N.filter(g=>{const D=["image/jpeg","image/png","image/jpg"].includes(g.type),S=g.size<=5*1024*1024;return D?S?!0:(p({photos:"Each photo must be less than 5MB"}),!1):(p({photos:"Only JPG and PNG files are allowed"}),!1)}),O=[...o,...R],T=[...c];R.forEach(g=>{const D=new FileReader;D.onloadend=()=>{T.push(D.result),u([...T])},D.readAsDataURL(g)}),d(O),p(g=>({...g,photos:""}))},w=L=>{const N=o.filter((O,T)=>T!==L),R=c.filter((O,T)=>T!==L);d(N),u(R),h(O=>({...O,photos:R}))},C=(L,N)=>{h(R=>({...R,[L]:N})),x[L]&&p(R=>({...R,[L]:""}))},f=L=>{const N={};return L===1&&(m.product_name.trim()||(N.product_name="Product name is required"),m.category_id||(N.category_id="Please select a category"),m.description.trim()?m.description.length<100?N.description="Description must be at least 100 characters":m.description.length>5e3&&(N.description="Description must not exceed 5000 characters"):N.description="Description is required"),L===2&&c.length===0&&(N.photos="Please upload at least one photo"),L===3&&((!m.asking_price||m.asking_price<=0)&&(N.asking_price="Please enter a valid asking price"),m.original_price&&m.original_price<m.asking_price&&(N.original_price="Original price should be higher than asking price")),L===4&&((!m.quantity||m.quantity<1)&&(N.quantity="Quantity must be at least 1"),!m.pickup_location.trim()&&!m.shipping_available&&(N.pickup_location="Please provide pickup location or enable shipping"),m.shipping_available&&(!m.shipping_rate||m.shipping_rate<=0)&&(N.shipping_rate="Please enter a valid shipping rate")),p(N),Object.keys(N).length===0},k=()=>{f(a)&&(n(L=>Math.min(L+1,4)),window.scrollTo({top:0,behavior:"smooth"}))},y=()=>{n(L=>Math.max(L-1,1)),window.scrollTo({top:0,behavior:"smooth"})},F=async()=>{if(!f(4))return;for(let N=1;N<=4;N++)if(!f(N)){n(N);return}const L={seller_id:s||"",product_name:m.product_name,category_id:m.category_id,description:m.description,condition:m.condition,photos:c,asking_price:m.asking_price,original_price:m.original_price||null,price_type:m.price_type,quantity:m.quantity,pickup_location:m.pickup_location||null,pickup_instructions:m.pickup_instructions||null,shipping_available:m.shipping_available,shipping_rate:m.shipping_available?m.shipping_rate:null,reason_for_selling:m.reason_for_selling||null};j.mutate(L)},M=()=>{f(a)&&(l(!0),window.scrollTo({top:0,behavior:"smooth"}))},E=L=>{l(!1),n(L)},B=L=>({1:"Item Information",2:"Upload Photos",3:"Set Pricing",4:"Availability & Shipping"})[L]||"";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(Q,{to:"/surplus/my-listings",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium mb-4 transition-colors",children:[e.jsx(Rt,{className:"w-5 h-5"}),"Back to My Listings"]}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Create Surplus Listing"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"List your unused construction materials and reach buyers in your area"})]}),x.submit&&e.jsxs("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Error Creating Listing"}),e.jsx("p",{className:"text-red-700 text-sm",children:x.submit})]})]}),i?e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Preview Your Listing"}),e.jsx("p",{className:"text-blue-100",children:"Review your listing before publishing"})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Item Information"}),e.jsx("button",{type:"button",onClick:()=>E(1),className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Edit"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Product Name"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:m.product_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Category"}),e.jsx("p",{className:"text-gray-900",children:((A=b.find(L=>L.category_id===m.category_id))==null?void 0:A.category_name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Condition"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-semibold ${m.condition==="new"?"bg-green-100 text-green-800":m.condition==="like_new"?"bg-blue-100 text-blue-800":m.condition==="used"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.condition.replace("_"," ").replace(/\b\w/g,L=>L.toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:m.description})]}),m.reason_for_selling&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Reason for Selling"}),e.jsx("p",{className:"text-gray-900",children:m.reason_for_selling})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Photos (",c.length,")"]}),e.jsx("button",{type:"button",onClick:()=>E(2),className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Edit"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map((L,N)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:L,alt:`Item photo ${N+1}`,className:"w-full h-40 object-cover rounded-lg border-2 border-gray-200"}),N===0&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-md font-semibold",children:"Primary"})]},N))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>E(3),className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Edit"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Asking Price"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",m.asking_price.toFixed(2)]})]}),m.original_price>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Original Price"}),e.jsxs("p",{className:"text-gray-500 line-through text-lg",children:["$",m.original_price.toFixed(2)]}),e.jsxs("p",{className:"text-green-700 font-semibold",children:["Save $",(m.original_price-m.asking_price).toFixed(2),"(",Math.round((1-m.asking_price/m.original_price)*100),"% off)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Price Type"}),e.jsx("p",{className:"text-gray-900 capitalize",children:m.price_type})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Availability"}),e.jsx("button",{type:"button",onClick:()=>E(4),className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:"Edit"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Quantity Available"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[m.quantity," unit(s)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Pickup"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-900",children:[e.jsx(Dt,{className:"w-4 h-4 inline mr-1 text-gray-600"}),m.pickup_location]}),m.pickup_instructions&&e.jsx("p",{className:"text-gray-600 text-sm pl-5",children:m.pickup_instructions})]})]}),m.shipping_available&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Shipping"}),e.jsxs("p",{className:"text-gray-900",children:[e.jsx(kt,{className:"w-4 h-4 inline mr-1 text-gray-600"}),"Available - $",m.shipping_rate.toFixed(2)," flat rate"]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"inline-flex items-center px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2"}),"Back to Edit"]}),e.jsx("button",{type:"button",onClick:F,disabled:j.isPending,className:"inline-flex items-center px-8 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"Publish Listing"]})})]})})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:[1,2,3,4].map((L,N)=>e.jsxs(Z.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all duration-200 ${L<a?"bg-green-600 text-white":L===a?"bg-blue-600 text-white ring-4 ring-blue-100":"bg-gray-200 text-gray-600"}`,children:L<a?e.jsx(je,{className:"w-5 h-5"}):L}),e.jsx("p",{className:`text-xs mt-2 font-medium text-center ${L===a?"text-blue-600":"text-gray-600"}`,children:B(L)})]}),N<3&&e.jsx("div",{className:`h-1 flex-1 mx-2 rounded transition-all duration-200 ${L<a?"bg-green-600":"bg-gray-200"}`})]},L))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-8",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ve,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Item Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about the item you're selling"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"product_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"product_name",value:m.product_name,onChange:L=>C("product_name",L.target.value),placeholder:"e.g., 2x4x8 SPF Lumber (50 pieces)",className:`w-full px-4 py-3 rounded-lg border-2 ${x.product_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`}),x.product_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.product_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category_id",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"category_id",value:m.category_id,onChange:L=>C("category_id",L.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${x.category_id?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`,disabled:v,children:[e.jsx("option",{value:"",children:"Select a category"}),b.map(L=>e.jsx("option",{value:L.category_id,children:L.category_name},L.category_id))]}),x.category_id&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.category_id]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Condition ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"new",label:"New",desc:"Unopened, unused"},{value:"like_new",label:"Like New",desc:"Opened, barely used"},{value:"used",label:"Used",desc:"Lightly used"},{value:"refurbished",label:"Refurbished",desc:"Restored to working"}].map(L=>e.jsxs("button",{type:"button",onClick:()=>C("condition",L.value),className:`p-4 rounded-lg border-2 text-left transition-all duration-200 ${m.condition===L.value?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:L.label}),e.jsx("p",{className:"text-xs text-gray-600",children:L.desc})]},L.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Description ",e.jsx("span",{className:"text-red-600",children:"*"}),e.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",m.description.length,"/5000 characters, min 100)"]})]}),e.jsx("textarea",{id:"description",value:m.description,onChange:L=>C("description",L.target.value),rows:6,placeholder:"Describe the item in detail. Include size, brand, quantity, condition details, and any defects...",className:`w-full px-4 py-3 rounded-lg border-2 ${x.description?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 resize-none`}),x.description&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.description]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reason_for_selling",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Reason for Selling (Optional)"}),e.jsxs("select",{id:"reason_for_selling",value:m.reason_for_selling,onChange:L=>C("reason_for_selling",L.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"Project completed with leftovers",children:"Project completed with leftovers"}),e.jsx("option",{value:"Wrong item ordered",children:"Wrong item ordered"}),e.jsx("option",{value:"Changed plans",children:"Changed plans"}),e.jsx("option",{value:"Upgrading to different material",children:"Upgrading to different material"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(pw,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Photos"}),e.jsx("p",{className:"text-gray-600",children:"Add photos to showcase your item's condition"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Photos ",e.jsx("span",{className:"text-red-600",children:"*"}),e.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",c.length,"/10 photos)"]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"file",id:"photo-upload",multiple:!0,accept:"image/jpeg,image/png,image/jpg",onChange:P,className:"hidden",disabled:c.length>=10}),e.jsxs("label",{htmlFor:"photo-upload",className:`cursor-pointer ${c.length>=10?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium mb-1",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG up to 5MB each (max 10 photos)"})]})]}),x.photos&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.photos]})]}),c.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map((L,N)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:L,alt:`Preview ${N+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{type:"button",onClick:()=>w(N),className:"absolute top-2 right-2 bg-red-600 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-700",children:e.jsx(ge,{className:"w-4 h-4"})}),N===0&&e.jsx("div",{className:"absolute bottom-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-md font-semibold",children:"Primary"})]},N))}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Take clear, well-lit photos from multiple angles. Show any defects or wear clearly. The first photo will be your primary listing image."]})})]}),a===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Te,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Set Pricing"}),e.jsx("p",{className:"text-gray-600",children:"Determine how you want to price your item"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"asking_price",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Asking Price ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"$"}),e.jsx("input",{type:"number",id:"asking_price",value:m.asking_price||"",onChange:L=>C("asking_price",parseFloat(L.target.value)||0),min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${x.asking_price?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`})]}),x.asking_price&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.asking_price]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"original_price",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Original Price (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"$"}),e.jsx("input",{type:"number",id:"original_price",value:m.original_price||"",onChange:L=>C("original_price",parseFloat(L.target.value)||0),min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${x.original_price?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Show buyers how much you originally paid (helps justify pricing)"}),x.original_price&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.original_price]}),m.original_price>0&&m.asking_price>0&&e.jsxs("p",{className:"mt-2 text-sm text-green-700 font-medium",children:["Savings: $",(m.original_price-m.asking_price).toFixed(2),"(",Math.round((1-m.asking_price/m.original_price)*100),"% off)"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["Price Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"space-y-3",children:[{value:"fixed",label:"Fixed Price",desc:"Buyers pay the asking price"},{value:"negotiable",label:"Negotiable",desc:"Open to offers from buyers"},{value:"auction",label:"Auction",desc:"Buyers bid on the item"}].map(L=>e.jsx("button",{type:"button",onClick:()=>C("price_type",L.value),className:`w-full p-4 rounded-lg border-2 text-left transition-all duration-200 ${m.price_type===L.value?"border-blue-600 bg-blue-50 ring-4 ring-blue-100":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:L.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L.desc})]}),m.price_type===L.value&&e.jsx(je,{className:"w-6 h-6 text-blue-600"})]})},L.value))})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Dt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Availability & Shipping"}),e.jsx("p",{className:"text-gray-600",children:"How buyers can get this item"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Quantity Available ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",id:"quantity",value:m.quantity,onChange:L=>C("quantity",parseInt(L.target.value)||1),min:"1",className:`w-full px-4 py-3 rounded-lg border-2 ${x.quantity?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`}),x.quantity&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.quantity]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"pickup_location",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Pickup Location ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"pickup_location",value:m.pickup_location,onChange:L=>C("pickup_location",L.target.value),placeholder:"e.g., Austin, TX 78701 or specific address",className:`w-full px-4 py-3 rounded-lg border-2 ${x.pickup_location?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`}),x.pickup_location&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.pickup_location]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pickup_instructions",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Pickup Instructions (Optional)"}),e.jsx("textarea",{id:"pickup_instructions",value:m.pickup_instructions,onChange:L=>C("pickup_instructions",L.target.value),rows:3,placeholder:"e.g., Call before pickup, available weekends only, gate code: 1234",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 resize-none"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"shipping_available",checked:m.shipping_available,onChange:L=>C("shipping_available",L.target.checked),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:"shipping_available",className:"block text-sm font-semibold text-gray-900 mb-1 cursor-pointer",children:[e.jsx(kt,{className:"w-5 h-5 inline mr-2 text-blue-600"}),"I can ship this item"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Offer shipping to reach more buyers beyond your local area"})]})]}),m.shipping_available&&e.jsxs("div",{className:"mt-4 pl-8",children:[e.jsxs("label",{htmlFor:"shipping_rate",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Flat Shipping Rate ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"$"}),e.jsx("input",{type:"number",id:"shipping_rate",value:m.shipping_rate||"",onChange:L=>C("shipping_rate",parseFloat(L.target.value)||0),min:"0",step:"0.01",placeholder:"0.00",className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${x.shipping_rate?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200`})]}),x.shipping_rate&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),x.shipping_rate]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:a>1&&e.jsxs("button",{type:"button",onClick:y,className:"inline-flex items-center px-6 py-3 border-2 border-gray-300 rounded-lg font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2"}),"Previous"]})}),e.jsx("div",{className:"flex items-center space-x-3",children:a<4?e.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:["Next",e.jsx(Ie,{className:"w-5 h-5 ml-2"})]}):e.jsxs("button",{type:"button",onClick:M,className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"Preview Listing"]})})]})})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Tips for a Great Listing"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Take clear, well-lit photos from multiple angles"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Be honest about condition and show any defects clearly"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Price competitively - check similar listings for reference"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Provide detailed measurements and specifications"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Respond quickly to buyer inquiries to sell faster"})]})]})]})]})})})},dn="https://123create-construction-app-with-a.launchpulse.ai",p5=async(t,s,r,a)=>{var d;const n=new URLSearchParams;s.status!=="all"&&n.append("status",s.status),n.append("limit",a.toString()),n.append("offset",((r-1)*a).toString());let i="created_date",l="desc";s.sort_by==="created_date_asc"?(i="created_date",l="asc"):s.sort_by==="price_high"?(i="asking_price",l="desc"):s.sort_by==="price_low"?(i="asking_price",l="asc"):s.sort_by==="views_high"&&(i="views_count",l="desc"),n.append("sort_by",i),n.append("sort_order",l);const o=await G.get(`${dn}/surplus/my-listings?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}});return{listings:o.data||[],total:((d=o.data)==null?void 0:d.length)||0}},g5=async(t,s,r)=>(await G.patch(`${dn}/surplus/${s}`,{status:r},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,f5=async(t,s)=>{await G.delete(`${dn}/surplus/${s}`,{headers:{Authorization:`Bearer ${t}`}})},b5=async(t,s)=>{await G.post(`${dn}/surplus/offers/${s}/accept`,{},{headers:{Authorization:`Bearer ${t}`}})},y5=async(t,s,r)=>{await G.post(`${dn}/surplus/offers/${s}/decline`,{decline_reason:r},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},v5=()=>{var K;const t=Pe(),s=re(U=>U.authentication_state.auth_token),[r,a]=_.useState("listings"),[n,i]=_.useState({status:"all",date_range:"all_time",sort_by:"created_date_desc"}),[l,o]=_.useState({current_page:1,total_pages:1,total_count:0,limit:20}),[d,c]=_.useState(""),[u,m]=_.useState({open:!1,listingId:null}),[h,x]=_.useState({open:!1,offerId:null,reason:""}),[p,b]=_.useState({open:!1,offerId:null}),[v,j]=_.useState({show:!1,message:"",type:"success"}),P=ne({queryKey:["surplus-listings","my-listings",n,l.current_page],queryFn:()=>p5(s,n,l.current_page,l.limit),enabled:!!s&&r==="listings",staleTime:3e4,select:U=>({listings:U.listings.filter(q=>d===""||q.product_name.toLowerCase().includes(d.toLowerCase())),total:U.total})});Z.useEffect(()=>{P.data&&o(U=>({...U,total_count:P.data.total,total_pages:Math.ceil(P.data.total/U.limit)}))},[P.data]);const w=ne({queryKey:["surplus-offers","pending"],queryFn:async()=>(await G.get(`${dn}/surplus/my-offers?status=pending`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s&&r==="offers",staleTime:3e4}),C=oe({mutationFn:U=>b5(s,U),onSuccess:()=>{t.invalidateQueries({queryKey:["surplus-listings"]}),t.invalidateQueries({queryKey:["surplus-offers"]}),b({open:!1,offerId:null}),F("Offer accepted successfully! Sale initiated.","success")},onError:U=>{var q,z;F(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to accept offer","error")}}),f=oe({mutationFn:({offerId:U,reason:q})=>y5(s,U,q),onSuccess:()=>{t.invalidateQueries({queryKey:["surplus-offers"]}),x({open:!1,offerId:null,reason:""}),F("Offer declined","success")},onError:U=>{var q,z;F(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to decline offer","error")}}),k=oe({mutationFn:({listingId:U,status:q})=>g5(s,U,q),onSuccess:U=>{t.setQueryData(["surplus-listings","my-listings",n,l.current_page],q=>q&&{...q,listings:q.listings.map(z=>z.listing_id===U.listing_id?U:z)}),F("Listing updated successfully","success")},onError:U=>{var q,z;F(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to update listing","error")}}),y=oe({mutationFn:U=>f5(s,U),onSuccess:(U,q)=>{t.setQueryData(["surplus-listings","my-listings",n,l.current_page],z=>z&&{...z,listings:z.listings.filter(Y=>Y.listing_id!==q),total:z.total-1}),m({open:!1,listingId:null}),F("Listing deleted successfully","success")},onError:U=>{var q,z;F(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to delete listing","error")}}),F=(U,q)=>{j({show:!0,message:U,type:q}),setTimeout(()=>j({show:!1,message:"",type:"success"}),5e3)},M=(U,q)=>{i(z=>({...z,[U]:q})),o(z=>({...z,current_page:1}))},E=U=>{o(q=>({...q,current_page:U})),window.scrollTo({top:0,behavior:"smooth"})},B=U=>{k.mutate({listingId:U,status:"sold"})},A=U=>{m({open:!0,listingId:U})},L=()=>{u.listingId&&y.mutate(u.listingId)},N=U=>{b({open:!0,offerId:U})},R=()=>{p.offerId&&C.mutate(p.offerId)},O=U=>{x({open:!0,offerId:U,reason:""})},T=()=>{h.offerId&&h.reason.trim()&&f.mutate({offerId:h.offerId,reason:h.reason})},g=U=>{switch(U){case"new":return"bg-green-100 text-green-800 border-green-200";case"like_new":return"bg-blue-100 text-blue-800 border-blue-200";case"used":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"refurbished":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=U=>{switch(U){case"active":return"bg-green-100 text-green-800 border-green-200";case"sold":return"bg-gray-100 text-gray-800 border-gray-200";case"expired":return"bg-amber-100 text-amber-800 border-amber-200";case"removed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},S=U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(U),I=((K=w.data)==null?void 0:K.length)||0;return e.jsxs(e.Fragment,{children:[v.show&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in-right",children:e.jsx("div",{className:`rounded-lg px-6 py-4 shadow-lg ${v.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[v.type==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:`text-sm font-medium ${v.type==="success"?"text-green-800":"text-red-800"}`,children:v.message}),e.jsx("button",{onClick:()=>j({show:!1,message:"",type:"success"}),className:`ml-4 ${v.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"}`,children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}),u.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Delete Listing?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this listing? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>m({open:!1,listingId:null}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:y.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:y.isPending?"Deleting...":"Delete"})]})]})}),p.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Accept Offer?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"By accepting this offer, you commit to completing the sale. The buyer will be notified and next steps will be provided."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>b({open:!1,offerId:null}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:C.isPending,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:C.isPending?"Accepting...":"Accept Offer"})]})]})}),h.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Decline Offer"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for declining this offer (optional but recommended):"}),e.jsx("textarea",{value:h.reason,onChange:U=>x(q=>({...q,reason:U.target.value})),placeholder:"E.g., Price too low, already accepted another offer...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>x({open:!1,offerId:null,reason:""}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:f.isPending||!h.reason.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:f.isPending?"Declining...":"Decline Offer"})]})]})}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"My Surplus Listings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your surplus materials, respond to offers, and track your sales"})]}),e.jsxs(Q,{to:"/surplus/create",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Listing"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>a("listings"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${r==="listings"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Active Listings",P.data&&e.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2.5 py-0.5 rounded-full text-xs font-semibold",children:P.data.listings.length})]}),e.jsxs("button",{onClick:()=>a("offers"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${r==="offers"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Pending Offers",I>0&&e.jsx("span",{className:"ml-2 bg-green-100 text-green-800 px-2.5 py-0.5 rounded-full text-xs font-semibold",children:I})]}),e.jsx("button",{onClick:()=>a("sales"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${r==="sales"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:"Sales History"})]})})}),r==="listings"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Listings"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:U=>c(U.target.value),placeholder:"Search by product name...",className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:n.status,onChange:U=>M("status",U.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"removed",children:"Removed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:n.sort_by,onChange:U=>M("sort_by",U.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"created_date_desc",children:"Newest First"}),e.jsx("option",{value:"created_date_asc",children:"Oldest First"}),e.jsx("option",{value:"price_high",children:"Price: High to Low"}),e.jsx("option",{value:"price_low",children:"Price: Low to High"}),e.jsx("option",{value:"views_high",children:"Most Views"})]})]})]})}),P.isLoading?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(U=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]},U))}):P.isError?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Listings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading your surplus listings."}),e.jsx("button",{onClick:()=>P.refetch(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"})]}):!P.data||P.data.listings.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Listings Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first surplus listing to start selling unused construction materials."}),e.jsxs(Q,{to:"/surplus/create",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Your First Listing"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:P.data.listings.map(U=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[U.photos&&U.photos.length>0?e.jsx("img",{src:U.photos[0],alt:U.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("svg",{className:"h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${D(U.status)}`,children:U.status.charAt(0).toUpperCase()+U.status.slice(1)})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight flex-1",children:U.product_name})}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold border ${g(U.condition)}`,children:U.condition.split("_").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ")}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Qty: ",U.quantity]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:$(U.asking_price)}),U.price_type==="negotiable"&&e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"(negotiable)"})]})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:[U.views_count," views"]})]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsxs("span",{children:["Listed ",S(U.created_date)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[U.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{to:`/surplus/${U.listing_id}`,className:"flex-1 px-4 py-2 border-2 border-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors text-center text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>B(U.listing_id),disabled:k.isPending,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",children:"Mark Sold"})]}),e.jsx("button",{onClick:()=>A(U.listing_id),disabled:y.isPending,className:"px-4 py-2 bg-red-50 text-red-600 rounded-lg font-medium hover:bg-red-100 transition-colors disabled:opacity-50 border border-red-200 text-sm",children:"Delete"})]})]})]},U.listing_id))}),l.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[e.jsx("button",{onClick:()=>E(l.current_page-1),disabled:l.current_page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,l.total_pages)},(U,q)=>{let z;return l.total_pages<=5||l.current_page<=3?z=q+1:l.current_page>=l.total_pages-2?z=l.total_pages-4+q:z=l.current_page-2+q,e.jsx("button",{onClick:()=>E(z),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l.current_page===z?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:z},z)})}),e.jsx("button",{onClick:()=>E(l.current_page+1),disabled:l.current_page===l.total_pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}),r==="offers"&&e.jsx("div",{className:"space-y-4",children:w.isLoading?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(U=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},U))}):w.isError?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Offers"}),e.jsx("button",{onClick:()=>w.refetch(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"})]}):!w.data||w.data.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Pending Offers"}),e.jsx("p",{className:"text-gray-600",children:"You'll see offers from buyers here when they're interested in your listings."})]}):e.jsx(e.Fragment,{children:w.data.map(U=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Offer from ",U.buyer_name]}),U.expires_at&&e.jsxs("span",{className:"text-xs text-amber-600 font-medium",children:["Expires ",S(U.expires_at)]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Listing: ",U.listing_id," "]}),e.jsxs("div",{className:"flex items-baseline space-x-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Offer Amount"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:$(U.offer_amount)})]}),e.jsx("span",{className:"text-gray-400",children:"vs"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Your Price"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:$(U.original_asking_price)})]}),e.jsx("div",{className:"flex-1 text-right",children:e.jsxs("span",{className:`text-sm font-semibold ${U.offer_amount>=U.original_asking_price*.9?"text-green-600":U.offer_amount>=U.original_asking_price*.75?"text-amber-600":"text-red-600"}`,children:[(U.offer_amount/U.original_asking_price*100).toFixed(0),"% of asking"]})})]}),U.message&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Buyer's Message:"}),e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',U.message,'"']})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Received ",S(U.offer_date)]})]}),e.jsxs("div",{className:"flex md:flex-col space-x-2 md:space-x-0 md:space-y-2 md:ml-6",children:[e.jsx("button",{onClick:()=>N(U.offer_id),disabled:C.isPending,className:"flex-1 md:w-32 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",children:"Accept"}),e.jsx("button",{onClick:()=>O(U.offer_id),disabled:f.isPending,className:"flex-1 md:w-32 px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 text-sm",children:"Decline"})]})]})},U.offer_id))})}),r==="sales"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Sales History"}),e.jsx("p",{className:"text-gray-600",children:"This feature is coming soon. You'll be able to view your completed surplus sales and buyer ratings here."})]})]})})]})},j5=async t=>{try{return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/trade-credit/applications/me",{headers:{Authorization:`Bearer ${t}`}})).data.existing_application||null}catch{return null}},N5=async(t,s,r)=>{const a=new FormData;a.append("file",t),a.append("document_type",s),a.append("application_context","trade_credit_application");const n=await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/uploads/trade-credit-documents",a,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}});return{document_type:s,file_name:t.name,file_url:n.data.file_url,upload_date:new Date().toISOString()}},w5=async(t,s,r,a,n)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/trade-credit/applications",{customer_id:a,business_name:t.business_name,business_registration_number:t.business_registration_number,business_type:t.business_type,annual_revenue:t.annual_revenue,years_in_business:t.years_in_business,requested_credit_limit:t.requested_credit_limit,primary_contact_name:t.primary_contact_name,primary_contact_email:t.primary_contact_email,primary_contact_phone:t.primary_contact_phone,business_address:t.business_address,tax_identification_number:t.tax_identification_number,bank_name:t.bank_name,bank_account_type:t.bank_account_type,verification_documents:s,trade_references:t.trade_references,credit_check_consent:r},{headers:{Authorization:`Bearer ${n}`}})).data,_5=()=>{const t=ze(),s=re(O=>O.authentication_state.customer_profile),r=re(O=>O.authentication_state.auth_token),[a,n]=_.useState(1),[,i]=_.useState(null),[l,o]=_.useState(!1),[d,c]=_.useState(null),[u,m]=_.useState({business_name:"",business_registration_number:"",business_type:"",annual_revenue:0,years_in_business:0,requested_credit_limit:0,primary_contact_name:"",primary_contact_email:"",primary_contact_phone:"",business_address:"",tax_identification_number:"",bank_name:"",bank_account_type:"",trade_references:[]}),[h,x]=_.useState([]),[p,b]=_.useState({}),[v,j]=_.useState({}),{data:P}=ne({queryKey:["existing-trade-credit-application"],queryFn:()=>j5(r||""),enabled:!!r,staleTime:0,retry:!1});_.useEffect(()=>{P&&(i(P.application_id),m(P.application_data),(P.status==="pending"||P.status==="under_review")&&t("/trade-credit"))},[P,t]),_.useEffect(()=>{s&&s.account_type!=="trade"&&t("/dashboard"),(s==null?void 0:s.trade_credit_status)==="approved"&&t("/trade-credit")},[s,t]);const w=oe({mutationFn:({file:O,documentType:T})=>N5(O,T,r||""),onMutate:({documentType:O})=>{j(T=>({...T,[O]:{progress:0,status:"uploading"}}))},onSuccess:(O,T)=>{x(g=>[...g,O]),j(g=>({...g,[T.documentType]:{progress:100,status:"success"}}))},onError:(O,T)=>{j(g=>({...g,[T.documentType]:{progress:0,status:"error"}}))}}),C=oe({mutationFn:()=>w5(u,h,l,(s==null?void 0:s.customer_id)||"",r||""),onSuccess:()=>{t("/trade-credit")},onError:O=>{var T,g;c(((g=(T=O.response)==null?void 0:T.data)==null?void 0:g.message)||"Failed to submit application. Please try again.")}}),f=_.useCallback((O,T)=>{m(g=>({...g,[O]:T})),p[O]&&b(g=>{const D={...g};return delete D[O],D})},[p]),k=()=>{m(O=>({...O,trade_references:[...O.trade_references,{company_name:"",contact_name:"",phone_number:"",relationship_years:0}]}))},y=(O,T,g)=>{m(D=>({...D,trade_references:D.trade_references.map((S,$)=>$===O?{...S,[T]:g}:S)}))},F=O=>{m(T=>({...T,trade_references:T.trade_references.filter((g,D)=>D!==O)}))},M=async(O,T)=>{var S;const g=(S=O.target.files)==null?void 0:S[0];if(!g)return;if(g.size>5*1024*1024){b($=>({...$,[T]:"File size must be less than 5MB"}));return}if(!["application/pdf","image/jpeg","image/png"].includes(g.type)){b($=>({...$,[T]:"Only PDF, JPG, and PNG files are allowed"}));return}try{await w.mutateAsync({file:g,documentType:T})}catch($){console.error("Upload error:",$)}},E=()=>{const O={};if(a===1&&(u.business_name.trim()||(O.business_name="Business name is required"),u.business_registration_number.trim()||(O.business_registration_number="Registration number is required"),u.business_type||(O.business_type="Business type is required"),u.years_in_business<1&&(O.years_in_business="Years in business must be at least 1"),u.annual_revenue<=0&&(O.annual_revenue="Annual revenue is required"),u.requested_credit_limit<=0&&(O.requested_credit_limit="Requested credit limit is required")),a===2&&(u.primary_contact_name.trim()||(O.primary_contact_name="Contact name is required"),u.primary_contact_email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.primary_contact_email)||(O.primary_contact_email="Invalid email format"):O.primary_contact_email="Contact email is required",u.primary_contact_phone.trim()||(O.primary_contact_phone="Contact phone is required"),u.business_address.trim()||(O.business_address="Business address is required"),u.tax_identification_number.trim()||(O.tax_identification_number="Tax ID is required")),a===3&&(u.bank_name.trim()||(O.bank_name="Bank name is required"),u.bank_account_type||(O.bank_account_type="Account type is required"),u.trade_references.length<2&&(O.trade_references="At least 2 trade references are required"),u.trade_references.forEach((T,g)=>{T.company_name.trim()||(O[`ref_${g}_company`]="Company name is required"),T.contact_name.trim()||(O[`ref_${g}_contact`]="Contact name is required"),T.phone_number.trim()||(O[`ref_${g}_phone`]="Phone number is required"),T.relationship_years<1&&(O[`ref_${g}_years`]="Years must be at least 1")})),a===4){const T=["business_registration","tax_id","bank_statement","financial_statements"],g=h.map(D=>D.document_type);T.forEach(D=>{g.includes(D)||(O[D]="This document is required")}),l||(O.credit_check_consent="You must consent to credit check")}return b(O),Object.keys(O).length===0},B=()=>{E()&&a<4&&(n(O=>O+1),window.scrollTo({top:0,behavior:"smooth"}))},A=()=>{a>1&&(n(O=>O-1),window.scrollTo({top:0,behavior:"smooth"}))},L=async O=>{O.preventDefault(),E()&&(c(null),await C.mutateAsync())},N=[{type:"business_registration",label:"Business Registration Certificate",icon:kr},{type:"tax_id",label:"Tax Identification Document",icon:Me},{type:"bank_statement",label:"Recent Bank Statement (Last 3 months)",icon:Te},{type:"financial_statements",label:"Financial Statements (Last year)",icon:th}],R=O=>h.some(T=>T.document_type===O);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-8 lg:py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8 lg:mb-12",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-3",children:"Apply for Trade Credit"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Complete this application to access net payment terms and flexible credit lines"})]}),e.jsxs("div",{className:"mb-8 lg:mb-12",children:[e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(O=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${a>O?"bg-green-600 border-green-600":a===O?"bg-blue-600 border-blue-600":"bg-white border-gray-300"}`,children:a>O?e.jsx(he,{className:"w-5 h-5 text-white"}):e.jsx("span",{className:`text-sm font-semibold ${a===O?"text-white":"text-gray-400"}`,children:O})}),O<4&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${a>O?"bg-green-600":"bg-gray-200"}`})]},O))}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsx("span",{className:`text-xs font-medium ${a===1?"text-blue-600":"text-gray-500"}`,children:"Business Info"}),e.jsx("span",{className:`text-xs font-medium ${a===2?"text-blue-600":"text-gray-500"}`,children:"Contact Details"}),e.jsx("span",{className:`text-xs font-medium ${a===3?"text-blue-600":"text-gray-500"}`,children:"Banking & Refs"}),e.jsx("span",{className:`text-xs font-medium ${a===4?"text-blue-600":"text-gray-500"}`,children:"Documents"})]})]}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Application Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:d})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("form",{onSubmit:L,children:[a===1&&e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(kr,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Business Information"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"business_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Legal Business Name *"}),e.jsx("input",{type:"text",id:"business_name",value:u.business_name,onChange:O=>f("business_name",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.business_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"e.g., Acme Construction LLC"}),p.business_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.business_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"business_registration_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Registration Number *"}),e.jsx("input",{type:"text",id:"business_registration_number",value:u.business_registration_number,onChange:O=>f("business_registration_number",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.business_registration_number?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"e.g., 123456789"}),p.business_registration_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.business_registration_number})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"business_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type *"}),e.jsxs("select",{id:"business_type",value:u.business_type,onChange:O=>f("business_type",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.business_type?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"Corporation",children:"Corporation"}),e.jsx("option",{value:"LLC",children:"LLC"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"})]}),p.business_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.business_type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"years_in_business",className:"block text-sm font-medium text-gray-700 mb-2",children:"Years in Business *"}),e.jsx("input",{type:"number",id:"years_in_business",min:"1",value:u.years_in_business||"",onChange:O=>f("years_in_business",Number(O.target.value)),className:`w-full px-4 py-3 rounded-lg border-2 ${p.years_in_business?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"e.g., 5"}),p.years_in_business&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.years_in_business})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"annual_revenue",className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Revenue (USD) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"annual_revenue",min:"0",step:"1000",value:u.annual_revenue||"",onChange:O=>f("annual_revenue",Number(O.target.value)),className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${p.annual_revenue?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"500000"})]}),p.annual_revenue&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.annual_revenue})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"requested_credit_limit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Credit Limit (USD) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"requested_credit_limit",min:"0",step:"1000",value:u.requested_credit_limit||"",onChange:O=>f("requested_credit_limit",Number(O.target.value)),className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${p.requested_credit_limit?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"50000"})]}),p.requested_credit_limit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.requested_credit_limit}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Typical approval ranges: $10,000 - $500,000 based on financials"})]})]})]}),a===2&&e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(ct,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contact Information"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"primary_contact_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Contact Name *"}),e.jsx("input",{type:"text",id:"primary_contact_name",value:u.primary_contact_name,onChange:O=>f("primary_contact_name",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.primary_contact_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"John Smith"}),p.primary_contact_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.primary_contact_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"primary_contact_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),e.jsx("input",{type:"email",id:"primary_contact_email",value:u.primary_contact_email,onChange:O=>f("primary_contact_email",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.primary_contact_email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"john@acmeconstruction.com"}),p.primary_contact_email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.primary_contact_email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"primary_contact_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),e.jsx("input",{type:"tel",id:"primary_contact_phone",value:u.primary_contact_phone,onChange:O=>f("primary_contact_phone",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.primary_contact_phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"(555) 123-4567"}),p.primary_contact_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.primary_contact_phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"business_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address *"}),e.jsx("textarea",{id:"business_address",rows:3,value:u.business_address,onChange:O=>f("business_address",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.business_address?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"123 Main Street, Suite 100, Austin, TX 78701"}),p.business_address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.business_address})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax_identification_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Identification Number (EIN/SSN) *"}),e.jsx("input",{type:"text",id:"tax_identification_number",value:u.tax_identification_number,onChange:O=>f("tax_identification_number",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.tax_identification_number?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"XX-XXXXXXX"}),p.tax_identification_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.tax_identification_number})]})]})]}),a===3&&e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Te,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Banking & Trade References"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Bank Account Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name *"}),e.jsx("input",{type:"text",id:"bank_name",value:u.bank_name,onChange:O=>f("bank_name",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.bank_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,placeholder:"e.g., Chase Bank"}),p.bank_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.bank_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_account_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type *"}),e.jsxs("select",{id:"bank_account_type",value:u.bank_account_type,onChange:O=>f("bank_account_type",O.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${p.bank_account_type?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all`,children:[e.jsx("option",{value:"",children:"Select account type"}),e.jsx("option",{value:"checking",children:"Business Checking"}),e.jsx("option",{value:"savings",children:"Business Savings"})]}),p.bank_account_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.bank_account_type})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Trade References (Minimum 2)"}),e.jsx("button",{type:"button",onClick:k,className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"+ Add Reference"})]}),p.trade_references&&e.jsx("p",{className:"text-sm text-red-600",children:p.trade_references}),u.trade_references.map((O,T)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700",children:["Reference ",T+1]}),e.jsx("button",{type:"button",onClick:()=>F(T),className:"text-sm text-red-600 hover:text-red-700 transition-colors",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:O.company_name,onChange:g=>y(T,"company_name",g.target.value),className:`w-full px-3 py-2 rounded-lg border-2 ${p[`ref_${T}_company`]?"border-red-300":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all`,placeholder:"ABC Supply Co"}),p[`ref_${T}_company`]&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`ref_${T}_company`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name *"}),e.jsx("input",{type:"text",value:O.contact_name,onChange:g=>y(T,"contact_name",g.target.value),className:`w-full px-3 py-2 rounded-lg border-2 ${p[`ref_${T}_contact`]?"border-red-300":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all`,placeholder:"Jane Doe"}),p[`ref_${T}_contact`]&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`ref_${T}_contact`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:O.phone_number,onChange:g=>y(T,"phone_number",g.target.value),className:`w-full px-3 py-2 rounded-lg border-2 ${p[`ref_${T}_phone`]?"border-red-300":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all`,placeholder:"(555) 123-4567"}),p[`ref_${T}_phone`]&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`ref_${T}_phone`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Years of Relationship *"}),e.jsx("input",{type:"number",min:"1",value:O.relationship_years||"",onChange:g=>y(T,"relationship_years",Number(g.target.value)),className:`w-full px-3 py-2 rounded-lg border-2 ${p[`ref_${T}_years`]?"border-red-300":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all`,placeholder:"3"}),p[`ref_${T}_years`]&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`ref_${T}_years`]})]})]})]},T)),u.trade_references.length===0&&e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("p",{className:"text-gray-500 mb-3",children:"No trade references added yet"}),e.jsx("button",{type:"button",onClick:k,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Add Your First Reference"})]})]})]})]}),a===4&&e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(th,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Required Documents"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Upload the following documents to verify your business and financial information. All documents must be in PDF, JPG, or PNG format and under 5MB."}),e.jsx("div",{className:"space-y-4",children:N.map(O=>{const T=R(O.type),g=v[O.type],D=O.icon;return e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${T?"border-green-300 bg-green-50":p[O.type]?"border-red-300 bg-red-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start flex-1",children:[e.jsx(D,{className:`w-5 h-5 mt-0.5 mr-3 flex-shrink-0 ${T?"text-green-600":"text-gray-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:O.label}),T&&e.jsxs("p",{className:"text-sm text-green-600 mt-1 flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Uploaded successfully"]}),p[O.type]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:p[O.type]}),(g==null?void 0:g.status)==="uploading"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${g.progress}%`}})}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Uploading..."})]})]})]}),!T&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:S=>M(S,O.type),className:"hidden",disabled:(g==null?void 0:g.status)==="uploading"}),e.jsxs("div",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-sm font-medium",children:[e.jsx(os,{className:"w-4 h-4 inline mr-2"}),"Upload"]})]})]})},O.type)})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("label",{className:"flex items-start cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:O=>{o(O.target.checked),p.credit_check_consent&&b(T=>{const g={...T};return delete g.credit_check_consent,g})},className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700 leading-relaxed",children:"I authorize BuildEasy to conduct a credit check and verify the financial information provided. I understand this is necessary for processing my trade credit application. *"})]}),p.credit_check_consent&&e.jsx("p",{className:"mt-2 text-sm text-red-600 ml-8",children:p.credit_check_consent})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Business Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.business_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Business Type"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.business_type||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Annual Revenue"}),e.jsxs("p",{className:"font-medium text-gray-900",children:["$",u.annual_revenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Requested Credit Limit"}),e.jsxs("p",{className:"font-medium text-gray-900",children:["$",u.requested_credit_limit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Years in Business"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[u.years_in_business," years"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Trade References"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.trade_references.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Documents Uploaded"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[h.length," / 4"]})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 lg:px-8 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[a>1?e.jsx("button",{type:"button",onClick:A,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium",children:"Previous"}):e.jsx("div",{}),a<4?e.jsx("button",{type:"button",onClick:B,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-lg hover:shadow-xl",children:"Next Step"}):e.jsx("button",{type:"submit",disabled:C.isPending,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting Application..."]}):"Submit Application"})]})]})}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Application Review Process"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1 leading-relaxed",children:"Your application will be reviewed within 2-3 business days. We may contact you for additional information. You'll receive email and in-app notifications about your application status."})]})]})})]})})})},Lm="https://123create-construction-app-with-a.launchpulse.ai",k5=async t=>{const r=(await G.get(`${Lm}/customers/me`,{headers:{Authorization:`Bearer ${t}`}})).data;return{trade_credit_limit:Number(r.trade_credit_limit||0),trade_credit_balance:Number(r.trade_credit_balance||0),trade_credit_used:Number(r.trade_credit_used||0),trade_credit_terms:r.trade_credit_terms||"Net 30",trade_credit_status:r.trade_credit_status||"pending",available_credit:Number(r.trade_credit_balance||0),credit_utilization_percentage:r.trade_credit_limit>0?Number(r.trade_credit_used||0)/Number(r.trade_credit_limit)*100:0}},S5=async t=>(await G.get(`${Lm}/payment-methods`,{headers:{Authorization:`Bearer ${t}`}})).data.filter(r=>r.payment_type==="credit_card"||r.payment_type==="debit_card"),C5=async(t,s,r,a)=>(console.log("Fetching transactions:",{token:t,customer_id:s,start_date:r,end_date:a}),[{transaction_id:"txn_001",transaction_type:"purchase",amount:1500,description:"Order ORD-2024-001",transaction_date:new Date(Date.now()-5*24*60*60*1e3).toISOString(),reference_order_id:"order_001",running_balance:48500},{transaction_id:"txn_002",transaction_type:"payment",amount:-2e3,description:"Payment received",transaction_date:new Date(Date.now()-15*24*60*60*1e3).toISOString(),reference_order_id:null,running_balance:5e4}]),P5=async(t,s)=>(console.log("Submitting payment:",{token:t,payment_data:s}),{transaction_id:`txn_${Date.now()}`,status:"completed",new_balance:0,confirmation_number:`CONF${Date.now()}`}),A5=async(t,s)=>(console.log("Submitting credit increase request:",{token:t,request_data:s}),{request_id:`req_${Date.now()}`,status:"pending_review",estimated_review_time:"2-3 business days"}),$5=()=>{var O,T;const t=re(g=>g.authentication_state.auth_token),s=re(g=>g.authentication_state.customer_profile),r=Pe(),[a,n]=_.useState("overview"),[,i]=_.useState(!1),[,l]=_.useState(!1),[o,d]=_.useState({start_date:"",end_date:"",period_preset:"last_30_days"}),[c,u]=_.useState({payment_amount:0,payment_method_id:"",payment_date:new Date().toISOString().split("T")[0]}),[m,h]=_.useState({requested_new_limit:0,business_justification:"",updated_financial_documents:[]}),[x,p]=_.useState(null),[b,v]=_.useState(null),{data:j,isLoading:P,error:w,refetch:C}=ne({queryKey:["credit-account-summary",s==null?void 0:s.customer_id],queryFn:()=>k5(t),enabled:!!t&&!!s,staleTime:6e4,refetchOnWindowFocus:!0,select:g=>({...g,trade_credit_limit:Number(g.trade_credit_limit||0),trade_credit_balance:Number(g.trade_credit_balance||0),trade_credit_used:Number(g.trade_credit_used||0)})}),{data:f=[],isLoading:k}=ne({queryKey:["trade-credit-transactions",s==null?void 0:s.customer_id,o],queryFn:()=>C5(t,s.customer_id,o.start_date,o.end_date),enabled:!!t&&!!s&&a==="transactions",staleTime:3e4}),{data:y=[],isLoading:F}=ne({queryKey:["payment-methods"],queryFn:()=>S5(t),enabled:!!t&&a==="payment",staleTime:3e5}),M=oe({mutationFn:g=>P5(t,g),onSuccess:()=>{r.invalidateQueries({queryKey:["credit-account-summary"]}),r.invalidateQueries({queryKey:["trade-credit-transactions"]}),i(!1),u({payment_amount:0,payment_method_id:"",payment_date:new Date().toISOString().split("T")[0]}),p(null)},onError:g=>{var D,S;p(((S=(D=g.response)==null?void 0:D.data)==null?void 0:S.message)||"Payment failed. Please try again.")}}),E=oe({mutationFn:g=>A5(t,g),onSuccess:()=>{l(!1),h({requested_new_limit:0,business_justification:"",updated_financial_documents:[]}),v(null)},onError:g=>{var D,S;v(((S=(D=g.response)==null?void 0:D.data)==null?void 0:S.message)||"Request failed. Please try again.")}}),B=()=>{if(p(null),!c.payment_amount||c.payment_amount<=0){p("Please enter a valid payment amount");return}if(!c.payment_method_id){p("Please select a payment method");return}if(c.payment_amount>((j==null?void 0:j.trade_credit_used)||0)){p("Payment amount cannot exceed outstanding balance");return}M.mutate({customer_id:s.customer_id,payment_amount:c.payment_amount,payment_method_id:c.payment_method_id})},A=()=>{if(v(null),!m.requested_new_limit||m.requested_new_limit<=((j==null?void 0:j.trade_credit_limit)||0)){v("Requested limit must be greater than current limit");return}if(!m.business_justification||m.business_justification.length<50){v("Please provide a detailed business justification (minimum 50 characters)");return}E.mutate({customer_id:s.customer_id,current_limit:j.trade_credit_limit,requested_new_limit:m.requested_new_limit,business_justification:m.business_justification,updated_financial_documents:m.updated_financial_documents})},L=()=>{window.open(`${Lm}/trade-credit/statement?customer_id=${s==null?void 0:s.customer_id}&format=pdf`,"_blank")},N=g=>{const D=new Date;let S="";switch(g){case"last_30_days":S=new Date(D.getTime()-30*24*60*60*1e3).toISOString().split("T")[0];break;case"last_90_days":S=new Date(D.getTime()-90*24*60*60*1e3).toISOString().split("T")[0];break;case"this_year":S=`${D.getFullYear()}-01-01`;break;case"all_time":S="";break}d({start_date:S,end_date:D.toISOString().split("T")[0],period_preset:g})};if(j&&j.trade_credit_status!=="approved")return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center",children:[e.jsx(de,{className:"mx-auto h-16 w-16 text-amber-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Trade Credit Not Available"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:[j.trade_credit_status==="pending"&&"Your trade credit application is being reviewed. We'll notify you once approved.",j.trade_credit_status==="rejected"&&"Your trade credit application was not approved at this time.",j.trade_credit_status==="suspended"&&"Your trade credit account has been temporarily suspended."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(Q,{to:"/dashboard",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Return to Dashboard"}),j.trade_credit_status==="rejected"&&e.jsx(Q,{to:"/trade-credit/apply",className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"Reapply"})]})]})})})});if(P)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"})]}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})})})});if(w)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[e.jsx(de,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Failed to Load Credit Account"}),e.jsx("p",{className:"text-red-700 mb-6",children:((T=(O=w==null?void 0:w.response)==null?void 0:O.data)==null?void 0:T.message)||"An error occurred while loading your credit account. Please try again."}),e.jsx("button",{onClick:()=>C(),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"})]})})})});const R={total_outstanding:Number((j==null?void 0:j.trade_credit_used)||0),current_due:Number((j==null?void 0:j.trade_credit_used)||0),overdue_amount:0,due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],payment_terms:(j==null?void 0:j.trade_credit_terms)||"Net 30"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Trade Credit Account"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your trade credit, view transactions, and make payments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Download Statement"})]}),e.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(es,{className:"h-6 w-6 text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Credit Limit"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",j==null?void 0:j.trade_credit_limit.toFixed(2)]})}),e.jsx("p",{className:"text-sm text-gray-500",children:j==null?void 0:j.trade_credit_terms})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Available"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",j==null?void 0:j.available_credit.toFixed(2)]})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j==null?void 0:j.credit_utilization_percentage.toFixed(1),"% utilized"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg",children:e.jsx(Te,{className:"h-6 w-6 text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Outstanding"})]}),e.jsx("div",{className:"mb-2",children:e.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["$",j==null?void 0:j.trade_credit_used.toFixed(2)]})}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(R.due_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Credit Utilization"}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[j==null?void 0:j.credit_utilization_percentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${((j==null?void 0:j.credit_utilization_percentage)||0)>80?"bg-red-500":((j==null?void 0:j.credit_utilization_percentage)||0)>50?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min((j==null?void 0:j.credit_utilization_percentage)||0,100)}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{children:["$",j==null?void 0:j.trade_credit_limit.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[e.jsxs("button",{onClick:()=>{i(!0),n("payment")},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg",children:[e.jsx(Te,{className:"h-5 w-5"}),"Make Payment"]}),e.jsxs("button",{onClick:()=>{l(!0),n("increase")},className:"flex items-center gap-2 px-6 py-3 bg-white text-gray-900 rounded-lg font-medium hover:bg-gray-50 transition-colors border border-gray-300",children:[e.jsx(sh,{className:"h-5 w-5"}),"Request Credit Increase"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>n("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),e.jsx("button",{onClick:()=>n("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="transactions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Transaction History"}),e.jsx("button",{onClick:()=>n("payment"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="payment"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Make Payment"}),e.jsx("button",{onClick:()=>n("increase"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="increase"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Request Increase"})]})}),e.jsxs("div",{className:"p-6",children:[a==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-600 capitalize",children:j==null?void 0:j.trade_credit_status})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Terms:"}),e.jsx("span",{className:"font-medium text-gray-900",children:j==null?void 0:j.trade_credit_terms})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Type:"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Trade"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Due:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",R.current_due.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Due:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(R.due_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Overdue:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["$",R.overdue_amount.toFixed(2)]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:f.slice(0,5).map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${g.transaction_type==="payment"?"bg-green-50":"bg-blue-50"}`,children:g.transaction_type==="payment"?e.jsx(he,{className:"h-5 w-5 text-green-600"}):e.jsx(Me,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.description}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(g.transaction_date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${g.transaction_type==="payment"?"text-green-600":"text-gray-900"}`,children:[g.amount<0?"+":"-","$",Math.abs(g.amount).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: $",g.running_balance.toFixed(2)]})]})]},g.transaction_id))})]})]}),a==="transactions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),e.jsx("div",{className:"flex gap-2",children:["last_30_days","last_90_days","this_year","all_time"].map(g=>e.jsx("button",{onClick:()=>N(g),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o.period_preset===g?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:g.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase())},g))})]}),k?e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3,4,5].map(g=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},g))}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Transactions"}),e.jsx("p",{className:"text-gray-600",children:"No transactions found for the selected period"})]}):e.jsx("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(g.transaction_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.transaction_type==="payment"?"bg-green-100 text-green-800":g.transaction_type==="purchase"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:g.transaction_type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:g.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsxs("span",{className:g.transaction_type==="payment"?"text-green-600":"text-gray-900",children:[g.amount<0?"+":"-","$",Math.abs(g.amount).toFixed(2)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:["$",g.running_balance.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:g.reference_order_id?e.jsx(Q,{to:`/orders/${g.reference_order_id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Order"}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},g.transaction_id))})]})})]}),a==="payment"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Make a Payment"}),e.jsxs("p",{className:"text-gray-600",children:["Outstanding Balance: ",e.jsxs("span",{className:"font-semibold text-amber-600",children:["$",R.total_outstanding.toFixed(2)]})]})]}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:x})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Te,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:R.total_outstanding,value:c.payment_amount||"",onChange:g=>{p(null),u({...c,payment_amount:Number(g.target.value)})},placeholder:"0.00",className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("button",{onClick:()=>u({...c,payment_amount:R.total_outstanding}),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Pay Full Balance"}),e.jsx("button",{onClick:()=>u({...c,payment_amount:R.total_outstanding/2}),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Pay Half"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),F?e.jsx("div",{className:"animate-pulse h-12 bg-gray-200 rounded-lg"}):y.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No payment methods saved"}),e.jsx(Q,{to:"/account#payments",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Add Payment Method"})]}):e.jsxs("select",{value:c.payment_method_id,onChange:g=>{p(null),u({...c,payment_method_id:g.target.value})},className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select payment method"}),y.map(g=>e.jsxs("option",{value:g.payment_method_id,children:[g.card_brand,"  ",g.card_last_four,g.is_default&&" (Default)"]},g.payment_method_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:c.payment_date,onChange:g=>u({...c,payment_date:g.target.value}),className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{onClick:B,disabled:M.isPending,className:"w-full flex justify-center items-center gap-2 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-5 w-5 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-5 w-5"}),"Submit Payment"]})}),M.isSuccess&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Payment submitted successfully!"})})]}),a==="increase"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Request Credit Increase"}),e.jsxs("p",{className:"text-gray-600",children:["Current Limit: ",e.jsxs("span",{className:"font-semibold text-blue-600",children:["$",j==null?void 0:j.trade_credit_limit.toFixed(2)]})]})]}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:b})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested New Credit Limit"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Te,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"1000",min:j==null?void 0:j.trade_credit_limit,value:m.requested_new_limit||"",onChange:g=>{v(null),h({...m,requested_new_limit:Number(g.target.value)})},placeholder:"Enter requested amount",className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Increase of $",Math.max(0,(m.requested_new_limit||0)-((j==null?void 0:j.trade_credit_limit)||0)).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Justification"}),e.jsx("textarea",{value:m.business_justification,onChange:g=>{v(null),h({...m,business_justification:g.target.value})},placeholder:"Explain why you need the credit increase...",rows:6,className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[m.business_justification.length," / 500 characters (minimum 50)"]})]}),e.jsx("button",{onClick:A,disabled:E.isPending,className:"w-full flex justify-center items-center gap-2 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-5 w-5 animate-spin"}),"Submitting Request..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sh,{className:"h-5 w-5"}),"Submit Request"]})}),E.isSuccess&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Credit increase request submitted successfully! We'll review and respond within 2-3 business days."})})]})]})]}),e.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(de,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Trade Credit Information"}),e.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your trade credit account allows you to make purchases now and pay later according to your agreed terms."}),e.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["Payment terms: ",j==null?void 0:j.trade_credit_terms]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Make payments anytime to free up credit"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Request credit increases as your business grows"})]})]})]})]})})]})})})},Im="https://123create-construction-app-with-a.launchpulse.ai",qm=t=>({headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),O5=async t=>{const{data:s}=await G.get(`${Im}/suppliers/me`,qm(t));return s},T5=async({token:t,updates:s})=>{const{data:r}=await G.patch(`${Im}/suppliers/me`,s,qm(t));return r},E5=async({token:t,product:s})=>{const{data:r}=await G.post(`${Im}/suppliers/me/products`,s,qm(t));return r},F5=()=>{const t=ze(),s=Pe(),r=re(S=>S.authentication_state.auth_token),a=re(S=>S.authentication_state.authentication_status.is_authenticated),n=re(S=>S.authentication_state.authentication_status.user_type),[i,l]=_.useState(1),[o,d]=_.useState(0),[c,u]=_.useState({}),[m,h]=_.useState(!1),[x,p]=_.useState({supplier_id:null,user_id:null,business_name:"",business_registration_number:"",business_type:"",business_description:"",logo_url:null,cover_photo_url:null,verification_status:"pending",operating_hours:null,service_areas:null,return_policy:null,shipping_policy:null,minimum_order_value:null,payout_frequency:"monthly",commission_rate:0,subscription_plan:"basic",onboarding_completed:!1}),[b,v]=_.useState({business_registration:null,tax_id:null,proof_of_address:null,business_license:null,insurance_certificate:null}),[j,P]=_.useState({account_holder_name:"",account_number:"",routing_number:"",bank_name:""}),[w,C]=_.useState([]),[f,k]=_.useState({category_id:"",sku:"",product_name:"",description:"",price_per_unit:0,unit_of_measure:"",stock_quantity:0});_.useEffect(()=>{(!a||n!=="supplier")&&t("/login")},[a,n,t]);const{data:y,isLoading:F}=ne({queryKey:["currentSupplier",r],queryFn:()=>O5(r),enabled:!!r&&a&&n==="supplier",retry:1,staleTime:6e4});_.useEffect(()=>{if(y){if(y.onboarding_completed){t("/supplier/dashboard");return}p($=>({...$,...y}));let S=1;y.business_name&&y.business_description&&(S=2),y.logo_url&&(S=3),y.operating_hours&&(S=4),l(S)}},[y,t]);const M=oe({mutationFn:S=>T5({token:r,updates:S}),onSuccess:S=>{s.invalidateQueries({queryKey:["currentSupplier"]}),p($=>({...$,...S}))},onError:S=>{console.error("Failed to update supplier:",S),u($=>{var I,K;return{...$,api:((K=(I=S.response)==null?void 0:I.data)==null?void 0:K.message)||"Failed to update profile. Please try again."}})}}),E=oe({mutationFn:S=>E5({token:r,product:S}),onSuccess:()=>{k({category_id:"",sku:"",product_name:"",description:"",price_per_unit:0,unit_of_measure:"",stock_quantity:0})},onError:S=>{console.error("Failed to create product:",S),u($=>{var I,K;return{...$,product:((K=(I=S.response)==null?void 0:I.data)==null?void 0:K.message)||"Failed to create product. Please try again."}})}});_.useEffect(()=>{const $=i/7*100;d(Math.round($))},[i]);const B=()=>{const S={};return(!x.business_name||x.business_name.trim().length<1)&&(S.business_name="Business name is required"),(!x.business_description||x.business_description.trim().length<200)&&(S.business_description="Business description must be at least 200 characters"),x.business_type||(S.business_type="Business type is required"),u(S),Object.keys(S).length===0},A=()=>{const S={};return j.account_holder_name||(S.account_holder_name="Account holder name is required"),j.account_number||(S.account_number="Account number is required"),(!j.routing_number||j.routing_number.length!==9)&&(S.routing_number="Valid 9-digit routing number is required"),j.bank_name||(S.bank_name="Bank name is required"),u(S),Object.keys(S).length===0},L=()=>!0,N=async()=>{u({});let S=!0;if(i===1&&(S=B()),i===5&&(S=A()),i===6&&(S=L()),!!S)try{i===1?await M.mutateAsync({business_name:x.business_name,business_description:x.business_description,business_type:x.business_type}):i===2?await M.mutateAsync({logo_url:x.logo_url,cover_photo_url:x.cover_photo_url}):i===3&&await M.mutateAsync({operating_hours:x.operating_hours,service_areas:x.service_areas,return_policy:x.return_policy,shipping_policy:x.shipping_policy,minimum_order_value:x.minimum_order_value}),l($=>Math.min($+1,7))}catch($){console.error("Failed to save step:",$)}},R=()=>{l(S=>Math.max(S-1,1)),u({})},O=async()=>{try{await M.mutateAsync({onboarding_completed:!0}),t("/supplier/dashboard")}catch(S){console.error("Failed to complete onboarding:",S),u({complete:"Failed to complete onboarding. Please try again."})}},T=async()=>{const S={};if(f.category_id||(S.category_id="Category is required"),f.sku||(S.sku="SKU is required"),f.product_name||(S.product_name="Product name is required"),f.price_per_unit<=0&&(S.price_per_unit="Price must be greater than 0"),f.unit_of_measure||(S.unit_of_measure="Unit of measure is required"),Object.keys(S).length>0){u(S);return}try{await E.mutateAsync(f),C($=>[...$,f]),u({})}catch($){console.error("Failed to add product:",$)}},g=S=>({1:"Business Profile",2:"Logo & Branding",3:"Operating Details",4:"Verification Documents",5:"Bank Account Setup",6:"Initial Product Catalog",7:"Review & Complete"})[S]||"",D=S=>{const I={1:kr,2:os,3:Me,4:Me,5:es,6:ve,7:he}[S]||kr;return e.jsx(I,{className:"w-6 h-6"})};return F?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your profile..."})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Supplier Onboarding"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Set up your shop to start selling on BuildEasy"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[o,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:[1,2,3,4,5,6,7].map(S=>e.jsxs("div",{className:`flex items-center ${S===i?"text-blue-600 font-semibold":S<i?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${S===i?"bg-blue-600 text-white":S<i?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:S<i?"":S}),S<7&&e.jsx("div",{className:`w-12 h-1 mx-2 ${S<i?"bg-green-600":"bg-gray-200"}`})]},S))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",i," of 7: ",e.jsx("span",{className:"font-semibold",children:g(i)})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[i===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(1),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Business Profile"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"business_name",value:x.business_name,onChange:S=>{p($=>({...$,business_name:S.target.value})),u($=>({...$,business_name:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.business_name?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"e.g., Acme Building Supply Co."}),c.business_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.business_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"business_type",value:x.business_type,onChange:S=>{p($=>({...$,business_type:S.target.value})),u($=>({...$,business_type:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.business_type?"border-red-500":"border-gray-200 focus:border-blue-500"}`,children:[e.jsx("option",{value:"",children:"Select business type"}),e.jsx("option",{value:"Corporation",children:"Corporation"}),e.jsx("option",{value:"LLC",children:"LLC"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"})]}),c.business_type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.business_type})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"business_description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Description ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",x.business_description.length,"/2000 characters, min 200)"]})]}),e.jsx("textarea",{id:"business_description",rows:6,value:x.business_description,onChange:S=>{p($=>({...$,business_description:S.target.value})),u($=>({...$,business_description:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.business_description?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"Describe your business, what you specialize in, your service area, and what makes you unique..."}),c.business_description&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.business_description}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Tell buyers about your business, your experience, and what sets you apart."})]})]}),i===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(2),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Logo & Branding"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Optional:"})," Add your logo and cover photo now, or skip and add them later from your settings."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:x.logo_url?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:x.logo_url,alt:"Business logo",className:"w-32 h-32 object-cover rounded-full mx-auto border-4 border-white shadow-lg"}),e.jsx("button",{type:"button",onClick:()=>p(S=>({...S,logo_url:null})),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove Logo"})]}):e.jsxs("div",{children:[e.jsx(os,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Upload your business logo"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Square format recommended, max 2MB"}),e.jsx("button",{type:"button",onClick:()=>{p(S=>({...S,logo_url:"https://via.placeholder.com/200"}))},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Choose File"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Photo (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:x.cover_photo_url?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:x.cover_photo_url,alt:"Cover photo",className:"w-full h-48 object-cover rounded-lg shadow-lg"}),e.jsx("button",{type:"button",onClick:()=>p(S=>({...S,cover_photo_url:null})),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove Cover Photo"})]}):e.jsxs("div",{children:[e.jsx(os,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Upload a cover photo for your shop"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Wide format (1200x300 recommended), max 5MB"}),e.jsx("button",{type:"button",onClick:()=>{p(S=>({...S,cover_photo_url:"https://via.placeholder.com/1200x300"}))},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Choose File"})]})})]})]}),i===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(3),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Operating Details"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"return_policy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Return Policy (Optional)"}),e.jsx("textarea",{id:"return_policy",rows:4,value:x.return_policy||"",onChange:S=>p($=>({...$,return_policy:S.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500",placeholder:"Describe your return policy, e.g., 'Returns accepted within 30 days with receipt...'"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shipping_policy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Policy (Optional)"}),e.jsx("textarea",{id:"shipping_policy",rows:4,value:x.shipping_policy||"",onChange:S=>p($=>({...$,shipping_policy:S.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500",placeholder:"Describe your shipping policy, e.g., 'Free delivery on orders over $500...'"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"minimum_order_value",min:"0",step:"0.01",value:x.minimum_order_value||"",onChange:S=>p($=>({...$,minimum_order_value:S.target.value?parseFloat(S.target.value):null})),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500",placeholder:"0.00"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Set a minimum order value if required for your business"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payout_frequency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Payout Frequency"}),e.jsxs("select",{id:"payout_frequency",value:x.payout_frequency,onChange:S=>p($=>({...$,payout_frequency:S.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi-weekly",children:"Bi-weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"How often you'd like to receive payouts for completed orders"})]})]}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(4),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Verification Documents"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"Required for verification:"})," Upload your business registration and tax documents. These will be reviewed by our team within 2-3 business days."]})}),["business_registration","tax_id","proof_of_address","business_license","insurance_certificate"].map(S=>{const $={business_registration:"Business Registration Document",tax_id:"Tax ID / EIN Document",proof_of_address:"Proof of Business Address",business_license:"Business License",insurance_certificate:"Insurance Certificate"},I=["business_registration","tax_id"].includes(S);return e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[$[S]," ",I&&e.jsx("span",{className:"text-red-500",children:"*"})]}),b[S]?e.jsx("p",{className:"text-sm text-green-600 mt-1",children:" Uploaded"}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Not uploaded"})]}),e.jsx("button",{type:"button",onClick:()=>{v(K=>({...K,[S]:`https://example.com/docs/${S}_${Date.now()}.pdf`}))},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:b[S]?"Replace":"Upload"})]})},S)}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Note:"})," Accepted formats: PDF, JPG, PNG. Max file size: 10MB per document."]})})]}),i===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(5),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bank Account Setup"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"Secure:"})," Your bank information is encrypted and stored securely. This is required to receive payouts for your sales."]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"account_holder_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Holder Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"account_holder_name",value:j.account_holder_name,onChange:S=>{P($=>({...$,account_holder_name:S.target.value})),u($=>({...$,account_holder_name:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.account_holder_name?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"Full name on bank account"}),c.account_holder_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.account_holder_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bank_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Bank Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"bank_name",value:j.bank_name,onChange:S=>{P($=>({...$,bank_name:S.target.value})),u($=>({...$,bank_name:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.bank_name?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"e.g., Chase Bank, Bank of America"}),c.bank_name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.bank_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"routing_number",className:"block text-sm font-medium text-gray-700 mb-2",children:["Routing Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"routing_number",maxLength:9,value:j.routing_number,onChange:S=>{const $=S.target.value.replace(/\D/g,"");P(I=>({...I,routing_number:$})),u(I=>({...I,routing_number:""}))},className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.routing_number?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"9-digit routing number"}),c.routing_number&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.routing_number})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"account_number",className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",id:"account_number",value:j.account_number,onChange:S=>{P($=>({...$,account_number:S.target.value})),u($=>({...$,account_number:""}))},className:`w-full px-4 py-3 pr-12 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${c.account_number?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"Bank account number"}),e.jsx("button",{type:"button",onClick:()=>h(!m),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:m?e.jsx(Oa,{className:"w-5 h-5"}):e.jsx(xt,{className:"w-5 h-5"})})]}),c.account_number&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c.account_number})]})]}),i===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(6),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Initial Product Catalog"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Get started:"})," Add a few products to get your catalog started. You can add more products later from your dashboard."]})}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:"Add a Product"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"product_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"product_name",value:f.product_name,onChange:S=>{k($=>({...$,product_name:S.target.value})),u($=>({...$,product_name:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 ${c.product_name?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"e.g., 2x4x8 SPF Lumber"}),c.product_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.product_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:["SKU ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"sku",value:f.sku,onChange:S=>{k($=>({...$,sku:S.target.value.toUpperCase()})),u($=>({...$,sku:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 ${c.sku?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"e.g., LUM-2X4-8-SPF"}),c.sku&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.sku})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category_id",className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category_id",value:f.category_id,onChange:S=>{k($=>({...$,category_id:S.target.value})),u($=>({...$,category_id:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 ${c.category_id?"border-red-500":"border-gray-200 focus:border-blue-500"}`,children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"cat_001",children:"Concrete & Cement"}),e.jsx("option",{value:"cat_002",children:"Lumber & Wood"}),e.jsx("option",{value:"cat_003",children:"Steel & Metal"}),e.jsx("option",{value:"cat_004",children:"Bricks & Blocks"}),e.jsx("option",{value:"cat_005",children:"Roofing Materials"})]}),c.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:f.description,onChange:S=>k($=>({...$,description:S.target.value})),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500",placeholder:"Product description..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price_per_unit",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"price_per_unit",min:"0",step:"0.01",value:f.price_per_unit||"",onChange:S=>{k($=>({...$,price_per_unit:parseFloat(S.target.value)||0})),u($=>({...$,price_per_unit:""}))},className:`w-full pl-8 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 ${c.price_per_unit?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"0.00"})]}),c.price_per_unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.price_per_unit})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"unit_of_measure",className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"unit_of_measure",value:f.unit_of_measure,onChange:S=>{k($=>({...$,unit_of_measure:S.target.value})),u($=>({...$,unit_of_measure:""}))},className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 ${c.unit_of_measure?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"e.g., piece, bag, yard"}),c.unit_of_measure&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.unit_of_measure})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity"}),e.jsx("input",{type:"number",id:"stock_quantity",min:"0",value:f.stock_quantity,onChange:S=>k($=>({...$,stock_quantity:parseInt(S.target.value)||0})),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500",placeholder:"0"})]})]}),e.jsx("button",{type:"button",onClick:T,disabled:E.isPending,className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?"Adding Product...":"+ Add Product"}),c.product&&e.jsx("p",{className:"text-sm text-red-600",children:c.product})]}),w.length>0&&e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4",children:["Products Added (",w.length,")"]}),e.jsx("div",{className:"space-y-3",children:w.map((S,$)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:S.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",S.sku,"  $",Number(S.price_per_unit||0).toFixed(2),"/",S.unit_of_measure,"  Stock: ",S.stock_quantity]})]}),e.jsx("button",{type:"button",onClick:()=>C(I=>I.filter((K,U)=>U!==$)),className:"text-red-600 hover:text-red-700",children:e.jsx(ge,{className:"w-5 h-5"})})]},$))})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:"You can add more products later from your dashboard. Having at least one product helps you get started!"})})]}),i===7&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[D(7),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Complete"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-900 font-semibold",children:"Almost there!"}),e.jsx("p",{className:"text-green-800 text-sm mt-1",children:"Review your information below and complete your onboarding to start selling."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Business Profile"}),e.jsx("button",{type:"button",onClick:()=>l(1),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Business Name:"})," ",e.jsx("span",{className:"font-medium",children:x.business_name})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Business Type:"})," ",e.jsx("span",{className:"font-medium",children:x.business_type})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Description:"})," ",e.jsxs("span",{className:"font-medium",children:[x.business_description.substring(0,100),"..."]})]})]})]}),(x.logo_url||x.cover_photo_url)&&e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Logo & Branding"}),e.jsx("button",{type:"button",onClick:()=>l(2),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[x.logo_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Logo"}),e.jsx("img",{src:x.logo_url,alt:"Logo",className:"w-16 h-16 rounded-lg object-cover border-2 border-gray-200"})]}),x.cover_photo_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Cover Photo"}),e.jsx("img",{src:x.cover_photo_url,alt:"Cover",className:"w-32 h-16 rounded-lg object-cover border-2 border-gray-200"})]})]})]}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bank Account"}),e.jsx("button",{type:"button",onClick:()=>l(5),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Account Holder:"})," ",e.jsx("span",{className:"font-medium",children:j.account_holder_name||"Not set"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Bank:"})," ",e.jsx("span",{className:"font-medium",children:j.bank_name||"Not set"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-600",children:"Payout Frequency:"})," ",e.jsx("span",{className:"font-medium capitalize",children:x.payout_frequency})]})]})]}),w.length>0&&e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Initial Catalog"}),e.jsx("button",{type:"button",onClick:()=>l(6),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.length," product",w.length!==1?"s":""," added"]})]})]}),e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-6 bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"terms_acceptance",className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",required:!0}),e.jsxs("label",{htmlFor:"terms_acceptance",className:"text-sm text-gray-700",children:["I agree to the ",e.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-600 hover:underline",children:"Supplier Agreement"}),", ",e.jsx("a",{href:"/terms",target:"_blank",className:"text-blue-600 hover:underline",children:"Terms of Service"}),", and ",e.jsx("a",{href:"/privacy",target:"_blank",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]})}),e.jsx("button",{type:"button",onClick:O,disabled:M.isPending,className:"w-full bg-green-600 text-white px-6 py-4 rounded-lg hover:bg-green-700 transition-colors text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:M.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Completing Setup..."]}):" Complete Onboarding & Start Selling"}),c.complete&&e.jsx("p",{className:"text-sm text-red-600 text-center",children:c.complete})]}),c.api&&e.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:c.api})})]}),i<7&&e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{type:"button",onClick:R,disabled:i===1,className:"flex items-center space-x-2 px-6 py-3 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Rt,{className:"w-5 h-5"}),e.jsx("span",{children:"Previous"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{console.log("Progress saved")},className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"Save & Continue Later"})}),e.jsxs("button",{type:"button",onClick:N,disabled:M.isPending,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:M.isPending?"Saving...":"Save & Continue"}),e.jsx(Ie,{className:"w-5 h-5"})]})]})})]})})})},al=(t,s=2)=>{const r=Number(t);return isNaN(r)||!isFinite(r)||t===null||t===void 0?"0."+"0".repeat(s):r.toFixed(s)},An=(t,s)=>{const r=Number(t);return isNaN(r)||!isFinite(r)||t===null||t===void 0?"0.00":r.toLocaleString("en-US",s)},Ko="https://123create-construction-app-with-a.launchpulse.ai/api",M5=async t=>{var s;try{console.log("[SupplierDashboard] Fetching supplier profile...");const r=await G.get(`${Ko}/suppliers/me`,{headers:{Authorization:`Bearer ${t}`}});return console.log("[SupplierDashboard] Supplier profile loaded successfully:",r.data),r.data}catch(r){throw console.error("[SupplierDashboard] Failed to fetch supplier profile:",((s=r.response)==null?void 0:s.data)||r.message),r}},R5=async(t,s)=>((await G.get(`${Ko}/orders`,{params:{status_filter:"pending",limit:10},headers:{Authorization:`Bearer ${t}`}})).data.orders||[]).filter(n=>{var i;return(i=n.items)==null?void 0:i.some(l=>l.supplier_id===s)}),D5=async t=>((await G.get(`${Ko}/suppliers/me/products`,{params:{status_filter:"active"},headers:{Authorization:`Bearer ${t}`}})).data.products||[]).filter(a=>a.stock_quantity<=a.low_stock_threshold),L5=async(t,s)=>{await G.patch(`${Ko}/orders/${t}`,{status:"processing"},{headers:{Authorization:`Bearer ${s}`}})},I5=()=>{const t=Pe(),s=re(k=>k.authentication_state.supplier_profile),r=re(k=>k.authentication_state.auth_token),a=re(k=>k.authentication_state.authentication_status.is_authenticated),n=re(k=>k.authentication_state.authentication_status.is_loading),i=re(k=>k.authentication_state.authentication_status.user_type),l=(s==null?void 0:s.supplier_id)||"",{data:o,isLoading:d,error:c}=ne({queryKey:["supplier","profile",l],queryFn:()=>M5(r),enabled:!!r&&!!a&&i==="supplier"&&!!l,staleTime:5*60*1e3,retry:1}),{data:u=[],isLoading:m,error:h}=ne({queryKey:["supplier","orders","pending",l],queryFn:()=>R5(r,l),enabled:!!r&&!!l,staleTime:30*1e3,refetchInterval:60*1e3,retry:1}),{data:x=[],isLoading:p,error:b}=ne({queryKey:["supplier","products","low-stock",l],queryFn:()=>D5(r),enabled:!!r&&!!l,staleTime:2*60*1e3,retry:1}),v=oe({mutationFn:k=>L5(k,r),onSuccess:()=>{t.invalidateQueries({queryKey:["supplier","orders","pending"]})},onError:k=>{console.error("Failed to accept order:",k)}}),j=_.useMemo(()=>x.map(k=>({product_id:k.product_id,product_name:k.product_name,sku:k.sku,stock_quantity:k.stock_quantity,low_stock_threshold:k.low_stock_threshold,suggested_reorder_quantity:Math.max(k.low_stock_threshold*2,Math.ceil(k.sales_count/30*7))})),[x]),P=_.useMemo(()=>u.map(k=>{var M;const y=((M=k.items)==null?void 0:M.filter(E=>E.supplier_id===l))||[],F=Math.floor((Date.now()-new Date(k.order_date).getTime())/(1e3*60*60));return{order_id:k.order_id,order_number:k.order_number,customer_name:`Customer ${k.customer_id.slice(0,8)}`,order_date:k.order_date,total_amount:k.total_amount,items_count:y.length,time_elapsed_hours:F}}),[u,l]),w=_.useMemo(()=>{const k=Number(o==null?void 0:o.total_sales)||0,y=Number(o==null?void 0:o.total_orders)||0;return{sales:{today:0,this_week:0,this_month:0,year_to_date:k},orders:{today:0,this_week:0,this_month:0,pending_acceptance:P.length},average_order_value:y>0?k/y:0}},[o,P]),C=d||m||p,f=k=>{window.confirm("Accept this order? This will move it to processing status.")&&v.mutate(k)};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Initializing..."})]})}):a&&i==="supplier"&&!l&&!d&&!n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Ve,{className:"mx-auto h-16 w-16 text-red-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Supplier Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your supplier profile could not be loaded. This may be because your supplier application is still pending approval, or there was an error during account setup. Please contact support for assistance."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Refresh Page"}),e.jsx(Q,{to:"/",onClick:()=>{re.getState().logout_user()},className:"block w-full bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Return to Home"})]})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:["Welcome back, ",(o==null?void 0:o.business_name)||(s==null?void 0:s.business_name)||"Supplier"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(o==null?void 0:o.verification_status)==="verified"&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 px-4 py-2 rounded-lg",children:[e.jsx(he,{className:"size-5 text-green-600"}),e.jsx("span",{className:"text-green-700 font-medium text-sm",children:"Verified Supplier"})]})]})}),C&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading dashboard..."})]})}),!C&&(c||h||b)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ve,{className:"size-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-900 font-semibold",children:"Error loading dashboard"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:(c==null?void 0:c.message)||(h==null?void 0:h.message)||(b==null?void 0:b.message)||"Please try refreshing the page"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 text-sm font-medium text-red-600 hover:text-red-700 underline",children:"Refresh Dashboard"})]})]})}),!C&&!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Te,{className:"size-6 text-green-600"})}),e.jsx("span",{className:"text-green-600 text-sm font-medium",children:"+0%"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Sales Today"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",An(w.sales.today,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["YTD: $",An(w.sales.year_to_date)]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Be,{className:"size-6 text-blue-600"})}),e.jsx("span",{className:"text-blue-600 text-sm font-medium",children:"Active"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Orders Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w.orders.today}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Total: ",(o==null?void 0:o.total_orders)||0," orders"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:e.jsx(He,{className:"size-6 text-amber-600"})}),w.orders.pending_acceptance>0&&e.jsx("span",{className:"bg-amber-100 text-amber-700 text-xs font-semibold px-2 py-1 rounded-full",children:"Action Required"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Pending Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w.orders.pending_acceptance}),e.jsx(Q,{to:"/supplier/orders?status_filter=pending",className:"text-blue-600 hover:text-blue-700 text-xs mt-2 inline-block font-medium",children:"View all pending "})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(Re,{className:"size-6 text-purple-600"})})}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Avg Order Value"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",An(w.average_order_value,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Per transaction"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(Q,{to:"/supplier/products/add",className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg group-hover:bg-blue-200 transition-colors",children:e.jsx(ve,{className:"size-5 text-blue-600"})}),e.jsx("span",{className:"text-gray-700 font-medium group-hover:text-blue-600 transition-colors",children:"Add New Product"})]})}),e.jsx(Q,{to:"/supplier/orders",className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg group-hover:bg-green-200 transition-colors",children:e.jsx(Be,{className:"size-5 text-green-600"})}),e.jsx("span",{className:"text-gray-700 font-medium group-hover:text-green-600 transition-colors",children:"View All Orders"})]})}),e.jsx(Q,{to:"/supplier/inventory",className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-lg group-hover:bg-amber-200 transition-colors",children:e.jsx(gw,{className:"size-5 text-amber-600"})}),e.jsx("span",{className:"text-gray-700 font-medium group-hover:text-amber-600 transition-colors",children:"Manage Inventory"})]})}),e.jsx(Q,{to:"/supplier/analytics",className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:e.jsx(zs,{className:"size-5 text-purple-600"})}),e.jsx("span",{className:"text-gray-700 font-medium group-hover:text-purple-600 transition-colors",children:"View Analytics"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[e.jsx(He,{className:"size-6"}),e.jsx("span",{children:"Pending Orders"})]}),w.orders.pending_acceptance>0&&e.jsxs("span",{className:"bg-white text-blue-700 text-sm font-semibold px-3 py-1 rounded-full",children:[w.orders.pending_acceptance," need action"]})]})}),e.jsxs("div",{className:"p-6",children:[m&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Loading orders..."})]}),!m&&P.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"size-12 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-gray-900 font-semibold mb-1",children:"All caught up!"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"No pending orders at the moment"})]}),!m&&P.length>0&&e.jsxs("div",{className:"space-y-4",children:[P.map(k=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:k.order_number}),e.jsx("p",{className:"text-sm text-gray-600",children:k.customer_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",al(k.total_amount,2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[k.items_count," item",k.items_count!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(He,{className:"size-4"}),e.jsxs("span",{children:[k.time_elapsed_hours,"h ago"]})]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:new Date(k.order_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{to:`/supplier/orders/${k.order_id}`,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>f(k.order_id),disabled:v.isPending,className:"px-4 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v.isPending?"Accepting...":"Accept"})]})]})]},k.order_id)),P.length>=5&&e.jsx(Q,{to:"/supplier/orders?status_filter=pending",className:"block text-center text-blue-600 hover:text-blue-700 font-medium text-sm py-2",children:"View all pending orders "})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[e.jsx(At,{className:"size-6"}),e.jsx("span",{children:"Low Stock Alerts"})]}),j.length>0&&e.jsxs("span",{className:"bg-white text-orange-700 text-sm font-semibold px-3 py-1 rounded-full",children:[j.length," alert",j.length!==1?"s":""]})]})}),e.jsxs("div",{className:"p-6",children:[p&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Checking inventory..."})]}),!p&&j.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"size-12 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-gray-900 font-semibold mb-1",children:"Inventory looks good!"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"All products are adequately stocked"})]}),!p&&j.length>0&&e.jsxs("div",{className:"space-y-3",children:[j.slice(0,5).map(k=>e.jsx("div",{className:"border border-amber-200 bg-amber-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:k.product_name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["SKU: ",k.sku]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-red-600 font-semibold",children:[k.stock_quantity," units left"]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsxs("span",{className:"text-gray-600",children:["Threshold: ",k.low_stock_threshold]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-1 rounded mb-2",children:["Reorder: ",k.suggested_reorder_quantity]}),e.jsx(Q,{to:`/supplier/products/${k.product_id}/edit`,className:"text-blue-600 hover:text-blue-700 text-xs font-medium",children:"Update Stock"})]})]})},k.product_id)),e.jsx(Q,{to:"/supplier/inventory?low_stock_only=true",className:"block text-center text-amber-600 hover:text-amber-700 font-medium text-sm py-2",children:"View all low stock items "})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center space-x-2",children:[e.jsx(Oe,{className:"size-5 text-yellow-500"}),e.jsx("span",{children:"Performance"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rating"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"size-4 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"font-bold text-gray-900",children:al(o==null?void 0:o.rating_average,1)})]})]}),e.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-yellow-500 h-full rounded-full",style:{width:`${Math.min(100,Math.max(0,Number((o==null?void 0:o.rating_average)||0)/5*100))}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(o==null?void 0:o.total_reviews)||0," reviews"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Fulfillment Rate"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[al(o==null?void 0:o.fulfillment_rate,1),"%"]})]}),e.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full rounded-full",style:{width:`${Math.min(100,Math.max(0,Number((o==null?void 0:o.fulfillment_rate)||0)))}%`}})})]}),(o==null?void 0:o.response_time_average)!==null&&(o==null?void 0:o.response_time_average)!==void 0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[al(o.response_time_average,1),"h"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Faster responses improve customer satisfaction"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["$",An((o==null?void 0:o.total_sales)||0)]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("span",{className:"font-bold text-gray-900",children:An((o==null?void 0:o.total_orders)||0)})]})})]}),e.jsx(Q,{to:"/supplier/analytics",className:"mt-6 block w-full text-center bg-blue-50 text-blue-600 hover:bg-blue-100 font-medium py-2 rounded-lg transition-colors text-sm",children:"View Detailed Analytics"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tasks"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Orders to fulfill"}),e.jsx("span",{className:"bg-amber-600 text-white text-xs font-bold px-2 py-1 rounded-full",children:w.orders.pending_acceptance})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Items to restock"}),e.jsx("span",{className:"bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full",children:j.length})]}),e.jsxs(Q,{to:"/supplier/reviews",className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Reviews to respond"}),e.jsx("span",{className:"bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full",children:"0"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(Q,{to:"/supplier/messages",className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group",children:[e.jsx(ct,{className:"size-5 text-gray-600 group-hover:text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-600",children:"Messages"})]}),e.jsxs(Q,{to:"/supplier/settings",className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group",children:[e.jsx(Vt,{className:"size-5 text-gray-600 group-hover:text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-600",children:"Settings"})]}),e.jsxs(Q,{to:"/supplier/pricing",className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group",children:[e.jsx(Te,{className:"size-5 text-gray-600 group-hover:text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-600",children:"Pricing"})]}),e.jsxs(Q,{to:"/supplier/financials",className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group",children:[e.jsx(Re,{className:"size-5 text-gray-600 group-hover:text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-600",children:"Financials"})]})]})]})]})]})]})]})})})},q5=async(t,s,r,a,n)=>{const i=(a-1)*n,l=new URLSearchParams;s.status&&l.append("status_filter",s.status),s.category_id&&l.append("category_filter",s.category_id),s.search_query&&l.append("search_query",s.search_query),l.append("sort_by",r.sort_by),l.append("limit",n.toString()),l.append("offset",i.toString());const o=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products?${l.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{products:o.data.products.map(d=>{var c;return{product_id:d.product_id,sku:d.sku,product_name:d.product_name,category_id:d.category_id,category_name:((c=d.category)==null?void 0:c.category_name)||"Unknown",price_per_unit:Number(d.price_per_unit||0),stock_quantity:Number(d.stock_quantity||0),status:d.status,is_featured:d.is_featured,views_count:Number(d.views_count||0),sales_count:Number(d.sales_count||0),last_updated_timestamp:d.last_updated_timestamp,primary_image_url:d.primary_image_url}}),pagination:{current_page:Math.floor(o.data.offset/o.data.limit)+1,total_pages:Math.ceil(o.data.total/o.data.limit),total_count:o.data.total,limit:o.data.limit}}},Wh=async(t,s,r)=>{await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${s}`,{status:r},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},B5=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories?is_active=true")).data;function U5(){var D;const t=re(S=>S.authentication_state.auth_token),[s,r]=Fe(),[a,n]=_.useState({status:s.get("status_filter"),category_id:s.get("category_filter"),search_query:s.get("search_query")}),[i,l]=_.useState({sort_by:s.get("sort_by")||"created_at",sort_order:"desc"}),[o,d]=_.useState(parseInt(s.get("page")||"1")),[c,u]=_.useState([]),[m,h]=_.useState(a.search_query||""),[x,p]=_.useState(!1),b=24,v=Pe(),{data:j,isLoading:P,error:w}=ne({queryKey:["supplier-products",a,i,o],queryFn:()=>q5(t,a,i,o,b),enabled:!!t,staleTime:6e4,retry:1}),{data:C}=ne({queryKey:["categories"],queryFn:B5,staleTime:3e5,retry:1}),f=oe({mutationFn:({productId:S,status:$})=>Wh(t,S,$),onSuccess:()=>{v.invalidateQueries({queryKey:["supplier-products"]})}}),k=_.useMemo(()=>(j==null?void 0:j.products)||[],[j]),y=(j==null?void 0:j.pagination)||{current_page:1,total_pages:1,total_count:0},F=c.length>0&&c.length===k.length,M=c.length>0&&c.length<k.length;_.useEffect(()=>{const S=new URLSearchParams;a.status&&S.set("status_filter",a.status),a.category_id&&S.set("category_filter",a.category_id),a.search_query&&S.set("search_query",a.search_query),i.sort_by!=="created_at"&&S.set("sort_by",i.sort_by),o>1&&S.set("page",o.toString()),r(S,{replace:!0})},[a,i,o,r]),_.useEffect(()=>{const S=setTimeout(()=>{m!==a.search_query&&(n($=>({...$,search_query:m||null})),d(1))},500);return()=>clearTimeout(S)},[m,a.search_query]);const E=_.useCallback((S,$)=>{n(I=>({...I,[S]:$})),d(1)},[]),B=_.useCallback(S=>{l($=>$.sort_by===S?{...$,sort_order:$.sort_order==="asc"?"desc":"asc"}:{sort_by:S,sort_order:"desc"})},[]),A=_.useCallback(()=>{u(F?[]:k.map(S=>S.product_id))},[F,k]),L=_.useCallback(S=>{u($=>$.includes(S)?$.filter(I=>I!==S):[...$,S])},[]),N=async(S,$)=>{try{await f.mutateAsync({productId:S,status:$})}catch(I){console.error("Failed to update product status:",I)}},R=()=>{n({status:null,category_id:null,search_query:null}),h(""),d(1)},O=async S=>{p(!0);try{await Promise.all(c.map($=>Wh(t,$,S))),v.invalidateQueries({queryKey:["supplier-products"]}),u([])}catch($){console.error("Bulk update failed:",$)}finally{p(!1)}},T=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"out_of_stock":return"bg-red-100 text-red-800";case"discontinued":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},g=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Catalog"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your product listings, inventory, and performance"})]}),e.jsxs(Q,{to:"/supplier/products/add",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Add Product"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"search",type:"text",value:m,onChange:S=>h(S.target.value),placeholder:"Search by name or SKU...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{id:"status-filter",value:a.status||"",onChange:S=>E("status",S.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category-filter",value:a.category_id||"",onChange:S=>E("category_id",S.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Categories"}),C==null?void 0:C.map(S=>e.jsx("option",{value:S.category_id,children:S.category_name},S.category_id))]})]})]}),(a.status||a.category_id||a.search_query)&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Active filters:"}),a.status&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:["Status: ",a.status,e.jsx("button",{onClick:()=>E("status",null),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),a.category_id&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:["Category: ",(D=C==null?void 0:C.find(S=>S.category_id===a.category_id))==null?void 0:D.category_name,e.jsx("button",{onClick:()=>E("category_id",null),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),a.search_query&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:['Search: "',a.search_query,'"',e.jsx("button",{onClick:()=>{E("search_query",null),h("")},className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:R,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]})]}),c.length>0&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.length," product",c.length!==1?"s":""," selected"]}),e.jsx("button",{onClick:()=>u([]),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Clear selection"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Bulk actions:"}),e.jsxs("select",{onChange:S=>{S.target.value&&(O(S.target.value),S.target.value="")},disabled:x,className:"px-4 py-2 border-2 border-gray-200 rounded-lg text-sm font-medium focus:border-blue-500 focus:ring-4 focus:ring-blue-100 disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Update Status..."}),e.jsx("option",{value:"active",children:"Set Active"}),e.jsx("option",{value:"inactive",children:"Set Inactive"}),e.jsx("option",{value:"discontinued",children:"Mark Discontinued"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-600"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[y.total_count," Products"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs("select",{value:i.sort_by,onChange:S=>B(S.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"created_at",children:"Date Added"}),e.jsx("option",{value:"product_name",children:"Name"}),e.jsx("option",{value:"sales_count",children:"Sales"}),e.jsx("option",{value:"views_count",children:"Views"}),e.jsx("option",{value:"price_per_unit",children:"Price"}),e.jsx("option",{value:"stock_quantity",children:"Stock"})]})]})]})}),P&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading products..."})]})}),w&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-900",children:"Failed to load products"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:G.isAxiosError(w)?w.message:"An unexpected error occurred"})]})]})})}),!P&&!w&&k.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:a.status||a.category_id||a.search_query?"Try adjusting your filters":"Start by adding your first product"}),!a.status&&!a.category_id&&!a.search_query&&e.jsxs(Q,{to:"/supplier/products/add",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-all",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Add Your First Product"]})]}),!P&&!w&&k.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:F,ref:S=>{S&&(S.indeterminate=M)},onChange:A,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:c.includes(S.product_id),onChange:()=>L(S.product_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:S.primary_image_url?e.jsx("img",{src:S.primary_image_url,alt:S.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Zn,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(Q,{to:`/supplier/products/${S.product_id}/edit`,className:"text-sm font-medium text-gray-900 hover:text-blue-600 line-clamp-1",children:S.product_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["SKU: ",S.sku]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:S.category_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:g(S.price_per_unit)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-sm font-medium ${S.stock_quantity===0?"text-red-600":S.stock_quantity<10?"text-amber-600":"text-green-600"}`,children:S.stock_quantity}),S.stock_quantity===0&&e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Out"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:S.status,onChange:$=>N(S.product_id,$.target.value),disabled:f.isPending,className:`text-xs font-medium px-3 py-1.5 rounded-full border-0 focus:ring-2 focus:ring-offset-2 ${T(S.status)}`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(xt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:S.views_count})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:S.sales_count})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(Q,{to:`/supplier/products/${S.product_id}/edit`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit product",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{console.warn("Delete endpoint not available - feature pending backend implementation")},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors opacity-50 cursor-not-allowed",title:"Delete not available",disabled:!0,children:e.jsx(_t,{className:"w-4 h-4"})})]})})]},S.product_id))})]})})]}),!P&&!w&&k.length>0&&y.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",y.current_page," of ",y.total_pages,"(",y.total_count," total products)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(S=>Math.max(1,S-1)),disabled:o===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,y.total_pages)},(S,$)=>{let I;return y.total_pages<=5||o<=3?I=$+1:o>=y.total_pages-2?I=y.total_pages-4+$:I=o-2+$,e.jsx("button",{onClick:()=>d(I),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${o===I?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:I},I)})}),e.jsx("button",{onClick:()=>d(S=>Math.min(y.total_pages,S+1)),disabled:o===y.total_pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Next"})]})]}),!P&&!w&&k.length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:k.filter(S=>S.status==="active").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(je,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:k.filter(S=>S.status==="out_of_stock"||S.stock_quantity===0).length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Views"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:k.reduce((S,$)=>S+$.views_count,0).toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(xt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:k.reduce((S,$)=>S+$.sales_count,0).toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Re,{className:"w-6 h-6 text-purple-600"})})]})})]})]})})})}const z5=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:!0},headers:{Authorization:`Bearer ${t}`}})).data,W5=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",s,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,V5=()=>{var te,V;const t=ze(),s=Pe(),r=re(W=>W.authentication_state.auth_token),[a,n]=_.useState({category_id:"",sku:"",product_name:"",description:null,key_features:null,specifications:null,price_per_unit:0,unit_of_measure:"",bulk_pricing:null,cost_price:null,stock_quantity:0,low_stock_threshold:10,expected_restock_date:null,images:null,primary_image_url:null,status:"active",is_featured:!1,tags:null,brand:null,dimensions:null,weight:null,material:null,compliance_certifications:null,warranty_information:null,minimum_order_quantity:1,maximum_order_quantity:null,available_delivery_methods:null,handling_time_days:1,searchable:!0,customer_type_availability:"all"}),[i,l]=_.useState([]),[o,d]=_.useState({}),[c,u]=_.useState(!1),[m,h]=_.useState(!1),[x,p]=_.useState({basic:!1,details:!1,pricing:!1,inventory:!1,images:!1,additional:!0,sales:!0,visibility:!0}),[b,v]=_.useState(""),[j,P]=_.useState(""),[w,C]=_.useState(""),[f,k]=_.useState(""),[y,F]=_.useState(""),[M,E]=_.useState(""),{data:B=[],isLoading:A}=ne({queryKey:["categories","active"],queryFn:()=>z5(r),enabled:!!r,staleTime:10*60*1e3,retry:1}),L=oe({mutationFn:W=>W5(r,W),onSuccess:()=>{s.invalidateQueries({queryKey:["supplier-products"]}),localStorage.removeItem("product_draft"),t("/supplier/products")},onError:W=>{var X,H;((H=(X=W.response)==null?void 0:X.data)==null?void 0:H.error)==="ValidationError"&&d(W.response.data.details||{})}});_.useEffect(()=>{const W=localStorage.getItem("product_draft");if(W)try{const X=JSON.parse(W);n(X.product_form),l(X.uploaded_image_urls||[]),u(!0)}catch(X){console.error("Failed to load draft:",X)}},[]),_.useEffect(()=>{const W=setInterval(()=>{(a.product_name||a.sku)&&(localStorage.setItem("product_draft",JSON.stringify({product_form:a,uploaded_image_urls:i})),u(!0),setTimeout(()=>u(!1),2e3))},3e4);return()=>clearInterval(W)},[a,i]);const N=(W,X)=>{n(H=>({...H,[W]:X})),o[W]&&d(H=>{const ee={...H};return delete ee[W],ee})},R=(W,X)=>{const H=X===""?0:parseFloat(X);N(W,isNaN(H)?0:H)},O=W=>{const X=W.target.files;!X||X.length===0||Array.from(X).forEach(H=>{const ee=new FileReader;ee.onloadend=()=>{const ue=ee.result;l(be=>{const ke=[...be,ue];return a.primary_image_url?n(De=>({...De,images:ke})):n(De=>({...De,primary_image_url:ue,images:ke})),ke})},ee.readAsDataURL(H)})},T=W=>{l(X=>{const H=X.filter(ee=>ee!==W);return n(ee=>({...ee,images:H.length>0?H:null,primary_image_url:ee.primary_image_url===W?H.length>0?H[0]:null:ee.primary_image_url})),H})},g=W=>{n(X=>({...X,primary_image_url:W}))},D=()=>{b.trim()&&(n(W=>({...W,key_features:[...W.key_features||[],b.trim()]})),v(""))},S=W=>{n(X=>({...X,key_features:X.key_features?X.key_features.filter((H,ee)=>ee!==W):null}))},$=()=>{j.trim()&&(n(W=>({...W,tags:[...W.tags||[],j.trim()]})),P(""))},I=W=>{n(X=>({...X,tags:X.tags?X.tags.filter((H,ee)=>ee!==W):null}))},K=()=>{w.trim()&&f.trim()&&(n(W=>({...W,specifications:{...W.specifications,[w.trim()]:f.trim()}})),C(""),k(""))},U=W=>{n(X=>{const H={...X.specifications};return delete H[W],{...X,specifications:Object.keys(H).length>0?H:null}})},q=()=>{y.trim()&&M&&(n(W=>({...W,bulk_pricing:{...W.bulk_pricing,[y.trim()]:parseFloat(M)}})),F(""),E(""))},z=W=>{n(X=>{const H={...X.bulk_pricing};return delete H[W],{...X,bulk_pricing:Object.keys(H).length>0?H:null}})},Y=()=>{const W={};return a.category_id||(W.category_id="Category is required"),a.sku||(W.sku="SKU is required"),a.product_name||(W.product_name="Product name is required"),(!a.price_per_unit||a.price_per_unit<=0)&&(W.price_per_unit="Valid price is required"),a.unit_of_measure||(W.unit_of_measure="Unit of measure is required"),d(W),Object.keys(W).length===0},se=async W=>{if(W.preventDefault(),!Y()){window.scrollTo({top:0,behavior:"smooth"});return}const X={category_id:a.category_id,sku:a.sku,product_name:a.product_name,description:a.description,key_features:a.key_features,specifications:a.specifications,price_per_unit:a.price_per_unit,unit_of_measure:a.unit_of_measure,bulk_pricing:a.bulk_pricing,stock_quantity:a.stock_quantity,low_stock_threshold:a.low_stock_threshold,images:i.length>0?i:null,primary_image_url:a.primary_image_url,brand:a.brand,minimum_order_quantity:a.minimum_order_quantity,handling_time_days:a.handling_time_days};L.mutate(X)},J=W=>{p(X=>({...X,[W]:!X[W]}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(ve,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Product"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create a comprehensive product listing for your catalog"})]})]}),e.jsx(Q,{to:"/supplier/products",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),c&&e.jsxs("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-3 flex items-center space-x-2",children:[e.jsx(je,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Draft saved automatically"})]}),Object.keys(o).length>0&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"}),e.jsx("ul",{className:"mt-2 text-sm text-red-700 space-y-1 list-disc list-inside",children:Object.entries(o).map(([W,X])=>e.jsx("li",{children:X},W))})]})]})})]}),e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-blue-100 hover:to-indigo-100 transition-colors",onClick:()=>J("basic"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:"Required"})]}),x.basic?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.basic&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Category *"}),A?e.jsx("div",{className:"animate-pulse bg-gray-200 h-12 rounded-lg"}):e.jsxs("select",{value:a.category_id,onChange:W=>N("category_id",W.target.value),className:`w-full px-4 py-3 rounded-lg border-2 ${o.category_id?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all`,children:[e.jsx("option",{value:"",children:"Select a category"}),B.map(W=>e.jsx("option",{value:W.category_id,children:W.category_name},W.category_id))]}),o.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.category_id})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"SKU *"}),e.jsx("input",{type:"text",value:a.sku,onChange:W=>N("sku",W.target.value),placeholder:"e.g., LUM-2X4-8-SPF",className:`w-full px-4 py-3 rounded-lg border-2 ${o.sku?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all`}),o.sku&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Brand"}),e.jsx("input",{type:"text",value:a.brand||"",onChange:W=>N("brand",W.target.value||null),placeholder:"e.g., DeWalt, Milwaukee",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Name *"}),e.jsx("input",{type:"text",value:a.product_name,onChange:W=>N("product_name",W.target.value),placeholder:"e.g., 2x4x8 SPF Lumber",className:`w-full px-4 py-3 rounded-lg border-2 ${o.product_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all`}),o.product_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.product_name})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-purple-100 hover:to-pink-100 transition-colors",onClick:()=>J("details"),children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Product Details"}),x.details?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.details&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description||"",onChange:W=>N("description",W.target.value||null),rows:6,placeholder:"Detailed product description...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Key Features"}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",value:b,onChange:W=>v(W.target.value),onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),D()),placeholder:"Add a key feature...",className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(te=a.key_features)==null?void 0:te.map((W,X)=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-3 py-2 flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-blue-900",children:W}),e.jsx("button",{type:"button",onClick:()=>S(X),className:"text-blue-600 hover:text-blue-800",children:e.jsx(ge,{className:"w-4 h-4"})})]},X))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Specifications"}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",value:w,onChange:W=>C(W.target.value),placeholder:"Spec name (e.g., Material)",className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("input",{type:"text",value:f,onChange:W=>k(W.target.value),onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),K()),placeholder:"Value (e.g., Steel)",className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("button",{type:"button",onClick:K,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:e.jsx(dt,{className:"w-5 h-5"})})]}),a.specifications&&Object.keys(a.specifications).length>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:Object.entries(a.specifications).map(([W,X])=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[W,":"]}),e.jsx("span",{className:"text-sm text-gray-600 ml-2",children:String(X)})]}),e.jsx("button",{type:"button",onClick:()=>U(W),className:"text-red-600 hover:text-red-800",children:e.jsx(_t,{className:"w-4 h-4"})})]},W))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tags"}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",value:j,onChange:W=>P(W.target.value),onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),$()),placeholder:"Add a tag...",className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(V=a.tags)==null?void 0:V.map((W,X)=>e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg px-3 py-1 flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["#",W]}),e.jsx("button",{type:"button",onClick:()=>I(X),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ge,{className:"w-3 h-3"})})]},X))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-green-100 hover:to-emerald-100 transition-colors",onClick:()=>J("pricing"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pricing Information"}),e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:"Required"})]}),x.pricing?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.pricing&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Price per Unit *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a.price_per_unit||"",onChange:W=>R("price_per_unit",W.target.value),placeholder:"0.00",className:`w-full pl-8 pr-4 py-3 rounded-lg border-2 ${o.price_per_unit?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all`})]}),o.price_per_unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.price_per_unit})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Unit of Measure *"}),e.jsx("input",{type:"text",value:a.unit_of_measure,onChange:W=>N("unit_of_measure",W.target.value),placeholder:"e.g., piece, bag, box",className:`w-full px-4 py-3 rounded-lg border-2 ${o.unit_of_measure?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 outline-none transition-all`}),o.unit_of_measure&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.unit_of_measure})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cost Price (Your Cost)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a.cost_price||"",onChange:W=>R("cost_price",W.target.value),placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional - for profit margin tracking"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bulk Pricing Tiers"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Offer discounts for larger quantities"}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",value:y,onChange:W=>F(W.target.value),placeholder:"Tier (e.g., 10+, 50+)",className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:M,onChange:W=>E(W.target.value),placeholder:"Price",className:"w-full pl-8 pr-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:e.jsx(dt,{className:"w-5 h-5"})})]}),a.bulk_pricing&&Object.keys(a.bulk_pricing).length>0&&e.jsx("div",{className:"bg-green-50 rounded-lg p-4 space-y-2",children:Object.entries(a.bulk_pricing).map(([W,X])=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-green-200 last:border-0",children:[e.jsxs("span",{className:"text-sm font-medium text-green-900",children:[W," units"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-green-700",children:["$",X.toFixed(2)]}),e.jsx("button",{type:"button",onClick:()=>z(W),className:"text-red-600 hover:text-red-800",children:e.jsx(_t,{className:"w-4 h-4"})})]})]},W))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-amber-100 hover:to-orange-100 transition-colors",onClick:()=>J("inventory"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Rd,{className:"w-5 h-5 text-amber-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Inventory Management"})]}),x.inventory?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.inventory&&e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock Quantity"}),e.jsx("input",{type:"number",min:"0",value:a.stock_quantity||"",onChange:W=>R("stock_quantity",W.target.value),placeholder:"0",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Low Stock Alert"}),e.jsx("input",{type:"number",min:"0",value:a.low_stock_threshold||"",onChange:W=>R("low_stock_threshold",W.target.value),placeholder:"10",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Alert when stock falls below this"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Handling Time (Days)"}),e.jsx("input",{type:"number",min:"1",value:a.handling_time_days||"",onChange:W=>R("handling_time_days",W.target.value),placeholder:"1",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-indigo-100 hover:to-purple-100 transition-colors",onClick:()=>J("images"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zn,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Product Images"})]}),x.images?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.images&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Product Images"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[e.jsx(os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Click to upload"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, WEBP up to 5MB each"})]})]}),i.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Uploaded Images (",i.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.map((W,X)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:W,alt:`Product ${X+1}`,className:`w-full h-32 object-cover rounded-lg border-2 ${a.primary_image_url===W?"border-blue-500 ring-4 ring-blue-100":"border-gray-200"}`}),a.primary_image_url===W&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-md font-medium",children:"Primary"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity rounded-lg flex items-center justify-center space-x-2 opacity-0 group-hover:opacity-100",children:[a.primary_image_url!==W&&e.jsx("button",{type:"button",onClick:()=>g(W),className:"bg-white text-gray-900 px-3 py-1 rounded-md text-xs font-medium hover:bg-gray-100 transition-colors",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>T(W),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 transition-colors",children:e.jsx(_t,{className:"w-4 h-4"})})]})]},X))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-gray-100 hover:to-slate-100 transition-colors",onClick:()=>J("additional"),children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Additional Details"}),x.additional?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.additional&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Weight (lbs)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:a.weight||"",onChange:W=>R("weight",W.target.value),placeholder:"0.00",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Material"}),e.jsx("input",{type:"text",value:a.material||"",onChange:W=>N("material",W.target.value||null),placeholder:"e.g., Steel, Wood, Concrete",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Warranty Information"}),e.jsx("textarea",{value:a.warranty_information||"",onChange:W=>N("warranty_information",W.target.value||null),rows:3,placeholder:"Warranty details...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all resize-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-teal-100 hover:to-cyan-100 transition-colors",onClick:()=>J("sales"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vt,{className:"w-5 h-5 text-teal-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Sales Settings"})]}),x.sales?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.sales&&e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Minimum Order Quantity"}),e.jsx("input",{type:"number",min:"1",value:a.minimum_order_quantity||"",onChange:W=>R("minimum_order_quantity",W.target.value),placeholder:"1",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Maximum Order Quantity"}),e.jsx("input",{type:"number",min:"1",value:a.maximum_order_quantity||"",onChange:W=>R("maximum_order_quantity",W.target.value),placeholder:"No limit",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:from-rose-100 hover:to-pink-100 transition-colors",onClick:()=>J("visibility"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xt,{className:"w-5 h-5 text-rose-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Visibility & Status"})]}),x.visibility?e.jsx(Et,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ss,{className:"w-5 h-5 text-gray-600"})]}),!x.visibility&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Status"}),e.jsxs("select",{value:a.status,onChange:W=>N("status",W.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Available For"}),e.jsxs("select",{value:a.customer_type_availability,onChange:W=>N("customer_type_availability",W.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"retail",children:"Retail Only"}),e.jsx("option",{value:"trade",children:"Trade Only"})]})]})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-lg p-4",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors",children:"Featured Product"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Show in featured sections"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:a.is_featured,onChange:W=>N("is_featured",W.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors",children:"Searchable"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Include in search results"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:a.searchable,onChange:W=>N("searchable",W.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx(Q,{to:"/supplier/products",className:"w-full sm:w-auto px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Cancel"}),e.jsxs("div",{className:"flex flex-col sm:flex-row w-full sm:w-auto space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{type:"button",onClick:()=>h(!0),className:"w-full sm:w-auto px-6 py-3 bg-purple-100 text-purple-700 rounded-lg font-medium hover:bg-purple-200 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{children:"Preview"})]}),e.jsx("button",{type:"submit",disabled:L.isPending,className:"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Publishing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{children:"Publish Product"})]})})]})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Product Preview"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-600 hover:text-gray-900",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[a.primary_image_url?e.jsx("img",{src:a.primary_image_url,alt:a.product_name,className:"w-full h-96 object-cover rounded-lg border-2 border-gray-200"}):e.jsx("div",{className:"w-full h-96 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Zn,{className:"w-16 h-16 text-gray-400"})}),i.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4",children:i.slice(0,4).map((W,X)=>e.jsx("img",{src:W,alt:`Thumbnail ${X+1}`,className:"w-full h-20 object-cover rounded-lg border border-gray-200"},X))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.product_name||"Product Name"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["SKU: ",a.sku||"N/A"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:["$",Number(a.price_per_unit||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["per ",a.unit_of_measure||"unit"]})]}),a.bulk_pricing&&Object.keys(a.bulk_pricing).length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-semibold text-green-900 mb-2",children:"Volume Pricing"}),Object.entries(a.bulk_pricing).map(([W,X])=>e.jsxs("div",{className:"text-xs text-green-700 flex justify-between",children:[e.jsx("span",{children:W}),e.jsxs("span",{className:"font-medium",children:["$",X.toFixed(2),"/unit"]})]},W))]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Stock"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[a.stock_quantity," units available"]})]}),a.key_features&&a.key_features.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Key Features"}),e.jsx("ul",{className:"space-y-1",children:a.key_features.map((W,X)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),W]},X))})]}),a.description&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.description})]})]})]})})]})})]})})})},K5=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${t}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,H5=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:"true"},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,Y5=async(t,s,r)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${t}`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,G5=async(t,s)=>{const r={category_id:t.category_id,sku:`${t.sku}_COPY`,product_name:`${t.product_name} (Copy)`,description:t.description,key_features:t.key_features,specifications:t.specifications,price_per_unit:t.price_per_unit,unit_of_measure:t.unit_of_measure,bulk_pricing:t.bulk_pricing,stock_quantity:0,low_stock_threshold:t.low_stock_threshold,images:t.images,primary_image_url:t.primary_image_url,status:"inactive",brand:t.brand,minimum_order_quantity:t.minimum_order_quantity,handling_time_days:t.handling_time_days,tags:t.tags,weight:t.weight,material:t.material,warranty_information:t.warranty_information,customer_type_availability:t.customer_type_availability};return(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",r,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data},Q5=()=>{var te;const{product_id:t}=ur(),s=ze(),r=Pe(),a=re(V=>V.authentication_state.auth_token),n=re(V=>V.authentication_state.supplier_profile),[i,l]=_.useState(null),[o,d]=_.useState([]),[c,u]=_.useState({}),[m,h]=_.useState(!1),[x,p]=_.useState(!1),[b,v]=_.useState(""),[j,P]=_.useState(""),[w,C]=_.useState(""),[f,k]=_.useState(""),{data:y,isLoading:F,error:M}=ne({queryKey:["product",t],queryFn:()=>K5(t,a),enabled:!!t&&!!a,staleTime:0,retry:1}),{data:E,isLoading:B}=ne({queryKey:["categories","active"],queryFn:()=>H5(a),enabled:!!a,staleTime:5*60*1e3}),A=Array.isArray(E)?E:[],L=oe({mutationFn:V=>Y5(t,V,a),onSuccess:()=>{r.invalidateQueries({queryKey:["product",t]}),r.invalidateQueries({queryKey:["supplier-products"]}),r.invalidateQueries({queryKey:["supplier-inventory"]}),h(!1),d([]),u({}),p(!0),setTimeout(()=>p(!1),3e3)},onError:V=>{var W,X;(X=(W=V.response)==null?void 0:W.data)!=null&&X.errors&&u(V.response.data.errors)}}),N=oe({mutationFn:()=>G5(y,a),onSuccess:V=>{r.invalidateQueries({queryKey:["supplier-products"]}),s(`/supplier/products/${V.product_id}/edit`)}});_.useEffect(()=>{if(y){if(n&&y.supplier_id!==n.supplier_id){alert("Access denied - product does not belong to your shop"),s("/supplier/products");return}l({product_id:y.product_id,category_id:y.category_id,product_name:y.product_name,description:y.description,key_features:y.key_features,specifications:y.specifications,price_per_unit:y.price_per_unit,unit_of_measure:y.unit_of_measure,bulk_pricing:y.bulk_pricing,stock_quantity:y.stock_quantity,low_stock_threshold:y.low_stock_threshold,expected_restock_date:y.expected_restock_date,images:y.images,primary_image_url:y.primary_image_url,status:y.status,is_featured:y.is_featured,tags:y.tags,weight:y.weight,material:y.material,warranty_information:y.warranty_information,minimum_order_quantity:y.minimum_order_quantity,maximum_order_quantity:y.maximum_order_quantity,handling_time_days:y.handling_time_days,searchable:y.searchable,customer_type_availability:y.customer_type_availability})}},[y,n,s]),_.useEffect(()=>{if(!y||!i)return;const V=JSON.stringify(i)!==JSON.stringify({product_id:y.product_id,category_id:y.category_id,product_name:y.product_name,description:y.description,key_features:y.key_features,specifications:y.specifications,price_per_unit:y.price_per_unit,unit_of_measure:y.unit_of_measure,bulk_pricing:y.bulk_pricing,stock_quantity:y.stock_quantity,low_stock_threshold:y.low_stock_threshold,expected_restock_date:y.expected_restock_date,images:y.images,primary_image_url:y.primary_image_url,status:y.status,is_featured:y.is_featured,tags:y.tags,weight:y.weight,material:y.material,warranty_information:y.warranty_information,minimum_order_quantity:y.minimum_order_quantity,maximum_order_quantity:y.maximum_order_quantity,handling_time_days:y.handling_time_days,searchable:y.searchable,customer_type_availability:y.customer_type_availability});h(V)},[i,y]),_.useEffect(()=>{const V=W=>{m&&(W.preventDefault(),W.returnValue="")};return window.addEventListener("beforeunload",V),()=>window.removeEventListener("beforeunload",V)},[m]);const R=_.useCallback((V,W,X)=>{JSON.stringify(W)!==JSON.stringify(X)&&d(H=>[...H,{field_name:V,old_value:W,new_value:X,timestamp:new Date().toISOString()}])},[]),O=_.useCallback((V,W)=>{!i||!y||(l(X=>{if(!X)return X;const H=X[V];return R(V,H,W),{...X,[V]:W}}),u(X=>{const H={...X};return delete H[V],H}))},[i,y,R]),T=async V=>{if(V.preventDefault(),!i)return;const W={};i.category_id!==(y==null?void 0:y.category_id)&&(W.category_id=i.category_id),i.product_name!==(y==null?void 0:y.product_name)&&(W.product_name=i.product_name),i.description!==(y==null?void 0:y.description)&&(W.description=i.description),JSON.stringify(i.key_features)!==JSON.stringify(y==null?void 0:y.key_features)&&(W.key_features=i.key_features),JSON.stringify(i.specifications)!==JSON.stringify(y==null?void 0:y.specifications)&&(W.specifications=i.specifications),i.price_per_unit!==(y==null?void 0:y.price_per_unit)&&(W.price_per_unit=i.price_per_unit),i.unit_of_measure!==(y==null?void 0:y.unit_of_measure)&&(W.unit_of_measure=i.unit_of_measure),JSON.stringify(i.bulk_pricing)!==JSON.stringify(y==null?void 0:y.bulk_pricing)&&(W.bulk_pricing=i.bulk_pricing),i.stock_quantity!==(y==null?void 0:y.stock_quantity)&&(W.stock_quantity=i.stock_quantity),i.low_stock_threshold!==(y==null?void 0:y.low_stock_threshold)&&(W.low_stock_threshold=i.low_stock_threshold),i.expected_restock_date!==(y==null?void 0:y.expected_restock_date)&&(W.expected_restock_date=i.expected_restock_date),JSON.stringify(i.images)!==JSON.stringify(y==null?void 0:y.images)&&(W.images=i.images),i.primary_image_url!==(y==null?void 0:y.primary_image_url)&&(W.primary_image_url=i.primary_image_url),i.status!==(y==null?void 0:y.status)&&(W.status=i.status),i.is_featured!==(y==null?void 0:y.is_featured)&&(W.is_featured=i.is_featured),JSON.stringify(i.tags)!==JSON.stringify(y==null?void 0:y.tags)&&(W.tags=i.tags),i.weight!==(y==null?void 0:y.weight)&&(W.weight=i.weight),i.material!==(y==null?void 0:y.material)&&(W.material=i.material),i.warranty_information!==(y==null?void 0:y.warranty_information)&&(W.warranty_information=i.warranty_information),i.minimum_order_quantity!==(y==null?void 0:y.minimum_order_quantity)&&(W.minimum_order_quantity=i.minimum_order_quantity),i.maximum_order_quantity!==(y==null?void 0:y.maximum_order_quantity)&&(W.maximum_order_quantity=i.maximum_order_quantity),i.handling_time_days!==(y==null?void 0:y.handling_time_days)&&(W.handling_time_days=i.handling_time_days),i.searchable!==(y==null?void 0:y.searchable)&&(W.searchable=i.searchable),i.customer_type_availability!==(y==null?void 0:y.customer_type_availability)&&(W.customer_type_availability=i.customer_type_availability),await L.mutateAsync(W)},g=()=>{if(!b.trim()||!i)return;const W=[...Array.isArray(i.images)?i.images:[],b.trim()];O("images",W),i.primary_image_url||O("primary_image_url",b.trim()),v("")},D=V=>{if(!i)return;const W=Array.isArray(i.images)?i.images:[],X=W.filter((ee,ue)=>ue!==V),H=W[V];O("images",X),i.primary_image_url===H&&O("primary_image_url",X[0]||null)},S=V=>{O("primary_image_url",V)},$=()=>{if(!j.trim()||!i)return;const V=Array.isArray(i.tags)?i.tags:[];V.includes(j.trim())||(O("tags",[...V,j.trim()]),P(""))},I=V=>{if(!i)return;const W=Array.isArray(i.tags)?i.tags:[];O("tags",W.filter(X=>X!==V))},K=()=>{if(!w.trim()||!f.trim()||!i)return;const V=parseFloat(f);if(isNaN(V)||V<=0)return;const W=i.bulk_pricing||{};O("bulk_pricing",{...W,[w]:V}),C(""),k("")},U=V=>{if(!i)return;const W={...i.bulk_pricing||{}};delete W[V],O("bulk_pricing",Object.keys(W).length>0?W:null)},q=()=>{if(!i)return;const V=Array.isArray(i.key_features)?i.key_features:[];O("key_features",[...V,""])},z=(V,W)=>{if(!i)return;const H=[...Array.isArray(i.key_features)?i.key_features:[]];H[V]=W,O("key_features",H)},Y=V=>{if(!i)return;const W=Array.isArray(i.key_features)?i.key_features:[];O("key_features",W.filter((X,H)=>H!==V))},se=async()=>{y&&window.confirm("Create a duplicate of this product? The copy will be inactive with 0 stock.")&&await N.mutateAsync()};return F||B?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading product..."})]})})}):M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(de,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're trying to edit could not be found."}),e.jsxs(Q,{to:"/supplier/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(ir,{className:"w-5 h-5 mr-2"}),"Back to Products"]})]})})}):!i||!y?null:e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(Q,{to:"/supplier/products",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(ir,{className:"w-5 h-5 mr-2"}),"Back to Products"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Product"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["SKU: ",y.sku]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[m&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-amber-100 text-amber-800",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Unsaved changes"]}),e.jsxs("button",{type:"button",onClick:se,disabled:N.isPending,className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:[e.jsx(Cm,{className:"w-5 h-5 mr-2"}),"Duplicate"]})]})]})]}),x&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center",children:[e.jsx(he,{className:"w-5 h-5 text-green-600 mr-3"}),e.jsx("p",{className:"text-green-800 font-medium",children:"Product updated successfully!"})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"product_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"product_name",value:i.product_name||"",onChange:V=>O("product_name",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0}),c.product_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.product_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category_id",className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category_id",value:i.category_id||"",onChange:V=>O("category_id",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),A.map(V=>e.jsx("option",{value:V.category_id,children:V.category_name},V.category_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU (cannot be changed)"}),e.jsx("input",{type:"text",id:"sku",value:y.sku,readOnly:!0,className:"w-full px-4 py-3 border-2 border-gray-100 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:i.description||"",onChange:V=>O("description",V.target.value),rows:6,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Detailed product description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key Features"}),e.jsxs("div",{className:"space-y-2",children:[Array.isArray(i.key_features)&&i.key_features.map((V,W)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:V,onChange:X=>z(W,X.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Feature description"}),e.jsx("button",{type:"button",onClick:()=>Y(W),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_t,{className:"w-5 h-5"})})]},W)),e.jsxs("button",{type:"button",onClick:q,className:"inline-flex items-center px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Add Feature"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price_per_unit",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price per Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",id:"price_per_unit",value:i.price_per_unit||"",onChange:V=>O("price_per_unit",Number(V.target.value)),step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"unit_of_measure",className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit of Measure ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"unit_of_measure",value:i.unit_of_measure||"",onChange:V=>O("unit_of_measure",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"piece, bag, yard, etc.",required:!0})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bulk Pricing (optional)"}),e.jsxs("div",{className:"space-y-2",children:[i.bulk_pricing&&Object.entries(i.bulk_pricing).map(([V,W])=>e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("span",{className:"text-gray-700 font-medium",children:[V,"+:"]}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:["$",Number(W).toFixed(2)]}),e.jsx("button",{type:"button",onClick:()=>U(V),className:"ml-auto p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})})]},V)),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:w,onChange:V=>C(V.target.value),placeholder:"Quantity (e.g., 10)",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("input",{type:"number",value:f,onChange:V=>k(V.target.value),placeholder:"Price",step:"0.01",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("button",{type:"button",onClick:K,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Inventory"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stock_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:["Stock Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"stock_quantity",value:i.stock_quantity??0,onChange:V=>O("stock_quantity",Number(V.target.value)),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"low_stock_threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Alert"}),e.jsx("input",{type:"number",id:"low_stock_threshold",value:i.low_stock_threshold??10,onChange:V=>O("low_stock_threshold",Number(V.target.value)),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expected_restock_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Restock Date"}),e.jsx("input",{type:"date",id:"expected_restock_date",value:((te=i.expected_restock_date)==null?void 0:te.split("T")[0])||"",onChange:V=>O("expected_restock_date",V.target.value?new Date(V.target.value).toISOString():null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Product Images"}),Array.isArray(i.images)&&i.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:i.images.map((V,W)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:V,alt:`Product ${W+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),i.primary_image_url===V&&e.jsx("span",{className:"absolute top-2 left-2 px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded",children:"Primary"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex space-x-2",children:[i.primary_image_url!==V&&e.jsx("button",{type:"button",onClick:()=>S(V),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Set Primary"}),e.jsx("button",{type:"button",onClick:()=>D(W),className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"Remove"})]})})]},W))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"url",value:b,onChange:V=>v(V.target.value),placeholder:"Enter image URL",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(os,{className:"w-5 h-5 mr-2"}),"Add Image"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Note: Image upload endpoint not yet available. Please enter image URLs manually."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),e.jsx("input",{type:"text",id:"brand",value:i.brand||"",onChange:V=>O("brand",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-700 mb-2",children:"Material"}),e.jsx("input",{type:"text",id:"material",value:i.material||"",onChange:V=>O("material",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight (lbs)"}),e.jsx("input",{type:"number",id:"weight",value:i.weight??"",onChange:V=>O("weight",V.target.value?Number(V.target.value):null),step:"0.01",min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Array.isArray(i.tags)&&i.tags.map(V=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[V,e.jsx("button",{type:"button",onClick:()=>I(V),className:"ml-2 hover:text-blue-900",children:e.jsx(ge,{className:"w-4 h-4"})})]},V))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:j,onChange:V=>P(V.target.value),onKeyPress:V=>V.key==="Enter"&&(V.preventDefault(),$()),placeholder:"Add tag",className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}),e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"warranty_information",className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Information"}),e.jsx("textarea",{id:"warranty_information",value:i.warranty_information||"",onChange:V=>O("warranty_information",V.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Warranty terms and conditions..."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order & Delivery Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minimum_order_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order"}),e.jsx("input",{type:"number",id:"minimum_order_quantity",value:i.minimum_order_quantity??1,onChange:V=>O("minimum_order_quantity",Number(V.target.value)),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maximum_order_quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Order"}),e.jsx("input",{type:"number",id:"maximum_order_quantity",value:i.maximum_order_quantity??"",onChange:V=>O("maximum_order_quantity",V.target.value?Number(V.target.value):null),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"handling_time_days",className:"block text-sm font-medium text-gray-700 mb-2",children:"Handling Time (days)"}),e.jsx("input",{type:"number",id:"handling_time_days",value:i.handling_time_days??1,onChange:V=>O("handling_time_days",Number(V.target.value)),min:"1",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Status & Visibility"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"status",value:i.status||"active",onChange:V=>O("status",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customer_type_availability",className:"block text-sm font-medium text-gray-700 mb-2",children:"Available To"}),e.jsxs("select",{id:"customer_type_availability",value:i.customer_type_availability||"all",onChange:V=>O("customer_type_availability",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"retail",children:"Retail Only"}),e.jsx("option",{value:"trade",children:"Trade Only"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Featured Product"}),e.jsx("input",{type:"checkbox",checked:i.is_featured||!1,onChange:V=>O("is_featured",V.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Searchable"}),e.jsx("input",{type:"checkbox",checked:i.searchable??!0,onChange:V=>O("searchable",V.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white border-t-4 border-blue-600 rounded-xl shadow-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[m&&e.jsxs("span",{className:"text-amber-700 font-medium flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),"You have unsaved changes"]}),o.length>0&&e.jsxs("span",{className:"text-gray-600 text-sm",children:[o.length," change",o.length!==1?"s":""," made"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{to:"/supplier/products",className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:L.isPending||!m,className:"inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})})]})]})})})},X5=()=>{const t=re(A=>{var L;return(L=A.authentication_state.supplier_profile)==null?void 0:L.supplier_id}),s=re(A=>A.authentication_state.auth_token),[r,a]=_.useState("upload"),[n,i]=_.useState({file:null,file_name:null,file_size:null}),[l,o]=_.useState({is_valid:!0,errors:[],warnings:[],total_rows:0,valid_rows:0}),[d,c]=_.useState([]),[u,m]=_.useState({uploading:!1,processing:!1,importing:!1,progress_percent:0}),[h,x]=_.useState({success_count:0,error_count:0,created_product_ids:[],error_details:[]}),[p,b]=_.useState(!1),v=_.useCallback(()=>{const L="https://123create-construction-app-with-a.launchpulse.ai/api/supplier/products/bulk-template?template_type=basic",N=document.createElement("a");N.href=L,N.download="product_bulk_upload_template.csv",document.body.appendChild(N),N.click(),document.body.removeChild(N)},[]),j=oe({mutationFn:async A=>{const L="https://123create-construction-app-with-a.launchpulse.ai/api",N=new FormData;return N.append("csv_file",A),(await G.post(`${L}/supplier/products/bulk-upload-validate`,N,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}})).data},onSuccess:A=>{o({is_valid:A.is_valid,errors:A.validation_errors||[],warnings:A.validation_warnings||[],total_rows:A.total_rows,valid_rows:A.valid_rows}),c(A.preview_data.map(L=>({product_id:L.product_id||null,sku:L.sku,product_name:L.product_name,price_per_unit:Number(L.price_per_unit||0),stock_quantity:Number(L.stock_quantity||0),category_id:L.category_id,status:L.status||"active",description:L.description,unit_of_measure:L.unit_of_measure,brand:L.brand}))),m(L=>({...L,uploading:!1,processing:!1})),a("preview")},onError:A=>{var L,N;m(R=>({...R,uploading:!1,processing:!1})),alert(((N=(L=A.response)==null?void 0:L.data)==null?void 0:N.message)||"Failed to validate CSV file")}}),P=oe({mutationFn:async()=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/supplier/products/bulk-import",{supplier_id:t,validated_products:d,import_settings:{update_existing:!0,create_missing_categories:!1}},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:A=>{var L;x({success_count:A.created_count||0,error_count:A.failed_count||0,created_product_ids:((L=A.created_products)==null?void 0:L.map(N=>N.product_id))||[],error_details:A.errors||[]}),m(N=>({...N,importing:!1})),a("results")},onError:A=>{var L,N;m(R=>({...R,importing:!1})),alert(((N=(L=A.response)==null?void 0:L.data)==null?void 0:N.message)||"Failed to import products")}}),w=A=>{var N;const L=(N=A.target.files)==null?void 0:N[0];L&&C(L)},C=A=>{if(!A.name.endsWith(".csv")){alert("Please upload a CSV file");return}const L=5*1024*1024;if(A.size>L){alert("File size must be less than 5MB");return}i({file:A,file_name:A.name,file_size:A.size}),m({uploading:!0,processing:!0,importing:!1,progress_percent:50}),j.mutate(A)},f=A=>{A.preventDefault(),A.stopPropagation(),b(!0)},k=A=>{A.preventDefault(),A.stopPropagation(),b(!1)},y=A=>{A.preventDefault(),A.stopPropagation()},F=A=>{var N;A.preventDefault(),A.stopPropagation(),b(!1);const L=(N=A.dataTransfer.files)==null?void 0:N[0];L&&C(L)},M=()=>{m(A=>({...A,importing:!0,progress_percent:75})),P.mutate()},E=()=>{i({file:null,file_name:null,file_size:null}),o({is_valid:!0,errors:[],warnings:[],total_rows:0,valid_rows:0}),c([]),m({uploading:!1,processing:!1,importing:!1,progress_percent:0}),x({success_count:0,error_count:0,created_product_ids:[],error_details:[]}),a("upload")},B=A=>A<1024?A+" B":A<1024*1024?(A/1024).toFixed(2)+" KB":(A/(1024*1024)).toFixed(2)+" MB";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Product Upload"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Upload multiple products at once using our CSV template"})]}),e.jsxs(Q,{to:"/supplier/products",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Back to Products"]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:`flex items-center ${r!=="upload"?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${r==="upload"?"bg-blue-100":"bg-green-100"}`,children:r!=="upload"?e.jsx(he,{className:"w-5 h-5"}):"1"}),e.jsx("span",{className:"ml-2 font-medium",children:"Upload CSV"})]}),e.jsx("div",{className:`h-1 w-24 ${r!=="upload"?"bg-green-600":"bg-gray-300"}`}),e.jsxs("div",{className:`flex items-center ${r==="preview"?"text-blue-600":r==="results"?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${r==="preview"?"bg-blue-100":r==="results"?"bg-green-100":"bg-gray-100"}`,children:r==="results"?e.jsx(he,{className:"w-5 h-5"}):"2"}),e.jsx("span",{className:"ml-2 font-medium",children:"Preview & Validate"})]}),e.jsx("div",{className:`h-1 w-24 ${r==="results"?"bg-green-600":"bg-gray-300"}`}),e.jsxs("div",{className:`flex items-center ${r==="results"?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${r==="results"?"bg-green-100":"bg-gray-100"}`,children:r==="results"?e.jsx(he,{className:"w-5 h-5"}):"3"}),e.jsx("span",{className:"ml-2 font-medium",children:"Import Complete"})]})]})}),r==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Lt,{className:"w-6 h-6 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Step 1: Download CSV Template"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Download our template to ensure your CSV file has the correct format and required columns."}),e.jsxs("button",{onClick:v,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[e.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Download Template"]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Template Columns:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm text-blue-800",children:[e.jsx("div",{children:" SKU (required)"}),e.jsx("div",{children:" Product Name (required)"}),e.jsx("div",{children:" Category ID (required)"}),e.jsx("div",{children:" Price Per Unit (required)"}),e.jsx("div",{children:" Stock Quantity (required)"}),e.jsx("div",{children:" Unit of Measure (required)"}),e.jsx("div",{children:" Description"}),e.jsx("div",{children:" Brand"}),e.jsx("div",{children:" Status"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(os,{className:"w-6 h-6 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Step 2: Upload Your CSV File"}),e.jsx("p",{className:"text-gray-600",children:"Upload your completed CSV file. We'll validate the data and show you a preview before importing."})]})]}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-12 text-center transition-all ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,onDragEnter:f,onDragLeave:k,onDragOver:y,onDrop:F,children:n.file?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Me,{className:"w-16 h-16 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.file_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.file_size?B(n.file_size):""})]}),e.jsx("button",{onClick:()=>i({file:null,file_name:null,file_size:null}),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove file"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(os,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Drag and drop your CSV file here"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"or"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(os,{className:"w-5 h-5 mr-2"}),"Browse Files"]}),e.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:w,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"CSV files only, maximum 5MB"})]})}),n.file&&!u.uploading&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:()=>{n.file&&(m({uploading:!0,processing:!0,importing:!1,progress_percent:25}),j.mutate(n.file))},className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-lg hover:shadow-xl",children:["Validate & Preview",e.jsx(ls,{className:"w-5 h-5 ml-2"})]})}),u.uploading&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:u.processing?"Validating CSV...":"Uploading file..."}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[u.progress_percent,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.progress_percent}%`}})})]})})]})]}),r==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Rows"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:l.total_rows})]}),e.jsx(Me,{className:"w-12 h-12 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valid Rows"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:l.valid_rows})]}),e.jsx(he,{className:"w-12 h-12 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Errors"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:l.errors.length})]}),e.jsx(Ve,{className:"w-12 h-12 text-red-600"})]})})]}),(l.errors.length>0||l.warnings.length>0)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Validation Issues"}),l.errors.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsxs("h3",{className:"font-semibold text-red-900",children:["Errors (",l.errors.length,")"]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.errors.map((A,L)=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-red-900",children:[e.jsxs("span",{className:"font-semibold",children:["Row ",A.row,":"]})," ",A.message,A.field&&e.jsxs("span",{className:"text-red-700",children:[" (Field: ",A.field,")"]})]})},L))})]}),l.warnings.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(de,{className:"w-5 h-5 text-yellow-600 mr-2"}),e.jsxs("h3",{className:"font-semibold text-yellow-900",children:["Warnings (",l.warnings.length,")"]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.warnings.map((A,L)=>e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsxs("span",{className:"font-semibold",children:["Row ",A.row,":"]})," ",A.message,A.field&&e.jsxs("span",{className:"text-yellow-700",children:[" (Field: ",A.field,")"]})]})},L))})]})]}),d.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Product Preview"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Review the products before importing. ",l.valid_rows," products will be imported."]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.slice(0,10).map((A,L)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.sku}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",children:A.product_name})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",Number(A.price_per_unit||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.stock_quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${A.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:A.status})})]},L))})]})}),d.length>10&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing first 10 of ",d.length," products"]})})]}),d.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:E,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors font-medium",children:[e.jsx(ir,{className:"w-5 h-5 mr-2"}),"Upload Different File"]}),e.jsx("button",{onClick:M,disabled:!l.is_valid||u.importing,className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:u.importing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Importing..."]}):e.jsxs(e.Fragment,{children:["Import ",l.valid_rows," Products",e.jsx(ls,{className:"w-5 h-5 ml-2"})]})})]})]}),r==="results"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-10 h-10 text-green-600"})})}),e.jsx("h2",{className:"text-3xl font-bold text-green-900 mb-2",children:"Import Complete!"}),e.jsxs("p",{className:"text-green-700 text-lg",children:["Successfully imported ",h.success_count," products to your catalog"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Successfully Imported"}),e.jsx("p",{className:"text-4xl font-bold text-green-600 mt-2",children:h.success_count})]}),e.jsx(he,{className:"w-16 h-16 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed to Import"}),e.jsx("p",{className:"text-4xl font-bold text-red-600 mt-2",children:h.error_count})]}),e.jsx(Ve,{className:"w-16 h-16 text-red-600"})]})})]}),h.error_count>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Import Errors"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.error_details.map((A,L)=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-900",children:[e.jsxs("span",{className:"font-semibold",children:["Row ",A.row," (SKU: ",A.sku,"):"]})," ",A.error]})},L))})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:E,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors font-medium",children:"Upload Another File"}),e.jsxs(Q,{to:"/supplier/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:["View Product Catalog",e.jsx(ls,{className:"w-5 h-5 ml-2"})]})]})]}),e.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Need Help?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Make sure your CSV file uses the exact column headers from the template"}),e.jsx("li",{children:" SKU must be unique across your product catalog"}),e.jsx("li",{children:" Category IDs must match existing categories in the system"}),e.jsx("li",{children:" Prices must be positive numbers, stock must be non-negative integers"}),e.jsx("li",{children:" Maximum file size is 5MB"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(Q,{to:"/help",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"View detailed documentation "})})]})]})})]})})})},J5=async(t,s)=>{const r=new URLSearchParams;return s.search_query&&r.append("search_query",s.search_query),s.category_filter&&r.append("category_filter",s.category_filter),s.low_stock_only?r.append("status_filter","low_stock"):s.out_of_stock_only&&r.append("status_filter","out_of_stock"),r.append("sort_by","stock_quantity"),r.append("sort_order","asc"),r.append("limit","1000"),(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},Z5=async(t,s,r)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${s}`,{stock_quantity:r,last_updated_timestamp:new Date().toISOString()},{headers:{Authorization:`Bearer ${t}`}})).data,e3=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories?is_active=true")).data,t3=()=>{const t=re(g=>g.authentication_state.auth_token),s=re(g=>g.authentication_state.supplier_profile),[r,a]=Fe(),n=Pe(),[i,l]=_.useState({low_stock_only:r.get("low_stock_only")==="true",out_of_stock_only:r.get("out_of_stock_only")==="true",search_query:r.get("search_query")||"",category_filter:r.get("category_filter")||null}),[o,d]=_.useState({selected_product_ids:[],bulk_action:null,bulk_value:null,processing:!1}),[c,u]=_.useState(null),[m,h]=_.useState(0);_.useEffect(()=>{const g=new URLSearchParams;i.low_stock_only&&g.set("low_stock_only","true"),i.out_of_stock_only&&g.set("out_of_stock_only","true"),i.search_query&&g.set("search_query",i.search_query),i.category_filter&&g.set("category_filter",i.category_filter),a(g,{replace:!0})},[i,a]);const{data:x,isLoading:p,error:b,refetch:v}=ne({queryKey:["supplier-inventory",i],queryFn:()=>J5(t,i),enabled:!!t&&!!s,staleTime:3e4,refetchOnWindowFocus:!0}),{data:j}=ne({queryKey:["categories"],queryFn:e3,staleTime:3e5}),P=_.useMemo(()=>{if(!(x!=null&&x.products))return[];let g=x.products;return i.low_stock_only&&(g=g.filter(D=>D.stock_quantity<=D.low_stock_threshold&&D.stock_quantity>0)),i.out_of_stock_only&&(g=g.filter(D=>D.stock_quantity===0)),g},[x,i]),w=_.useMemo(()=>{if(!(x!=null&&x.products))return{total_products:0,total_stock_value:0,low_stock_count:0,out_of_stock_count:0};const g=x.products;return{total_products:g.length,total_stock_value:g.reduce((D,S)=>D+(S.stock_quantity||0)*(S.cost_price||S.price_per_unit||0),0),low_stock_count:g.filter(D=>D.stock_quantity<=D.low_stock_threshold&&D.stock_quantity>0).length,out_of_stock_count:g.filter(D=>D.stock_quantity===0).length}},[x]),C=oe({mutationFn:({product_id:g,stock_quantity:D})=>Z5(t,g,D),onSuccess:()=>{n.invalidateQueries({queryKey:["supplier-inventory"]}),u(null)}}),f=g=>{l(D=>({...D,...g}))},k=g=>{f({search_query:g})},y=g=>{f({category_filter:g})},F=()=>{l({low_stock_only:!1,out_of_stock_only:!1,search_query:"",category_filter:null})},M=g=>{u(g.product_id),h(g.stock_quantity)},E=()=>{u(null),h(0)},B=async g=>{if(m<0){alert("Stock quantity cannot be negative");return}try{await C.mutateAsync({product_id:g,stock_quantity:m})}catch(D){console.error("Failed to update stock:",D),alert("Failed to update stock. Please try again.")}},A=(g,D)=>{g.key==="Enter"?B(D):g.key==="Escape"&&E()},L=g=>{d(D=>({...D,selected_product_ids:D.selected_product_ids.includes(g)?D.selected_product_ids.filter(S=>S!==g):[...D.selected_product_ids,g]}))},N=()=>{o.selected_product_ids.length===P.length?d(g=>({...g,selected_product_ids:[]})):d(g=>({...g,selected_product_ids:P.map(D=>D.product_id)}))},R=g=>g.stock_quantity===0?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Out of Stock"}):g.stock_quantity<=g.low_stock_threshold?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Low Stock"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"In Stock"}),O=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),T=g=>{const D=new Date(g),$=new Date().getTime()-D.getTime(),I=Math.floor($/6e4),K=Math.floor($/36e5),U=Math.floor($/864e5);return I<1?"Just now":I<60?`${I} min ago`:K<24?`${K} hour${K>1?"s":""} ago`:U<7?`${U} day${U>1?"s":""} ago`:D.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return!t||!s?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Please log in to access inventory management."}),e.jsx(Q,{to:"/login",className:"mt-4 inline-block text-blue-600 hover:text-blue-700",children:"Go to Login"})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Track and manage your product stock levels"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[o.selected_product_ids.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[o.selected_product_ids.length," selected"]}),e.jsx("button",{onClick:()=>d(g=>({...g,selected_product_ids:[]})),className:"text-blue-600 hover:text-blue-700",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>alert("Bulk update functionality coming soon! You can update stock quantities individually for now."),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(Rd,{className:"w-4 h-4 mr-2"}),"Bulk Update"]})]}),e.jsxs("button",{onClick:()=>v(),disabled:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(vt,{className:`w-4 h-4 mr-2 ${p?"animate-spin":""}`}),"Refresh"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:w.total_products})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Stock Value"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:O(w.total_stock_value)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-600",children:w.low_stock_count})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(At,{className:"w-6 h-6 text-yellow-600"})})]}),w.low_stock_count>0&&e.jsx("button",{onClick:()=>f({low_stock_only:!0,out_of_stock_only:!1}),className:"mt-3 text-xs text-yellow-700 hover:text-yellow-800 font-medium",children:"View low stock items "})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-red-600",children:w.out_of_stock_count})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(Jn,{className:"w-6 h-6 text-red-600"})})]}),w.out_of_stock_count>0&&e.jsx("button",{onClick:()=>f({out_of_stock_only:!0,low_stock_only:!1}),className:"mt-3 text-xs text-red-700 hover:text-red-800 font-medium",children:"View out of stock "})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or SKU...",value:i.search_query,onChange:g=>k(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsxs("select",{value:i.category_filter||"",onChange:g=>y(g.target.value||null),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Categories"}),j==null?void 0:j.map(g=>e.jsx("option",{value:g.category_id,children:g.category_name},g.category_id))]}),e.jsx(Et,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.low_stock_only,onChange:g=>f({low_stock_only:g.target.checked,out_of_stock_only:!1}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Low Stock"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.out_of_stock_only,onChange:g=>f({out_of_stock_only:g.target.checked,low_stock_only:!1}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Out of Stock"})]})]})]}),(i.search_query||i.category_filter||i.low_stock_only||i.out_of_stock_only)&&e.jsx("button",{onClick:F,className:"text-sm text-gray-600 hover:text-gray-900 font-medium whitespace-nowrap",children:"Clear Filters"})]})}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(At,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load inventory"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:b instanceof Error?b.message:"An error occurred"}),e.jsx("button",{onClick:()=>v(),className:"mt-2 text-sm font-medium text-red-800 hover:text-red-900",children:"Try again "})]})]})}),p&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(vt,{className:"w-8 h-8 text-blue-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}),!p&&P.length>0&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:o.selected_product_ids.length===P.length&&P.length>0,onChange:N,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Threshold"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Value"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:o.selected_product_ids.includes(g.product_id),onChange:()=>L(g.product_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[g.primary_image_url?e.jsx("img",{src:g.primary_image_url,alt:g.product_name,className:"w-10 h-10 rounded-lg object-cover mr-3"}):e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center mr-3",children:e.jsx(ve,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.product_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[O(g.price_per_unit),"/",g.unit_of_measure]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:g.sku})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c===g.product_id?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",value:m,onChange:D=>h(Number(D.target.value)),onKeyPress:D=>A(D,g.product_id),autoFocus:!0,className:"w-24 px-2 py-1 border border-blue-500 rounded focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("button",{onClick:()=>B(g.product_id),disabled:C.isPending,className:"p-1 text-green-600 hover:text-green-700 disabled:opacity-50",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:E,className:"p-1 text-red-600 hover:text-red-700",children:e.jsx(ge,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>M(g),className:"group flex items-center space-x-2 hover:bg-gray-100 rounded px-2 py-1 transition-colors",children:[e.jsx("span",{className:`text-sm font-semibold ${g.stock_quantity===0?"text-red-600":g.stock_quantity<=g.low_stock_threshold?"text-yellow-600":"text-gray-900"}`,children:g.stock_quantity}),e.jsx(Is,{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-600",children:g.low_stock_threshold})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R(g)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(He,{className:"w-4 h-4 mr-1.5 text-gray-400"}),T(g.last_updated_timestamp)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:O((g.stock_quantity||0)*(g.cost_price||g.price_per_unit||0))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(Q,{to:`/supplier/products/${g.product_id}/edit`,className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Edit"})})]},g.product_id))})]})})}),!p&&P.length===0&&!b&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full mb-4",children:e.jsx(Rd,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i.search_query||i.category_filter||i.low_stock_only||i.out_of_stock_only?"No products match your filters":"No products in inventory yet"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:i.search_query||i.category_filter||i.low_stock_only||i.out_of_stock_only?"Try adjusting your filters to see more results.":"Start by adding products to your catalog."}),i.search_query||i.category_filter||i.low_stock_only||i.out_of_stock_only?e.jsx("button",{onClick:F,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Clear all filters"}):e.jsx(Q,{to:"/supplier/products/add",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Add Your First Product"})]})}),!p&&P.length>0&&e.jsxs("div",{className:"mt-6 flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("span",{children:["Showing ",P.length," of ",w.total_products," products"]}),o.selected_product_ids.length>0&&e.jsxs("span",{className:"text-blue-600 font-medium",children:[o.selected_product_ids.length," selected"]})]}),e.jsx(Q,{to:"/supplier/products",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Manage All Products "})]})]})]})})},s3=async(t,s,r)=>{if(!r)throw new Error("Authentication required");const a=new URLSearchParams;return t.status_filter&&a.append("status_filter",t.status_filter),t.date_range&&a.append("date_range",t.date_range),t.customer_search&&a.append("query",t.customer_search),a.append("limit",s.limit.toString()),a.append("offset",((s.current_page-1)*s.limit).toString()),a.append("sort_by","order_date"),a.append("sort_order","desc"),(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders?${a.toString()}`,{headers:{Authorization:`Bearer ${r}`}})).data},r3=async t=>{if(!t)throw new Error("Authentication required");const r=(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/orders",{headers:{Authorization:`Bearer ${t}`}})).data.orders||[],a=new Date().toISOString().split("T")[0];return{pending_acceptance:r.filter(i=>i.status==="pending").length,in_progress:r.filter(i=>["processing","shipped","in_transit"].includes(i.status)).length,completed_today:r.filter(i=>i.status==="delivered"&&i.order_date.split("T")[0]===a).length,total_revenue_today:r.filter(i=>i.order_date.split("T")[0]===a&&i.payment_status==="paid").reduce((i,l)=>i+l.total_amount,0)}},a3=async(t,s)=>{if(!s)throw new Error("Authentication required");return(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{status:"processing"},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data},n3=async(t,s,r)=>{if(!r)throw new Error("Authentication required");return(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{status:"cancelled"},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data},i3=async(t,s,r)=>{if(!r)throw new Error("Authentication required");return(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{status:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data},l3=()=>{const t=re(z=>z.authentication_state.auth_token),[s,r]=Fe(),[a,n]=_.useState({status_filter:s.get("status_filter")||null,date_range:s.get("date_range")||null,customer_search:s.get("customer_search")||null}),[i,l]=_.useState({current_page:parseInt(s.get("page")||"1",10),total_pages:1,total_count:0,limit:50}),[o,d]=_.useState({selected_order_ids:[],bulk_operation:null,processing:!1}),[c,u]=_.useState(null),[m,h]=_.useState(!1),[x,p]=_.useState(null),[b,v]=_.useState(""),j=Pe(),{data:P,isLoading:w,error:C,refetch:f}=ne({queryKey:["supplier-orders",a,i.current_page],queryFn:()=>s3(a,i,t),enabled:!!t,staleTime:6e4,select:z=>({orders:z.orders.map(Y=>({...Y,total_amount:Number(Y.total_amount||0),items_count:Number(Y.items_count||0)})),total:z.total,page:z.page||i.current_page,limit:z.limit||i.limit})}),{data:k,isLoading:y}=ne({queryKey:["order-summary"],queryFn:()=>r3(t),enabled:!!t,staleTime:3e4,select:z=>({...z,total_revenue_today:Number(z.total_revenue_today||0)})}),F=oe({mutationFn:z=>a3(z,t),onSuccess:()=>{j.invalidateQueries({queryKey:["supplier-orders"]}),j.invalidateQueries({queryKey:["order-summary"]})}}),M=oe({mutationFn:({orderId:z,reason:Y})=>n3(z,Y,t),onSuccess:()=>{j.invalidateQueries({queryKey:["supplier-orders"]}),j.invalidateQueries({queryKey:["order-summary"]}),h(!1),p(null),v("")}}),E=oe({mutationFn:({orderId:z,status:Y})=>i3(z,Y,t),onSuccess:()=>{j.invalidateQueries({queryKey:["supplier-orders"]}),j.invalidateQueries({queryKey:["order-summary"]})}});_.useEffect(()=>{P&&l(z=>({...z,total_pages:Math.ceil(P.total/z.limit),total_count:P.total}))},[P]),_.useEffect(()=>{const z=new URLSearchParams;a.status_filter&&z.set("status_filter",a.status_filter),a.date_range&&z.set("date_range",a.date_range),a.customer_search&&z.set("customer_search",a.customer_search),i.current_page>1&&z.set("page",i.current_page.toString()),r(z)},[a,i.current_page,r]);const B=(z,Y)=>{n(se=>({...se,[z]:Y})),l(se=>({...se,current_page:1}))},A=z=>{l(Y=>({...Y,current_page:z})),window.scrollTo({top:0,behavior:"smooth"})},L=z=>{d(Y=>{const se=Y.selected_order_ids.includes(z);return{...Y,selected_order_ids:se?Y.selected_order_ids.filter(J=>J!==z):[...Y.selected_order_ids,z]}})},N=()=>{if(!(P!=null&&P.orders))return;const z=P.orders.map(se=>se.order_id),Y=o.selected_order_ids.length===z.length;d(se=>({...se,selected_order_ids:Y?[]:z}))},R=async z=>{try{await F.mutateAsync(z)}catch(Y){console.error("Failed to accept order:",Y)}},O=z=>{p(z),h(!0)},T=async()=>{if(!(!x||!b))try{await M.mutateAsync({orderId:x,reason:b})}catch(z){console.error("Failed to reject order:",z)}},g=async(z,Y)=>{try{await E.mutateAsync({orderId:z,status:Y})}catch(se){console.error("Failed to update order status:",se)}},D=z=>{u(Y=>Y===z?null:z)},S=z=>({pending:"bg-amber-100 text-amber-800 border-amber-200",processing:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-indigo-100 text-indigo-800 border-indigo-200",in_transit:"bg-purple-100 text-purple-800 border-purple-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",refunded:"bg-gray-100 text-gray-800 border-gray-200"})[z]||"bg-gray-100 text-gray-800 border-gray-200",$=z=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[z]||"bg-gray-100 text-gray-800",I=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(z),K=z=>new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),U=(P==null?void 0:P.orders)||[],q=k||{pending_acceptance:0,in_progress:0,completed_today:0,total_revenue_today:0};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Order Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Process and track your customer orders"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Refresh"}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg hover:shadow-xl",children:[e.jsx(Lt,{className:"inline-block w-4 h-4 mr-2"}),"Export"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Acceptance"}),e.jsx("p",{className:"text-3xl font-bold text-amber-600 mt-2",children:y?"...":q.pending_acceptance})]}),e.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:e.jsx(He,{className:"w-6 h-6 text-amber-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:y?"...":q.in_progress})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Today"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:y?"...":q.completed_today})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue Today"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600 mt-2",children:y?"...":I(q.total_revenue_today)})]}),e.jsx("div",{className:"bg-indigo-100 p-3 rounded-lg",children:e.jsx(Te,{className:"w-6 h-6 text-indigo-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),e.jsxs("select",{id:"status-filter",value:a.status_filter||"",onChange:z=>B("status_filter",z.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Orders"}),e.jsx("option",{value:"pending",children:"Pending Acceptance"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-range",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{id:"date-range",value:a.date_range||"",onChange:z=>B("date_range",z.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_3_months",children:"Last 3 Months"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customer-search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Customer"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"customer-search",type:"text",value:a.customer_search||"",onChange:z=>B("customer_search",z.target.value||null),placeholder:"Search by name or order #...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]})]}),(a.status_filter||a.date_range||a.customer_search)&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Active filters:"}),a.status_filter&&e.jsxs("button",{onClick:()=>B("status_filter",null),className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:["Status: ",a.status_filter,e.jsx(Ve,{className:"w-3 h-3 ml-2"})]}),a.date_range&&e.jsxs("button",{onClick:()=>B("date_range",null),className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:["Date: ",a.date_range.replace("_"," "),e.jsx(Ve,{className:"w-3 h-3 ml-2"})]}),a.customer_search&&e.jsxs("button",{onClick:()=>B("customer_search",null),className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:['Search: "',a.customer_search,'"',e.jsx(Ve,{className:"w-3 h-3 ml-2"})]}),e.jsx("button",{onClick:()=>n({status_filter:null,date_range:null,customer_search:null}),className:"text-sm text-gray-600 hover:text-gray-800 font-medium underline",children:"Clear all"})]})]}),o.selected_order_ids.length>0&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-blue-900 font-semibold",children:[o.selected_order_ids.length," order",o.selected_order_ids.length>1?"s":""," selected"]}),e.jsx("button",{onClick:()=>d({selected_order_ids:[],bulk_operation:null,processing:!1}),className:"text-blue-700 hover:text-blue-900 text-sm font-medium",children:"Clear selection"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Accept Selected"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Mark as Shipped"}),e.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Print Labels"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Orders (",i.total_count,")"]}),e.jsx("div",{className:"flex items-center space-x-2",children:U.length>0&&e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.selected_order_ids.length===U.length,onChange:N,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 font-medium",children:"Select All"})]})})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:w?e.jsx("div",{className:"space-y-4 p-6",children:[1,2,3,4,5].map(z=>e.jsxs("div",{className:"animate-pulse flex items-center space-x-4",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]},z))}):C?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ve,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-gray-600 mb-4",children:C instanceof Error?C.message:"An error occurred"}),e.jsx("button",{onClick:()=>f(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Try Again"})]}):U.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Orders Found"}),e.jsx("p",{className:"text-gray-600",children:a.status_filter||a.date_range||a.customer_search?"Try adjusting your filters to see more results.":"You don't have any orders yet."})]}):U.map(z=>e.jsx("div",{className:"hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"checkbox",checked:o.selected_order_ids.includes(z.order_id),onChange:()=>L(z.order_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>D(z.order_id),className:"font-semibold text-gray-900 hover:text-blue-600 transition-colors flex items-center space-x-2",children:[e.jsx("span",{children:z.order_number}),c===z.order_id?e.jsx(Ss,{className:"w-4 h-4"}):e.jsx(Et,{className:"w-4 h-4"})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${S(z.status)}`,children:z.status.replace("_"," ")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$(z.payment_status)}`,children:z.payment_status})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("span",{className:"text-lg font-bold text-gray-900",children:I(z.total_amount)})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),z.items_count," item",z.items_count>1?"s":""]}),e.jsx("span",{children:""}),e.jsx("span",{children:K(z.order_date)}),z.customer_name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-gray-700",children:z.customer_name})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[z.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R(z.order_id),disabled:F.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?"Accepting...":"Accept"}),e.jsx("button",{onClick:()=>O(z.order_id),disabled:M.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"Reject"})]}),z.status==="processing"&&e.jsxs("button",{onClick:()=>g(z.order_id,"shipped"),disabled:E.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(kt,{className:"inline-block w-4 h-4 mr-2"}),"Mark as Shipped"]}),e.jsxs(Q,{to:`/supplier/orders/${z.order_id}`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:[e.jsx(xt,{className:"inline-block w-4 h-4 mr-2"}),"View Details"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(fw,{className:"w-5 h-5"})})]})]}),c===z.order_id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 bg-gray-50 -mx-6 px-6 py-4 rounded-b-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Customer ID:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:z.customer_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Payment Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${$(z.payment_status)}`,children:z.payment_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[z.items_count," items"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[e.jsx(Ft,{className:"w-4 h-4 mr-1"}),"Contact Customer"]}),e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[e.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Download Invoice"]})]})]})]})},z.order_id))}),!w&&!C&&U.length>0&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(i.current_page-1)*i.limit+1," to"," ",Math.min(i.current_page*i.limit,i.total_count)," of"," ",i.total_count," orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>A(i.current_page-1),disabled:i.current_page===1,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(Math.min(5,i.total_pages))].map((z,Y)=>{const se=i.current_page<=3?Y+1:i.current_page+Y-2;return se>i.total_pages?null:e.jsx("button",{onClick:()=>A(se),className:`px-3 py-2 rounded-lg font-medium transition-colors ${se===i.current_page?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:se},se)})}),e.jsx("button",{onClick:()=>A(i.current_page+1),disabled:i.current_page===i.total_pages,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Next"})]})]})})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>h(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full p-6 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reject Order"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for rejecting this order. The customer will be notified."}),e.jsx("textarea",{value:b,onChange:z=>v(z.target.value),placeholder:"e.g., Out of stock, Cannot fulfill delivery window...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all resize-none"}),e.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{h(!1),v("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:!b||M.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?"Rejecting...":"Reject Order"})]})]})]})})]})};function o3(){var z;const{order_id:t}=ur(),s=ze(),r=Pe(),a=re(Y=>Y.authentication_state.auth_token),i=re(Y=>Y).authentication_state.current_user,l=(i==null?void 0:i.user_type)==="supplier"?i.user_id:null,[o,d]=_.useState(""),[c,u]=_.useState(""),[m,h]=_.useState(""),[x,p]=_.useState(""),[b,v]=_.useState(!1),[j,P]=_.useState(!1),w=async Y=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${Y}`,{headers:{Authorization:`Bearer ${a}`}})).data,{data:C,isLoading:f,isError:k,error:y,refetch:F}=ne({queryKey:["supplier_order",t],queryFn:()=>w(t),enabled:!!t&&!!a,staleTime:6e4,refetchOnWindowFocus:!1,select:Y=>{const se=Y.items.filter(te=>te.supplier_id===l),J=se.reduce((te,V)=>te+V.line_total,0);return{...Y,items:se,supplier_subtotal:J}}}),M=oe({mutationFn:async Y=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${t}`,{status:Y},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["supplier_order",t]})}}),E=oe({mutationFn:async Y=>{var J;return(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/deliveries/${(J=C==null?void 0:C.delivery)==null?void 0:J.delivery_id}`,Y,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data},onSuccess:()=>{r.invalidateQueries({queryKey:["supplier_order",t]}),v(!1),d(""),u("")}}),B=oe({mutationFn:async Y=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations",{conversation_type:"customer_supplier",customer_id:Y,related_entity_type:"order",related_entity_id:t},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{s("/supplier/messages")}}),A=C==null?void 0:C.order,L=(C==null?void 0:C.items)||[],N=C==null?void 0:C.delivery,R=(C==null?void 0:C.timeline)||[],O=(C==null?void 0:C.supplier_subtotal)||0,T=A?{customer_id:A.customer_id,first_name:"Customer",last_name:"Name",phone_number:"+1 (555) 000-0000",email:"customer@example.com",account_type:"trade"}:null,g=A?{can_accept:A.status==="pending",can_reject:A.status==="pending",can_ship:A.status==="processing",can_update_tracking:["shipped","in_transit"].includes(A.status),can_contact_customer:!0}:{can_accept:!1,can_reject:!1,can_ship:!1,can_update_tracking:!1,can_contact_customer:!1},D=()=>{window.confirm("Accept this order and start processing?")&&M.mutate("processing")},S=()=>{window.confirm("Are you sure you want to reject this order? This cannot be undone.")&&M.mutate("cancelled")},$=()=>{if(!o||!c){alert("Please enter tracking number and carrier before marking as shipped");return}E.mutate({tracking_number:o,carrier:c,delivery_status:"out_for_delivery"}),M.mutate("shipped")},I=()=>{T&&B.mutate(T.customer_id)},K=Y=>({pending:"bg-orange-100 text-orange-800 border-orange-200",processing:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-indigo-100 text-indigo-800 border-indigo-200",in_transit:"bg-purple-100 text-purple-800 border-purple-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",refunded:"bg-gray-100 text-gray-800 border-gray-200"})[Y]||"bg-gray-100 text-gray-800 border-gray-200",U=Y=>new Date(Y).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),q=Y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Y);return f?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})})})}):k?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[e.jsx(de,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Error Loading Order"}),e.jsx("p",{className:"text-red-700 mb-6",children:G.isAxiosError(y)&&((z=y.response)==null?void 0:z.status)===404?"Order not found. It may have been deleted or you do not have access to it.":"Failed to load order details. Please try again."}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{onClick:()=>F(),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"}),e.jsx(Q,{to:"/supplier/orders",className:"px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Back to Orders"})]})]})})})}):A?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(Q,{to:"/supplier/orders",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Back to Orders"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Order ",A.order_number]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),U(A.order_date)]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${K(A.status)}`,children:A.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 md:mt-0",children:[g.can_accept&&!j&&e.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-lg hover:shadow-xl flex items-center",children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"Accept Order"]}),g.can_reject&&e.jsxs("button",{onClick:S,disabled:M.isPending,className:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[e.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Reject Order"]}),g.can_ship&&e.jsxs("button",{onClick:()=>v(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl flex items-center",children:[e.jsx(kt,{className:"w-5 h-5 mr-2"}),"Mark as Shipped"]}),g.can_contact_customer&&e.jsxs("button",{onClick:I,disabled:B.isPending,className:"px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Contact Customer"]})]})]})]}),j&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Accept Order"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Fulfillment Date"}),e.jsx("input",{type:"date",value:m,onChange:Y=>h(Y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:x,onChange:Y=>p(Y.target.value),rows:3,placeholder:"Add any notes for the customer...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:D,disabled:M.isPending,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?"Accepting...":"Confirm Accept"}),e.jsx("button",{onClick:()=>P(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),b&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Add Shipping Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tracking Number *"}),e.jsx("input",{type:"text",value:o,onChange:Y=>d(Y.target.value),placeholder:"Enter tracking number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carrier *"}),e.jsx("input",{type:"text",value:c,onChange:Y=>u(Y.target.value),placeholder:"e.g., FedEx, UPS, USPS",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:$,disabled:E.isPending||!o||!c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?"Updating...":"Mark as Shipped"}),e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),(M.isError||E.isError||B.isError)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:e.jsx("p",{className:"text-sm font-medium",children:"Action failed. Please try again."})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-6 h-6 mr-2 text-blue-600"}),"Order Items (",L.length,")"]})}),e.jsx("div",{className:"p-6",children:L.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ve,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No items from your inventory in this order"})]}):e.jsxs("div",{className:"space-y-4",children:[L.map(Y=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(ve,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:Y.product_name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["SKU: ",Y.sku]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-700",children:[e.jsxs("span",{children:["Qty: ",Y.quantity]}),e.jsx("span",{children:""}),e.jsx("span",{children:q(Y.price_per_unit)})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-lg font-bold text-gray-900",children:q(Y.line_total)})})]},Y.order_item_id)),e.jsx("div",{className:"border-t-2 border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Supplier Subtotal"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:q(O)})]})})]})})]}),N&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(kt,{className:"w-6 h-6 mr-2 text-blue-600"}),"Delivery Details"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Delivery Window"}),e.jsx("p",{className:"text-base text-gray-900",children:U(N.delivery_window_start)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["to ",U(N.delivery_window_end)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Delivery Method"}),e.jsx("p",{className:"text-base text-gray-900 capitalize",children:N.delivery_method.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Delivery Fee"}),e.jsx("p",{className:"text-base text-gray-900",children:q(N.delivery_fee)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Delivery Status"}),e.jsx("p",{className:`text-base font-medium capitalize ${N.delivery_status==="delivered"?"text-green-600":N.delivery_status==="out_for_delivery"?"text-blue-600":"text-gray-900"}`,children:N.delivery_status.replace("_"," ")})]})]}),N.tracking_number?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Tracking Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-base text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Tracking #:"})," ",N.tracking_number]}),N.carrier&&e.jsxs("p",{className:"text-base text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Carrier:"})," ",N.carrier]})]})]}):g.can_update_tracking&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-amber-800 mb-3",children:"No tracking information added yet"}),e.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:"Add Tracking Info"})]})]})]}),R.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order Timeline"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:R.map((Y,se)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:Y.status==="completed"?e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"w-5 h-5 text-green-600"})}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(He,{className:"w-5 h-5 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-base font-medium text-gray-900 capitalize",children:Y.milestone.replace("_"," ")}),Y.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Y.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U(Y.timestamp)})]})]},se))})})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[T&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Xt,{className:"w-6 h-6 mr-2 text-blue-600"}),"Customer Information"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Name"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[T.first_name," ",T.last_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center",children:[e.jsx(Zs,{className:"w-4 h-4 mr-1"}),"Phone"]}),e.jsx("p",{className:"text-base text-gray-900",children:T.phone_number})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center",children:[e.jsx(jt,{className:"w-4 h-4 mr-1"}),"Email"]}),e.jsx("p",{className:"text-base text-gray-900 break-words",children:T.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Account Type"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${T.account_type==="trade"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:T.account_type.toUpperCase()})]}),e.jsxs("button",{onClick:I,disabled:B.isPending,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[e.jsx(Ft,{className:"w-5 h-5 mr-2"}),B.isPending?"Opening Chat...":"Contact Customer"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Te,{className:"w-6 h-6 mr-2 text-blue-600"}),"Payment Details"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:q(A.subtotal_amount)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Fee"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:q(A.delivery_fee_total)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tax"}),e.jsx("span",{className:"text-base font-semibold text-gray-900",children:q(A.tax_amount)})]}),A.discount_amount>0&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Discount"}),e.jsxs("span",{className:"text-base font-semibold text-green-600",children:["-",q(A.discount_amount)]})]}),e.jsx("div",{className:"border-t-2 border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:q(A.total_amount)})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"Payment Method"]}),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:A.payment_method.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Status"}),e.jsx("span",{className:`text-sm font-medium capitalize ${A.payment_status==="paid"?"text-green-600":A.payment_status==="pending"?"text-amber-600":"text-red-600"}`,children:A.payment_status})]})]})]})]}),A.customer_notes&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-base font-semibold text-amber-900 mb-2 flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),"Customer Notes"]}),e.jsx("p",{className:"text-sm text-amber-800 leading-relaxed",children:A.customer_notes})]})]})]})]})})}):null}const c3=async t=>{const{data:s}=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/delivery/settings",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return s},d3=async(t,s)=>{await G.put("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/delivery/zones",{delivery_zones:s},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},u3=async t=>{const s=new Date().toISOString().split("T")[0],r=new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],{data:a}=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/deliveries",{params:{status:"scheduled,preparing,out_for_delivery",date_from:s,date_to:r},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return a},m3=async(t,s,r)=>{await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/deliveries/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},x3=async(t,s,r)=>{await G.put(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/delivery/carriers/${s}`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})},h3=()=>{var te;const t=Pe(),s=re(V=>V.authentication_state.auth_token),r=re(V=>{var W;return(W=V.authentication_state.supplier_profile)==null?void 0:W.supplier_id}),[a,n]=_.useState("zones"),[i,l]=_.useState(!1),[o,d]=_.useState(null),[c,u]=_.useState(!1),[m,h]=_.useState(null),[x,p]=_.useState(!1),[b,v]=_.useState(null),[j,P]=_.useState({zone_name:"",postal_codes:"",radius_miles:25,delivery_fee:50,estimated_days:2,is_active:!0}),[w,C]=_.useState({api_key:"",api_secret:"",account_number:"",service_level:"standard"}),[f,k]=_.useState({driver_name:"",driver_phone:"",delivery_window_start:"",delivery_window_end:"",delivery_proof_photo_url:"",delivery_notes:""}),[y,F]=_.useState({}),{data:M,isLoading:E,error:B}=ne({queryKey:["delivery-configuration",r],queryFn:()=>c3(s),enabled:!!s&&!!r,staleTime:5*60*1e3,select:V=>({delivery_zones:V.delivery_zones||[],logistics_settings:V.delivery_methods||{standard_delivery:{enabled:!1,base_fee:0,estimated_days:0},express_delivery:{enabled:!1,base_fee:0,estimated_days:0},same_day_delivery:{enabled:!1,base_fee:0,cutoff_time:""},pickup_available:!1,freight_delivery:{enabled:!1,minimum_weight:0}},carrier_integrations:V.carrier_integrations||[]})}),{data:A,isLoading:L}=ne({queryKey:["active-deliveries",r],queryFn:()=>u3(s),enabled:!!s&&!!r&&a==="deliveries",refetchInterval:3e4,select:V=>({active_deliveries:V.deliveries||[],delivery_calendar:V.calendar_view||[]})}),N=oe({mutationFn:V=>d3(s,V),onSuccess:()=>{t.invalidateQueries({queryKey:["delivery-configuration"]}),l(!1),d(null),T()}}),R=oe({mutationFn:({deliveryId:V,updates:W})=>m3(s,V,W),onSuccess:()=>{t.invalidateQueries({queryKey:["active-deliveries"]})}}),O=oe({mutationFn:({carrier:V,config:W})=>x3(s,V,W),onSuccess:()=>{t.invalidateQueries({queryKey:["delivery-configuration"]}),u(!1),h(null),g()}}),T=()=>{P({zone_name:"",postal_codes:"",radius_miles:25,delivery_fee:50,estimated_days:2,is_active:!0}),F({})},g=()=>{C({api_key:"",api_secret:"",account_number:"",service_level:"standard"}),F({})},D=()=>{k({driver_name:"",driver_phone:"",delivery_window_start:"",delivery_window_end:"",delivery_proof_photo_url:"",delivery_notes:""}),F({})},S=()=>{const V={};if(j.zone_name.trim()||(V.zone_name="Zone name is required"),j.postal_codes.trim()||(V.postal_codes="At least one postal code is required"),j.delivery_fee<0&&(V.delivery_fee="Delivery fee must be positive"),Object.keys(V).length>0){F(V);return}const W={zone_id:`zone_${Date.now()}`,zone_name:j.zone_name,postal_codes:j.postal_codes.split(",").map(H=>H.trim()),radius_miles:j.radius_miles,delivery_fee:j.delivery_fee,estimated_days:j.estimated_days,is_active:j.is_active},X=[...(M==null?void 0:M.delivery_zones)||[],W];N.mutate(X)},$=()=>{if(!o)return;const V={};if(j.zone_name.trim()||(V.zone_name="Zone name is required"),j.postal_codes.trim()||(V.postal_codes="At least one postal code is required"),Object.keys(V).length>0){F(V);return}const W=(M==null?void 0:M.delivery_zones.map(X=>X.zone_id===o.zone_id?{...X,zone_name:j.zone_name,postal_codes:j.postal_codes.split(",").map(H=>H.trim()),radius_miles:j.radius_miles,delivery_fee:j.delivery_fee,estimated_days:j.estimated_days,is_active:j.is_active}:X))||[];N.mutate(W)},I=V=>{if(!confirm("Are you sure you want to delete this delivery zone?"))return;const W=(M==null?void 0:M.delivery_zones.filter(X=>X.zone_id!==V))||[];N.mutate(W)},K=V=>{const W=(M==null?void 0:M.delivery_zones.map(X=>X.zone_id===V?{...X,is_active:!X.is_active}:X))||[];N.mutate(W)},U=V=>{d(V),P({zone_name:V.zone_name,postal_codes:V.postal_codes.join(", "),radius_miles:V.radius_miles,delivery_fee:V.delivery_fee,estimated_days:V.estimated_days,is_active:V.is_active}),l(!0)},q=(V,W)=>{if(W==="delivered"){const X=A==null?void 0:A.active_deliveries.find(H=>H.delivery_id===V);X&&(v(X),k({driver_name:"",driver_phone:"",delivery_window_start:X.delivery_window_start,delivery_window_end:X.delivery_window_end,delivery_proof_photo_url:"",delivery_notes:""}),p(!0));return}R.mutate({deliveryId:V,updates:{delivery_status:W}})},z=()=>{if(!b)return;const V={};if(f.driver_name.trim()||(V.driver_name="Driver name is required"),f.driver_phone.trim()||(V.driver_phone="Driver phone is required"),Object.keys(V).length>0){F(V);return}R.mutate({deliveryId:b.delivery_id,updates:{delivery_status:"delivered",driver_name:f.driver_name,driver_phone:f.driver_phone,delivery_window_start:f.delivery_window_start,delivery_window_end:f.delivery_window_end,delivery_proof_photo_url:f.delivery_proof_photo_url||null,delivery_notes:f.delivery_notes||null}},{onSuccess:()=>{p(!1),v(null),D()}})},Y=()=>{if(!m)return;const V={};if(w.api_key.trim()||(V.api_key="API Key is required"),Object.keys(V).length>0){F(V);return}O.mutate({carrier:m,config:{api_credentials:{api_key:w.api_key,api_secret:w.api_secret,account_number:w.account_number},service_settings:{service_level:w.service_level}}})},se=V=>new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),J=V=>new Date(V).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return E?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading delivery management..."})]})})}):B?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ge,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Failed to Load Delivery Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't load your delivery configuration. Please try again."}),e.jsx("button",{onClick:()=>t.invalidateQueries({queryKey:["delivery-configuration"]}),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Delivery Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure delivery zones, manage logistics, and track deliveries"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:"bg-blue-50 px-4 py-2 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:[((te=M==null?void 0:M.delivery_zones)==null?void 0:te.filter(V=>V.is_active).length)||0," Active Zones"]})})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>n("zones"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="zones"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dt,{className:"w-5 h-5"}),e.jsx("span",{children:"Delivery Zones"})]})}),e.jsx("button",{onClick:()=>n("deliveries"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="deliveries"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kt,{className:"w-5 h-5"}),e.jsx("span",{children:"Active Deliveries"}),A&&A.active_deliveries.length>0&&e.jsx("span",{className:"ml-2 bg-blue-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:A.active_deliveries.length})]})}),e.jsx("button",{onClick:()=>n("carriers"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="carriers"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"Carrier Integration"})]})}),e.jsx("button",{onClick:()=>n("performance"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="performance"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zs,{className:"w-5 h-5"}),e.jsx("span",{children:"Performance"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a==="zones"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Coverage Zones"}),e.jsxs("button",{onClick:()=>{d(null),T(),l(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{children:"Add New Zone"})]})]}),(M==null?void 0:M.delivery_zones.length)===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-12 text-center",children:[e.jsx(bw,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Delivery Zones Configured"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Set up your delivery coverage areas to start accepting orders"}),e.jsx("button",{onClick:()=>{T(),l(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Create First Zone"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:M==null?void 0:M.delivery_zones.map(V=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border p-6 transition-all ${V.is_active?"border-green-200":"border-gray-200 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V.zone_name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:V.is_active?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[V.postal_codes.length," postal code",V.postal_codes.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>U(V),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit zone",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(V.zone_id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete zone",children:e.jsx(_t,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Fee:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",V.delivery_fee.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Radius:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[V.radius_miles," miles"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Est. Delivery:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[V.estimated_days," day",V.estimated_days!==1?"s":""]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Postal Codes:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[V.postal_codes.slice(0,5).map((W,X)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded",children:W},X)),V.postal_codes.length>5&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded",children:["+",V.postal_codes.length-5," more"]})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>K(V.zone_id),className:`w-full px-4 py-2 rounded-lg font-medium text-sm transition-colors ${V.is_active?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-600 text-white hover:bg-green-700"}`,children:V.is_active?"Deactivate Zone":"Activate Zone"})})]},V.zone_id))})]}),a==="deliveries"&&e.jsx("div",{className:"space-y-6",children:L?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):(A==null?void 0:A.active_deliveries.length)===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-12 text-center",children:[e.jsx(mt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Deliveries"}),e.jsx("p",{className:"text-gray-600",children:"You don't have any scheduled or in-progress deliveries"})]}):e.jsx("div",{className:"space-y-4",children:A==null?void 0:A.active_deliveries.map(V=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",V.order_number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V.delivery_status==="delivered"?"bg-green-100 text-green-800":V.delivery_status==="out_for_delivery"?"bg-blue-100 text-blue-800":V.delivery_status==="preparing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:V.delivery_status.replace(/_/g," ").toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",e.jsx("span",{className:"font-medium",children:V.customer_name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[V.items_count," item",V.items_count!==1?"s":""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Delivery Window"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:se(V.delivery_window_start)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[J(V.delivery_window_start)," - ",J(V.delivery_window_end)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Delivery Address"}),e.jsx("p",{className:"text-sm text-gray-700",children:V.delivery_address})]})]}),V.delivery_status!=="delivered"&&e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-gray-100",children:[V.delivery_status==="scheduled"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>q(V.delivery_id,"preparing"),className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors text-sm",children:"Mark as Preparing"}),e.jsx("button",{onClick:()=>q(V.delivery_id,"cancelled"),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm",children:"Cancel"})]}),V.delivery_status==="preparing"&&e.jsx("button",{onClick:()=>q(V.delivery_id,"out_for_delivery"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm",children:"Mark as Out for Delivery"}),V.delivery_status==="out_for_delivery"&&e.jsx("button",{onClick:()=>q(V.delivery_id,"delivered"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors text-sm",children:"Mark as Delivered"})]})]},V.delivery_id))})}),a==="carriers"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[M==null?void 0:M.carrier_integrations.map(V=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V.carrier_name}),e.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-xs font-medium ${V.integration_status==="active"?"bg-green-100 text-green-800":V.integration_status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:V.integration_status})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"API Status:"}),e.jsx("span",{className:`font-medium ${V.api_key_status==="valid"?"text-green-600":V.api_key_status==="invalid"?"text-red-600":"text-gray-600"}`,children:V.api_key_status})]}),V.last_sync&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Last Sync:"}),e.jsx("span",{className:"text-gray-900",children:se(V.last_sync)})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Supported Services:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:V.supported_services.map((W,X)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded",children:W},X))})]})]}),e.jsx("button",{onClick:()=>{h(V.carrier_name),g(),u(!0)},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm",children:V.integration_status==="active"?"Reconfigure":"Set Up Integration"})]},V.carrier_name)),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-dashed border-blue-300 p-6 flex flex-col items-center justify-center text-center",children:[e.jsx(Vt,{className:"w-12 h-12 text-blue-600 mb-3"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Need Another Carrier?"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Contact support to add custom carriers"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm",children:"Contact Support"})]})]})}),a==="performance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"98.5%"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:" 2.3% from last month"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Delivery Time"}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"2.1 days"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" 0.3 days faster"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Satisfaction"}),e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(zs,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"4.8/5.0"}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Based on 156 reviews"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Issues"}),e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"3"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This month"})]})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o?"Edit Delivery Zone":"Add New Delivery Zone"}),e.jsx("button",{onClick:()=>{l(!1),d(null),T()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"zone_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Zone Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"zone_name",value:j.zone_name,onChange:V=>{P(W=>({...W,zone_name:V.target.value})),F(W=>({...W,zone_name:""}))},placeholder:"e.g., Austin Metro Area",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.zone_name?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.zone_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.zone_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"postal_codes",className:"block text-sm font-medium text-gray-700 mb-2",children:["Postal Codes ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"postal_codes",value:j.postal_codes,onChange:V=>{P(W=>({...W,postal_codes:V.target.value})),F(W=>({...W,postal_codes:""}))},placeholder:"Enter postal codes separated by commas (e.g., 78701, 78702, 78703)",rows:3,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.postal_codes?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.postal_codes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.postal_codes}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Separate multiple postal codes with commas"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"radius_miles",className:"block text-sm font-medium text-gray-700 mb-2",children:"Radius (miles)"}),e.jsx("input",{type:"number",id:"radius_miles",value:j.radius_miles,onChange:V=>P(W=>({...W,radius_miles:Number(V.target.value)})),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_fee",className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Fee ($)"}),e.jsx("input",{type:"number",id:"delivery_fee",value:j.delivery_fee,onChange:V=>{P(W=>({...W,delivery_fee:Number(V.target.value)})),F(W=>({...W,delivery_fee:""}))},min:"0",step:"0.01",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.delivery_fee?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.delivery_fee&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.delivery_fee})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estimated_days",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Delivery Days"}),e.jsx("input",{type:"number",id:"estimated_days",value:j.estimated_days,onChange:V=>P(W=>({...W,estimated_days:Number(V.target.value)})),min:"0",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:j.is_active,onChange:V=>P(W=>({...W,is_active:V.target.checked})),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Activate zone immediately"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{l(!1),d(null),T()},className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:o?$:S,disabled:N.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):o?"Update Zone":"Add Zone"})]})]})}),c&&m&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Configure ",m]}),e.jsx("button",{onClick:()=>{u(!1),h(null),g()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"api_key",className:"block text-sm font-medium text-gray-700 mb-2",children:["API Key ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"api_key",value:w.api_key,onChange:V=>{C(W=>({...W,api_key:V.target.value})),F(W=>({...W,api_key:""}))},placeholder:"Enter carrier API key",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.api_key?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.api_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.api_key})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"api_secret",className:"block text-sm font-medium text-gray-700 mb-2",children:"API Secret"}),e.jsx("input",{type:"password",id:"api_secret",value:w.api_secret,onChange:V=>C(W=>({...W,api_secret:V.target.value})),placeholder:"Enter carrier API secret",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),e.jsx("input",{type:"text",id:"account_number",value:w.account_number,onChange:V=>C(W=>({...W,account_number:V.target.value})),placeholder:"Enter carrier account number",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"service_level",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Service Level"}),e.jsxs("select",{id:"service_level",value:w.service_level,onChange:V=>C(W=>({...W,service_level:V.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"standard",children:"Standard Delivery"}),e.jsx("option",{value:"express",children:"Express Delivery"}),e.jsx("option",{value:"same_day",children:"Same Day Delivery"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3 border-t border-gray-200 rounded-b-xl",children:[e.jsx("button",{onClick:()=>{u(!1),h(null),g()},className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:O.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:O.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Configuration"})]})]})}),x&&b&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Complete Delivery - Order #",b.order_number]}),e.jsx("button",{onClick:()=>{p(!1),v(null),D()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Customer:"})," ",b.customer_name]}),e.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[e.jsx("strong",{children:"Address:"})," ",b.delivery_address]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"driver_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Driver Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"driver_name",value:f.driver_name,onChange:V=>{k(W=>({...W,driver_name:V.target.value})),F(W=>({...W,driver_name:""}))},placeholder:"Enter driver name",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.driver_name?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.driver_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.driver_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"driver_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Driver Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"driver_phone",value:f.driver_phone,onChange:V=>{k(W=>({...W,driver_phone:V.target.value})),F(W=>({...W,driver_phone:""}))},placeholder:"+1-555-0123",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${y.driver_phone?"border-red-300":"border-gray-200 focus:border-blue-500"}`}),y.driver_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.driver_phone})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_window_start",className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Window Start"}),e.jsx("input",{type:"datetime-local",id:"delivery_window_start",value:f.delivery_window_start?new Date(f.delivery_window_start).toISOString().slice(0,16):"",onChange:V=>k(W=>({...W,delivery_window_start:new Date(V.target.value).toISOString()})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_window_end",className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Window End"}),e.jsx("input",{type:"datetime-local",id:"delivery_window_end",value:f.delivery_window_end?new Date(f.delivery_window_end).toISOString().slice(0,16):"",onChange:V=>k(W=>({...W,delivery_window_end:new Date(V.target.value).toISOString()})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_proof_photo_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof of Delivery Photo URL"}),e.jsx("input",{type:"url",id:"delivery_proof_photo_url",value:f.delivery_proof_photo_url,onChange:V=>k(W=>({...W,delivery_proof_photo_url:V.target.value})),placeholder:"https://example.com/proof.jpg",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Upload a photo showing proof of delivery"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Notes"}),e.jsx("textarea",{id:"delivery_notes",value:f.delivery_notes,onChange:V=>k(W=>({...W,delivery_notes:V.target.value})),placeholder:"Add any additional delivery notes...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{p(!1),v(null),D()},className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:R.isPending,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Completing..."]}):"Complete Delivery"})]})]})})]})})},p3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/products",{headers:{Authorization:`Bearer ${t}`},params:{limit:100,offset:0,sort_by:"product_name",sort_order:"asc"}})).data.products||[],g3=async(t,s)=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/promotions",{headers:{Authorization:`Bearer ${t}`},params:{supplier_id:s,is_active:"true"}})).data||[],f3=async(t,s,r)=>{const a=i=>{if(!i)return"";try{const l=new Date(i);return isNaN(l.getTime())?(console.error("[formatDateTimeForAPI] Invalid date:",i),i):l.toISOString()}catch(l){return console.error("[formatDateTimeForAPI] Error formatting date:",l,"value:",i),i}};return(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/promotions",{supplier_id:s,promotion_name:r.promotion_name,promotion_type:r.promotion_type,discount_type:r.discount_type,discount_value:Number(r.discount_value),start_date:a(r.start_date),end_date:a(r.end_date),applicable_products:r.applicable_products.length>0?r.applicable_products:null,promo_code:r.promo_code||null,minimum_purchase_amount:r.minimum_purchase_amount?Number(r.minimum_purchase_amount):null,is_active:!0},{headers:{Authorization:`Bearer ${t}`}})).data},b3=async(t,s,r,a)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${s}`,{price_per_unit:Number(r),bulk_pricing:a},{headers:{Authorization:`Bearer ${t}`}})).data,y3=()=>{const t=re($=>$.authentication_state.auth_token),s=re($=>$.authentication_state.current_user),r=re($=>$.authentication_state.supplier_profile),a=Pe(),n=(r==null?void 0:r.supplier_id)||(s==null?void 0:s.user_id)||"",[i,l]=_.useState("pricing"),[o,d]=_.useState(!1),[c,u]=_.useState(null),[m,h]=_.useState(""),[x,p]=_.useState(""),[b,v]=_.useState(null),j=Z.useRef(null),P=Z.useRef(null),[w,C]=_.useState({promotion_name:"",promotion_type:"seasonal",discount_type:"percentage",discount_value:0,start_date:"",end_date:"",applicable_products:[],promo_code:"",minimum_purchase_amount:null}),f=Z.useCallback($=>{if(!$)return"";if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test($))return $;if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test($))return $.substring(0,16);try{const I=new Date($);if(isNaN(I.getTime()))return console.warn("[normalizeDateTimeValue] Invalid date:",$),"";const K=I.getFullYear(),U=String(I.getMonth()+1).padStart(2,"0"),q=String(I.getDate()).padStart(2,"0"),z=String(I.getHours()).padStart(2,"0"),Y=String(I.getMinutes()).padStart(2,"0"),se=`${K}-${U}-${q}T${z}:${Y}`;return console.log("[normalizeDateTimeValue] Normalized:",$,"->",se),/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(se)?se:(console.error("[normalizeDateTimeValue] Invalid output format:",se,"from:",$),"")}catch(I){return console.error("[normalizeDateTimeValue] Error parsing date:",I,"value:",$),""}},[]);_.useEffect(()=>(window.__setPromotionFormData=$=>{C(I=>{const K={...$};if($.start_date!==void 0){const U=f($.start_date);K.start_date=U,j.current&&U&&(j.current.value=U,j.current.setCustomValidity(""))}if($.end_date!==void 0){const U=f($.end_date);K.end_date=U,P.current&&U&&(P.current.value=U,P.current.setCustomValidity(""))}return{...I,...K}})},()=>{delete window.__setPromotionFormData}),[f]);const{data:k=[],isLoading:y,error:F}=ne({queryKey:["supplier-products",n],queryFn:()=>p3(t||""),enabled:!!t&&!!n,staleTime:6e4,select:$=>$.map(I=>({...I,price_per_unit:Number(I.price_per_unit||0),cost_price:I.cost_price?Number(I.cost_price):null}))}),{data:M=[],isLoading:E,error:B}=ne({queryKey:["supplier-promotions",n],queryFn:()=>g3(t||"",n),enabled:!!t&&!!n,staleTime:3e4,select:$=>$.map(I=>({...I,discount_value:Number(I.discount_value||0),usage_count:Number(I.usage_count||0)}))}),A=oe({mutationFn:$=>f3(t||"",n,$),onSuccess:()=>{a.invalidateQueries({queryKey:["supplier-promotions"]}),d(!1),C({promotion_name:"",promotion_type:"seasonal",discount_type:"percentage",discount_value:0,start_date:"",end_date:"",applicable_products:[],promo_code:"",minimum_purchase_amount:null}),v({type:"success",text:"Promotion created successfully!"}),setTimeout(()=>v(null),3e3)},onError:$=>{var I,K;v({type:"error",text:((K=(I=$.response)==null?void 0:I.data)==null?void 0:K.message)||"Failed to create promotion"}),setTimeout(()=>v(null),5e3)}}),L=oe({mutationFn:({productId:$,price:I,bulkPricing:K})=>b3(t||"",$,I,K),onSuccess:()=>{a.invalidateQueries({queryKey:["supplier-products"]}),u(null),h(""),v({type:"success",text:"Price updated successfully!"}),setTimeout(()=>v(null),3e3)},onError:$=>{var I,K;v({type:"error",text:((K=(I=$.response)==null?void 0:I.data)==null?void 0:K.message)||"Failed to update price"}),setTimeout(()=>v(null),5e3)}}),N=_.useMemo(()=>k.map($=>({...$,margin_percentage:$.cost_price&&$.price_per_unit>0?($.price_per_unit-$.cost_price)/$.price_per_unit*100:null})),[k]),R=_.useMemo(()=>{if(!x)return N;const $=x.toLowerCase();return N.filter(I=>I.product_name.toLowerCase().includes($)||I.sku.toLowerCase().includes($))},[N,x]),O=$=>{u($.product_id),h($.price_per_unit.toString())},T=()=>{u(null),h("")},g=$=>{const I=parseFloat(m);if(isNaN(I)||I<=0){v({type:"error",text:"Please enter a valid price"}),setTimeout(()=>v(null),3e3);return}L.mutate({productId:$.product_id,price:I,bulkPricing:$.bulk_pricing})},D=$=>{if($.preventDefault(),console.log("[handleCreatePromotion] Form data:",w),!w.promotion_name.trim()){v({type:"error",text:"Promotion name is required"}),setTimeout(()=>v(null),3e3);return}if(w.discount_value<=0){v({type:"error",text:"Discount value must be greater than zero"}),setTimeout(()=>v(null),3e3);return}if(!w.start_date||!w.end_date){v({type:"error",text:"Start and end dates are required"}),setTimeout(()=>v(null),3e3);return}const I=new Date(w.start_date),K=new Date(w.end_date);if(isNaN(I.getTime())||isNaN(K.getTime())){console.error("[handleCreatePromotion] Invalid date values:",{start_date:w.start_date,end_date:w.end_date,startDate:I.toString(),endDate:K.toString()}),v({type:"error",text:"Please enter valid dates"}),setTimeout(()=>v(null),3e3);return}if(K<=I){v({type:"error",text:"End date must be after start date"}),setTimeout(()=>v(null),3e3);return}console.log("[handleCreatePromotion] Validation passed, submitting..."),A.mutate(w)},S=($,I)=>{C(K=>({...K,[$]:I}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Te,{className:"w-8 h-8 text-blue-600"}),"Pricing & Promotions"]}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Manage your product pricing, bulk discounts, and promotional campaigns"})]}),i==="promotions"&&e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(dt,{className:"w-5 h-5"}),"Create Promotion"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>l("pricing"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="pricing"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Product Pricing"]})}),e.jsx("button",{onClick:()=>l("promotions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="promotions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"w-4 h-4"}),"Promotions (",M.length,")"]})}),e.jsx("button",{onClick:()=>l("analytics"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="analytics"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Analytics"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&e.jsx("div",{className:`fixed top-20 right-4 z-50 px-6 py-4 rounded-lg shadow-xl border ${b.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.type==="success"?e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}):e.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),e.jsx("p",{className:"font-medium",children:b.text})]})}),i==="pricing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",value:x,onChange:$=>p($.target.value),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"}),e.jsx("button",{className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Search"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Product Pricing (",R.length,")"]})}),y?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):F?e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load products. Please try again."})}):R.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No products found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map($=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.product_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:$.sku})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c===$.product_id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:m,onChange:I=>h(I.target.value),className:"w-24 px-2 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-100",autoFocus:!0})]}):e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",Number($.price_per_unit||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:$.cost_price?`$${$.cost_price.toFixed(2)}`:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.margin_percentage!==null?e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${$.margin_percentage>=30?"bg-green-100 text-green-800":$.margin_percentage>=15?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[$.margin_percentage.toFixed(1),"%"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${$.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:c===$.product_id?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>g($),disabled:L.isPending,className:"inline-flex items-center gap-1 text-green-600 hover:text-green-900 transition-colors disabled:opacity-50",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Save"]}),e.jsxs("button",{onClick:T,disabled:L.isPending,className:"inline-flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50",children:[e.jsx(ge,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>O($),className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-900 transition-colors",children:[e.jsx(Is,{className:"w-4 h-4"}),"Edit Price"]})})]},$.product_id))})]})})]})]}),i==="promotions"&&e.jsx("div",{className:"space-y-6",children:E?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading promotions..."})]}):B?e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:e.jsx("p",{className:"text-red-600",children:"Failed to load promotions. Please try again."})}):M.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx(Aa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Promotions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first promotional campaign to boost sales"}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(dt,{className:"w-5 h-5"}),"Create First Promotion"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:M.map($=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:$.promotion_name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:$.promotion_type.replace("_"," ")})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${$.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yw,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Discount"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:$.discount_type==="percentage"?`${$.discount_value}% off`:`$${$.discount_value.toFixed(2)} off`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Duration"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[new Date($.start_date).toLocaleDateString()," - ",new Date($.end_date).toLocaleDateString()]})]})]}),$.promo_code&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ob,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Promo Code"}),e.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900 bg-gray-100 px-2 py-1 rounded inline-block",children:$.promo_code})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Usage Count"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[$.usage_count," times"]})]})})]})]})},$.promotion_id))})}),i==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(Re,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Pricing Analytics Coming Soon"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Advanced pricing analytics including conversion rates, margin analysis, and pricing optimization recommendations will be available soon."})]})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Promotion"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Name *"}),e.jsx("input",{type:"text",required:!0,value:w.promotion_name,onChange:$=>S("promotion_name",$.target.value),placeholder:"e.g., Summer Sale 2024",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Type *"}),e.jsxs("select",{required:!0,value:w.promotion_type,onChange:$=>S("promotion_type",$.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"seasonal",children:"Seasonal"}),e.jsx("option",{value:"volume_discount",children:"Volume Discount"}),e.jsx("option",{value:"new_customer",children:"New Customer"}),e.jsx("option",{value:"trade_exclusive",children:"Trade Exclusive"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type *"}),e.jsxs("select",{required:!0,value:w.discount_type,onChange:$=>S("discount_type",$.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Value *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:w.discount_value||"",onChange:$=>S("discount_value",parseFloat($.target.value)||0),placeholder:w.discount_type==="percentage"?"10":"50.00",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"promotion-start-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{ref:j,id:"promotion-start-date",name:"start_date",type:"datetime-local",required:!0,value:w.start_date,onChange:$=>{S("start_date",$.target.value)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all","data-testid":"promotion-start-date","aria-label":"Promotion Start Date"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"promotion-end-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),e.jsx("input",{ref:P,id:"promotion-end-date",name:"end_date",type:"datetime-local",required:!0,value:w.end_date,onChange:$=>{S("end_date",$.target.value)},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all","data-testid":"promotion-end-date","aria-label":"Promotion End Date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promo Code (Optional)"}),e.jsx("input",{type:"text",value:w.promo_code,onChange:$=>S("promo_code",$.target.value.toUpperCase()),placeholder:"e.g., SUMMER2024",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all font-mono"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Leave empty for automatic discount application"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Purchase Amount (Optional)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:w.minimum_purchase_amount||"",onChange:$=>S("minimum_purchase_amount",parseFloat($.target.value)||null),placeholder:"0.00",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),disabled:A.isPending,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-5 h-5"}),"Create Promotion"]})})]})]})]})})]})},v3=async(t,s,r)=>{const a=new URLSearchParams;a.append("conversation_type","customer_supplier"),t&&t!=="all"&&a.append("status",t);const i=(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations?${a.toString()}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data.map(l=>({conversation_id:l.conversation_id,customer_id:l.customer_id,customer_name:l.customer_name||"Unknown Customer",conversation_type:l.conversation_type,status:l.status,last_message_at:l.last_message_at,unread_count:l.unread_messages_count||0,related_entity_type:l.related_entity_type,related_entity_id:l.related_entity_id}));return s?i.filter(l=>l.unread_count>0):i},j3=async(t,s)=>(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations/${t}/messages?limit=50&offset=0`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,N3=async(t,s,r,a)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations/${t}/messages`,{message_text:s,attachments:r.length>0?r:null},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,w3=()=>{const t=re(L=>L.authentication_state.auth_token),s=re(L=>L.authentication_state.supplier_profile),r=re(L=>L.websocket_connection),[a,n]=Fe(),i=Pe(),[l,o]=_.useState(null),[d,c]=_.useState({message_text:"",attachments:[],is_sending:!1}),[u,m]=_.useState({filter_type:a.get("conversation_filter")||"all",search_query:"",date_range:null}),h=_.useRef(null),x=a.get("unread_only")==="true",{data:p=[],isLoading:b,error:v,refetch:j}=ne({queryKey:["supplier-conversations",u.filter_type,x],queryFn:()=>v3(u.filter_type,x,t),enabled:!!t,staleTime:3e4,refetchOnWindowFocus:!0}),{data:P=[],isLoading:w,error:C}=ne({queryKey:["conversation-messages",l==null?void 0:l.conversation_id],queryFn:()=>j3(l.conversation_id,t),enabled:!!t&&!!l,staleTime:1e4,refetchInterval:3e4}),f=oe({mutationFn:({conversationId:L,messageText:N,attachments:R})=>N3(L,N,R,t),onMutate:()=>{c(L=>({...L,is_sending:!0}))},onSuccess:L=>{i.setQueryData(["conversation-messages",l==null?void 0:l.conversation_id],(N=[])=>[...N,L]),c({message_text:"",attachments:[],is_sending:!1}),j(),k()},onError:L=>{console.error("Failed to send message:",L),c(N=>({...N,is_sending:!1})),alert("Failed to send message. Please try again.")}});_.useEffect(()=>{if(!r||!l)return;const L=r;L.emit("join_conversation",{conversation_id:l.conversation_id});const N=R=>{R.conversation_id===l.conversation_id&&(i.setQueryData(["conversation-messages",l.conversation_id],(O=[])=>O.some(T=>T.message_id===R.message_id)?O:[...O,{message_id:R.message_id,conversation_id:R.conversation_id,sender_id:R.sender_id,sender_type:R.sender_type,message_text:R.message_text,attachments:R.attachments||null,is_read:R.is_read,timestamp:R.timestamp}]),setTimeout(k,100)),j()};return L.on("chat_message_received",N),()=>{L.off("chat_message_received",N),L.emit("leave_conversation",{conversation_id:l.conversation_id})}},[r,l,i,j]);const k=()=>{var L;(L=h.current)==null||L.scrollIntoView({behavior:"smooth"})},y=_.useCallback(L=>{o(L)},[]),F=_.useCallback(L=>{L.preventDefault(),!(!l||!d.message_text.trim())&&f.mutate({conversationId:l.conversation_id,messageText:d.message_text.trim(),attachments:d.attachments})},[l,d,f]),M=L=>{m(R=>({...R,filter_type:L}));const N=new URLSearchParams(a);L!=="all"?N.set("conversation_filter",L):N.delete("conversation_filter"),n(N)},E=()=>{const L=new URLSearchParams(a);x?L.delete("unread_only"):L.set("unread_only","true"),n(L)},B=L=>{if(!L)return"Never";const N=new Date(L),O=new Date().getTime()-N.getTime(),T=Math.floor(O/6e4),g=Math.floor(O/36e5),D=Math.floor(O/864e5);return T<1?"Just now":T<60?`${T}m ago`:g<24?`${g}h ago`:D<7?`${D}d ago`:N.toLocaleDateString()},A=(L,N)=>!L||!N?null:L==="order"?e.jsxs(Q,{to:`/supplier/orders/${N}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 rounded-md text-xs hover:bg-blue-100 transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),"Order"]}):L==="product"?e.jsxs(Q,{to:`/product/${N}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 rounded-md text-xs hover:bg-green-100 transition-colors",children:[e.jsx(ve,{className:"w-3 h-3"}),"Product"]}):null;return _.useEffect(()=>{P.length>0&&k()},[P]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Messages"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage customer inquiries and communications"})]}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Conversations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.filter(L=>L.unread_count>0).length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Unread"})]}),(s==null?void 0:s.response_time_average)&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Number(s==null?void 0:s.response_time_average).toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Avg Response Time"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-lg border border-gray-200 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:u.search_query,onChange:L=>m(N=>({...N,search_query:L.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>M("all"),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${u.filter_type==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>M("active"),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${u.filter_type==="active"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Active"}),e.jsx("button",{onClick:()=>M("archived"),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${u.filter_type==="archived"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Archived"}),e.jsx("button",{onClick:E,className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${x?"bg-amber-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Unread Only"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[b&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),v&&e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load conversations"})})}),!b&&!v&&p.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(zt,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Customer messages will appear here"})]}),!b&&!v&&p.length>0&&e.jsx("div",{className:"divide-y divide-gray-200",children:p.filter(L=>u.search_query===""||L.customer_name.toLowerCase().includes(u.search_query.toLowerCase())).map(L=>e.jsx("button",{onClick:()=>y(L),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${(l==null?void 0:l.conversation_id)===L.conversation_id?"bg-blue-50 border-l-4 border-blue-600":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Xt,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:`text-sm font-medium truncate ${L.unread_count>0?"text-gray-900":"text-gray-700"}`,children:L.customer_name}),L.unread_count>0&&e.jsx("span",{className:"flex-shrink-0 inline-flex items-center justify-center px-2 py-0.5 bg-blue-600 text-white rounded-full text-xs font-medium",children:L.unread_count})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[A(L.related_entity_type,L.related_entity_id),e.jsx("span",{className:"text-xs text-gray-500",children:B(L.last_message_at)})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"}`,children:L.status})})]})]})},L.conversation_id))})]})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg border border-gray-200 flex flex-col overflow-hidden",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(Xt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.customer_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A(l.related_entity_type,l.related_entity_id),e.jsx("span",{className:"text-xs text-gray-500",children:""}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${l.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"}`,children:l.status})]})]})]}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(vw,{className:"w-5 h-5 text-gray-600"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50",children:[w&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),C&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load messages"})}),!w&&!C&&P.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600",children:"No messages yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Start the conversation below"})]}),!w&&!C&&P.length>0&&e.jsxs(e.Fragment,{children:[P.map(L=>{const N=L.sender_type==="supplier";return e.jsx("div",{className:`flex ${N?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] ${N?"order-2":"order-1"}`,children:[e.jsx("div",{className:`text-xs text-gray-600 mb-1 ${N?"text-right":"text-left"}`,children:N?"You":l.customer_name}),e.jsxs("div",{className:`rounded-2xl px-4 py-3 ${N?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:L.message_text}),L.attachments&&L.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:L.attachments.map((R,O)=>e.jsxs("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 text-xs underline ${N?"text-blue-100":"text-blue-600"}`,children:[e.jsx($a,{className:"w-3 h-3"}),"Attachment ",O+1]},O))})]}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-gray-500 ${N?"justify-end":"justify-start"}`,children:[e.jsx("span",{children:B(L.timestamp)}),N&&L.is_read&&e.jsx(jw,{className:"w-3 h-3 text-blue-600"})]})]})},L.message_id)}),e.jsx("div",{ref:h})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("form",{onSubmit:F,className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsx("textarea",{value:d.message_text,onChange:L=>{c(N=>({...N,message_text:L.target.value}))},placeholder:"Type your message...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:d.is_sending,onKeyDown:L=>{(L.ctrlKey||L.metaKey)&&L.key==="Enter"&&(L.preventDefault(),F(L))}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Attach file (coming soon)",disabled:!0,children:e.jsx($a,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs text-gray-500",children:"Press Ctrl+Enter to send"})]}),e.jsx("button",{type:"submit",disabled:d.is_sending||!d.message_text.trim(),className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium text-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:d.is_sending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(km,{className:"w-4 h-4"}),"Send Message"]})})]})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[e.jsx(zt,{className:"w-20 h-20 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-600 text-center max-w-md",children:"Choose a customer conversation from the list to view messages and respond"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(He,{className:"w-4 h-4 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Response Time Best Practices"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Quick responses improve customer satisfaction. Aim to reply within 2 hours during business hours.",(s==null?void 0:s.response_time_average)&&e.jsxs(e.Fragment,{children:[" Your current average response time is ",e.jsxs("strong",{children:[Number(s==null?void 0:s.response_time_average).toFixed(1)," hours"]}),"."]})]})]})]})})})]})})},_3=async(t,s,r)=>{const a={supplier_id:t,status:"published",limit:r.limit.toString(),offset:r.offset.toString(),sort_by:"review_date",sort_order:"desc"};r.min_rating&&(a.min_rating=r.min_rating.toString());const n=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/reviews",{params:a,headers:{Authorization:`Bearer ${s}`}});let i=n.data.reviews||[];return r.response_needed&&(i=i.filter(l=>!l.supplier_response)),{reviews:i,total:n.data.total||0,average_rating:n.data.average_rating||0}},k3=async(t,s,r)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/reviews/${t}/response`,{supplier_response:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data,S3=()=>{const t=Pe(),[s,r]=Fe(),a=re(E=>E.authentication_state.supplier_profile),n=re(E=>E.authentication_state.auth_token),[i,l]=_.useState(null),[o,d]=_.useState(""),[c,u]=_.useState(""),m=s.get("rating_filter")?parseInt(s.get("rating_filter")):void 0,h=s.get("response_needed")==="true",x=parseInt(s.get("page")||"1"),p=15,{data:b,isLoading:v,error:j}=ne({queryKey:["supplier-reviews",a==null?void 0:a.supplier_id,m,h,x],queryFn:()=>_3((a==null?void 0:a.supplier_id)||"",n||"",{min_rating:m,response_needed:h,limit:p,offset:(x-1)*p}),enabled:!!(a!=null&&a.supplier_id)&&!!n,staleTime:3e4,retry:1}),P=_.useMemo(()=>{if(!(b!=null&&b.reviews))return{total_reviews:0,average_rating:0,rating_distribution:{5:0,4:0,3:0,2:0,1:0},response_rate:0,avg_response_time_hours:0};const E=b.reviews,B={5:0,4:0,3:0,2:0,1:0};let A=0,L=0;return E.forEach(N=>{if(B[N.rating_overall]++,N.supplier_response&&N.supplier_response_date){L++;const R=new Date(N.review_date).getTime(),O=new Date(N.supplier_response_date).getTime();A+=(O-R)/(1e3*60*60)}}),{total_reviews:b.total,average_rating:b.average_rating,rating_distribution:B,response_rate:E.length>0?L/E.length*100:0,avg_response_time_hours:L>0?A/L:0}},[b]),w=oe({mutationFn:E=>k3(E.review_id,E.response_text,n||""),onSuccess:()=>{t.invalidateQueries({queryKey:["supplier-reviews"]}),l(null),d("")},onError:E=>{console.error("Failed to submit response:",E)}}),C=(E,B)=>{const A=new URLSearchParams(s);E==="rating_filter"&&B?A.set("rating_filter",B.toString()):E==="response_needed"&&(B?A.set("response_needed","true"):A.delete("response_needed")),A.set("page","1"),r(A)},f=E=>{const B=new URLSearchParams(s);B.set("page",E.toString()),r(B)},k=E=>{o.trim()&&w.mutate({review_id:E,response_text:o.trim()})},y=_.useMemo(()=>{if(!(b!=null&&b.reviews))return[];let E=[...b.reviews];return c&&(E=E.filter(B=>{var A,L,N;return((A=B.review_text)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||((L=B.customer_name)==null?void 0:L.toLowerCase().includes(c.toLowerCase()))||((N=B.product_name)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))})),E},[b,c]),F=Math.ceil(((b==null?void 0:b.total)||0)/p),M=(E,B="md")=>{const A={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return e.jsx("div",{className:"flex items-center space-x-0.5",children:[1,2,3,4,5].map(L=>e.jsx(Oe,{className:`${A[B]} ${L<=E?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},L))})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reviews & Reputation"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage customer reviews and track your reputation performance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),e.jsx(Ft,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.total_reviews}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All time"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),e.jsx(Oe,{className:"w-5 h-5 text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.average_rating.toFixed(1)}),e.jsx("div",{className:"flex",children:M(Math.round(P.average_rating),"sm")})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Out of 5.0"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Response Rate"}),e.jsx(Re,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[P.response_rate.toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:P.response_rate>=80?"Excellent":P.response_rate>=50?"Good":"Needs improvement"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsx(zs,{className:"w-5 h-5 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.avg_response_time_hours>0?P.avg_response_time_hours.toFixed(1):"-"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hours"})]})]}),P.total_reviews>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rating Distribution"}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(E=>{const B=P.rating_distribution[E],A=P.total_reviews>0?B/P.total_reviews*100:0;return e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1 w-20",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:E}),e.jsx(Oe,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),e.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${A}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-16 text-right",children:[B," (",A.toFixed(0),"%)"]})]},E)})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reviews...",value:c,onChange:E=>u(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:m||"",onChange:E=>C("rating_filter",E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars Only"}),e.jsx("option",{value:"4",children:"4+ Stars"}),e.jsx("option",{value:"3",children:"3+ Stars"}),e.jsx("option",{value:"2",children:"2+ Stars"}),e.jsx("option",{value:"1",children:"1+ Stars"})]}),e.jsxs("button",{onClick:()=>C("response_needed",!h),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${h?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Needs Response"})]})]})]}),(m||h||c)&&e.jsxs("div",{className:"mt-4 flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),m&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[m,"+ Stars",e.jsx("button",{onClick:()=>C("rating_filter",""),className:"ml-2 text-blue-600 hover:text-blue-800",children:""})]}),h&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Needs Response",e.jsx("button",{onClick:()=>C("response_needed",!1),className:"ml-2 text-blue-600 hover:text-blue-800",children:""})]}),c&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',c,'"',e.jsx("button",{onClick:()=>u(""),className:"ml-2 text-blue-600 hover:text-blue-800",children:""})]})]})]}),v?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reviews..."})]}):j?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Failed to load reviews"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Please try again later"})]})]})}):y.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(Ft,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-600",children:m||h||c?"Try adjusting your filters":"Reviews from customers will appear here"})]}):e.jsx("div",{className:"space-y-4",children:y.map(E=>{var B;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:E.customer_name||"Anonymous Customer"}),E.verified_purchase&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Verified Purchase"]})]})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[M(E.rating_overall),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:new Date(E.review_date).toLocaleDateString()}),E.product_name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-gray-700",children:E.product_name})]})]})]}),E.supplier_response?e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Responded"}):e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:"Needs Response"})]}),(E.rating_product||E.rating_service||E.rating_delivery)&&e.jsxs("div",{className:"flex items-center space-x-6 mb-4 pb-4 border-b border-gray-100",children:[E.rating_product&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Product:"}),M(E.rating_product,"sm")]}),E.rating_service&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Service:"}),M(E.rating_service,"sm")]}),E.rating_delivery&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery:"}),M(E.rating_delivery,"sm")]})]}),E.review_text&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:E.review_text})}),E.photos&&E.photos.length>0&&e.jsx("div",{className:"flex space-x-2 mb-4",children:E.photos.map((A,L)=>e.jsx("img",{src:A,alt:`Review photo ${L+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"},L))}),E.helpful_votes>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[E.helpful_votes," ",E.helpful_votes===1?"customer":"customers"," found this helpful"]})}),E.supplier_response?e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mt-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:((B=a==null?void 0:a.business_name)==null?void 0:B.charAt(0))||"S"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:(a==null?void 0:a.business_name)||"Your Business"}),e.jsx("span",{className:"text-xs text-gray-500",children:E.supplier_response_date?new Date(E.supplier_response_date).toLocaleDateString():""})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:E.supplier_response})]})]})}):i===E.review_id?e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Response"}),e.jsx("textarea",{value:o,onChange:A=>d(A.target.value),placeholder:"Write a professional response to this review...",rows:4,maxLength:1e3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[o.length,"/1000 characters"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{l(null),d("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>k(E.review_id),disabled:!o.trim()||w.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Response"})]})]})]}):e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{l(E.review_id),d("")},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{children:"Respond to Review"})]}),e.jsxs("button",{disabled:!0,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-400 bg-gray-50 border border-gray-200 rounded-lg cursor-not-allowed",title:"Flag for moderation (coming soon)",children:[e.jsx(Gr,{className:"w-4 h-4"}),e.jsx("span",{children:"Flag"})]})]})]},E.review_id)})}),F>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-gray-200 px-6 py-4 shadow-sm",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*p+1," to ",Math.min(x*p,(b==null?void 0:b.total)||0)," of ",(b==null?void 0:b.total)||0," reviews"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(x-1),disabled:x===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,F)},(E,B)=>{let A;return F<=5||x<=3?A=B+1:x>=F-2?A=F-4+B:A=x-2+B,e.jsx("button",{onClick:()=>f(A),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${A===x?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:A},A)})}),e.jsx("button",{onClick:()=>f(x+1),disabled:x===F,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-blue-600 mr-2"}),"Tips for Managing Reviews"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"Respond to all reviews within 24 hours to show customers you care"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"Thank customers for positive reviews and address concerns in negative ones"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"Keep responses professional, concise, and solution-focused"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:""}),e.jsx("span",{children:"Use reviews as feedback to improve your products and services"})]})]})]})]})})})},un=()=>{var t,s;try{const r=localStorage.getItem("app-storage");if(!r)return null;const a=JSON.parse(r);return((s=(t=a==null?void 0:a.state)==null?void 0:t.authentication_state)==null?void 0:s.auth_token)||null}catch(r){return console.error("Error reading auth token:",r),null}},C3=async t=>{const s=un();return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/dashboard",{params:{date_range:t},headers:{Authorization:`Bearer ${s}`}})).data},P3=async t=>{const s=un();return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/sales",{params:{date_range:t},headers:{Authorization:`Bearer ${s}`}})).data},A3=async t=>{const s=un();return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/products",{params:{date_range:t},headers:{Authorization:`Bearer ${s}`}})).data},$3=async t=>{const s=un();return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/customers",{params:{date_range:t},headers:{Authorization:`Bearer ${s}`}})).data},O3=async t=>{const s=un();return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/financials",{params:{date_range:t},headers:{Authorization:`Bearer ${s}`}})).data},T3=async(t,s,r)=>{const a=un();return(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me/analytics/export",{format:t,date_range:s,sections:r},{headers:{Authorization:`Bearer ${a}`},responseType:"blob"})).data},E3=()=>{var K,U,q,z,Y,se,J,te,V,W,X,H,ee,ue,be,ke,De,ht;const[t,s]=Fe(),r=re(me=>me.authentication_state.supplier_profile),[a,n]=_.useState(t.get("metric_category")||"dashboard"),[i,l]=_.useState({range_type:t.get("date_range")||"last_30_days",custom_start:null,custom_end:null,comparison_period:null}),[o]=_.useState(t.get("comparison_enabled")==="true"),[d,c]=_.useState(!1),[u]=_.useState("pdf"),[m,h]=_.useState(!1),{data:x,isLoading:p,error:b,refetch:v}=ne({queryKey:["supplier-analytics-dashboard",i.range_type],queryFn:()=>C3(i.range_type),enabled:a==="dashboard",staleTime:5*60*1e3,retry:1,select:me=>({total_sales:Number(me.total_sales||0),total_orders:Number(me.total_orders||0),avg_order_value:Number(me.avg_order_value||0),fulfillment_rate:Number(me.fulfillment_rate||0),customer_count:Number(me.customer_count||0),product_count:Number(me.product_count||0),rating_average:Number(me.rating_average||0)})}),{data:j,isLoading:P,error:w,refetch:C}=ne({queryKey:["supplier-analytics-sales",i.range_type],queryFn:()=>P3(i.range_type),enabled:a==="sales",staleTime:5*60*1e3,retry:1}),{data:f,isLoading:k,error:y,refetch:F}=ne({queryKey:["supplier-analytics-products",i.range_type],queryFn:()=>A3(i.range_type),enabled:a==="products",staleTime:5*60*1e3,retry:1}),{data:M,isLoading:E,error:B,refetch:A}=ne({queryKey:["supplier-analytics-customers",i.range_type],queryFn:()=>$3(i.range_type),enabled:a==="customers",staleTime:5*60*1e3,retry:1}),{data:L,isLoading:N,error:R,refetch:O}=ne({queryKey:["supplier-analytics-financial",i.range_type],queryFn:()=>O3(i.range_type),enabled:a==="financial",staleTime:5*60*1e3,retry:1});_.useEffect(()=>{const me={};a!=="dashboard"&&(me.metric_category=a),i.range_type!=="last_30_days"&&(me.date_range=i.range_type),o&&(me.comparison_enabled="true"),s(me,{replace:!0})},[a,i.range_type,o,s]);const T=me=>{n(me)},g=me=>{l(We=>({...We,range_type:me,custom_start:null,custom_end:null})),c(!1)},D=async()=>{if(!m){h(!0);try{const me=[a],We=await T3(u,i.range_type,me),Fs=window.URL.createObjectURL(We),ds=document.createElement("a");ds.href=Fs,ds.download=`analytics-${a}-${i.range_type}.${u}`,document.body.appendChild(ds),ds.click(),ds.remove(),window.URL.revokeObjectURL(Fs)}catch(me){console.error("Export failed:",me),alert("Export failed. Please try again.")}finally{h(!1)}}},S=me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(me),$=me=>`${me.toFixed(1)}%`,I=()=>({today:"Today",last_7_days:"Last 7 Days",last_30_days:"Last 30 Days",last_90_days:"Last 90 Days",custom:"Custom Range"})[i.range_type]||"Last 30 Days";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Analytics"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Comprehensive performance insights for ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.business_name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!d),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),I(),e.jsx(Et,{className:"ml-2 h-4 w-4"})]}),d&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:e.jsx("div",{className:"py-1",children:[{value:"today",label:"Today"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"last_90_days",label:"Last 90 Days"}].map(me=>e.jsx("button",{onClick:()=>g(me.value),className:`block w-full text-left px-4 py-2 text-sm transition-colors ${i.range_type===me.value?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:me.label},me.value))})})]}),e.jsx("button",{onClick:D,disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg bg-blue-600 text-sm font-medium text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"animate-spin h-4 w-4 mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Analytics tabs",children:[{id:"dashboard",label:"Dashboard",icon:zs},{id:"sales",label:"Sales",icon:Re},{id:"products",label:"Products",icon:ve},{id:"customers",label:"Customers",icon:ct},{id:"financial",label:"Financial",icon:Te}].map(me=>e.jsxs("button",{onClick:()=>T(me.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${a===me.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(me.icon,{className:"h-5 w-5 mr-2"}),me.label]},me.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a==="dashboard"&&e.jsx("div",{className:"space-y-6",children:p?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(7)].map((me,We)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},We))}):b?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load dashboard metrics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:G.isAxiosError(b)?((U=(K=b.response)==null?void 0:K.data)==null?void 0:U.message)||b.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>v(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Te,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S((x==null?void 0:x.total_sales)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(x==null?void 0:x.total_orders)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-purple-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S((x==null?void 0:x.avg_order_value)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(ve,{className:"h-6 w-6 text-amber-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Fulfillment Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$((x==null?void 0:x.fulfillment_rate)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(ct,{className:"h-6 w-6 text-indigo-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(x==null?void 0:x.customer_count)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-pink-100 rounded-lg",children:e.jsx(ve,{className:"h-6 w-6 text-pink-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Active Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(x==null?void 0:x.product_count)||0})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Oe,{className:"h-6 w-6 text-yellow-600"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:"Average Rating"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[((x==null?void 0:x.rating_average)||0).toFixed(1),e.jsx(Oe,{className:"h-5 w-5 text-yellow-500 ml-1 fill-current"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(Q,{to:"/supplier/products",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ve,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update inventory & pricing"})]})]}),e.jsxs(Q,{to:"/supplier/orders",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Be,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Process pending orders"})]})]}),e.jsxs(Q,{to:"/supplier/financials",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Te,{className:"h-8 w-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Financial Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View payouts & earnings"})]})]})]})]})]})}),a==="sales"&&e.jsx("div",{className:"space-y-6",children:P?e.jsx("div",{className:"space-y-6",children:[...Array(3)].map((me,We)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]},We))}):w?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load sales analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:G.isAxiosError(w)?((z=(q=w.response)==null?void 0:q.data)==null?void 0:z.message)||w.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>C(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Nw,{className:"h-5 w-5 mr-2 text-blue-600"}),"Revenue Trends"]}),e.jsx("div",{className:"space-y-2",children:j!=null&&j.revenue_trends&&j.revenue_trends.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Orders"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.revenue_trends.slice(0,10).map((me,We)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:me.date}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:S(me.revenue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:me.orders})]},We))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No sales data available for this period"})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Sales Summary"}),e.jsx("div",{className:"space-y-3",children:j!=null&&j.daily_sales&&j.daily_sales.length>0?j.daily_sales.slice(0,7).map((me,We)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:me.date}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[me.orders," orders"]}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:S(me.revenue)})]})]},We)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No daily sales data available"})})]})]})}),a==="products"&&e.jsx("div",{className:"space-y-6",children:k?e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((me,We)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},We))})]}):y?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load product analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:G.isAxiosError(y)?((se=(Y=y.response)==null?void 0:Y.data)==null?void 0:se.message)||y.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>F(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2 text-green-600"}),"Top Performing Products"]}),e.jsx("div",{className:"overflow-x-auto",children:f!=null&&f.top_performers&&f.top_performers.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Views"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margin"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.top_performers.slice(0,10).map(me=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(Q,{to:`/supplier/products/${me.product_id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:me.product_name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:me.sales_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:me.views_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:S(me.revenue)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${me.profit_margin>=30?"bg-green-100 text-green-800":me.profit_margin>=20?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:$(me.profit_margin)})})]},me.product_id))})]}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No product performance data available"})})]}),(f==null?void 0:f.underperformers)&&f.underperformers.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2 text-amber-600"}),"Products Needing Attention"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sales"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Views"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.underperformers.slice(0,5).map(me=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(Q,{to:`/supplier/products/${me.product_id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:me.product_name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:me.sales_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:me.views_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:S(me.revenue)})]},me.product_id))})]})})]})]})}),a==="customers"&&e.jsx("div",{className:"space-y-6",children:E?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map((me,We)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]},We))}):B?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load customer analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:G.isAxiosError(B)?((te=(J=B.response)==null?void 0:J.data)==null?void 0:te.message)||B.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>A(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Acquisition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"New Customers"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:((V=M==null?void 0:M.acquisition_metrics)==null?void 0:V.new_customers)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:$(((W=M==null?void 0:M.acquisition_metrics)==null?void 0:W.conversion_rate)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Acquisition Cost"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:S(((X=M==null?void 0:M.acquisition_metrics)==null?void 0:X.acquisition_cost)||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Retention"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Repeat Customers"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:((H=M==null?void 0:M.retention_metrics)==null?void 0:H.repeat_customers)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Retention Rate"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:$(((ee=M==null?void 0:M.retention_metrics)==null?void 0:ee.retention_rate)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Churn Rate"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:$(((ue=M==null?void 0:M.retention_metrics)==null?void 0:ue.churn_rate)||0)})]})]})]})]}),(M==null?void 0:M.customer_segments)&&M.customer_segments.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Segments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Segment"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Customers"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg Order"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Revenue"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.customer_segments.map((me,We)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:me.segment_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:me.customer_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:S(me.avg_order_value)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:S(me.total_revenue)})]},We))})]})})]})]})}),a==="financial"&&e.jsx("div",{className:"space-y-6",children:N?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((me,We)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},We))}):R?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load financial analytics"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:G.isAxiosError(R)?((ke=(be=R.response)==null?void 0:be.data)==null?void 0:ke.message)||R.message:"An unknown error occurred"}),e.jsxs("button",{onClick:()=>O(),className:"mt-3 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Gross Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S((L==null?void 0:L.gross_revenue)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Platform Fees"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["-",S((L==null?void 0:L.commission_costs)||0)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Net Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:S((L==null?void 0:L.net_revenue)||0)})]})]}),(L==null?void 0:L.payout_history)&&L.payout_history.length>0&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Payouts"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.payout_history.slice(0,10).map(me=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(me.scheduled_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:S(me.amount)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${me.status==="completed"?"bg-green-100 text-green-800":me.status==="processing"?"bg-blue-100 text-blue-800":me.status==="scheduled"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:me.status})})]},me.payout_id))})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["For detailed financial reports and payout management, visit the"," ",e.jsx(Q,{to:"/supplier/financials",className:"font-medium underline hover:text-blue-900",children:"Financials dashboard"})]})})]})}),!p&&!P&&!k&&!E&&!N&&a==="sales"&&(!j||((De=j.daily_sales)==null?void 0:De.length)===0&&((ht=j.revenue_trends)==null?void 0:ht.length)===0)&&e.jsxs("div",{className:"bg-white rounded-xl p-12 shadow-sm border border-gray-200 text-center",children:[e.jsx(zs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start making sales to see your analytics data here."}),e.jsx(Q,{to:"/supplier/products",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Manage Products"})]})]})]})})},Bm=()=>{var t,s;try{const r=localStorage.getItem("app-storage");if(!r)return null;const a=JSON.parse(r);return((s=(t=a==null?void 0:a.state)==null?void 0:t.authentication_state)==null?void 0:s.auth_token)||null}catch(r){return console.error("Error reading auth token:",r),null}},F3=async(t,s)=>{const r={supplier_id:t,limit:50,offset:0,sort_by:"scheduled_date",sort_order:"desc"};return s.payout_status&&(r.status=s.payout_status),(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/payouts",{params:r,headers:{Authorization:`Bearer ${Bm()}`}})).data},M3=async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me",{headers:{Authorization:`Bearer ${Bm()}`}})).data,R3=async t=>(await G.patch("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me",t,{headers:{Authorization:`Bearer ${Bm()}`}})).data,D3=t=>{const s=new Date,r=s.getFullYear(),a=s.getMonth(),n=t.filter(h=>new Date(h.scheduled_date).getFullYear()===r&&h.status!=="failed"),i=t.filter(h=>{const x=new Date(h.scheduled_date);return x.getFullYear()===r&&x.getMonth()===a&&h.status!=="failed"}),l=t.filter(h=>h.status==="scheduled"||h.status==="processing"),o=n.reduce((h,x)=>h+x.net_amount,0),d=i.reduce((h,x)=>h+x.net_amount,0),c=l.reduce((h,x)=>h+x.net_amount,0),u=n.reduce((h,x)=>h+x.platform_commission,0),m=t.filter(h=>h.status==="scheduled").sort((h,x)=>new Date(h.scheduled_date).getTime()-new Date(x.scheduled_date).getTime())[0];return{total_earnings_ytd:o,current_month_earnings:d,pending_payout_amount:c,next_payout_date:(m==null?void 0:m.scheduled_date)||null,available_balance:c,total_commission_paid:u}},L3=()=>{const[t,s]=Fe(),r=Pe(),a=re(A=>A.authentication_state.supplier_profile),[n,i]=_.useState({date_range:t.get("period")||"current_month",transaction_type:null,payout_status:null}),[l,o]=_.useState(t.get("section")||"overview"),[d,c]=_.useState(!1),[u,m]=_.useState({bank_account_info:"",payout_frequency:"monthly"}),h=(a==null?void 0:a.supplier_id)||"";_.useEffect(()=>{const A={};l!=="overview"&&(A.section=l),n.date_range!=="current_month"&&(A.period=n.date_range),s(A,{replace:!0})},[l,n.date_range,s]);const{data:x=[],isLoading:p}=ne({queryKey:["payouts",h,n],queryFn:()=>F3(h,n),enabled:!!h&&l==="payouts",staleTime:6e4}),{data:b,isLoading:v}=ne({queryKey:["supplier-profile",h],queryFn:M3,enabled:!!h,staleTime:3e5}),j=Z.useMemo(()=>!x||x.length===0?{total_earnings_ytd:0,current_month_earnings:0,pending_payout_amount:0,next_payout_date:null,available_balance:0,total_commission_paid:0}:D3(x),[x]);_.useEffect(()=>{b&&l==="settings"&&m({bank_account_info:b.bank_account_info||"",payout_frequency:b.payout_frequency||"monthly"})},[b,l]);const P=oe({mutationFn:R3,onSuccess:()=>{r.invalidateQueries({queryKey:["supplier-profile"]}),c(!1),alert("Payout settings updated successfully!")},onError:A=>{var L,N;alert(`Failed to update settings: ${((N=(L=A.response)==null?void 0:L.data)==null?void 0:N.message)||A.message}`)}}),w=A=>{o(A)},C=(A,L)=>{i(N=>({...N,[A]:L}))},f=()=>{P.mutate(u)},k=()=>{alert("Tax document generation requires backend implementation (POST /suppliers/me/tax-documents)")},y=()=>{alert("Early payout request requires backend implementation (POST /suppliers/me/payouts/early-request)")},F=()=>{alert("Financial statement download requires backend implementation (GET /suppliers/me/statements/{period})")},M=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A),E=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),B=A=>{const N={scheduled:{color:"blue",icon:He,text:"Scheduled"},processing:{color:"yellow",icon:He,text:"Processing"},completed:{color:"green",icon:he,text:"Completed"},failed:{color:"red",icon:Ve,text:"Failed"}}[A],R=(N==null?void 0:N.icon)||de;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
        ${N.color==="blue"?"bg-blue-100 text-blue-800":""}
        ${N.color==="yellow"?"bg-yellow-100 text-yellow-800":""}
        ${N.color==="green"?"bg-green-100 text-green-800":""}
        ${N.color==="red"?"bg-red-100 text-red-800":""}
      `,children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),(N==null?void 0:N.text)||A]})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Track your earnings, manage payouts, and access financial reports"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px space-x-8 px-6","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>w("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Te,{className:"w-5 h-5 inline-block mr-2"}),"Overview"]}),e.jsxs("button",{onClick:()=>w("payouts"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="payouts"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Re,{className:"w-5 h-5 inline-block mr-2"}),"Payouts"]}),e.jsxs("button",{onClick:()=>w("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="transactions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Me,{className:"w-5 h-5 inline-block mr-2"}),"Transactions"]}),e.jsxs("button",{onClick:()=>w("settings"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Vt,{className:"w-5 h-5 inline-block mr-2"}),"Settings"]})]})})}),l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Earnings YTD"}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Te,{className:"w-5 h-5 text-blue-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:M(j.total_earnings_ytd)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Commission paid: ",M(j.total_commission_paid)]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"This Month"}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Re,{className:"w-5 h-5 text-green-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:M(j.current_month_earnings)}),e.jsxs("p",{className:"text-sm text-green-600 mt-2 font-medium",children:[j.current_month_earnings>0?"+":"",(j.current_month_earnings/Math.max(j.total_earnings_ytd||1,1)*100).toFixed(1),"% of YTD"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Pending Payout"}),e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(He,{className:"w-5 h-5 text-amber-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:M(j.pending_payout_amount)}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:j.next_payout_date?e.jsxs(e.Fragment,{children:["Next payout: ",E(j.next_payout_date)]}):"No scheduled payouts"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:F,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Download Statement"]}),e.jsxs("button",{onClick:k,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),"Generate Tax Docs"]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5 mr-2"}),"Request Early Payout"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Payouts"}),e.jsx("button",{onClick:()=>w("payouts"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All "})]}),p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Te,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No payout records yet"})]}):e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(A=>{var L;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[B(A.status),e.jsx("span",{className:"text-sm text-gray-600",children:E(A.scheduled_date)})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((L=A.included_orders)==null?void 0:L.length)||0," orders included"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:M(A.net_amount)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["-",M(A.platform_commission)," commission"]})]})]},A.payout_id)})})]})]}),l==="payouts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:n.date_range,onChange:A=>C("date_range",A.target.value),className:"block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"current_month",children:"Current Month"}),e.jsx("option",{value:"last_month",children:"Last Month"}),e.jsx("option",{value:"last_3_months",children:"Last 3 Months"}),e.jsx("option",{value:"last_6_months",children:"Last 6 Months"}),e.jsx("option",{value:"ytd",children:"Year to Date"}),e.jsx("option",{value:"all_time",children:"All Time"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Status"}),e.jsxs("select",{value:n.payout_status||"",onChange:A=>C("payout_status",A.target.value||null),className:"block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>i({date_range:"current_month",transaction_type:null,payout_status:null}),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors w-full",children:"Reset Filters"})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payout History"})}),p?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):x.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Te,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No payouts found"}),e.jsx("p",{className:"text-sm mt-2",children:"Payouts matching your filters will appear here"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:x.map(A=>{var L;return e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[B(A.status),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Payout ID: ",A.payout_id.substring(0,8)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Scheduled:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:E(A.scheduled_date)})]}),A.processed_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Processed:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:E(A.processed_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Orders:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:((L=A.included_orders)==null?void 0:L.length)||0})]}),A.transaction_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Reference:"}),e.jsx("span",{className:"ml-2 text-gray-900 font-mono text-xs",children:A.transaction_reference})]})]}),A.failure_reason&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Failure Reason:"})," ",A.failure_reason]})})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M(A.net_amount)}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{className:"text-gray-600",children:["Gross: ",M(A.amount)]}),e.jsxs("p",{className:"text-red-600",children:["Commission: -",M(A.platform_commission)]})]})]})]})},A.payout_id)})})]})]}),l==="transactions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Transaction History"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"This feature requires backend implementation. A dedicated transaction history endpoint (GET /suppliers/me/transactions) is needed to display order-level financial details."})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Ledger"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payout"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(Me,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"Transaction history endpoint not yet implemented"}),e.jsx("p",{className:"text-sm mt-2",children:"Contact support for transaction details"})]})})})]})})]})]}),l==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bank Account & Payout Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your payment method and payout preferences"})]}),!d&&e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Edit Settings"})]}),v?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account Information"}),e.jsx("input",{type:"text",value:u.bank_account_info,onChange:A=>m(L=>({...L,bank_account_info:A.target.value})),placeholder:"Bank Name - Account ending in XXXX",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'For security, only enter masked account information (e.g., "Chase Bank - ****1234")'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Frequency"}),e.jsxs("select",{value:u.payout_frequency,onChange:A=>m(L=>({...L,payout_frequency:A.target.value})),className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi-weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:f,disabled:P.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:P.isPending?"Saving...":"Save Changes"}),e.jsx("button",{onClick:()=>c(!1),disabled:P.isPending,className:"px-6 py-3 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(kr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bank Account"}),e.jsx("p",{className:"text-sm text-gray-600",children:(b==null?void 0:b.bank_account_info)||"Not configured"})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${b!=null&&b.bank_account_info?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:b!=null&&b.bank_account_info?"Configured":"Setup Required"})]}),e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(mt,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Payout Frequency"}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(b==null?void 0:b.payout_frequency)||"monthly"})]})]})}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Automatic Payouts"}),e.jsx("p",{className:"mt-1",children:"Payouts are processed automatically based on your frequency setting. Minimum threshold: $100.00"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tax Documentation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Annual Tax Forms"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Generate 1099 forms and annual income reports"})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Generate Forms"})]})}),e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"w-5 h-5 text-amber-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Business Registration"}),e.jsxs("p",{className:"mt-1",children:["Tax ID: ",(b==null?void 0:b.business_registration_number)||"Not provided"]})]})]})})]})]})]}),!["overview","payouts","settings"].includes(l)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx(de,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Content Not Available"}),e.jsx("p",{className:"text-gray-600",children:"This section is under development"})]})]})})})},I3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me",{headers:{Authorization:`Bearer ${t}`}})).data,q3=async(t,s)=>(await G.patch("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/me",t,{headers:{Authorization:`Bearer ${s}`}})).data,B3=async()=>[],U3=async t=>(console.log("Adding team member:",t),{success:!0,member_id:`member_${Date.now()}`}),z3=async t=>(console.log("Removing team member:",t),{success:!0}),W3=()=>{var K;const t=re(U=>U.authentication_state.auth_token),[s,r]=Fe(),a=s.get("section")||"profile",n=U=>{r({section:U})},[i,l]=_.useState({}),[o,d]=_.useState(!1),[c,u]=_.useState({email:"",role:"staff"}),[m,h]=_.useState({new_orders:{email:!0,sms:!0,push:!0},low_stock_alerts:{email:!0,sms:!1,push:!0},customer_messages:{email:!0,sms:!1,push:!0},payment_updates:{email:!0,sms:!1},marketing_emails:!1}),[x,p]=_.useState({inventory_sync_enabled:!1,inventory_api_key:null,last_sync_timestamp:null,webhooks_enabled:!1,webhook_url:null}),[b,v]=_.useState({}),[j,P]=_.useState(!1),[w,C]=_.useState(null),[f,k]=_.useState(null),y=Pe(),{data:F,isLoading:M,error:E}=ne({queryKey:["supplier-profile"],queryFn:()=>I3(t),enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:B=[],isLoading:A}=ne({queryKey:["team-members"],queryFn:()=>B3(),enabled:!!t&&a==="team",staleTime:6e4}),L=oe({mutationFn:U=>q3(U,t),onSuccess:()=>{y.invalidateQueries({queryKey:["supplier-profile"]}),C("Profile updated successfully!"),setTimeout(()=>C(null),3e3)},onError:U=>{var q,z;k(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to update profile"),setTimeout(()=>k(null),5e3)}}),N=oe({mutationFn:U=>U3(U),onSuccess:()=>{y.invalidateQueries({queryKey:["team-members"]}),d(!1),u({email:"",role:"staff"}),C("Team member invited successfully!"),setTimeout(()=>C(null),3e3)},onError:U=>{var q,z;k(((z=(q=U.response)==null?void 0:q.data)==null?void 0:z.message)||"Failed to add team member"),setTimeout(()=>k(null),5e3)}}),R=oe({mutationFn:U=>z3(U),onSuccess:()=>{y.invalidateQueries({queryKey:["team-members"]}),C("Team member removed successfully!"),setTimeout(()=>C(null),3e3)}});_.useEffect(()=>{F&&l({business_name:F.business_name,business_description:F.business_description,logo_url:F.logo_url,cover_photo_url:F.cover_photo_url,operating_hours:F.operating_hours,service_areas:F.service_areas,return_policy:F.return_policy,shipping_policy:F.shipping_policy,minimum_order_value:F.minimum_order_value})},[F]);const O=U=>{U.preventDefault(),L.mutate(i)},T=U=>{U.preventDefault(),L.mutate({}),C("Notification preferences updated!"),setTimeout(()=>C(null),3e3)},g=U=>{U.preventDefault(),N.mutate({email:c.email,role:c.role,permissions:{manage_products:c.role!=="staff",manage_orders:!0,manage_inventory:!0,view_analytics:c.role!=="staff",manage_team:!1}})},D=U=>{confirm("Are you sure you want to remove this team member?")&&R.mutate(U)},S=U=>{U.preventDefault(),C("Bank account information updated!"),P(!1),setTimeout(()=>C(null),3e3)},$=U=>{U.preventDefault(),C("Integration settings updated!"),setTimeout(()=>C(null),3e3)},I=[{id:"profile",label:"Business Profile",icon:kr},{id:"team",label:"Team Management",icon:ct},{id:"notifications",label:"Notifications",icon:Ht},{id:"integrations",label:"Integrations",icon:ww},{id:"billing",label:"Billing & Payouts",icon:es}];return M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading settings..."})]})})}):E?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-red-700",children:[e.jsx(de,{className:"h-6 w-6"}),e.jsx("p",{className:"font-medium",children:"Failed to load settings"})]}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please try refreshing the page"})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[e.jsx(Vt,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{children:"Settings"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your business configuration and preferences"})]}),e.jsx(Q,{to:"/supplier/dashboard",className:"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-2 transition-colors",children:e.jsx("span",{children:" Back to Dashboard"})})]})}),w&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-green-700 font-medium",children:w})]}),f&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx(de,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-red-700 font-medium",children:f})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:I.map(U=>{const q=U.icon,z=a===U.id;return e.jsxs("button",{onClick:()=>n(U.id),className:`
                        py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors
                        ${z?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                      `,children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("span",{children:U.label})]},U.id)})})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[a==="profile"&&e.jsxs("form",{onSubmit:O,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Business Profile"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"business_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name *"}),e.jsx("input",{type:"text",id:"business_name",value:i.business_name||"",onChange:U=>l(q=>({...q,business_name:U.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"business_description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Description"}),e.jsx("textarea",{id:"business_description",value:i.business_description||"",onChange:U=>l(q=>({...q,business_description:U.target.value})),rows:4,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Tell customers about your business..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logo_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"url",id:"logo_url",value:i.logo_url||"",onChange:U=>l(q=>({...q,logo_url:U.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"https://..."}),i.logo_url&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:i.logo_url,alt:"Logo preview",className:"h-20 w-20 object-cover rounded-lg border-2 border-gray-200"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cover_photo_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Photo URL"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"url",id:"cover_photo_url",value:i.cover_photo_url||"",onChange:U=>l(q=>({...q,cover_photo_url:U.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"https://..."}),i.cover_photo_url&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:i.cover_photo_url,alt:"Cover preview",className:"h-20 w-full object-cover rounded-lg border-2 border-gray-200"})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"service_areas",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Areas (comma-separated postal codes or cities)"}),e.jsx("input",{type:"text",id:"service_areas",value:((K=i.service_areas)==null?void 0:K.join(", "))||"",onChange:U=>l(q=>({...q,service_areas:U.target.value.split(",").map(z=>z.trim()).filter(Boolean)})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"78701, 78702, Austin, Round Rock"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"return_policy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Return Policy"}),e.jsx("textarea",{id:"return_policy",value:i.return_policy||"",onChange:U=>l(q=>({...q,return_policy:U.target.value})),rows:3,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Describe your return policy..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"shipping_policy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Policy"}),e.jsx("textarea",{id:"shipping_policy",value:i.shipping_policy||"",onChange:U=>l(q=>({...q,shipping_policy:U.target.value})),rows:3,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Describe your shipping policy..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"minimum_order_value",className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value ($)"}),e.jsx("input",{type:"number",id:"minimum_order_value",value:i.minimum_order_value||"",onChange:U=>l(q=>({...q,minimum_order_value:U.target.value?Number(U.target.value):null})),step:"0.01",min:"0",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0.00"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:L.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx("span",{children:"Save Changes"})]})})})]}),a==="team"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Team Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage team members and their permissions"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(dt,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Team Member"})]})]}),A?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Loading team members..."})]}):B.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No team members yet"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Invite team members to help manage your business"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:U.full_name.split(" ").map(q=>q[0]).join("").toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.full_name}),e.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`
                                px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
                                ${U.role==="admin"?"bg-purple-100 text-purple-800":""}
                                ${U.role==="manager"?"bg-blue-100 text-blue-800":""}
                                ${U.role==="staff"?"bg-gray-100 text-gray-800":""}
                              `,children:U.role.charAt(0).toUpperCase()+U.role.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`
                                px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
                                ${U.status==="active"?"bg-green-100 text-green-800":""}
                                ${U.status==="pending"?"bg-yellow-100 text-yellow-800":""}
                                ${U.status==="inactive"?"bg-gray-100 text-gray-800":""}
                              `,children:U.status.charAt(0).toUpperCase()+U.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.last_active?new Date(U.last_active).toLocaleDateString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{type:"button",onClick:()=>D(U.member_id),className:"text-red-600 hover:text-red-700 transition-colors",children:e.jsx(_t,{className:"h-5 w-5"})})})]},U.member_id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Team Member"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"team_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"team_email",value:c.email,onChange:U=>u(q=>({...q,email:U.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"team_role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{id:"team_role",value:c.role,onChange:U=>u(q=>({...q,role:U.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"staff",children:"Staff - Basic access"}),e.jsx("option",{value:"manager",children:"Manager - Full access except team"}),e.jsx("option",{value:"admin",children:"Admin - Full access"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?"Adding...":"Add Member"})]})]})]})})]}),a==="notifications"&&e.jsxs("form",{onSubmit:T,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notification Preferences"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Choose how you want to be notified about important events"}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"New Orders"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.new_orders.email,onChange:U=>h(q=>({...q,new_orders:{...q.new_orders,email:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.new_orders.sms,onChange:U=>h(q=>({...q,new_orders:{...q.new_orders,sms:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"SMS"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.new_orders.push,onChange:U=>h(q=>({...q,new_orders:{...q.new_orders,push:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vl,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Push"})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{children:"Low Stock Alerts"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.low_stock_alerts.email,onChange:U=>h(q=>({...q,low_stock_alerts:{...q.low_stock_alerts,email:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.low_stock_alerts.sms,onChange:U=>h(q=>({...q,low_stock_alerts:{...q.low_stock_alerts,sms:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"SMS"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.low_stock_alerts.push,onChange:U=>h(q=>({...q,low_stock_alerts:{...q.low_stock_alerts,push:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vl,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Push"})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(jt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Customer Messages"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.customer_messages.email,onChange:U=>h(q=>({...q,customer_messages:{...q.customer_messages,email:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.customer_messages.sms,onChange:U=>h(q=>({...q,customer_messages:{...q.customer_messages,sms:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"SMS"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.customer_messages.push,onChange:U=>h(q=>({...q,customer_messages:{...q.customer_messages,push:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vl,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Push"})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(es,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Payment Updates"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.payment_updates.email,onChange:U=>h(q=>({...q,payment_updates:{...q.payment_updates,email:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.payment_updates.sms,onChange:U=>h(q=>({...q,payment_updates:{...q.payment_updates,sms:U.target.checked}})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"SMS"})]})]})]})]}),e.jsx("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.marketing_emails,onChange:U=>h(q=>({...q,marketing_emails:U.target.checked})),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Marketing Emails"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Receive tips, updates, and promotional content"})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx("span",{children:"Save Preferences"})]})})]}),a==="integrations"&&e.jsxs("form",{onSubmit:$,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"API Integrations"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect external systems to automate inventory management"}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Inventory Synchronization"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically sync stock levels from your system"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.inventory_sync_enabled,onChange:U=>p(q=>({...q,inventory_sync_enabled:U.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),x.inventory_sync_enabled&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"password",value:x.inventory_api_key||"",onChange:U=>p(q=>({...q,inventory_api_key:U.target.value})),className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Enter your API key"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Generate"})]})]}),x.last_sync_timestamp&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last synced: ",new Date(x.last_sync_timestamp).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Webhooks"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive real-time notifications about events"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.webhooks_enabled,onChange:U=>p(q=>({...q,webhooks_enabled:U.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),x.webhooks_enabled&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook URL"}),e.jsx("input",{type:"url",value:x.webhook_url||"",onChange:U=>p(q=>({...q,webhook_url:U.target.value})),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"https://your-server.com/webhook"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx("span",{children:"Save Integration Settings"})]})})]}),a==="billing"&&F&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing & Payouts"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Manage your subscription and payout settings"}),e.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Current Subscription"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Plan"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 capitalize",children:F.subscription_plan})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Billing Cycle"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Monthly"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commission Rate"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[F.commission_rate,"%"]})]})]})]}),e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Payout Settings"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"payout_frequency",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Frequency"}),e.jsxs("select",{id:"payout_frequency",value:i.payout_frequency||F.payout_frequency,onChange:U=>l(q=>({...q,payout_frequency:U.target.value})),className:"w-full md:w-64 px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi-weekly",children:"Bi-weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Bank Account"}),e.jsx("button",{type:"button",onClick:()=>P(!j),className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:j?"Cancel":"Update Account"})]}),j?e.jsxs("form",{onSubmit:S,className:"space-y-4 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:b.account_holder_name||"",onChange:U=>v(q=>({...q,account_holder_name:U.target.value})),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",value:b.bank_name||"",onChange:U=>v(q=>({...q,bank_name:U.target.value})),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),e.jsxs("select",{value:b.account_type||"checking",onChange:U=>v(q=>({...q,account_type:U.target.value})),className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"checking",children:"Checking"}),e.jsx("option",{value:"savings",children:"Savings"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Update Account"})]})]}):e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Account ending in  1234"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bank: Sample Bank"})]})]}),i.payout_frequency!==F.payout_frequency&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>L.mutate({payout_frequency:i.payout_frequency}),disabled:L.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx("span",{children:"Update Payout Frequency"})]})})]})]})})]})]})})})},V3=async(t,s,r)=>{const a=new URLSearchParams;return s&&a.append("resource_type",s),r&&a.append("search_query",r),(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/resources?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},K3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/webinars?status=upcoming",{headers:{Authorization:`Bearer ${t}`}})).data,H3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/webinars/recorded",{headers:{Authorization:`Bearer ${t}`}})).data,Y3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/community",{headers:{Authorization:`Bearer ${t}`}})).data,G3=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/updates",{headers:{Authorization:`Bearer ${t}`}})).data,Q3=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/progress",s,{headers:{Authorization:`Bearer ${t}`}})).data,X3=async(t,s)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/webinars/${s}/register`,{},{headers:{Authorization:`Bearer ${t}`}})).data,J3=async(t,s)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/suppliers/education/updates/${s}/acknowledge`,{},{headers:{Authorization:`Bearer ${t}`}})).data,Z3=()=>{const t=re(g=>g.authentication_state.auth_token),[s,r]=Fe(),a=s.get("resource_type"),n=s.get("search_query"),[i,l]=_.useState("resources"),[o,d]=_.useState(n||""),[c,u]=_.useState(a||"all"),m=Pe(),{data:h=[],isLoading:x}=ne({queryKey:["education-resources",c,o],queryFn:()=>V3(t,c!=="all"?c:void 0,o||void 0),enabled:!!t&&i==="resources",staleTime:5*60*1e3}),{data:p=[],isLoading:b}=ne({queryKey:["webinar-schedule"],queryFn:()=>K3(t),enabled:!!t&&i==="live",staleTime:2*60*1e3}),{data:v=[],isLoading:j}=ne({queryKey:["recorded-webinars"],queryFn:()=>H3(t),enabled:!!t&&i==="recorded",staleTime:5*60*1e3}),{data:P=[],isLoading:w}=ne({queryKey:["community-posts"],queryFn:()=>Y3(t),enabled:!!t&&i==="community",staleTime:2*60*1e3}),{data:C=[],isLoading:f}=ne({queryKey:["platform-updates"],queryFn:()=>G3(t),enabled:!!t&&i==="updates",staleTime:5*60*1e3}),k=oe({mutationFn:g=>Q3(t,g),onSuccess:()=>{m.invalidateQueries({queryKey:["education-resources"]})}}),y=oe({mutationFn:g=>X3(t,g),onSuccess:()=>{m.invalidateQueries({queryKey:["webinar-schedule"]})}}),F=oe({mutationFn:g=>J3(t,g),onSuccess:()=>{m.invalidateQueries({queryKey:["platform-updates"]})}});_.useEffect(()=>{const g=new URLSearchParams;c!=="all"&&g.set("resource_type",c),o&&g.set("search_query",o),r(g)},[c,o,r]);const M=g=>{g.preventDefault()},E=g=>{k.mutate({resource_id:g,completion_status:"completed",progress_percentage:100})},B=g=>{y.mutate(g)},A=g=>{F.mutate(g)},L=g=>{switch(g){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-blue-100 text-blue-800";case"advanced":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},N=g=>{switch(g){case"critical":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},R=45,O=12;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Training & Resource Center"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Expand your skills and grow your business on BuildEasy"})]}),e.jsxs("div",{className:"hidden lg:block bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[R,"%"]}),e.jsx("div",{className:"text-sm text-blue-100",children:"Training Complete"})]}),e.jsx("div",{className:"w-48 bg-white/20 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${R}%`}})}),e.jsxs("div",{className:"text-xs text-blue-100 text-center",children:[O," of ",27," resources completed"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("form",{onSubmit:M,className:"relative",children:[e.jsx(Xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:o,onChange:g=>d(g.target.value),placeholder:"Search training materials, webinars, articles...",className:"w-full pl-12 pr-4 py-4 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})}),e.jsx("div",{className:"mb-8 border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>l("resources"),className:`pb-4 px-2 border-b-2 font-medium transition-colors ${i==="resources"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ji,{className:"w-5 h-5"}),e.jsx("span",{children:"Resources"})]})}),e.jsx("button",{onClick:()=>l("live"),className:`pb-4 px-2 border-b-2 font-medium transition-colors ${i==="live"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wc,{className:"w-5 h-5"}),e.jsx("span",{children:"Live Training"}),p.length>0&&e.jsx("span",{className:"ml-2 bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]})}),e.jsx("button",{onClick:()=>l("recorded"),className:`pb-4 px-2 border-b-2 font-medium transition-colors ${i==="recorded"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rh,{className:"w-5 h-5"}),e.jsx("span",{children:"Recorded Sessions"})]})}),e.jsx("button",{onClick:()=>l("community"),className:`pb-4 px-2 border-b-2 font-medium transition-colors ${i==="community"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{children:"Community"})]})}),e.jsx("button",{onClick:()=>l("updates"),className:`pb-4 px-2 border-b-2 font-medium transition-colors ${i==="updates"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-5 h-5"}),e.jsx("span",{children:"Updates"}),C.filter(g=>!g.acknowledged&&g.acknowledgment_required).length>0&&e.jsx("span",{className:"ml-2 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full",children:C.filter(g=>!g.acknowledged&&g.acknowledgment_required).length})]})})]})}),i==="resources"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-400"}),e.jsx("div",{className:"flex space-x-2",children:["all","article","video","guide","tutorial"].map(g=>e.jsx("button",{onClick:()=>u(g),className:`px-4 py-2 rounded-lg font-medium transition-all ${c===g?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:g.charAt(0).toUpperCase()+g.slice(1)},g))})]}),x?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(g=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4 w-5/6"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})]})]},g))}):h.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[e.jsx(Ji,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No resources found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or search terms"}),e.jsx("button",{onClick:()=>{u("all"),d("")},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(g=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-200 cursor-pointer group",onClick:()=>console.log("Resource selected:",g.resource_id),children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[g.resource_type==="video"?e.jsx(Wc,{className:"w-5 h-5 text-blue-600"}):g.resource_type==="article"?e.jsx(Ji,{className:"w-5 h-5 text-blue-600"}):e.jsx(Ji,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:g.resource_type})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${L(g.difficulty_level)}`,children:g.difficulty_level})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:g.description})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[g.duration_minutes&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.duration_minutes," min"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.view_count," views"]})]}),g.rating>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:g.rating.toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g.content_url&&e.jsx("a",{href:g.content_url,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors text-center text-sm",children:"View Resource"}),e.jsx("button",{onClick:D=>{D.stopPropagation(),E(g.resource_id)},className:"px-4 py-2 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",title:"Mark as complete",children:e.jsx(he,{className:"w-5 h-5 text-gray-400 hover:text-green-600"})})]})]})]},g.resource_id))})]}),i==="live"&&e.jsx("div",{children:b?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2].map(g=>e.jsxs("div",{className:"bg-white rounded-xl p-8 border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6 w-5/6"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},g))}):p.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[e.jsx(mt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No upcoming webinars"}),e.jsx("p",{className:"text-gray-600",children:"Check back soon for new training sessions"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(g=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2",children:e.jsx("div",{className:"text-xs font-semibold uppercase",children:"Live Session"})}),g.registration_required&&e.jsx("div",{className:"bg-yellow-400 text-yellow-900 text-xs px-2 py-1 rounded-full font-semibold",children:"Registration Required"})]}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:g.title}),e.jsx("p",{className:"text-indigo-100",children:g.description})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(mt,{className:"w-5 h-5 mr-3 text-gray-400"}),e.jsx("span",{className:"font-medium",children:new Date(g.scheduled_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(He,{className:"w-5 h-5 mr-3 text-gray-400"}),e.jsxs("span",{children:[g.duration_minutes," minutes"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(Fd,{className:"w-5 h-5 mr-3 text-gray-400"}),e.jsxs("span",{children:["Presenter: ",g.presenter_name]})]}),g.max_attendees&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(ct,{className:"w-5 h-5 mr-3 text-gray-400"}),e.jsxs("span",{children:[g.registration_count||0," / ",g.max_attendees," registered"]})]})]}),e.jsx("button",{onClick:()=>B(g.webinar_id),disabled:y.isPending,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?"Registering...":"Register for Webinar"})]})]},g.webinar_id))})}),i==="recorded"&&e.jsx("div",{children:j?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"aspect-video bg-gray-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]},g))}):v.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[e.jsx(Wc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No recorded sessions yet"}),e.jsx("p",{className:"text-gray-600",children:"Recorded webinars will appear here after live sessions"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(g=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-100 hover:shadow-xl transition-all duration-200 group",children:[e.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-blue-600 rounded-full p-4 group-hover:scale-110 transition-transform",children:e.jsx(rh,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:[g.duration_minutes," min"]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:g.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Fd,{className:"w-4 h-4"}),e.jsx("span",{children:g.presenter_name})]}),g.rating&&g.rating>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:g.rating.toFixed(1)})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Recorded: ",new Date(g.recorded_date).toLocaleDateString()]}),g.video_url?e.jsx("a",{href:g.video_url,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors text-center",children:"Watch Recording"}):e.jsx("button",{disabled:!0,className:"w-full bg-gray-100 text-gray-400 px-4 py-2 rounded-lg font-medium cursor-not-allowed",children:"Video Processing..."})]})]},g.webinar_id))})}),i==="community"&&e.jsx("div",{children:w?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3 w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]},g))}):P.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[e.jsx(Ft,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No community posts yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to start a discussion!"}),e.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Start Discussion"})]}):e.jsx("div",{className:"space-y-4",children:P.map(g=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 hover:shadow-lg transition-all duration-200 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 hover:text-blue-600 transition-colors",children:g.title}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800 font-medium",children:g.category})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:g.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:g.author_name}),g.author_type==="admin"&&e.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full font-semibold",children:"BuildEasy Team"}),e.jsx("span",{children:new Date(g.created_date).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"flex items-center space-x-6 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[g.reply_count," replies"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(ba,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[g.like_count," likes"]})]})]})]},g.post_id))})}),i==="updates"&&e.jsx("div",{children:f?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]},g))}):C.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[e.jsx(Ht,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You're all caught up!"}),e.jsx("p",{className:"text-gray-600",children:"No new platform updates"})]}):e.jsxs("div",{className:"space-y-4",children:[C.filter(g=>!g.acknowledged&&g.acknowledgment_required).map(g=>e.jsxs("div",{className:`bg-white rounded-xl p-6 border-2 ${N(g.importance)}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g.title}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold uppercase ${g.importance==="critical"?"bg-red-600 text-white":g.importance==="warning"?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:g.importance}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600 font-medium",children:g.update_type})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:g.description}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Published: ",new Date(g.published_date).toLocaleDateString()]})]}),e.jsx(de,{className:`w-6 h-6 flex-shrink-0 ml-4 ${g.importance==="critical"?"text-red-600":g.importance==="warning"?"text-yellow-600":"text-blue-600"}`})]}),g.acknowledgment_required&&!g.acknowledged&&e.jsx("button",{onClick:()=>A(g.update_id),disabled:F.isPending,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?"Acknowledging...":"I Understand - Acknowledge Update"})]},g.update_id)),C.filter(g=>g.acknowledged||!g.acknowledgment_required).map(g=>e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 opacity-75",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:g.title}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600 font-medium",children:g.update_type}),g.acknowledged&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Acknowledged"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-2",children:g.description}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(g.published_date).toLocaleDateString()})]})})},g.update_id))]})})]}),e.jsx("div",{className:"bg-white border-t border-gray-200 py-8 mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:O}),e.jsx("div",{className:"text-sm text-gray-600",children:"Resources Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:p.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Upcoming Webinars"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:v.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recorded Sessions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[R,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Training Progress"})]})]})})})]})})},ek=async(t,s)=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard",{headers:{Authorization:`Bearer ${t}`},params:{date_range:s}})).data,tk=async t=>({api_status:"operational",database_status:"operational",payment_gateway_status:"operational",email_service_status:"operational",sms_service_status:"operational",cdn_status:"operational",overall_status:"operational",last_checked:new Date().toISOString()}),sk=async t=>[],rk=async t=>[],ak=async(t,s)=>({period:s,user_growth:[],revenue_growth:[],order_volume:[]}),nk=async(t,s)=>{await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/alerts/${s}`,{status:"dismissed"},{headers:{Authorization:`Bearer ${t}`}})};function ik(){var R,O,T,g;const t=re(D=>D.authentication_state.auth_token),s=re(D=>D.authentication_state.current_user),[r,a]=Fe(),n=Pe(),i=r.get("date_range")||"last_30_days",{data:l,isLoading:o,error:d,refetch:c}=ne({queryKey:["platformMetrics",i],queryFn:()=>ek(t,i),enabled:!!t,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:u,isLoading:m,refetch:h}=ne({queryKey:["systemHealth"],queryFn:()=>tk(),enabled:!!t,refetchInterval:3e4,refetchOnWindowFocus:!1}),{data:x=[],isLoading:p,refetch:b}=ne({queryKey:["recentActivity"],queryFn:()=>sk(),enabled:!!t,staleTime:60*1e3,refetchOnWindowFocus:!1}),{data:v=[],isLoading:j,refetch:P}=ne({queryKey:["activeAlerts"],queryFn:()=>rk(),enabled:!!t,staleTime:60*1e3,refetchOnWindowFocus:!1}),{data:w,isLoading:C,refetch:f}=ne({queryKey:["growthMetrics",i],queryFn:()=>ak(t,i),enabled:!!t,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),k=oe({mutationFn:D=>nk(t,D),onSuccess:()=>{n.invalidateQueries({queryKey:["activeAlerts"]})}}),y=D=>{a(S=>{const $=new URLSearchParams(S);return $.set("date_range",D),$})},F=D=>{k.mutate(D)},M=()=>{c(),h(),b(),P(),f()},E=_.useMemo(()=>({pending_supplier_applications:0,open_disputes:(l==null?void 0:l.pending_disputes)||0,flagged_content:0,failed_payments:0,system_errors:0}),[l]),B=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(D),A=D=>new Intl.NumberFormat("en-US").format(D),L=D=>{switch(D){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=D=>{const S=new Date(D),I=new Date().getTime()-S.getTime(),K=Math.floor(I/6e4);if(K<1)return"Just now";if(K<60)return`${K}m ago`;const U=Math.floor(K/60);return U<24?`${U}h ago`:`${Math.floor(U/24)}d ago`};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Operations Center"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Welcome back, ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:i,onChange:D=>y(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_quarter",children:"Last Quarter"}),e.jsx("option",{value:"last_year",children:"Last Year"})]}),e.jsxs("button",{onClick:M,disabled:o||m,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(vt,{className:`w-4 h-4 ${o||m?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}),u&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border-2 ${u.overall_status==="operational"?"bg-green-50 border-green-200":u.overall_status==="degraded"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[u.overall_status==="operational"?e.jsx(he,{className:"w-6 h-6 text-green-600"}):u.overall_status==="degraded"?e.jsx(At,{className:"w-6 h-6 text-yellow-600"}):e.jsx(Ve,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-semibold ${u.overall_status==="operational"?"text-green-900":u.overall_status==="degraded"?"text-yellow-900":"text-red-900"}`,children:["System Status: ",u.overall_status.charAt(0).toUpperCase()+u.overall_status.slice(1)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last checked: ",N(u.last_checked)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cb,{className:`w-4 h-4 ${u.api_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"API"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Al,{className:`w-4 h-4 ${u.database_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"DB"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(es,{className:`w-4 h-4 ${u.payment_gateway_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Payments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:`w-4 h-4 ${u.email_service_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vl,{className:`w-4 h-4 ${u.sms_service_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"SMS"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_w,{className:`w-4 h-4 ${u.cdn_status==="operational"?"text-green-600":"text-red-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"CDN"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o?e.jsx("span",{className:"animate-pulse",children:"-"}):A((l==null?void 0:l.total_users)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[A((l==null?void 0:l.total_customers)||0)," customers  ",A((l==null?void 0:l.total_suppliers)||0)," suppliers"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ct,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o?e.jsx("span",{className:"animate-pulse",children:"-"}):A((l==null?void 0:l.total_orders)||0)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[A((l==null?void 0:l.active_orders)||0)," active"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o?e.jsx("span",{className:"animate-pulse",children:"-"}):B((l==null?void 0:l.total_revenue)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["GMV: ",B((l==null?void 0:l.gmv)||0)]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Te,{className:"w-8 h-8 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Disputes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o?e.jsx("span",{className:"animate-pulse",children:"-"}):A((l==null?void 0:l.pending_disputes)||0)}),e.jsxs(Q,{to:"/admin/disputes",className:"text-xs text-blue-600 hover:text-blue-800 mt-1 inline-flex items-center space-x-1",children:[e.jsx("span",{children:"View all"}),e.jsx(Dd,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(At,{className:"w-8 h-8 text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx(Q,{to:"/admin/supplier-applications?status_filter=pending_review",className:"bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending Applications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E.pending_supplier_applications})]}),e.jsx(Me,{className:"w-6 h-6 text-blue-600"})]})}),e.jsx(Q,{to:"/admin/disputes?status_filter=open",className:"bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Open Disputes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E.open_disputes})]}),e.jsx(de,{className:"w-6 h-6 text-orange-600"})]})}),e.jsx(Q,{to:"/admin/reviews?flagged_only=true",className:"bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Flagged Content"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E.flagged_content})]}),e.jsx(Gr,{className:"w-6 h-6 text-red-600"})]})}),e.jsx(Q,{to:"/admin/financials?section=failed_payments",className:"bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Failed Payments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E.failed_payments})]}),e.jsx(Ve,{className:"w-6 h-6 text-red-600"})]})}),e.jsx(Q,{to:"/admin/system-logs?log_level=error",className:"bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"System Errors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E.system_errors})]}),e.jsx(Rs,{className:"w-6 h-6 text-gray-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Growth Trends"}),e.jsx(Re,{className:"w-5 h-5 text-blue-600"})]}),C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"User Growth"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((R=w==null?void 0:w.user_growth)==null?void 0:R.length)||0," data points"]})]}),e.jsx("div",{className:"h-32 flex items-end space-x-1",children:((O=w==null?void 0:w.user_growth)==null?void 0:O.slice(-30).map((D,S)=>e.jsx("div",{className:"flex-1 bg-blue-500 rounded-t hover:bg-blue-600 transition-colors cursor-pointer",style:{height:`${(D.users||0)/Math.max(...w.user_growth.map($=>$.users||0),1)*100}%`},title:`${D.date}: ${D.users} users`},S)))||e.jsx("div",{className:"w-full text-center text-gray-400 py-12",children:"No growth data available"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Revenue Growth"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((T=w==null?void 0:w.revenue_growth)==null?void 0:T.length)||0," data points"]})]}),e.jsx("div",{className:"h-32 flex items-end space-x-1",children:((g=w==null?void 0:w.revenue_growth)==null?void 0:g.slice(-30).map((D,S)=>e.jsx("div",{className:"flex-1 bg-green-500 rounded-t hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${(D.revenue||0)/Math.max(...w.revenue_growth.map($=>$.revenue||0),1)*100}%`},title:`${D.date}: ${B(D.revenue||0)}`},S)))||e.jsx("div",{className:"w-full text-center text-gray-400 py-12",children:"No revenue data available"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx("button",{onClick:()=>b(),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh"})]}),p?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Rs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No recent activity"})]}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:x.map(D=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:D.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N(D.timestamp)})]}),D.entity_type&&D.entity_id&&e.jsx(Q,{to:`/admin/${D.entity_type}s/${D.entity_id}`,className:"text-blue-600 hover:text-blue-800",children:e.jsx(Dd,{className:"w-4 h-4"})})]},D.activity_id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Active Alerts"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded-full",children:v.length})]}),j?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"w-12 h-12 mx-auto mb-3 text-green-500"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"All systems normal"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"No active alerts"})]}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:v.map(D=>e.jsx("div",{className:`p-4 rounded-lg border-2 ${L(D.severity)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${L(D.severity)}`,children:D.severity.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:N(D.created_date)})]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:D.title}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:D.description}),D.affected_users&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Affects ",A(D.affected_users)," users"]})]}),e.jsx("button",{onClick:()=>F(D.alert_id),disabled:k.isPending,className:"ml-2 text-gray-400 hover:text-gray-600 focus:outline-none disabled:opacity-50",children:e.jsx(ge,{className:"w-4 h-4"})})]})},D.alert_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"System Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Platform Uptime"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[((l==null?void 0:l.platform_uptime)||99.9).toFixed(2),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${(l==null?void 0:l.platform_uptime)||99.9}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avg Response Time"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[(l==null?void 0:l.avg_response_time)||0,"ms"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${((l==null?void 0:l.avg_response_time)||0)<200?"bg-green-600":((l==null?void 0:l.avg_response_time)||0)<500?"bg-yellow-600":"bg-red-600"}`,style:{width:`${Math.min(((l==null?void 0:l.avg_response_time)||0)/1e3*100,100)}%`}})})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{to:"/admin/customers",className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline",children:" Manage Customers"}),e.jsx(Q,{to:"/admin/suppliers",className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline",children:" Manage Suppliers"}),e.jsx(Q,{to:"/admin/orders",className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline",children:" View All Orders"}),e.jsx(Q,{to:"/admin/analytics",className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline",children:" Detailed Analytics"}),e.jsx(Q,{to:"/admin/settings",className:"block text-sm text-blue-600 hover:text-blue-800 hover:underline",children:" Platform Settings"})]})]})]})]})]})]}),d&&e.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ve,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Failed to load platform metrics"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:d instanceof Error?d.message:"An error occurred"}),e.jsx("button",{onClick:()=>c(),className:"mt-3 text-sm font-medium text-red-600 hover:text-red-800 underline",children:"Try again"})]})]})})]})})})}const lk=async(t,s,r)=>{if(!r)throw new Error("No auth token");const a=new URLSearchParams;a.append("user_type","customer"),t.query&&a.append("query",t.query),t.status&&a.append("status",t.status),a.append("limit",s.limit.toString()),a.append("offset",((s.current_page-1)*s.limit).toString()),a.append("sort_by",t.sort_by),a.append("sort_order",t.sort_order);const n=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users?${a.toString()}`,{headers:{Authorization:`Bearer ${r}`}}),i=n.data.users.map(o=>{var d,c,u,m,h;return{user_id:o.user_id,customer_id:((d=o.customer)==null?void 0:d.customer_id)||null,email:o.email,first_name:o.first_name,last_name:o.last_name,account_type:((c=o.customer)==null?void 0:c.account_type)||null,trade_credit_status:((u=o.customer)==null?void 0:u.trade_credit_status)||null,total_orders:((m=o.customer)==null?void 0:m.total_orders)||0,total_spent:((h=o.customer)==null?void 0:h.total_spent)||0,registration_date:o.registration_date,last_login_date:o.last_login_date,status:o.status,email_verified:o.email_verified}}),l={current_page:Math.floor(n.data.offset/n.data.limit)+1,total_pages:Math.ceil(n.data.total/n.data.limit),total_count:n.data.total,limit:n.data.limit};return{customers_list:i,pagination:l}},ok=async(t,s)=>{var a,n,i,l,o,d,c,u,m,h;if(!s)throw new Error("No auth token");const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users/${t}`,{headers:{Authorization:`Bearer ${s}`}});return{user_id:r.data.user_id,customer_id:((a=r.data.customer)==null?void 0:a.customer_id)||null,email:r.data.email,first_name:r.data.first_name,last_name:r.data.last_name,phone_number:r.data.phone_number,account_type:((n=r.data.customer)==null?void 0:n.account_type)||null,trade_credit_limit:((i=r.data.customer)==null?void 0:i.trade_credit_limit)||null,trade_credit_balance:((l=r.data.customer)==null?void 0:l.trade_credit_balance)||null,trade_credit_used:((o=r.data.customer)==null?void 0:o.trade_credit_used)||null,trade_credit_status:((d=r.data.customer)==null?void 0:d.trade_credit_status)||null,total_orders:((c=r.data.customer)==null?void 0:c.total_orders)||0,total_spent:((u=r.data.customer)==null?void 0:u.total_spent)||0,avg_order_value:((m=r.data.customer)==null?void 0:m.total_orders)>0?(((h=r.data.customer)==null?void 0:h.total_spent)||0)/r.data.customer.total_orders:0,registration_date:r.data.registration_date,last_login_date:r.data.last_login_date,status:r.data.status,email_verified:r.data.email_verified,addresses:r.data.addresses||[],payment_methods:r.data.payment_methods||[],recent_orders:r.data.recent_orders||[]}},ck=async(t,s,r)=>{if(!r)throw new Error("No auth token");await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/users/${t}`,{status:s},{headers:{Authorization:`Bearer ${r}`}})},Vh=()=>{var U;const t=Pe(),[s,r]=Fe(),a=re(q=>q.authentication_state.auth_token),n=re(q=>q.authentication_state.current_user),[i,l]=_.useState({query:s.get("search_query")||null,status:s.get("status_filter")||null,account_type:s.get("account_type_filter")||null,date_range:s.get("registration_date_range")||null,spending_tier:s.get("spending_tier")||null,sort_by:s.get("sort_by")||"registration_date",sort_order:s.get("sort_order")||"desc"}),[o,d]=_.useState({current_page:parseInt(s.get("page")||"1"),total_pages:1,total_count:0,limit:50}),[c,u]=_.useState(!1),[m,h]=_.useState(null),[x,p]=_.useState([]),[b,v]=_.useState(i.query||""),[j,P]=_.useState(!1);_.useEffect(()=>{const q=new URLSearchParams;i.query&&q.set("search_query",i.query),i.status&&q.set("status_filter",i.status),i.account_type&&q.set("account_type_filter",i.account_type),i.date_range&&q.set("registration_date_range",i.date_range),i.spending_tier&&q.set("spending_tier",i.spending_tier),o.current_page>1&&q.set("page",o.current_page.toString()),i.sort_by&&q.set("sort_by",i.sort_by),i.sort_order&&q.set("sort_order",i.sort_order),r(q,{replace:!0})},[i,o.current_page,r]),_.useEffect(()=>{const q=setTimeout(()=>{b!==i.query&&(l(z=>({...z,query:b||null})),d(z=>({...z,current_page:1})))},500);return()=>clearTimeout(q)},[b,i.query]);const{data:w,isLoading:C,error:f,refetch:k}=ne({queryKey:["admin-customers",i,o.current_page],queryFn:()=>lk(i,o,a),enabled:!!a&&(n==null?void 0:n.user_type)==="admin",staleTime:6e4});_.useEffect(()=>{w!=null&&w.pagination&&d(q=>({...q,...w.pagination}))},[w]);const y=(w==null?void 0:w.customers_list)||[],{data:F,isLoading:M,error:E}=ne({queryKey:["admin-customer-detail",m],queryFn:()=>ok(m,a),enabled:!!m&&!!a,staleTime:3e4}),B=oe({mutationFn:({userId:q,newStatus:z})=>ck(q,z,a),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-customers"]}),t.invalidateQueries({queryKey:["admin-customer-detail",m]})}}),A=(q,z)=>{l(Y=>({...Y,[q]:z})),d(Y=>({...Y,current_page:1}))},L=q=>{d(z=>({...z,current_page:q})),window.scrollTo({top:0,behavior:"smooth"})},N=q=>{h(q),u(!0)},R=()=>{u(!1),h(null)},O=q=>{p(z=>z.includes(q)?z.filter(Y=>Y!==q):[...z,q])},T=()=>{x.length===y.length?p([]):p(y.map(q=>q.user_id))},g=async(q,z)=>{try{await B.mutateAsync({userId:q,newStatus:z})}catch(Y){console.error("Failed to update status:",Y)}},D=async q=>{try{await Promise.all(x.map(z=>B.mutateAsync({userId:z,newStatus:q}))),p([])}catch(z){console.error("Bulk update failed:",z)}},S=async()=>{const q=[["Email","Name","Account Type","Status","Total Orders","Total Spent","Registration Date"].join(","),...y.map(J=>[J.email,`${J.first_name||""} ${J.last_name||""}`.trim(),J.account_type||"N/A",J.status,J.total_orders,J.total_spent.toFixed(2),new Date(J.registration_date).toLocaleDateString()].join(","))].join(`
`),z=new Blob([q],{type:"text/csv"}),Y=window.URL.createObjectURL(z),se=document.createElement("a");se.href=Y,se.download=`customers-export-${new Date().toISOString().split("T")[0]}.csv`,se.click(),window.URL.revokeObjectURL(Y)},$=q=>q.first_name&&q.last_name?`${q.first_name} ${q.last_name}`:q.email,I=q=>{switch(q){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";case"suspended":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},K=q=>q?q==="trade"?"bg-blue-100 text-blue-800 border-blue-200":"bg-purple-100 text-purple-800 border-purple-200":null;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customer Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage customer accounts, monitor activity, and provide support"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:S,disabled:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),x.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-700 font-medium",children:[x.length," selected"]}),e.jsxs("button",{onClick:()=>D("suspended"),disabled:B.isPending,className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[e.jsx(kw,{className:"h-4 w-4 mr-1"}),"Suspend"]}),e.jsxs("button",{onClick:()=>D("active"),disabled:B.isPending,className:"inline-flex items-center px-3 py-2 border border-green-300 rounded-lg text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 transition-colors",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Activate"]})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsx("div",{className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:b,onChange:q=>v(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),b&&e.jsx("button",{onClick:()=>{v(""),l(q=>({...q,query:null}))},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>P(!j),className:`inline-flex items-center px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${j?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Filters",(i.status||i.account_type||i.spending_tier)&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:[i.status,i.account_type,i.spending_tier].filter(Boolean).length})]}),e.jsxs("select",{value:`${i.sort_by}:${i.sort_order}`,onChange:q=>{const[z,Y]=q.target.value.split(":");l(se=>({...se,sort_by:z,sort_order:Y}))},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"registration_date:desc",children:"Newest First"}),e.jsx("option",{value:"registration_date:asc",children:"Oldest First"}),e.jsx("option",{value:"last_login_date:desc",children:"Recent Activity"}),e.jsx("option",{value:"total_spent:desc",children:"Highest Spending"}),e.jsx("option",{value:"total_orders:desc",children:"Most Orders"})]}),e.jsx("button",{onClick:()=>k(),disabled:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors",children:e.jsx(vt,{className:`h-4 w-4 ${C?"animate-spin":""}`})})]})]}),j&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs("select",{value:i.status||"",onChange:q=>A("status",q.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),e.jsxs("select",{value:i.account_type||"",onChange:q=>A("account_type",q.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"trade",children:"Trade"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spending Tier"}),e.jsxs("select",{value:i.spending_tier||"",onChange:q=>A("spending_tier",q.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Tiers"}),e.jsx("option",{value:"high",children:"High Value ($10k+)"}),e.jsx("option",{value:"medium",children:"Medium Value ($1k-$10k)"}),e.jsx("option",{value:"low",children:"Low Value (<$1k)"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{l({query:null,status:null,account_type:null,date_range:null,spending_tier:null,sort_by:"registration_date",sort_order:"desc"}),v("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Clear All Filters"})})]})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:o.total_count.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Xt,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Accounts"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-green-600",children:y.filter(q=>q.status==="active").length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(he,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Verified Emails"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-blue-600",children:y.filter(q=>q.email_verified).length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(jt,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trade Accounts"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-purple-600",children:y.filter(q=>q.account_type==="trade").length})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Ed,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Customer Accounts",i.query&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:['- Results for "',i.query,'"']})]}),y.length>0&&e.jsx("button",{onClick:T,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:x.length===y.length?"Deselect All":"Select All"})]})}),C&&e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading customers..."})]})}),f&&e.jsx("div",{className:"py-12 px-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-800",children:"Failed to load customers. Please try again."})]})})}),!C&&!f&&y.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(Xt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-600",children:i.query?"Try adjusting your search or filters":"No customer accounts in the system yet"})]}),!C&&!f&&y.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:x.length===y.length&&y.length>0,onChange:T,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(q=>{var z;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>N(q.user_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:Y=>Y.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:x.includes(q.user_id),onChange:()=>O(q.user_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:(((z=q.first_name)==null?void 0:z[0])||q.email[0]).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:$(q)}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[q.email,!q.email_verified&&e.jsx(Ve,{className:"h-3 w-3 text-amber-500 ml-1","aria-label":"Email not verified"})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.account_type&&e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${K(q.account_type)}`,children:q.account_type==="trade"?"Trade":"Retail"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${I(q.status)}`,children:q.status.charAt(0).toUpperCase()+q.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.total_orders}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",q.total_spent.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(q.registration_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:Y=>Y.stopPropagation(),children:e.jsx("button",{onClick:()=>N(q.user_id),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(xt,{className:"h-4 w-4 inline"})})})]},q.user_id)})})]})}),!C&&y.length>0&&o.total_pages>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(o.current_page-1)*o.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.current_page*o.limit,o.total_count)})," of"," ",e.jsx("span",{className:"font-medium",children:o.total_count})," customers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>L(o.current_page-1),disabled:o.current_page===1,className:"p-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Rt,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",o.current_page," of ",o.total_pages]}),e.jsx("button",{onClick:()=>L(o.current_page+1),disabled:o.current_page===o.total_pages,className:"p-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ie,{className:"h-5 w-5"})})]})]})})]})]}),c&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Details"}),e.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ge,{className:"h-6 w-6 text-gray-500"})})]})}),M&&e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading customer details..."})]})}),E&&e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:"Failed to load customer details"})})}),!M&&!E&&F&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:(((U=F.first_name)==null?void 0:U[0])||F.email[0]).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:F.first_name&&F.last_name?`${F.first_name} ${F.last_name}`:"No name provided"}),e.jsx("p",{className:"text-gray-600",children:F.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${I(F.status)}`,children:F.status}),F.email_verified?e.jsxs("span",{className:"inline-flex items-center text-xs text-green-700",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center text-xs text-amber-600",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),"Unverified"]})]})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs("select",{value:F.status,onChange:q=>g(F.user_id,q.target.value),disabled:B.isPending,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Account Type"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:F.account_type?e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${K(F.account_type)}`,children:F.account_type==="trade"?"Trade":"Retail"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Orders"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:F.total_orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Spent"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",F.total_spent.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Avg Order Value"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",F.avg_order_value.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:F.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:F.phone_number||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Registered:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(F.registration_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Login:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:F.last_login_date?new Date(F.last_login_date).toLocaleDateString():"Never"})]})]})]}),F.account_type==="trade"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Trade Credit"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Credit Limit"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-900",children:["$",(F.trade_credit_limit||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Used"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-900",children:["$",(F.trade_credit_used||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 uppercase tracking-wide",children:"Available"}),e.jsxs("p",{className:"mt-1 text-lg font-bold text-green-700",children:["$",(F.trade_credit_balance||0).toFixed(2)]})]})]}),F.trade_credit_status&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-xs text-blue-700",children:"Status: "}),e.jsx("span",{className:"text-xs font-semibold text-blue-900",children:F.trade_credit_status.replace(/_/g," ").toUpperCase()})]})]})]}),F.addresses&&F.addresses.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Saved Addresses"}),e.jsx("div",{className:"space-y-2",children:F.addresses.map((q,z)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[q.street_address,q.apt_suite&&`, ${q.apt_suite}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[q.city,", ",q.state," ",q.postal_code]}),q.is_default&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"Default"})]},z))})]}),F.recent_orders&&F.recent_orders.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Orders"}),e.jsx("div",{className:"space-y-2",children:F.recent_orders.slice(0,5).map((q,z)=>{var Y,se;return e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Order #",q.order_number||((Y=q.order_id)==null?void 0:Y.substring(0,8))]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(q.order_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",((se=q.total_amount)==null?void 0:se.toFixed(2))||"0.00"]}),e.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${q.status==="delivered"?"bg-green-100 text-green-800":q.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:q.status})]})]},z)})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Admin Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(Q,{to:`/admin/orders?customer_id=${F.customer_id}`,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Dd,{className:"h-4 w-4 mr-2"}),"View All Orders"]}),e.jsxs("button",{onClick:()=>{alert("Impersonation feature - would open customer session")},className:"inline-flex items-center justify-center px-4 py-2 border border-blue-300 rounded-lg text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",children:[e.jsx(Ed,{className:"h-4 w-4 mr-2"}),"Impersonate Account"]}),e.jsxs("button",{onClick:()=>{alert("Send message feature")},className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsx("button",{onClick:R,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"})]})]})]})]})})]})})},Ui="https://123create-construction-app-with-a.launchpulse.ai/api",dk=async(t,s,r,a=50,n=0)=>{const i={limit:a,offset:n};return s&&(i.application_status=s),r&&(i.assigned_reviewer_id=r),(await G.get(`${Ui}/admin/supplier-applications`,{headers:{Authorization:`Bearer ${t}`},params:i})).data},uk=async(t,s)=>(await G.get(`${Ui}/admin/supplier-applications/${s}`,{headers:{Authorization:`Bearer ${t}`}})).data,mk=async(t,s)=>(await G.post(`${Ui}/admin/supplier-applications/${s}/approve`,{},{headers:{Authorization:`Bearer ${t}`}})).data,xk=async(t,s,r)=>(await G.post(`${Ui}/admin/supplier-applications/${s}/reject`,{rejection_reason:r},{headers:{Authorization:`Bearer ${t}`}})).data,hk=async(t,s,r)=>(await G.patch(`${Ui}/admin/supplier-applications/${s}`,{verification_checklist:r},{headers:{Authorization:`Bearer ${t}`}})).data,pk=()=>{const t=Pe(),[s,r]=Fe(),a=re(z=>z.authentication_state.auth_token),[n,i]=_.useState(null),[l,o]=_.useState(!1),[d,c]=_.useState(""),[u,m]=_.useState(""),[h,x]=_.useState(!1),[p,b]=_.useState(""),v=s.get("status_filter"),j=s.get("assigned_reviewer"),P=parseInt(s.get("page")||"1",10),w=50,{data:C,isLoading:f,error:k}=ne({queryKey:["admin-supplier-applications",v,j,P],queryFn:()=>dk(a,v,j,w,(P-1)*w),enabled:!!a,staleTime:3e4,select:z=>({...z,applications:z.applications||[]})}),{data:y,isLoading:F}=ne({queryKey:["supplier-application-details",n],queryFn:()=>uk(a,n),enabled:!!a&&!!n,staleTime:3e4}),M=oe({mutationFn:z=>mk(a,z),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-supplier-applications"]}),t.invalidateQueries({queryKey:["supplier-application-details"]}),i(null)}}),E=oe({mutationFn:({application_id:z,reason:Y})=>xk(a,z,Y),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-supplier-applications"]}),t.invalidateQueries({queryKey:["supplier-application-details"]}),o(!1),c(""),m(""),i(null)}}),B=oe({mutationFn:({application_id:z,checklist:Y})=>hk(a,z,Y),onSuccess:()=>{t.invalidateQueries({queryKey:["supplier-application-details",n]})}}),A=(C==null?void 0:C.applications)||[],L=(C==null?void 0:C.total)||0,N=Math.ceil(L/w),R=(z,Y)=>{const se=new URLSearchParams(s);Y?se.set(z,Y):se.delete(z),se.set("page","1"),r(se)},O=z=>{const Y=new URLSearchParams(s);Y.set("page",z.toString()),r(Y)},T=z=>{i(z)},g=z=>{if(!y)return;const Y={...y.verification_checklist,[z]:!y.verification_checklist[z]};B.mutate({application_id:y.application_id,checklist:Y})},D=()=>{y&&window.confirm(`Are you sure you want to approve ${y.business_name}?`)&&M.mutate(y.application_id)},S=()=>{o(!0)},$=()=>{!y||!d.trim()||E.mutate({application_id:y.application_id,reason:d.trim()})},I=z=>{b(z),x(!0)},K=z=>{switch(z){case"pending_review":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"under_review":return"bg-blue-100 text-blue-800 border-blue-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},U=z=>z.split("_").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1)).join(" "),q=z=>{if(!z)return 0;const Y=Object.keys(z).length,se=Object.values(z).filter(Boolean).length;return Math.round(se/Y*100)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Supplier Applications"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review and approve supplier applications for platform onboarding"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-2",children:[e.jsx("p",{className:"text-xs text-yellow-600 font-medium",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:A.filter(z=>z.application_status==="pending_review").length})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Under Review"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:A.filter(z=>z.application_status==="under_review").length})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Status"}),e.jsxs("select",{value:v||"",onChange:z=>R("status_filter",z.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),(v||j)&&e.jsx("button",{onClick:()=>{r({})},className:"w-full px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[f?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading applications..."})]}):k?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(de,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-red-600",children:"Failed to load applications"})]}):A.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Me,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No applications found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:A.map(z=>e.jsxs("button",{onClick:()=>T(z.application_id),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${n===z.application_id?"bg-blue-50 border-l-4 border-l-blue-600":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:z.business_name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${K(z.application_status)}`,children:U(z.application_status)})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:z.business_type}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Submitted: ",new Date(z.submitted_date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all",style:{width:`${q(z.verification_checklist)}%`}})}),e.jsxs("span",{className:"text-xs",children:[q(z.verification_checklist),"%"]})]})]})]},z.application_id))}),N>1&&e.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>O(P-1),disabled:P===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[e.jsx(Rt,{className:"w-4 h-4"}),e.jsx("span",{children:"Previous"})]}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",P," of ",N]}),e.jsxs("button",{onClick:()=>O(P+1),disabled:P===N,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[e.jsx("span",{children:"Next"}),e.jsx(Ie,{className:"w-4 h-4"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:n?F?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Loading application details..."})]}):y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:y.business_name}),e.jsx("p",{className:"text-blue-100 text-sm",children:y.business_type})]}),e.jsx("span",{className:`text-sm px-3 py-1 rounded-full border ${K(y.application_status)} bg-white`,children:U(y.application_status)})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(kr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Registration Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:y.business_registration_number})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Xt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Contact Person"}),e.jsx("p",{className:"text-sm text-gray-900",children:y.contact_person_name})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Dt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Business Address"}),e.jsx("p",{className:"text-sm text-gray-900",children:y.business_address})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(He,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Submitted Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(y.submitted_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),y.business_description&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium mb-2",children:"Business Description"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:y.business_description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verification Checklist"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[q(y.verification_checklist),"% Complete"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${q(y.verification_checklist)}%`}})})]}),e.jsx("div",{className:"p-6 space-y-3",children:Object.entries(y.verification_checklist).map(([z,Y])=>e.jsxs("button",{onClick:()=>g(z),disabled:B.isPending||y.application_status!=="under_review",className:"w-full flex items-center justify-between p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[Y?e.jsx(Sw,{className:"w-5 h-5 text-green-600"}):e.jsx(Cw,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:`text-sm font-medium ${Y?"text-gray-900":"text-gray-600"}`,children:z.split("_").map(se=>se.charAt(0).toUpperCase()+se.slice(1)).join(" ")})]}),Y&&e.jsx(he,{className:"w-5 h-5 text-green-600"})]},z))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Submitted Documents"})}),e.jsx("div",{className:"p-6 space-y-3",children:Object.entries(y.submitted_documents||{}).map(([z,Y])=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:z.split("_").map(se=>se.charAt(0).toUpperCase()+se.slice(1)).join(" ")})]}),Y?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>I(Y),className:"flex items-center space-x-1 px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-md transition-colors",children:[e.jsx(xt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"View"})]}),e.jsxs("a",{href:Y,download:!0,className:"flex items-center space-x-1 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[e.jsx(Lt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Download"})]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Not provided"})]},z))})]}),y.application_status==="pending_review"||y.application_status==="under_review"?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Actions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:D,disabled:M.isPending||q(y.verification_checklist)<100,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Approving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{children:"Approve Application"})]})}),e.jsxs("button",{onClick:S,disabled:E.isPending,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Reject Application"})]})]}),q(y.verification_checklist)<100&&e.jsxs("p",{className:"mt-3 text-xs text-amber-600 flex items-center space-x-1",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Complete all verification items before approving"})]})]}):y.application_status==="approved"?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Application Approved"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Approved on ",y.approved_date?new Date(y.approved_date).toLocaleDateString():"N/A"]})]})]})}):y.application_status==="rejected"?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ve,{className:"w-6 h-6 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 mb-1",children:"Application Rejected"}),y.rejection_reason&&e.jsxs("p",{className:"text-sm text-red-700 bg-red-100 rounded-md p-3 mt-2",children:[e.jsx("strong",{children:"Reason:"})," ",y.rejection_reason]})]})]})}):null]}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[e.jsx(de,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Application Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Unable to load application details"})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Application Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select an application from the list to view details and begin review"})]})})]})})]}),l&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reject Application"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Provide a reason for rejecting ",y.business_name]})]}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"rejection_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"rejection_reason",value:d,onChange:z=>c(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"incomplete_documentation",children:"Incomplete Documentation"}),e.jsx("option",{value:"failed_verification",children:"Failed Verification"}),e.jsx("option",{value:"business_type_not_eligible",children:"Business Type Not Eligible"}),e.jsx("option",{value:"duplicate_application",children:"Duplicate Application"}),e.jsx("option",{value:"suspicious_activity",children:"Suspicious Activity"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rejection_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{id:"rejection_notes",value:u,onChange:z=>m(z.target.value),rows:4,placeholder:"Provide additional details about the rejection...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{o(!1),c(""),m("")},disabled:E.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:$,disabled:E.isPending||!d.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Rejecting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Confirm Rejection"})]})})]})]})}),h&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Document Preview"}),e.jsx("button",{onClick:()=>{x(!1),b("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:p.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("img",{src:p,alt:"Document",className:"max-w-full h-auto mx-auto rounded-lg shadow-lg"}):p.match(/\.pdf$/i)?e.jsx("iframe",{src:p,className:"w-full h-full min-h-[600px] rounded-lg",title:"PDF Document"}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Preview not available for this file type"}),e.jsxs("a",{href:p,download:!0,className:"mt-4 inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsx("span",{children:"Download File"})]})]})})]})})]})},gk=()=>{const t=re(I=>I.authentication_state.auth_token),[s,r]=Fe(),a=Pe(),[n,i]=_.useState(""),[l,o]=_.useState(null),[d,c]=_.useState(!1),[u,m]=_.useState(""),[h,x]=_.useState("all"),p=_.useMemo(()=>({supplier_id:s.get("supplier_filter")||null,category_id:s.get("category_filter")||null,status:s.get("status")||null,flagged_only:s.get("flagged_only")==="true"}),[s]),b=_.useMemo(()=>({current_page:Number(s.get("page"))||1,total_pages:1,total_count:0,limit:50}),[s]),{data:v}=ne({queryKey:["admin","categories"],queryFn:async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/categories",{params:{is_active:!0},headers:t?{Authorization:`Bearer ${t}`}:{}})).data,staleTime:5*60*1e3,enabled:!!t}),j=v||[],{data:P,isLoading:w}=ne({queryKey:["admin","products",p,b.current_page,n],queryFn:async()=>{const I={limit:b.limit,offset:(b.current_page-1)*b.limit,sort_by:"created_at",sort_order:"desc"};p.supplier_id&&(I.supplier_id=p.supplier_id),p.category_id&&(I.category=p.category_id),p.status&&(I.status=p.status),n&&(I.search_query=n);const K=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/products",{params:I,headers:t?{Authorization:`Bearer ${t}`}:{}});return{products:K.data.products,total:K.data.total}},staleTime:60*1e3,enabled:!!t&&h==="all"}),C=_.useMemo(()=>(P==null?void 0:P.products)||[],[P]),f=(P==null?void 0:P.total)||0,k=Math.ceil(f/b.limit),{data:y,isLoading:F}=ne({queryKey:["admin","products","flagged"],queryFn:async()=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/flagged",{headers:t?{Authorization:`Bearer ${t}`}:{}})).data,staleTime:2*60*1e3,enabled:!!t&&h==="flagged"}),M=_.useMemo(()=>y||[],[y]),E=_.useMemo(()=>({pending_count:C.filter(I=>I.status==="active").length,flagged_count:M.length,reviewed_count:f-M.length}),[C,M,f]),B=oe({mutationFn:async({product_id:I,action:K,reason:U})=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/${I}/moderate`,{action:K,reason:U},{headers:{Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["admin","products"]}),a.invalidateQueries({queryKey:["admin","products","flagged"]}),c(!1),o(null),m("")}}),A=oe({mutationFn:async({product_id:I,status:K})=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/products/${I}`,{status:K},{headers:{Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["admin","products"]})}}),L=(I,K)=>{const U=new URLSearchParams(s);K===null||K===""?U.delete(I==="supplier_id"?"supplier_filter":I==="category_id"?"category_filter":I):I==="supplier_id"?U.set("supplier_filter",K):I==="category_id"?U.set("category_filter",K):I==="flagged_only"?U.set("flagged_only",K.toString()):U.set(I,K),U.set("page","1"),r(U)},N=I=>{const K=new URLSearchParams(s);K.set("page",I.toString()),r(K)},R=I=>{o(I),c(!0)},O=I=>{l&&B.mutate({product_id:l.product_id,action:I,reason:u||`${I} by admin`})},T=(I,K)=>{A.mutate({product_id:I,status:K})},g=I=>{I.preventDefault();const K=new URLSearchParams(s);n?K.set("search",n):K.delete("search"),K.set("page","1"),r(K)},D=()=>{i(""),r({})},S=w||F,$=B.isPending||A.isPending;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Moderation"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review and moderate product listings to maintain platform quality standards"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(Q,{to:"/admin",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Back to Dashboard"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:E.pending_count})]}),e.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(xt,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Products"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:E.flagged_count})]}),e.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Gr,{className:"h-6 w-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:f})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"h-6 w-6 text-green-600"})})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>x("all"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${h==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All Products"}),e.jsxs("button",{onClick:()=>x("flagged"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${h==="flagged"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Flagged (",E.flagged_count,")"]})]})}),e.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[e.jsxs("form",{onSubmit:g,className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:I=>i(I.target.value),placeholder:"Search products by name, SKU, or description...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:p.category_id||"",onChange:I=>L("category_id",I.target.value||null),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"",children:"All Categories"}),j.map(I=>e.jsx("option",{value:I.category_id,children:I.category_name},I.category_id))]}),e.jsxs("select",{value:p.status||"",onChange:I=>L("status",I.target.value||null),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]}),e.jsxs("label",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-50 rounded-lg border-2 border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:p.flagged_only,onChange:I=>L("flagged_only",I.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Flagged Only"})]}),(p.category_id||p.status||p.flagged_only||n)&&e.jsx("button",{onClick:D,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Clear All Filters"})]})]}),h==="all"?e.jsx("div",{className:"overflow-x-auto",children:S?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):C.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"No products found matching your filters."}),e.jsx("button",{onClick:D,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Clear filters"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100",children:I.primary_image_url?e.jsx("img",{src:I.primary_image_url,alt:I.product_name,className:"h-12 w-12 object-cover"}):e.jsx("div",{className:"h-12 w-12 flex items-center justify-center text-gray-400",children:e.jsx(xt,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.product_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",I.sku]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:I.category_name||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:I.business_name||"Unknown"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",Number(I.price_per_unit||0).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["per ",I.unit_of_measure]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:I.stock_quantity})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:I.status,onChange:K=>T(I.product_id,K.target.value),className:`px-3 py-1 text-xs font-medium rounded-full border-2 ${I.status==="active"?"bg-green-100 text-green-800 border-green-200":I.status==="inactive"?"bg-gray-100 text-gray-800 border-gray-200":I.status==="out_of_stock"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,disabled:$,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>R(I),className:"text-blue-600 hover:text-blue-900 transition-colors",children:"Review"})})]},I.product_id))})]})}):e.jsx("div",{className:"overflow-x-auto",children:F?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading flagged products..."})]}):M.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(he,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No flagged products"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"All products are in good standing"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flag Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flag Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flagged Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.product_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:I.supplier_id})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-700",children:I.flag_reason})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:[I.flag_count," flags"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:new Date(I.flagged_date).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>{const K=C.find(U=>U.product_id===I.product_id);K&&R(K)},className:"text-blue-600 hover:text-blue-900 transition-colors",children:"Review"})})]},I.product_id))})]})}),h==="all"&&k>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(b.current_page-1)*b.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(b.current_page*b.limit,f)})," ","of ",e.jsx("span",{className:"font-medium",children:f})," products"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(b.current_page-1),disabled:b.current_page===1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Rt,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(Math.min(5,k))].map((I,K)=>{const U=K+1;return e.jsx("button",{onClick:()=>N(U),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${b.current_page===U?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:U},U)})}),e.jsx("button",{onClick:()=>N(b.current_page+1),disabled:b.current_page>=k,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ie,{className:"h-5 w-5"})})]})]})})]})})]}),d&&l&&e.jsx("div",{className:"fixed inset-0 overflow-hidden z-50",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsx("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:e.jsx("div",{className:"w-screen max-w-2xl",children:e.jsxs("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[e.jsx("div",{className:"px-6 py-6 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Moderation Review"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Review product details and take moderation actions"})]}),e.jsxs("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-500 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),e.jsxs("div",{className:"flex-1 px-6 py-6 space-y-6",children:[l.primary_image_url&&e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200",children:e.jsx("img",{src:l.primary_image_url,alt:l.product_name,className:"w-full h-64 object-cover"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.product_name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["SKU: ",l.sku]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Price"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["$",Number(l.price_per_unit||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:[l.stock_quantity," ",l.unit_of_measure]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 mt-2 leading-relaxed",children:l.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Current Status"}),e.jsx("span",{className:`inline-flex mt-2 px-3 py-1 text-xs font-medium rounded-full ${l.status==="active"?"bg-green-100 text-green-800":l.status==="inactive"?"bg-gray-100 text-gray-800":l.status==="out_of_stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:l.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"moderation_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Moderation Reason/Notes"}),e.jsx("textarea",{id:"moderation_reason",value:u,onChange:I=>m(I.target.value),rows:4,placeholder:"Enter reason for moderation action...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>O("flag"),disabled:$,className:"px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx("span",{children:"Flag for Review"})]}),e.jsxs("button",{onClick:()=>O("reject"),disabled:$,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Reject"})]}),e.jsxs("button",{onClick:()=>O("approve"),disabled:$,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]})]})})]})})})]})})]})},fk=async(t,s,r)=>{const a=new URLSearchParams;s.status&&a.append("status_filter",s.status),s.has_issues!==null&&a.append("issue_flag",String(s.has_issues)),a.append("limit",String(r.limit)),a.append("offset",String(r.offset));const n=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/orders?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{orders:n.data.orders||[],total:n.data.total||0}},bk=async(t,s)=>{const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${s}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{order:r.data.order,items:r.data.items||[],delivery:r.data.delivery||null,timeline:r.data.timeline||[]}},yk=async(t,s,r,a)=>(await G.patch(`https://123create-construction-app-with-a.launchpulse.ai/api/orders/${s}`,{status:r,admin_notes:a},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,vk=async t=>{const s=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard?metric_type=orders",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r=s.data.total_orders||0,a=s.data.active_orders||0,n=s.data.pending_disputes||0;return{total_orders:r,completion_rate:r>0?(r-a)/r*100:0,avg_fulfillment_time:48,issue_rate:r>0?n/r*100:0}},jk=()=>{const[t,s]=Fe(),r=Pe(),a=re(D=>D.authentication_state.auth_token),n=re(D=>D.authentication_state.current_user),[i,l]=_.useState(null),[o,d]=_.useState(!1),[c,u]=_.useState(!1),[m,h]=_.useState(""),[x,p]=_.useState(""),[b,v]=_.useState(""),[j,P]=_.useState({status:t.get("status_filter")||null,min_total:null,max_total:null,has_issues:t.get("issue_flag")==="true"?!0:null});_.useEffect(()=>{const D=t.get("value_range");D==="high_value"?P(S=>({...S,min_total:1e3,max_total:null})):D==="medium_value"?P(S=>({...S,min_total:100,max_total:1e3})):D==="low_value"&&P(S=>({...S,min_total:null,max_total:100}))},[t]);const[w,C]=_.useState({current_page:1,total_pages:1,total_count:0,limit:50}),{data:f,isLoading:k,error:y}=ne({queryKey:["admin-orders",j,w.current_page,w.limit],queryFn:()=>fk(a,j,{limit:w.limit,offset:(w.current_page-1)*w.limit}),enabled:!!a&&(n==null?void 0:n.user_type)==="admin",staleTime:6e4,refetchOnWindowFocus:!1,select:D=>({orders:D.orders,total:D.total})});_.useEffect(()=>{(f==null?void 0:f.total)!==void 0&&C(D=>({...D,total_count:f.total,total_pages:Math.ceil(f.total/D.limit)}))},[f==null?void 0:f.total]);const{data:F,isLoading:M}=ne({queryKey:["order-details",i],queryFn:()=>bk(a,i),enabled:!!a&&!!i,staleTime:3e4}),{data:E}=ne({queryKey:["admin-order-analytics"],queryFn:()=>vk(a),enabled:!!a&&(n==null?void 0:n.user_type)==="admin",staleTime:12e4,select:D=>({total_orders:D.total_orders,completion_rate:Number(D.completion_rate.toFixed(1)),avg_fulfillment_time:Number(D.avg_fulfillment_time.toFixed(1)),issue_rate:Number(D.issue_rate.toFixed(1))})}),B=oe({mutationFn:({order_id:D,new_status:S,admin_notes:$})=>yk(a,D,S,$),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-orders"]}),r.invalidateQueries({queryKey:["order-details",i]}),u(!1),p(""),h("")}}),A=(D,S)=>{const $={...j,[D]:S};P($),C(K=>({...K,current_page:1}));const I=new URLSearchParams(t);D==="status"&&S?I.set("status_filter",S):D==="status"&&!S&&I.delete("status_filter"),D==="has_issues"&&S!==null?I.set("issue_flag",String(S)):D==="has_issues"&&S===null&&I.delete("issue_flag"),s(I)},L=D=>{l(D),d(!0)},N=D=>{D.preventDefault(),!(!i||!m)&&B.mutate({order_id:i,new_status:m,admin_notes:x})},R=()=>{d(!1),l(null)},O=()=>{u(!1),h(""),p("")},T=D=>({pending:"bg-yellow-100 text-yellow-800 border border-yellow-200",processing:"bg-blue-100 text-blue-800 border border-blue-200",shipped:"bg-purple-100 text-purple-800 border border-purple-200",in_transit:"bg-indigo-100 text-indigo-800 border border-indigo-200",delivered:"bg-green-100 text-green-800 border border-green-200",cancelled:"bg-red-100 text-red-800 border border-red-200",refunded:"bg-gray-100 text-gray-800 border border-gray-200"})[D]||"bg-gray-100 text-gray-800",g=D=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[D]||"bg-gray-100 text-gray-800";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Oversight"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor and manage all platform orders with administrative controls"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("button",{onClick:()=>r.invalidateQueries({queryKey:["admin-orders"]}),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:(E==null?void 0:E.total_orders.toLocaleString())||"0"})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:e.jsx(Te,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(E==null?void 0:E.completion_rate)||0,"%"]})]}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:e.jsx(he,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Fulfillment"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(E==null?void 0:E.avg_fulfillment_time)||0,"h"]})]}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:e.jsx(He,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Issue Rate"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[(E==null?void 0:E.issue_rate)||0,"%"]})]}),e.jsx("div",{className:"bg-red-50 rounded-lg p-3",children:e.jsx(de,{className:"h-6 w-6 text-red-600"})})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order number or customer...",value:b,onChange:D=>v(D.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"})]}),e.jsxs("select",{value:j.status||"",onChange:D=>A("status",D.target.value||null),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"All Orders"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.has_issues===!0,onChange:D=>A("has_issues",D.target.checked?!0:null),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Issues Only"})]})})]}),(j.status||j.has_issues)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[j.status&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Status: ",j.status,e.jsx("button",{onClick:()=>A("status",null),className:"ml-2 hover:text-blue-900",children:e.jsx(ge,{className:"h-3 w-3"})})]}),j.has_issues&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:["Has Issues",e.jsx("button",{onClick:()=>A("has_issues",null),className:"ml-2 hover:text-red-900",children:e.jsx(ge,{className:"h-3 w-3"})})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Orders List",(f==null?void 0:f.total)!==void 0&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",f.total.toLocaleString()," total)"]})]})}),k&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading orders..."})]}),y&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(de,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load orders"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Please try again later"})]}),!k&&!y&&(!(f!=null&&f.orders)||f.orders.length===0)&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(xt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}),!k&&!y&&(f==null?void 0:f.orders)&&f.orders.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.orders.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>L(D.order_id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:D.order_number}),e.jsxs("span",{className:"text-xs text-gray-500",children:[D.order_id.substring(0,8),"..."]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:new Date(D.order_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${T(D.status)}`,children:D.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${g(D.payment_status)}`,children:D.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",Number(D.total_amount).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:S=>{S.stopPropagation(),L(D.order_id)},className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"View Details"})})]},D.order_id))})]})}),!k&&f&&f.orders.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(w.current_page-1)*w.limit+1," to"," ",Math.min(w.current_page*w.limit,w.total_count)," of"," ",w.total_count," orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(D=>({...D,current_page:Math.max(1,D.current_page-1)})),disabled:w.current_page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",w.current_page," of ",w.total_pages]}),e.jsx("button",{onClick:()=>C(D=>({...D,current_page:Math.min(D.total_pages,D.current_page+1)})),disabled:w.current_page===w.total_pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})}),o&&i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:R}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Details"}),e.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[M&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading order details..."})]}),!M&&F&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:F.order.order_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(F.order.order_date).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${T(F.order.status)}`,children:F.order.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${g(F.order.payment_status)}`,children:F.order.payment_status})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"bg-gray-50 rounded-lg divide-y divide-gray-200",children:F.items.map(D=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:D.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",D.sku]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",D.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",D.line_total.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",Number(D.price_per_unit||0).toFixed(2)," each"]})]})]},D.order_item_id))})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(F.order.subtotal_amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Delivery Fee"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(F.order.delivery_fee_total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Tax"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",Number(F.order.tax_amount).toFixed(2)]})]}),F.order.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Discount"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-$",Number(F.order.discount_amount).toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-blue-200 pt-2 mt-2 flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",Number(F.order.total_amount).toFixed(2)]})]})]})}),F.delivery&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Information"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Method"}),e.jsx("p",{className:"font-medium text-gray-900",children:F.delivery.delivery_method})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${T(F.delivery.delivery_status)}`,children:F.delivery.delivery_status})]}),F.delivery.tracking_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tracking Number"}),e.jsx("p",{className:"font-medium text-gray-900",children:F.delivery.tracking_number})]}),F.delivery.carrier&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Carrier"}),e.jsx("p",{className:"font-medium text-gray-900",children:F.delivery.carrier})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:D=>{D.stopPropagation(),u(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"Intervene Order"}),e.jsx(Q,{to:`/orders/${F.order.order_id}`,className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"View Full Order"})]})]})]})]})]})}),c&&i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:O}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Order Intervention"}),e.jsx("button",{onClick:O,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Order Status *"}),e.jsxs("select",{value:m,onChange:D=>h(D.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"",children:"Select status..."}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes *"}),e.jsx("textarea",{value:x,onChange:D=>p(D.target.value),required:!0,rows:4,placeholder:"Provide reason for intervention...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(de,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"This action will update the order status and notify relevant parties."})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:O,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:B.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:B.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Intervention"})]})]})]})]})})]})})},Nk=async(t,s,r)=>{const a=new URLSearchParams;s.status&&a.append("status",s.status),s.issue_type&&a.append("issue_type",s.issue_type),s.assigned_admin_id&&a.append("assigned_admin",s.assigned_admin_id),a.append("limit",r.limit.toString()),a.append("offset",((r.current_page-1)*r.limit).toString());const n=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/disputes?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}});return{issues:n.data,total:n.data.length}},wk=async(t,s)=>{const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/issues/${s}`,{headers:{Authorization:`Bearer ${t}`}});return{issue:r.data.issue||r.data,messages:r.data.messages||[]}},_k=async(t,s,r)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/disputes/${s}/resolve`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,kk=async(t,s,r)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/issues/${s}/messages`,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,Sk=()=>{const[t,s]=Fe(),r=Pe(),a=re(T=>T.authentication_state.auth_token),[n,i]=_.useState(null),[l,o]=_.useState("details"),[d,c]=_.useState(""),[u,m]=_.useState({status:t.get("status_filter"),issue_type:t.get("dispute_type"),assigned_admin_id:t.get("assigned_admin")}),[h,x]=_.useState({resolution_type:"",resolution_amount:null,resolution_description:"",admin_notes:""}),[p,b]=_.useState({current_page:1,total_pages:1,total_count:0,limit:50});_.useEffect(()=>{const T=new URLSearchParams;u.status&&T.set("status_filter",u.status),u.issue_type&&T.set("dispute_type",u.issue_type),u.assigned_admin_id&&T.set("assigned_admin",u.assigned_admin_id),s(T,{replace:!0})},[u,s]);const{data:v,isLoading:j,error:P}=ne({queryKey:["admin_disputes",u,p.current_page],queryFn:()=>Nk(a,u,p),enabled:!!a,staleTime:3e4}),w=(v==null?void 0:v.issues)||[],{data:C,isLoading:f}=ne({queryKey:["dispute_details",n==null?void 0:n.issue_id],queryFn:()=>wk(a,n.issue_id),enabled:!!a&&!!n,staleTime:1e4}),k=(C==null?void 0:C.messages)||[],y=oe({mutationFn:T=>_k(a,T.issue_id,T.resolution_data),onSuccess:T=>{r.invalidateQueries({queryKey:["admin_disputes"]}),r.invalidateQueries({queryKey:["dispute_details"]}),i(T),x({resolution_type:"",resolution_amount:null,resolution_description:"",admin_notes:""}),alert("Dispute resolved successfully!")},onError:T=>{var g,D;alert(((D=(g=T.response)==null?void 0:g.data)==null?void 0:D.message)||"Failed to resolve dispute")}}),F=oe({mutationFn:T=>kk(a,T.issue_id,T.message_data),onSuccess:()=>{r.invalidateQueries({queryKey:["dispute_details"]}),c("")},onError:T=>{var g,D;alert(((D=(g=T.response)==null?void 0:g.data)==null?void 0:D.message)||"Failed to send message")}}),M=(T,g)=>{m(D=>({...D,[T]:g})),b(D=>({...D,current_page:1}))},E=T=>{i(T),o("details")},B=T=>{if(T.preventDefault(),!n||!h.resolution_type){alert("Please fill in required fields");return}y.mutate({issue_id:n.issue_id,resolution_data:{resolution_offered:h.resolution_type,resolution_amount:h.resolution_amount,admin_notes:h.admin_notes}})},A=T=>{T.preventDefault(),!(!n||!d.trim())&&F.mutate({issue_id:n.issue_id,message_data:{message_text:d,attachments:[]}})},L={open_disputes_count:w.filter(T=>T.status==="open"||T.status==="under_review").length,avg_resolution_time:w.filter(T=>T.resolved_date).reduce((T,g)=>{const D=new Date(g.opened_date).getTime(),S=new Date(g.resolved_date).getTime();return T+(S-D)/(1e3*60*60)},0)/(w.filter(T=>T.resolved_date).length||1),resolution_outcomes:w.filter(T=>T.resolution_offered).reduce((T,g)=>(T[g.resolution_offered]=(T[g.resolution_offered]||0)+1,T),{})},N=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=T=>{switch(T){case"open":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"under_review":return"bg-blue-100 text-blue-800 border-blue-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},O=T=>({late_delivery:"Late Delivery",wrong_item:"Wrong Item",damaged_item:"Damaged Item",missing_item:"Missing Item",quality_issue:"Quality Issue",billing_issue:"Billing Issue",delivery_not_attempted:"Delivery Not Attempted",other:"Other"})[T]||T;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dispute Resolution Center"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and resolve customer disputes with mediation tools"})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-2",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:L.open_disputes_count}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Open Disputes"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-800",children:[L.avg_resolution_time.toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Avg Resolution Time"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"status-filter",className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status-filter",value:u.status||"",onChange:T=>M("status",T.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"under_review",children:"Under Review"}),e.jsx("option",{value:"awaiting_response",children:"Awaiting Response"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"type-filter",className:"block text-xs font-medium text-gray-700 mb-1",children:"Issue Type"}),e.jsxs("select",{id:"type-filter",value:u.issue_type||"",onChange:T=>M("issue_type",T.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"late_delivery",children:"Late Delivery"}),e.jsx("option",{value:"wrong_item",children:"Wrong Item"}),e.jsx("option",{value:"damaged_item",children:"Damaged Item"}),e.jsx("option",{value:"missing_item",children:"Missing Item"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"billing_issue",children:"Billing Issue"}),e.jsx("option",{value:"delivery_not_attempted",children:"Delivery Not Attempted"}),e.jsx("option",{value:"other",children:"Other"})]})]}),(u.status||u.issue_type||u.assigned_admin_id)&&e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{m({status:null,issue_type:null,assigned_admin_id:null})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Disputes"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[w.length," dispute",w.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 400px)"},children:j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):P?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load disputes"})}):w.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No disputes found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:w.map(T=>e.jsx("div",{onClick:()=>E(T),className:`p-4 cursor-pointer transition-all hover:bg-gray-50 ${(n==null?void 0:n.issue_id)===T.issue_id?"bg-blue-50 border-l-4 border-blue-600":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${R(T.status)}`,children:T.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:O(T.issue_type)})]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:["Order #",T.order_id.slice(-8)]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:T.description}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:N(T.opened_date)}),T.escalated_to_admin&&e.jsxs("span",{className:"inline-flex items-center text-red-600 font-medium",children:[e.jsx("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Escalated"]})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},T.issue_id))})}),w.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>b(T=>({...T,current_page:Math.max(1,T.current_page-1)})),disabled:p.current_page===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",p.current_page]}),e.jsx("button",{onClick:()=>b(T=>({...T,current_page:T.current_page+1})),disabled:w.length<p.limit,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx("div",{className:"lg:col-span-7",children:n?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Issue #",n.issue_id.slice(-8)]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${R(n.status)}`,children:n.status.replace("_"," ").toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",n.order_id.slice(-8),"  ",O(n.issue_type)]})]}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:["details","evidence","communication","resolution"].map(T=>e.jsx("button",{onClick:()=>o(T),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${l===T?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:T.charAt(0).toUpperCase()+T.slice(1).replace("_"," ")},T))})}),e.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 450px)"},children:f?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[l==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 rounded-lg p-4",children:n.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Opened Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:N(n.opened_date)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Desired Resolution"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:n.desired_resolution.replace("_"," ")})]}),n.resolved_date&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Resolved Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:N(n.resolved_date)})]}),n.assigned_admin_id&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Assigned Admin"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.assigned_admin_id})]})]}),n.affected_items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Affected Items"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-900 space-y-1",children:n.affected_items.map((T,g)=>e.jsx("li",{children:T},g))})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx(Q,{to:`/admin/orders?order_id=${n.order_id}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View Related Order "})})]}),l==="evidence"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Evidence Photos"}),n.evidence_photos.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No evidence photos uploaded"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.evidence_photos.map((T,g)=>e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:T,alt:`Evidence ${g+1}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(T,"_blank")})},g))})]}),l==="communication"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4 mb-6",style:{maxHeight:"400px",overflowY:"auto"},children:k.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No messages yet"})}):k.map(T=>e.jsx("div",{className:`flex ${T.sender_type==="admin"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-lg ${T.sender_type==="admin"?"bg-blue-600 text-white":T.sender_type==="customer"?"bg-gray-100 text-gray-900":"bg-green-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-xs font-medium opacity-75",children:T.sender_type.charAt(0).toUpperCase()+T.sender_type.slice(1)}),e.jsx("span",{className:"text-xs opacity-60",children:N(T.timestamp)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:T.message_text}),T.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:T.attachments.map((g,D)=>e.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"block text-xs underline opacity-75 hover:opacity-100",children:["Attachment ",D+1]},D))})]})},T.message_id))}),e.jsx("form",{onSubmit:A,className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:d,onChange:T=>c(T.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),e.jsx("button",{type:"submit",disabled:!d.trim()||F.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?"Sending...":"Send"})]})})]}),l==="resolution"&&e.jsx("form",{onSubmit:B,className:"space-y-6",children:n.status==="resolved"||n.status==="closed"?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Dispute Resolved"}),n.resolution_offered&&e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Resolution:"})," ",n.resolution_offered]}),n.resolution_amount&&e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," $",n.resolution_amount.toFixed(2)]}),n.resolved_date&&e.jsxs("p",{children:[e.jsx("strong",{children:"Resolved on:"})," ",N(n.resolved_date)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Type *"}),e.jsxs("select",{id:"resolution-type",value:h.resolution_type,onChange:T=>x(g=>({...g,resolution_type:T.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select resolution..."}),e.jsx("option",{value:"full_refund",children:"Full Refund"}),e.jsx("option",{value:"partial_refund",children:"Partial Refund"}),e.jsx("option",{value:"replacement",children:"Replacement Item"}),e.jsx("option",{value:"credit",children:"Store Credit"}),e.jsx("option",{value:"other",children:"Other"})]})]}),(h.resolution_type==="full_refund"||h.resolution_type==="partial_refund"||h.resolution_type==="credit")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (USD)"}),e.jsx("input",{id:"resolution-amount",type:"number",step:"0.01",min:"0",value:h.resolution_amount||"",onChange:T=>x(g=>({...g,resolution_amount:T.target.value?parseFloat(T.target.value):null})),placeholder:"Enter amount",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"resolution-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Description"}),e.jsx("textarea",{id:"resolution-description",value:h.resolution_description,onChange:T=>x(g=>({...g,resolution_description:T.target.value})),rows:4,placeholder:"Explain the resolution to the customer...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Admin Notes"}),e.jsx("textarea",{id:"admin-notes",value:h.admin_notes,onChange:T=>x(g=>({...g,admin_notes:T.target.value})),rows:3,placeholder:"Internal notes (not visible to customer/supplier)...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{className:"flex space-x-3 pt-4",children:e.jsx("button",{type:"submit",disabled:!h.resolution_type||y.isPending,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:y.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resolving..."]}):"Resolve Dispute"})})]})})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Dispute Selected"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Select a dispute from the list to view details and manage resolution"})]})})]})})]})})},Ck=async(t,s,r)=>{const a=new URLSearchParams;s.status&&a.append("status",s.status),s.min_rating!==null&&a.append("min_rating",s.min_rating.toString()),s.verification_status!==null&&a.append("verified_purchase",s.verification_status.toString()),a.append("limit",r.limit.toString()),a.append("offset",((r.current_page-1)*r.limit).toString()),a.append("sort_by","review_date"),a.append("sort_order","desc");const n=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/reviews?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}});return{reviews:n.data.reviews||[],total:n.data.total||0}},Pk=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/flagged",{headers:{Authorization:`Bearer ${t}`}})).data||[],Ak=async(t,s,r,a)=>(await G.post(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/reviews/${s}/moderate`,{action:r,reason:a},{headers:{Authorization:`Bearer ${t}`}})).data,$k=async t=>(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard?metric_type=content_moderation",{headers:{Authorization:`Bearer ${t}`}})).data,Ok=()=>{var $;const t=Pe(),[s,r]=Fe(),a=re(I=>I.authentication_state.auth_token),[n,i]=_.useState(s.get("flagged_only")==="true"?"flagged":"all"),[l,o]=_.useState({status:s.get("review_type")||null,flagged_only:s.get("flagged_only")==="true",min_rating:null,verification_status:null}),[d,c]=_.useState({current_page:1,total_pages:1,total_count:0,limit:50}),[u,m]=_.useState(null),[h,x]=_.useState(!1),[p,b]=_.useState(null),[v,j]=_.useState(""),[P,w]=_.useState([]),[C,f]=_.useState(!1),{data:k,isLoading:y,error:F}=ne({queryKey:["admin-reviews",l,d.current_page,n],queryFn:async()=>{if(!a)throw new Error("No auth token");if(n==="flagged"){const I=await Pk(a);return{reviews:I,total:I.length}}return Ck(a,l,d)},staleTime:6e4,enabled:!!a}),{data:M}=ne({queryKey:["moderation-stats"],queryFn:async()=>{if(!a)throw new Error("No auth token");return $k(a)},staleTime:3e4,enabled:!!a,select:I=>({total_flagged:(I==null?void 0:I.total_flagged)||0,pending_moderation:(I==null?void 0:I.pending_moderation)||0,moderated_today:(I==null?void 0:I.moderated_today)||0})}),E=oe({mutationFn:async I=>{if(!a)throw new Error("No auth token");return Ak(a,I.reviewId,I.action,I.reason)},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-reviews"]}),t.invalidateQueries({queryKey:["moderation-stats"]}),x(!1),m(null),j(""),b(null)}});_.useEffect(()=>{k&&c(I=>({...I,total_count:k.total,total_pages:Math.ceil(k.total/I.limit)}))},[k]),_.useEffect(()=>{const I=new URLSearchParams;l.flagged_only&&I.set("flagged_only","true"),l.status&&I.set("review_type",l.status),r(I,{replace:!0})},[l,r]);const B=I=>{i(I),o(K=>({...K,flagged_only:I==="flagged"})),c(K=>({...K,current_page:1})),w([])},A=(I,K)=>{o(U=>({...U,[I]:K})),c(U=>({...U,current_page:1}))},L=I=>{c(K=>({...K,current_page:I})),window.scrollTo({top:0,behavior:"smooth"})},N=(I,K)=>{m(I),b(K),x(!0)},R=()=>{x(!1),m(null),b(null),j("")},O=async()=>{!u||!p||await E.mutateAsync({reviewId:u.review_id,action:p,reason:v})},T=I=>{w(K=>K.includes(I)?K.filter(U=>U!==I):[...K,I])},g=()=>{if(!(k!=null&&k.reviews))return;const I=k.reviews.map(K=>K.review_id);w(K=>K.length===I.length?[]:I)},D=(k==null?void 0:k.reviews)||[],S=M||{total_flagged:0,pending_moderation:0,moderated_today:0};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Review Moderation"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and moderate customer reviews and ratings"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:S.total_flagged}),e.jsx("div",{className:"text-xs text-gray-600",children:"Flagged"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:S.pending_moderation}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.moderated_today}),e.jsx("div",{className:"text-xs text-gray-600",children:"Today"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"w-5 h-5 mr-2 text-gray-600"}),"Filters"]}),e.jsx("button",{onClick:()=>f(!C),className:"lg:hidden text-gray-600 hover:text-gray-900",children:e.jsx(Ie,{className:`w-5 h-5 transform transition-transform ${C?"rotate-90":""}`})})]}),e.jsxs("div",{className:`space-y-4 ${C?"block":"hidden lg:block"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Status"}),e.jsxs("select",{value:l.status||"",onChange:I=>A("status",I.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"flagged",children:"Flagged"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),e.jsxs("select",{value:(($=l.min_rating)==null?void 0:$.toString())||"",onChange:I=>A("min_rating",I.target.value?Number(I.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"Any Rating"}),e.jsx("option",{value:"1",children:"1+ Stars"}),e.jsx("option",{value:"2",children:"2+ Stars"}),e.jsx("option",{value:"3",children:"3+ Stars"}),e.jsx("option",{value:"4",children:"4+ Stars"}),e.jsx("option",{value:"5",children:"5 Stars Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),e.jsxs("select",{value:l.verification_status===null?"":l.verification_status.toString(),onChange:I=>A("verification_status",I.target.value===""?null:I.target.value==="true"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Reviews"}),e.jsx("option",{value:"true",children:"Verified Only"}),e.jsx("option",{value:"false",children:"Unverified Only"})]})]}),e.jsx("button",{onClick:()=>{o({status:null,flagged_only:n==="flagged",min_rating:null,verification_status:null})},className:"w-full px-4 py-2 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear All Filters"})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white rounded-t-xl shadow-sm border-x border-t border-gray-200",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>B("all"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${n==="all"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:["All Reviews (",d.total_count,")"]}),e.jsxs("button",{onClick:()=>B("flagged"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors relative ${n==="flagged"?"text-amber-600 border-b-2 border-amber-600 bg-amber-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:["Flagged Reviews",S.total_flagged>0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white bg-amber-600 rounded-full",children:S.total_flagged})]})]}),P.length>0&&e.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:P.length})," review",P.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w([]),className:"px-3 py-1.5 text-sm text-blue-700 hover:text-blue-900 font-medium",children:"Clear Selection"}),e.jsx("button",{className:"px-4 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Approve Selected"}),e.jsx("button",{className:"px-4 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Reject Selected"})]})]}),D.length>0&&e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.length===D.length,onChange:g,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Select all on this page"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",D.length," of ",d.total_count," reviews"]})]})]}),e.jsxs("div",{className:"bg-white rounded-b-xl shadow-sm border-x border-b border-gray-200",children:[y&&e.jsx("div",{className:"py-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm font-medium",children:"Loading reviews..."})]})}),F&&e.jsx("div",{className:"py-12 px-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load reviews. Please try again."})]})})}),!y&&!F&&D.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-sm text-gray-600",children:n==="flagged"?"No flagged reviews require moderation":"Try adjusting your filters"})]}),!y&&D.length>0&&e.jsx("div",{className:"divide-y divide-gray-200",children:D.map(I=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",checked:P.includes(I.review_id),onChange:()=>T(I.review_id),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(K=>e.jsx(Oe,{className:`w-4 h-4 ${K<=I.rating_overall?"text-yellow-400 fill-current":"text-gray-300"}`},K)),e.jsxs("span",{className:"ml-2 text-sm font-medium text-gray-900",children:[I.rating_overall,".0"]})]}),I.verified_purchase&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Verified Purchase"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${I.status==="published"?"bg-green-100 text-green-800":I.status==="flagged"?"bg-amber-100 text-amber-800":I.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:I.status})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[I.is_anonymous?e.jsx("span",{className:"font-medium",children:"Anonymous"}):e.jsxs("span",{className:"font-medium",children:["Customer ID: ",I.customer_id.substring(0,8),"..."]}),e.jsx("span",{className:"mx-2",children:""}),e.jsx("time",{dateTime:I.review_date,children:new Date(I.review_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:["Order: ",I.order_id.substring(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(ba,{className:"w-4 h-4"}),e.jsx("span",{children:I.helpful_votes})]})]}),I.review_text&&e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-gray-900 leading-relaxed",children:I.review_text})}),(I.rating_product||I.rating_service||I.rating_delivery)&&e.jsxs("div",{className:"mb-3 flex flex-wrap gap-3 text-sm",children:[I.rating_product&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Product:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(K=>e.jsx(Oe,{className:`w-3 h-3 ${K<=I.rating_product?"text-yellow-400 fill-current":"text-gray-300"}`},K))})]}),I.rating_service&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Service:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(K=>e.jsx(Oe,{className:`w-3 h-3 ${K<=I.rating_service?"text-yellow-400 fill-current":"text-gray-300"}`},K))})]}),I.rating_delivery&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Delivery:"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(K=>e.jsx(Oe,{className:`w-3 h-3 ${K<=I.rating_delivery?"text-yellow-400 fill-current":"text-gray-300"}`},K))})]})]}),I.photos&&I.photos.length>0&&e.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[e.jsx(Zn,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[I.photos.length," photo",I.photos.length!==1?"s":""]})]}),I.supplier_response&&e.jsxs("div",{className:"mt-3 bg-blue-50 border-l-4 border-blue-600 p-3 rounded-r",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Ft,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Supplier Response"}),I.supplier_response_date&&e.jsx("span",{className:"ml-2 text-xs text-blue-700",children:new Date(I.supplier_response_date).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-blue-900",children:I.supplier_response})]}),n==="flagged"&&"flag_reason"in I&&e.jsxs("div",{className:"mt-3 bg-amber-50 border-l-4 border-amber-600 p-3 rounded-r",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Gr,{className:"w-4 h-4 text-amber-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"Flagged Reason"})]}),e.jsx("p",{className:"text-sm text-amber-900",children:I.flag_reason})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>N(I,"approve"),disabled:I.status==="published",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-green-700 bg-green-100 hover:bg-green-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(he,{className:"w-4 h-4 mr-1.5"}),"Approve"]}),e.jsxs("button",{onClick:()=>N(I,"reject"),disabled:I.status==="rejected",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ve,{className:"w-4 h-4 mr-1.5"}),"Reject"]}),e.jsxs("button",{onClick:()=>N(I,"flag"),disabled:I.status==="flagged",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-amber-700 bg-amber-100 hover:bg-amber-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Gr,{className:"w-4 h-4 mr-1.5"}),"Flag"]}),e.jsxs(Q,{to:`/admin/orders?order_id=${I.order_id}`,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",children:[e.jsx(xt,{className:"w-4 h-4 mr-1.5"}),"View Order"]}),I.product_id&&e.jsx(Q,{to:`/product/${I.product_id}`,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"View Product"})]})]})]})},I.review_id))}),!y&&D.length>0&&d.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",d.current_page," of ",d.total_pages]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>L(d.current_page-1),disabled:d.current_page===1,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,d.total_pages)},(I,K)=>{let U;return d.total_pages<=5||d.current_page<=3?U=K+1:d.current_page>=d.total_pages-2?U=d.total_pages-4+K:U=d.current_page-2+K,e.jsx("button",{onClick:()=>L(U),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${U===d.current_page?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:U},U)})}),e.jsxs("button",{onClick:()=>L(d.current_page+1),disabled:d.current_page===d.total_pages,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",e.jsx(Ie,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]})}),h&&u&&p&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:R}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${p==="approve"?"bg-green-100":p==="reject"?"bg-red-100":"bg-amber-100"}`,children:[p==="approve"&&e.jsx(he,{className:"w-6 h-6 text-green-600"}),p==="reject"&&e.jsx(Ve,{className:"w-6 h-6 text-red-600"}),p==="flag"&&e.jsx(Gr,{className:"w-6 h-6 text-amber-600"})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p==="approve"?"Approve Review":p==="reject"?"Reject Review":"Flag Review"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Review ID: ",u.review_id.substring(0,12),"..."]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex items-center mb-2",children:[1,2,3,4,5].map(I=>e.jsx(Oe,{className:`w-4 h-4 ${I<=u.rating_overall?"text-yellow-400 fill-current":"text-gray-300"}`},I))}),u.review_text&&e.jsx("p",{className:"text-sm text-gray-900 line-clamp-3",children:u.review_text})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"moderation-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:p==="approve"?"Approval Notes (Optional)":"Reason for Action (Required)"}),e.jsx("textarea",{id:"moderation-reason",value:v,onChange:I=>j(I.target.value),rows:3,required:p!=="approve",placeholder:p==="approve"?"Add any notes about this approval...":p==="reject"?"Explain why this review is being rejected...":"Describe the policy violation...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:R,disabled:E.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:E.isPending||p!=="approve"&&!v.trim(),className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${p==="approve"?"bg-green-600 hover:bg-green-700":p==="reject"?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700"}`,children:E.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[p==="approve"&&"Approve Review",p==="reject"&&"Reject Review",p==="flag"&&"Flag Review"]})})]})]})]})})]})})},Tk=async(t,s,r,a)=>{const n=new URLSearchParams;s&&n.append("date_from",s),r&&n.append("date_to",r),n.append("period",a);const l=(await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data,o=(l.gmv||0)*.085,d=0,c=(l.total_revenue||0)*.029+.3,u=(l.total_revenue||0)-c;return{total_revenue:l.total_revenue||0,commission_revenue:o,subscription_revenue:d,payment_processing_fees:c,net_revenue:u,revenue_trend:[]}},Ek=async t=>{const r=(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/payouts?status=scheduled,processing,failed&limit=100",{headers:{Authorization:`Bearer ${t}`}})).data,a=r.filter(l=>l.status==="scheduled"),n=r.filter(l=>l.status==="processing"),i=r.filter(l=>l.status==="failed");return{scheduled_payouts:a,pending_payouts:n,failed_payouts:i,payout_summary:{total_scheduled_amount:a.reduce((l,o)=>l+o.amount,0),total_pending_amount:n.reduce((l,o)=>l+o.amount,0)}}},Fk=async t=>{var l;const r=(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/settings?setting_category=commission",{headers:{Authorization:`Bearer ${t}`}})).data||[],a=r.find(o=>o.setting_key==="default_commission_rate"),n=r.find(o=>o.setting_key==="tier_commission_rates"),i=r.find(o=>o.setting_key==="custom_supplier_rates");return{default_commission_rate:((l=a==null?void 0:a.setting_value)==null?void 0:l.rate)||8.5,tier_rates:(n==null?void 0:n.setting_value)||{},custom_supplier_rates:(i==null?void 0:i.setting_value)||[],commission_exemptions:[]}},Mk=async(t,s)=>{await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/payouts/process-batch",{payout_ids:s},{headers:{Authorization:`Bearer ${t}`}})},Rk=async(t,s,r)=>{await G.put("https://123create-construction-app-with-a.launchpulse.ai/api/admin/settings",{setting_key:"default_commission_rate",setting_value:{rate:s},setting_category:"commission"},{headers:{Authorization:`Bearer ${t}`}}),Object.keys(r).length>0&&await G.put("https://123create-construction-app-with-a.launchpulse.ai/api/admin/settings",{setting_key:"tier_commission_rates",setting_value:r,setting_category:"commission"},{headers:{Authorization:`Bearer ${t}`}})};function Dk(){var L,N,R,O,T,g,D,S,$,I,K,U,q,z;const[t,s]=Fe(),r=t.get("period")||"current_month",a=t.get("report_type")||"revenue_overview",n=re(Y=>Y.authentication_state.auth_token),[i,l]=_.useState(a==="commission_summary"?"commission":a==="payout_report"?"payouts":a==="transaction_ledger"?"transactions":"revenue"),[o,d]=_.useState({start_date:null,end_date:null,preset:r}),[c,u]=_.useState([]),[m,h]=_.useState(!1),[x,p]=_.useState(8.5),b=Pe(),v=_.useMemo(()=>{const Y=new Date,se=new Date;switch(o.preset){case"today":se.setHours(0,0,0,0);break;case"week":se.setDate(Y.getDate()-7);break;case"current_month":se.setDate(1);break;case"quarter":{const J=Math.floor(Y.getMonth()/3);se.setMonth(J*3),se.setDate(1);break}case"year":se.setMonth(0),se.setDate(1);break;case"custom":return{start:o.start_date,end:o.end_date};default:se.setDate(1)}return{start:se.toISOString().split("T")[0],end:Y.toISOString().split("T")[0]}},[o.preset,o.start_date,o.end_date]),j=ne({queryKey:["admin-revenue-metrics",v.start,v.end,r],queryFn:()=>Tk(n,v.start,v.end,r),enabled:!!n&&i==="revenue",staleTime:5*60*1e3}),P=ne({queryKey:["admin-payouts"],queryFn:()=>Ek(n),enabled:!!n&&i==="payouts",staleTime:2*60*1e3}),w=ne({queryKey:["admin-commission-settings"],queryFn:()=>Fk(n),enabled:!!n&&i==="commission",staleTime:10*60*1e3}),C=oe({mutationFn:Y=>Mk(n,Y),onSuccess:()=>{b.invalidateQueries({queryKey:["admin-payouts"]}),u([])}}),f=oe({mutationFn:({defaultRate:Y,tierRates:se})=>Rk(n,Y,se),onSuccess:()=>{b.invalidateQueries({queryKey:["admin-commission-settings"]}),h(!1)}}),k=Y=>{d(J=>({...J,preset:Y}));const se=new URLSearchParams(t);se.set("period",Y),s(se)},y=Y=>{l(Y);const se=new URLSearchParams(t);Y==="commission"?se.set("report_type","commission_summary"):Y==="payouts"?se.set("report_type","payout_report"):Y==="transactions"?se.set("report_type","transaction_ledger"):se.set("report_type","revenue_overview"),s(se)},F=Y=>{u(se=>se.includes(Y)?se.filter(J=>J!==Y):[...se,Y])},M=()=>{c.length!==0&&confirm(`Process ${c.length} payout(s)?`)&&C.mutate(c)},E=()=>{f.mutate({defaultRate:x,tierRates:{}})};_.useEffect(()=>{w.data&&p(w.data.default_commission_rate)},[w.data]);const B=Y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Y),A=Y=>new Date(Y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Financials"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Revenue tracking, commission management, and payout processing"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(mt,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:o.preset,onChange:Y=>k(Y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"current_month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]})]}),e.jsx("div",{className:"mt-6 border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[{id:"revenue",label:"Revenue Overview",icon:Re},{id:"commission",label:"Commission Settings",icon:Vt},{id:"payouts",label:"Payouts",icon:Te},{id:"transactions",label:"Transactions",icon:es},{id:"reports",label:"Reports",icon:Me}].map(Y=>{const se=Y.icon;return e.jsxs("button",{onClick:()=>y(Y.id),className:`
                        flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors
                        ${i===Y.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                      `,"aria-current":i===Y.id?"page":void 0,children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:Y.label})]},Y.id)})})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i==="revenue"&&e.jsxs("div",{className:"space-y-6",children:[j.isLoading?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(Y=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},Y))}):j.error?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load revenue metrics"})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:B(((L=j.data)==null?void 0:L.total_revenue)||0)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Te,{className:"h-8 w-8 text-blue-600"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Platform gross revenue"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Commission Revenue"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:B(((N=j.data)==null?void 0:N.commission_revenue)||0)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Re,{className:"h-8 w-8 text-green-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:e.jsx("span",{children:"Platform earnings"})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Processing Fees"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:B(((R=j.data)==null?void 0:R.payment_processing_fees)||0)})]}),e.jsx("div",{className:"p-3 bg-amber-100 rounded-lg",children:e.jsx(es,{className:"h-8 w-8 text-amber-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:e.jsx("span",{children:"Payment gateway fees"})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Net Revenue"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:B(((O=j.data)==null?void 0:O.net_revenue)||0)})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Re,{className:"h-8 w-8 text-purple-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm text-gray-600",children:e.jsx("span",{children:"After processing fees"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gross Marketplace Volume (GMV)"})]}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:B(((T=j.data)==null?void 0:T.total_revenue)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Platform Commission (8.5%)"})]}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["+",B(((g=j.data)==null?void 0:g.commission_revenue)||0)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Payment Processing Fees (~2.9%)"})]}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["-",B(((D=j.data)==null?void 0:D.payment_processing_fees)||0)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 pt-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Net Platform Revenue"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:B(((S=j.data)==null?void 0:S.net_revenue)||0)})]})]})]})]}),i==="commission"&&e.jsx("div",{className:"space-y-6",children:w.isLoading?e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Commission Rate Configuration"}),m?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{var Y;h(!1),p(((Y=w.data)==null?void 0:Y.default_commission_rate)||8.5)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:f.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:f.isPending?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Edit Rates"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Commission Rate"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:x,onChange:Y=>p(parseFloat(Y.target.value)),disabled:!m,className:"w-32 px-4 py-2 border border-gray-300 rounded-lg text-lg font-semibold text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Applied to all supplier transactions unless custom rate set"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Calculation Example"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order Total:"}),e.jsx("span",{className:"font-medium text-gray-900",children:"$1,000.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Commission (",x,"%):"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",(1e3*x/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Supplier Receives:"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["$",(1e3-1e3*x/100).toFixed(2)]})]})]})]}),(($=w.data)==null?void 0:$.custom_supplier_rates)&&w.data.custom_supplier_rates.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Custom Supplier Rates"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Custom Rate"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Effective Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.data.custom_supplier_rates.map(Y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:Y.business_name}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[Y.rate,"%"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:"Immediate"})]},Y.supplier_id))})]})})]})]})]})}),i==="payouts"&&e.jsx("div",{className:"space-y-6",children:P.isLoading?e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(Y=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},Y))})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled Payouts"}),e.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900",children:((I=P.data)==null?void 0:I.scheduled_payouts.length)||0})]}),e.jsx(He,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[B(((K=P.data)==null?void 0:K.payout_summary.total_scheduled_amount)||0)," total"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Processing"}),e.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900",children:((U=P.data)==null?void 0:U.pending_payouts.length)||0})]}),e.jsx(ah,{className:"h-8 w-8 text-amber-600 animate-spin"})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[B(((q=P.data)==null?void 0:q.payout_summary.total_pending_amount)||0)," total"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),e.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900",children:((z=P.data)==null?void 0:z.failed_payouts.length)||0})]}),e.jsx(Ve,{className:"h-8 w-8 text-red-600"})]}),e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Requires attention"})]})]}),P.data&&P.data.scheduled_payouts.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scheduled Payouts"}),c.length>0&&e.jsx("button",{onClick:M,disabled:C.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 transition-colors",children:C.isPending?"Processing...":`Process ${c.length} Payout(s)`})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:c.length===P.data.scheduled_payouts.length,onChange:Y=>{Y.target.checked?u(P.data.scheduled_payouts.map(se=>se.payout_id)):u([])},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scheduled Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.data.scheduled_payouts.map(Y=>{var se;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:c.includes(Y.payout_id),onChange:()=>F(Y.payout_id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y.supplier_name||Y.supplier_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B(Y.amount)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:["-",B(Y.platform_commission)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:B(Y.net_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:A(Y.scheduled_date)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[((se=Y.included_orders)==null?void 0:se.length)||0," orders"]})]},Y.payout_id)})})]})})]}),P.data&&P.data.pending_payouts.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processing Payouts"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Ref"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.data.pending_payouts.map(Y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y.supplier_name||Y.supplier_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B(Y.net_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[e.jsx(ah,{className:"h-3 w-3 mr-1 animate-spin"}),"Processing"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-mono",children:Y.transaction_reference||"Pending..."})]},Y.payout_id))})]})})]}),P.data&&P.data.failed_payouts.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200",children:[e.jsx("div",{className:"p-6 border-b border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Failed Payouts - Requires Attention"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scheduled Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Failure Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.data.failed_payouts.map(Y=>e.jsxs("tr",{className:"bg-red-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y.supplier_name||Y.supplier_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B(Y.net_amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:A(Y.scheduled_date)}),e.jsx("td",{className:"px-6 py-4 text-sm text-red-700",children:Y.failure_reason||"Unknown error"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"Retry"})})]},Y.payout_id))})]})})]})]})}),i==="transactions"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Ledger"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:"Filter"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Transaction History"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Detailed transaction ledger will be available in the next release"}),e.jsxs(Q,{to:"/admin/orders",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"View All Orders"]})]})})]})}),i==="reports"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Reports"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Revenue Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Comprehensive revenue breakdown with commission details"})]}),e.jsx(Me,{className:"h-6 w-6 text-blue-600"})]}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Generate Report"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Payout Report"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Supplier payout history and reconciliation"})]}),e.jsx(Te,{className:"h-6 w-6 text-green-600"})]}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Generate Report"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Tax Summary"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sales tax collected and payment processing fees"})]}),e.jsx(Me,{className:"h-6 w-6 text-purple-600"})]}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Generate Report"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"Audit Trail"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Complete financial transaction audit log"})]}),e.jsx(Me,{className:"h-6 w-6 text-gray-600"})]}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Generate Report"})]})]}),e.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-4",children:"Recent Reports"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No reports generated yet"})]})]})]})]})})]})]})})}const Lk=async(t,s)=>{const r={};return(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/settings",{headers:{Authorization:`Bearer ${t}`},params:r})).data},Ik=async(t,s,r,a)=>(await G.put("https://123create-construction-app-with-a.launchpulse.ai/api/admin/settings",{setting_key:s,setting_value:r,setting_category:a},{headers:{Authorization:`Bearer ${t}`}})).data,Kh=async(t,s,r)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/integrations/test",{integration_type:s,config:r},{headers:{Authorization:`Bearer ${t}`}})).data,qk=()=>{var Y,se;const[t,s]=Fe(),r=ze(),a=Pe(),n=t.get("section")||"general",i=re(J=>J.authentication_state.auth_token),[l,o]=_.useState({platform_name:"BuildEasy",logo_url:"",support_email:"",operating_regions:[],default_currency:"USD",default_language:"en"}),[d,c]=_.useState({default_commission_rate:5,tier_based_rates:{},subscription_pricing:{},transaction_fees:{},payment_processing_rates:{}}),[u,m]=_.useState({registration_approval_required:!1,email_verification_required:!0,password_policy:{min_length:8,require_uppercase:!0,require_lowercase:!0,require_numbers:!0,require_special_chars:!0},session_timeout_minutes:1440,two_factor_required:!1}),[h,x]=_.useState({minimum_order_value:0,maximum_order_value:1e5,order_cancellation_window_hours:24,automatic_refund_enabled:!0,delivery_sla_hours:72}),[p,b]=_.useState({available_payment_methods:[],payment_gateway_config:{},escrow_hold_period_days:3,auto_capture_enabled:!0,refund_policy:{}}),[v,j]=_.useState({email_provider_config:{},sms_provider_config:{},notification_templates:[],default_notification_preferences:{},rate_limits:{}}),[P,w]=_.useState({logistics_integrations:[],payment_gateways:[],mapping_service_config:{},analytics_integrations:[]}),[C,f]=_.useState({has_changes:!1,changed_sections:[]}),[k,y]=_.useState(!1),[F,M]=_.useState(""),[E,B]=_.useState(null),{data:A,isLoading:L,error:N}=ne({queryKey:["platform-settings",n],queryFn:()=>Lk(i),enabled:!!i,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),R=oe({mutationFn:({key:J,value:te,category:V})=>Ik(i,J,te,V),onSuccess:()=>{a.invalidateQueries({queryKey:["platform-settings"]}),f({has_changes:!1,changed_sections:[]}),M("Settings updated successfully"),y(!0),setTimeout(()=>y(!1),3e3)},onError:J=>{console.error("Failed to update settings:",J)}});_.useEffect(()=>{if(!A)return;const J={general_settings:A.filter(te=>te.setting_category==="general").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),commission_fee_settings:A.filter(te=>te.setting_category==="commission").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),user_settings:A.filter(te=>te.setting_category==="user_policy").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),order_settings:A.filter(te=>te.setting_category==="order_policy").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),payment_settings:A.filter(te=>te.setting_category==="payment").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),notification_settings:A.filter(te=>te.setting_category==="notifications").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{}),integration_settings:A.filter(te=>te.setting_category==="integrations").reduce((te,V)=>({...te,[V.setting_key]:V.setting_value}),{})};Object.keys(J.general_settings).length>0&&o(te=>({...te,...J.general_settings})),Object.keys(J.commission_fee_settings).length>0&&c(te=>({...te,...J.commission_fee_settings})),Object.keys(J.user_settings).length>0&&m(te=>({...te,...J.user_settings})),Object.keys(J.order_settings).length>0&&x(te=>({...te,...J.order_settings})),Object.keys(J.payment_settings).length>0&&b(te=>({...te,...J.payment_settings})),Object.keys(J.notification_settings).length>0&&j(te=>({...te,...J.notification_settings})),Object.keys(J.integration_settings).length>0&&w(te=>({...te,...J.integration_settings}))},[A]);const O=J=>{if(C.has_changes){if(!window.confirm("You have unsaved changes. Discard them?"))return;f({has_changes:!1,changed_sections:[]})}s({section:J})},T=J=>{f(te=>({has_changes:!0,changed_sections:te.changed_sections.includes(J)?te.changed_sections:[...te.changed_sections,J]}))},g=async()=>{const J=Object.entries(l).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"general"}));await Promise.all(J)},D=async()=>{const J=Object.entries(d).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"commission"}));await Promise.all(J)},S=async()=>{const J=Object.entries(u).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"user_policy"}));await Promise.all(J)},$=async()=>{const J=Object.entries(h).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"order_policy"}));await Promise.all(J)},I=async()=>{const J=Object.entries(p).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"payment"}));await Promise.all(J)},K=async()=>{const J=Object.entries(v).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"notifications"}));await Promise.all(J)},U=async()=>{const J=Object.entries(P).map(([te,V])=>R.mutateAsync({key:te,value:V,category:"integrations"}));await Promise.all(J)},q=()=>{a.invalidateQueries({queryKey:["platform-settings"]}),f({has_changes:!1,changed_sections:[]})};if(!i)return r("/login"),null;const z=[{id:"general",label:"General",icon:Vt},{id:"commission",label:"Commission & Fees",icon:Te},{id:"user_policy",label:"User Policies",icon:ct},{id:"order_policy",label:"Order Policies",icon:Be},{id:"payment",label:"Payment Settings",icon:es},{id:"notifications",label:"Notifications",icon:Ht},{id:"integrations",label:"Integrations",icon:ya}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Settings"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure system-wide settings and integrations"})]}),C.has_changes&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(de,{className:"h-4 w-4 text-amber-600 mr-2"}),e.jsxs("span",{className:"text-sm text-amber-700 font-medium",children:[C.changed_sections.length," unsaved change",C.changed_sections.length>1?"s":""]})]}),e.jsx("button",{onClick:q,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Discard"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx("nav",{className:"space-y-1",children:z.map(J=>{const te=J.icon,V=n===J.id,W=C.changed_sections.includes(J.id);return e.jsxs("button",{onClick:()=>O(J.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all ${V?"bg-blue-50 text-blue-700 border-2 border-blue-200":"text-gray-700 hover:bg-gray-100 border-2 border-transparent"}`,children:[e.jsx(te,{className:`h-5 w-5 mr-3 ${V?"text-blue-600":"text-gray-400"}`}),e.jsx("span",{className:"flex-1 text-left",children:J.label}),W&&e.jsx("div",{className:"h-2 w-2 bg-amber-500 rounded-full"})]},J.id)})})}),e.jsx("div",{className:"flex-1",children:L?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(ut,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]}):N?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-8",children:[e.jsxs("div",{className:"flex items-center text-red-700 mb-2",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-semibold",children:"Error Loading Settings"})]}),e.jsx("p",{className:"text-sm text-red-600",children:(N==null?void 0:N.message)||"Failed to load platform settings"})]}):e.jsxs(e.Fragment,{children:[n==="general"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"General Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Platform branding and basic configuration"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform Name"}),e.jsx("input",{type:"text",value:l.platform_name,onChange:J=>{o(te=>({...te,platform_name:J.target.value})),T("general")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"BuildEasy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),e.jsx("input",{type:"url",value:l.logo_url,onChange:J=>{o(te=>({...te,logo_url:J.target.value})),T("general")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"https://cdn.example.com/logo.png"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Support Email"}),e.jsx("input",{type:"email",value:l.support_email,onChange:J=>{o(te=>({...te,support_email:J.target.value})),T("general")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"support@buildeasy.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Currency"}),e.jsxs("select",{value:l.default_currency,onChange:J=>{o(te=>({...te,default_currency:J.target.value})),T("general")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Language"}),e.jsxs("select",{value:l.default_language,onChange:J=>{o(te=>({...te,default_language:J.target.value})),T("general")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:g,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})})})]})]}),n==="commission"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Commission & Fees"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure platform revenue and supplier fees"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Commission Rate (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:d.default_commission_rate,onChange:J=>{c(te=>({...te,default_commission_rate:parseFloat(J.target.value)||0})),T("commission")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"5.0"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Platform commission on each transaction"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Tier-Based Rates"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Advanced commission tiers based on supplier performance (configure in future release)"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Subscription Pricing"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Supplier subscription plan pricing (configure in future release)"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:D,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save Commission Settings"]})})})]})]}),n==="user_policy"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Policies"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Registration and account management rules"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Email Verification Required"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Users must verify email before full access"})]}),e.jsx("button",{onClick:()=>{m(J=>({...J,email_verification_required:!J.email_verification_required})),T("user_policy")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u.email_verification_required?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.email_verification_required?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Registration Approval Required"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Admin must approve new accounts"})]}),e.jsx("button",{onClick:()=>{m(J=>({...J,registration_approval_required:!J.registration_approval_required})),T("user_policy")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u.registration_approval_required?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.registration_approval_required?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication Required"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Require 2FA for all user accounts"})]}),e.jsx("button",{onClick:()=>{m(J=>({...J,two_factor_required:!J.two_factor_required})),T("user_policy")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u.two_factor_required?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.two_factor_required?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",min:"5",max:"10080",value:u.session_timeout_minutes,onChange:J=>{m(te=>({...te,session_timeout_minutes:parseInt(J.target.value)||1440})),T("user_policy")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"1440"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"1440 minutes = 24 hours"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Password Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Minimum length: ",u.password_policy.min_length," characters"]}),e.jsx("input",{type:"number",min:"6",max:"128",value:u.password_policy.min_length,onChange:J=>{m(te=>({...te,password_policy:{...te.password_policy,min_length:parseInt(J.target.value)||8}})),T("user_policy")},className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"})]}),["require_uppercase","require_lowercase","require_numbers","require_special_chars"].map(J=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:J.replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase())}),e.jsx("input",{type:"checkbox",checked:u.password_policy[J],onChange:te=>{m(V=>({...V,password_policy:{...V.password_policy,[J]:te.target.checked}})),T("user_policy")},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})]},J))]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:S,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save User Policy Settings"]})})})]})]}),n==="order_policy"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Policies"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Order processing and fulfillment rules"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Order Value ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:h.minimum_order_value,onChange:J=>{x(te=>({...te,minimum_order_value:parseFloat(J.target.value)||0})),T("order_policy")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Order Value ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:h.maximum_order_value,onChange:J=>{x(te=>({...te,maximum_order_value:parseFloat(J.target.value)||1e5})),T("order_policy")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"100000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Cancellation Window (hours)"}),e.jsx("input",{type:"number",min:"0",max:"168",value:h.order_cancellation_window_hours,onChange:J=>{x(te=>({...te,order_cancellation_window_hours:parseInt(J.target.value)||24})),T("order_policy")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"24"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Time window for customers to cancel orders"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery SLA (hours)"}),e.jsx("input",{type:"number",min:"1",max:"720",value:h.delivery_sla_hours,onChange:J=>{x(te=>({...te,delivery_sla_hours:parseInt(J.target.value)||72})),T("order_policy")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"72"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Expected delivery timeframe"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Automatic Refund Processing"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Process refunds automatically for eligible cancellations"})]}),e.jsx("button",{onClick:()=>{x(J=>({...J,automatic_refund_enabled:!J.automatic_refund_enabled})),T("order_policy")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h.automatic_refund_enabled?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h.automatic_refund_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:$,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save Order Policy Settings"]})})})]})]}),n==="payment"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Payment gateway and processing configuration"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Payment Methods"}),e.jsx("div",{className:"space-y-2",children:["credit_card","debit_card","trade_credit","paypal","apple_pay","google_pay"].map(J=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:J,checked:p.available_payment_methods.includes(J),onChange:te=>{b(V=>({...V,available_payment_methods:te.target.checked?[...V.available_payment_methods,J]:V.available_payment_methods.filter(W=>W!==J)})),T("payment")},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:J,className:"ml-3 text-sm text-gray-700",children:J.replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase())})]},J))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escrow Hold Period (days)"}),e.jsx("input",{type:"number",min:"0",max:"30",value:p.escrow_hold_period_days,onChange:J=>{b(te=>({...te,escrow_hold_period_days:parseInt(J.target.value)||3})),T("payment")},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"3"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Hold payment before releasing to supplier"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Auto-Capture Payments"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Automatically capture payment on order placement"})]}),e.jsx("button",{onClick:()=>{b(J=>({...J,auto_capture_enabled:!J.auto_capture_enabled})),T("payment")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p.auto_capture_enabled?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.auto_capture_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:I,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save Payment Settings"]})})})]})]}),n==="notifications"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Email, SMS, and push notification configuration"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Email Provider Configuration"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Configure SendGrid, Mailgun, or custom SMTP settings (advanced configuration)"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"SMS Provider Configuration"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Configure Twilio or custom SMS gateway (advanced configuration)"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Rate Limits"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Prevent notification spam by setting rate limits"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Email (per hour)"}),e.jsx("input",{type:"number",min:"1",value:((Y=v.rate_limits)==null?void 0:Y.email_per_hour)||10,onChange:J=>{j(te=>({...te,rate_limits:{...te.rate_limits,email_per_hour:parseInt(J.target.value)||10}})),T("notifications")},className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"SMS (per hour)"}),e.jsx("input",{type:"number",min:"1",value:((se=v.rate_limits)==null?void 0:se.sms_per_hour)||5,onChange:J=>{j(te=>({...te,rate_limits:{...te.rate_limits,sms_per_hour:parseInt(J.target.value)||5}})),T("notifications")},className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:K,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]})})})]})]}),n==="integrations"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Third-Party Integrations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure external service integrations"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stripe Payment Gateway"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Payment processing integration"})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Active"})]}),e.jsx("button",{onClick:async()=>{B("stripe");try{await Kh(i,"stripe",{}),M("Stripe integration test successful"),y(!0),setTimeout(()=>y(!1),3e3)}catch(J){console.error("Integration test failed:",J)}finally{B(null)}},disabled:E==="stripe",className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-all flex items-center",children:E==="stripe"?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Test Connection"]})})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Google Maps API"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Location and geocoding services"})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Active"})]}),e.jsx("button",{onClick:async()=>{B("google_maps");try{await Kh(i,"google_maps",{}),M("Google Maps integration test successful"),y(!0),setTimeout(()=>y(!1),3e3)}catch(J){console.error("Integration test failed:",J)}finally{B(null)}},disabled:E==="google_maps",className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-all flex items-center",children:E==="google_maps"?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Test Connection"]})})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SendGrid Email Service"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Transactional email delivery"})]}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Inactive"})]}),e.jsxs("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 text-sm font-medium rounded-lg cursor-not-allowed flex items-center",children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Configure to Test"]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:U,disabled:R.isPending,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center",children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Save Integration Settings"]})})})]})]})]})})]})}),k&&e.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-slide-up",children:e.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 rounded-lg shadow-xl flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:F})]})})]})})};function Jb(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=Jb(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function Ee(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=Jb(t))&&(a&&(a+=" "),a+=s);return a}var Bk=Array.isArray,rs=Bk,Uk=typeof Qi=="object"&&Qi&&Qi.Object===Object&&Qi,Zb=Uk,zk=Zb,Wk=typeof self=="object"&&self&&self.Object===Object&&self,Vk=zk||Wk||Function("return this")(),Hs=Vk,Kk=Hs,Hk=Kk.Symbol,zi=Hk,Hh=zi,ey=Object.prototype,Yk=ey.hasOwnProperty,Gk=ey.toString,$n=Hh?Hh.toStringTag:void 0;function Qk(t){var s=Yk.call(t,$n),r=t[$n];try{t[$n]=void 0;var a=!0}catch{}var n=Gk.call(t);return a&&(s?t[$n]=r:delete t[$n]),n}var Xk=Qk,Jk=Object.prototype,Zk=Jk.toString;function eS(t){return Zk.call(t)}var tS=eS,Yh=zi,sS=Xk,rS=tS,aS="[object Null]",nS="[object Undefined]",Gh=Yh?Yh.toStringTag:void 0;function iS(t){return t==null?t===void 0?nS:aS:Gh&&Gh in Object(t)?sS(t):rS(t)}var mr=iS;function lS(t){return t!=null&&typeof t=="object"}var xr=lS,oS=mr,cS=xr,dS="[object Symbol]";function uS(t){return typeof t=="symbol"||cS(t)&&oS(t)==dS}var mn=uS,mS=rs,xS=mn,hS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pS=/^\w*$/;function gS(t,s){if(mS(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||xS(t)?!0:pS.test(t)||!hS.test(t)||s!=null&&t in Object(s)}var Um=gS;function fS(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var Pr=fS;const xn=Je(Pr);var bS=mr,yS=Pr,vS="[object AsyncFunction]",jS="[object Function]",NS="[object GeneratorFunction]",wS="[object Proxy]";function _S(t){if(!yS(t))return!1;var s=bS(t);return s==jS||s==NS||s==vS||s==wS}var zm=_S;const Ce=Je(zm);var kS=Hs,SS=kS["__core-js_shared__"],CS=SS,ad=CS,Qh=function(){var t=/[^.]+$/.exec(ad&&ad.keys&&ad.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function PS(t){return!!Qh&&Qh in t}var AS=PS,$S=Function.prototype,OS=$S.toString;function TS(t){if(t!=null){try{return OS.call(t)}catch{}try{return t+""}catch{}}return""}var ty=TS,ES=zm,FS=AS,MS=Pr,RS=ty,DS=/[\\^$.*+?()[\]{}|]/g,LS=/^\[object .+?Constructor\]$/,IS=Function.prototype,qS=Object.prototype,BS=IS.toString,US=qS.hasOwnProperty,zS=RegExp("^"+BS.call(US).replace(DS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WS(t){if(!MS(t)||FS(t))return!1;var s=ES(t)?zS:LS;return s.test(RS(t))}var VS=WS;function KS(t,s){return t==null?void 0:t[s]}var HS=KS,YS=VS,GS=HS;function QS(t,s){var r=GS(t,s);return YS(r)?r:void 0}var ia=QS,XS=ia,JS=XS(Object,"create"),Ho=JS,Xh=Ho;function ZS(){this.__data__=Xh?Xh(null):{},this.size=0}var eC=ZS;function tC(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var sC=tC,rC=Ho,aC="__lodash_hash_undefined__",nC=Object.prototype,iC=nC.hasOwnProperty;function lC(t){var s=this.__data__;if(rC){var r=s[t];return r===aC?void 0:r}return iC.call(s,t)?s[t]:void 0}var oC=lC,cC=Ho,dC=Object.prototype,uC=dC.hasOwnProperty;function mC(t){var s=this.__data__;return cC?s[t]!==void 0:uC.call(s,t)}var xC=mC,hC=Ho,pC="__lodash_hash_undefined__";function gC(t,s){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hC&&s===void 0?pC:s,this}var fC=gC,bC=eC,yC=sC,vC=oC,jC=xC,NC=fC;function hn(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var a=t[s];this.set(a[0],a[1])}}hn.prototype.clear=bC;hn.prototype.delete=yC;hn.prototype.get=vC;hn.prototype.has=jC;hn.prototype.set=NC;var wC=hn;function _C(){this.__data__=[],this.size=0}var kC=_C;function SC(t,s){return t===s||t!==t&&s!==s}var Wm=SC,CC=Wm;function PC(t,s){for(var r=t.length;r--;)if(CC(t[r][0],s))return r;return-1}var Yo=PC,AC=Yo,$C=Array.prototype,OC=$C.splice;function TC(t){var s=this.__data__,r=AC(s,t);if(r<0)return!1;var a=s.length-1;return r==a?s.pop():OC.call(s,r,1),--this.size,!0}var EC=TC,FC=Yo;function MC(t){var s=this.__data__,r=FC(s,t);return r<0?void 0:s[r][1]}var RC=MC,DC=Yo;function LC(t){return DC(this.__data__,t)>-1}var IC=LC,qC=Yo;function BC(t,s){var r=this.__data__,a=qC(r,t);return a<0?(++this.size,r.push([t,s])):r[a][1]=s,this}var UC=BC,zC=kC,WC=EC,VC=RC,KC=IC,HC=UC;function pn(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var a=t[s];this.set(a[0],a[1])}}pn.prototype.clear=zC;pn.prototype.delete=WC;pn.prototype.get=VC;pn.prototype.has=KC;pn.prototype.set=HC;var Go=pn,YC=ia,GC=Hs,QC=YC(GC,"Map"),Vm=QC,Jh=wC,XC=Go,JC=Vm;function ZC(){this.size=0,this.__data__={hash:new Jh,map:new(JC||XC),string:new Jh}}var eP=ZC;function tP(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var sP=tP,rP=sP;function aP(t,s){var r=t.__data__;return rP(s)?r[typeof s=="string"?"string":"hash"]:r.map}var Qo=aP,nP=Qo;function iP(t){var s=nP(this,t).delete(t);return this.size-=s?1:0,s}var lP=iP,oP=Qo;function cP(t){return oP(this,t).get(t)}var dP=cP,uP=Qo;function mP(t){return uP(this,t).has(t)}var xP=mP,hP=Qo;function pP(t,s){var r=hP(this,t),a=r.size;return r.set(t,s),this.size+=r.size==a?0:1,this}var gP=pP,fP=eP,bP=lP,yP=dP,vP=xP,jP=gP;function gn(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var a=t[s];this.set(a[0],a[1])}}gn.prototype.clear=fP;gn.prototype.delete=bP;gn.prototype.get=yP;gn.prototype.has=vP;gn.prototype.set=jP;var Km=gn,sy=Km,NP="Expected a function";function Hm(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(NP);var r=function(){var a=arguments,n=s?s.apply(this,a):a[0],i=r.cache;if(i.has(n))return i.get(n);var l=t.apply(this,a);return r.cache=i.set(n,l)||i,l};return r.cache=new(Hm.Cache||sy),r}Hm.Cache=sy;var ry=Hm;const wP=Je(ry);var _P=ry,kP=500;function SP(t){var s=_P(t,function(a){return r.size===kP&&r.clear(),a}),r=s.cache;return s}var CP=SP,PP=CP,AP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$P=/\\(\\)?/g,OP=PP(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(AP,function(r,a,n,i){s.push(n?i.replace($P,"$1"):a||r)}),s}),TP=OP;function EP(t,s){for(var r=-1,a=t==null?0:t.length,n=Array(a);++r<a;)n[r]=s(t[r],r,t);return n}var Ym=EP,Zh=zi,FP=Ym,MP=rs,RP=mn,ep=Zh?Zh.prototype:void 0,tp=ep?ep.toString:void 0;function ay(t){if(typeof t=="string")return t;if(MP(t))return FP(t,ay)+"";if(RP(t))return tp?tp.call(t):"";var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var DP=ay,LP=DP;function IP(t){return t==null?"":LP(t)}var ny=IP,qP=rs,BP=Um,UP=TP,zP=ny;function WP(t,s){return qP(t)?t:BP(t,s)?[t]:UP(zP(t))}var iy=WP,VP=mn;function KP(t){if(typeof t=="string"||VP(t))return t;var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var Xo=KP,HP=iy,YP=Xo;function GP(t,s){s=HP(s,t);for(var r=0,a=s.length;t!=null&&r<a;)t=t[YP(s[r++])];return r&&r==a?t:void 0}var Gm=GP,QP=Gm;function XP(t,s,r){var a=t==null?void 0:QP(t,s);return a===void 0?r:a}var ly=XP;const cs=Je(ly);function JP(t){return t==null}var ZP=JP;const Ae=Je(ZP);var eA=mr,tA=rs,sA=xr,rA="[object String]";function aA(t){return typeof t=="string"||!tA(t)&&sA(t)&&eA(t)==rA}var nA=aA;const ea=Je(nA);var oy={exports:{}},Ge={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm=Symbol.for("react.element"),Xm=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),Zo=Symbol.for("react.strict_mode"),ec=Symbol.for("react.profiler"),tc=Symbol.for("react.provider"),sc=Symbol.for("react.context"),iA=Symbol.for("react.server_context"),rc=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),nc=Symbol.for("react.suspense_list"),ic=Symbol.for("react.memo"),lc=Symbol.for("react.lazy"),lA=Symbol.for("react.offscreen"),cy;cy=Symbol.for("react.module.reference");function Ns(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case Qm:switch(t=t.type,t){case Jo:case ec:case Zo:case ac:case nc:return t;default:switch(t=t&&t.$$typeof,t){case iA:case sc:case rc:case lc:case ic:case tc:return t;default:return s}}case Xm:return s}}}Ge.ContextConsumer=sc;Ge.ContextProvider=tc;Ge.Element=Qm;Ge.ForwardRef=rc;Ge.Fragment=Jo;Ge.Lazy=lc;Ge.Memo=ic;Ge.Portal=Xm;Ge.Profiler=ec;Ge.StrictMode=Zo;Ge.Suspense=ac;Ge.SuspenseList=nc;Ge.isAsyncMode=function(){return!1};Ge.isConcurrentMode=function(){return!1};Ge.isContextConsumer=function(t){return Ns(t)===sc};Ge.isContextProvider=function(t){return Ns(t)===tc};Ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qm};Ge.isForwardRef=function(t){return Ns(t)===rc};Ge.isFragment=function(t){return Ns(t)===Jo};Ge.isLazy=function(t){return Ns(t)===lc};Ge.isMemo=function(t){return Ns(t)===ic};Ge.isPortal=function(t){return Ns(t)===Xm};Ge.isProfiler=function(t){return Ns(t)===ec};Ge.isStrictMode=function(t){return Ns(t)===Zo};Ge.isSuspense=function(t){return Ns(t)===ac};Ge.isSuspenseList=function(t){return Ns(t)===nc};Ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jo||t===ec||t===Zo||t===ac||t===nc||t===lA||typeof t=="object"&&t!==null&&(t.$$typeof===lc||t.$$typeof===ic||t.$$typeof===tc||t.$$typeof===sc||t.$$typeof===rc||t.$$typeof===cy||t.getModuleId!==void 0)};Ge.typeOf=Ns;oy.exports=Ge;var oA=oy.exports,cA=mr,dA=xr,uA="[object Number]";function mA(t){return typeof t=="number"||dA(t)&&cA(t)==uA}var dy=mA;const xA=Je(dy);var hA=dy;function pA(t){return hA(t)&&t!=+t}var gA=pA;const fn=Je(gA);var Yt=function(s){return s===0?0:s>0?1:-1},Wr=function(s){return ea(s)&&s.indexOf("%")===s.length-1},xe=function(s){return xA(s)&&!fn(s)},fA=function(s){return Ae(s)},wt=function(s){return xe(s)||ea(s)},bA=0,bn=function(s){var r=++bA;return"".concat(s||"").concat(r)},Gt=function(s,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(s)&&!ea(s))return a;var i;if(Wr(s)){var l=s.indexOf("%");i=r*parseFloat(s.slice(0,l))/100}else i=+s;return fn(i)&&(i=a),n&&i>r&&(i=r),i},yr=function(s){if(!s)return null;var r=Object.keys(s);return r&&r.length?s[r[0]]:null},yA=function(s){if(!Array.isArray(s))return!1;for(var r=s.length,a={},n=0;n<r;n++)if(!a[s[n]])a[s[n]]=!0;else return!0;return!1},Jt=function(s,r){return xe(s)&&xe(r)?function(a){return s+a*(r-s)}:function(){return r}};function Tl(t,s,r){return!t||!t.length?null:t.find(function(a){return a&&(typeof s=="function"?s(a):cs(a,s))===r})}var vA=function(s,r){return xe(s)&&xe(r)?s-r:ea(s)&&ea(r)?s.localeCompare(r):s instanceof Date&&r instanceof Date?s.getTime()-r.getTime():String(s).localeCompare(String(r))};function ka(t,s){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(s,r)||t[r]!==s[r]))return!1;for(var a in s)if({}.hasOwnProperty.call(s,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qd(t)}var jA=["viewBox","children"],NA=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sp=["points","pathLength"],nd={svg:jA,polygon:sp,polyline:sp},Jm=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],El=function(s,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var a=s;if(_.isValidElement(s)&&(a=s.props),!xn(a))return null;var n={};return Object.keys(a).forEach(function(i){Jm.includes(i)&&(n[i]=r||function(l){return a[i](a,l)})}),n},wA=function(s,r,a){return function(n){return s(r,a,n),null}},ta=function(s,r,a){if(!xn(s)||Qd(s)!=="object")return null;var n=null;return Object.keys(s).forEach(function(i){var l=s[i];Jm.includes(i)&&typeof l=="function"&&(n||(n={}),n[i]=wA(l,r,a))}),n},_A=["children"],kA=["children"];function rp(t,s){if(t==null)return{};var r=SA(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function SA(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xd(t)}var ap={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},rr=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},np=null,id=null,Zm=function t(s){if(s===np&&Array.isArray(id))return id;var r=[];return _.Children.forEach(s,function(a){Ae(a)||(oA.isFragment(a)?r=r.concat(t(a.props.children)):r.push(a))}),id=r,np=s,r};function fs(t,s){var r=[],a=[];return Array.isArray(s)?a=s.map(function(n){return rr(n)}):a=[rr(s)],Zm(t).forEach(function(n){var i=cs(n,"type.displayName")||cs(n,"type.name");a.indexOf(i)!==-1&&r.push(n)}),r}function ns(t,s){var r=fs(t,s);return r&&r[0]}var ip=function(s){if(!s||!s.props)return!1;var r=s.props,a=r.width,n=r.height;return!(!xe(a)||a<=0||!xe(n)||n<=0)},CA=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],PA=function(s){return s&&s.type&&ea(s.type)&&CA.indexOf(s.type)>=0},AA=function(s){return s&&Xd(s)==="object"&&"clipDot"in s},$A=function(s,r,a,n){var i,l=(i=nd==null?void 0:nd[n])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ce(s)&&(n&&l.includes(r)||NA.includes(r))||a&&Jm.includes(r)},_e=function(s,r,a){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(_.isValidElement(s)&&(n=s.props),!xn(n))return null;var i={};return Object.keys(n).forEach(function(l){var o;$A((o=n)===null||o===void 0?void 0:o[l],l,r,a)&&(i[l]=n[l])}),i},Jd=function t(s,r){if(s===r)return!0;var a=_.Children.count(s);if(a!==_.Children.count(r))return!1;if(a===0)return!0;if(a===1)return lp(Array.isArray(s)?s[0]:s,Array.isArray(r)?r[0]:r);for(var n=0;n<a;n++){var i=s[n],l=r[n];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!lp(i,l))return!1}return!0},lp=function(s,r){if(Ae(s)&&Ae(r))return!0;if(!Ae(s)&&!Ae(r)){var a=s.props||{},n=a.children,i=rp(a,_A),l=r.props||{},o=l.children,d=rp(l,kA);return n&&o?ka(i,d)&&Jd(n,o):!n&&!o?ka(i,d):!1}return!1},op=function(s,r){var a=[],n={};return Zm(s).forEach(function(i,l){if(PA(i))a.push(i);else if(i){var o=rr(i.type),d=r[o]||{},c=d.handler,u=d.once;if(c&&(!u||!n[o])){var m=c(i,o,l);a.push(m),n[o]=!0}}}),a},OA=function(s){var r=s&&s.type;return r&&ap[r]?ap[r]:null},TA=function(s,r){return Zm(r).indexOf(s)},EA=["children","width","height","viewBox","className","style","title","desc"];function Zd(){return Zd=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Zd.apply(this,arguments)}function FA(t,s){if(t==null)return{};var r=MA(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function MA(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function eu(t){var s=t.children,r=t.width,a=t.height,n=t.viewBox,i=t.className,l=t.style,o=t.title,d=t.desc,c=FA(t,EA),u=n||{width:r,height:a,x:0,y:0},m=Ee("recharts-surface",i);return Z.createElement("svg",Zd({},_e(c,!0,"svg"),{className:m,width:r,height:a,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Z.createElement("title",null,o),Z.createElement("desc",null,d),s)}var RA=["children","className"];function tu(){return tu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},tu.apply(this,arguments)}function DA(t,s){if(t==null)return{};var r=LA(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function LA(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}var qe=Z.forwardRef(function(t,s){var r=t.children,a=t.className,n=DA(t,RA),i=Ee("recharts-layer",a);return Z.createElement("g",tu({className:i},_e(n,!0),{ref:s}),r)}),Os=function(s,r){for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i]};function IA(t,s,r){var a=-1,n=t.length;s<0&&(s=-s>n?0:n+s),r=r>n?n:r,r<0&&(r+=n),n=s>r?0:r-s>>>0,s>>>=0;for(var i=Array(n);++a<n;)i[a]=t[a+s];return i}var qA=IA,BA=qA;function UA(t,s,r){var a=t.length;return r=r===void 0?a:r,!s&&r>=a?t:BA(t,s,r)}var zA=UA,WA="\\ud800-\\udfff",VA="\\u0300-\\u036f",KA="\\ufe20-\\ufe2f",HA="\\u20d0-\\u20ff",YA=VA+KA+HA,GA="\\ufe0e\\ufe0f",QA="\\u200d",XA=RegExp("["+QA+WA+YA+GA+"]");function JA(t){return XA.test(t)}var uy=JA;function ZA(t){return t.split("")}var e$=ZA,my="\\ud800-\\udfff",t$="\\u0300-\\u036f",s$="\\ufe20-\\ufe2f",r$="\\u20d0-\\u20ff",a$=t$+s$+r$,n$="\\ufe0e\\ufe0f",i$="["+my+"]",su="["+a$+"]",ru="\\ud83c[\\udffb-\\udfff]",l$="(?:"+su+"|"+ru+")",xy="[^"+my+"]",hy="(?:\\ud83c[\\udde6-\\uddff]){2}",py="[\\ud800-\\udbff][\\udc00-\\udfff]",o$="\\u200d",gy=l$+"?",fy="["+n$+"]?",c$="(?:"+o$+"(?:"+[xy,hy,py].join("|")+")"+fy+gy+")*",d$=fy+gy+c$,u$="(?:"+[xy+su+"?",su,hy,py,i$].join("|")+")",m$=RegExp(ru+"(?="+ru+")|"+u$+d$,"g");function x$(t){return t.match(m$)||[]}var h$=x$,p$=e$,g$=uy,f$=h$;function b$(t){return g$(t)?f$(t):p$(t)}var y$=b$,v$=zA,j$=uy,N$=y$,w$=ny;function _$(t){return function(s){s=w$(s);var r=j$(s)?N$(s):void 0,a=r?r[0]:s.charAt(0),n=r?v$(r,1).join(""):s.slice(1);return a[t]()+n}}var k$=_$,S$=k$,C$=S$("toUpperCase"),P$=C$;const oc=Je(P$);function tt(t){return function(){return t}}const by=Math.cos,Fl=Math.sin,Es=Math.sqrt,Ml=Math.PI,cc=2*Ml,au=Math.PI,nu=2*au,Lr=1e-6,A$=nu-Lr;function yy(t){this._+=t[0];for(let s=1,r=t.length;s<r;++s)this._+=arguments[s]+t[s]}function $$(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return yy;const r=10**s;return function(a){this._+=a[0];for(let n=1,i=a.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+a[n]}}class O${constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?yy:$$(s)}moveTo(s,r){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,r){this._append`L${this._x1=+s},${this._y1=+r}`}quadraticCurveTo(s,r,a,n){this._append`Q${+s},${+r},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(s,r,a,n,i,l){this._append`C${+s},${+r},${+a},${+n},${this._x1=+i},${this._y1=+l}`}arcTo(s,r,a,n,i){if(s=+s,r=+r,a=+a,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,d=a-s,c=n-r,u=l-s,m=o-r,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=s},${this._y1=r}`;else if(h>Lr)if(!(Math.abs(m*d-c*u)>Lr)||!i)this._append`L${this._x1=s},${this._y1=r}`;else{let x=a-l,p=n-o,b=d*d+c*c,v=x*x+p*p,j=Math.sqrt(b),P=Math.sqrt(h),w=i*Math.tan((au-Math.acos((b+h-v)/(2*j*P)))/2),C=w/P,f=w/j;Math.abs(C-1)>Lr&&this._append`L${s+C*u},${r+C*m}`,this._append`A${i},${i},0,0,${+(m*x>u*p)},${this._x1=s+f*d},${this._y1=r+f*c}`}}arc(s,r,a,n,i,l){if(s=+s,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let o=a*Math.cos(n),d=a*Math.sin(n),c=s+o,u=r+d,m=1^l,h=l?n-i:i-n;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Lr||Math.abs(this._y1-u)>Lr)&&this._append`L${c},${u}`,a&&(h<0&&(h=h%nu+nu),h>A$?this._append`A${a},${a},0,1,${m},${s-o},${r-d}A${a},${a},0,1,${m},${this._x1=c},${this._y1=u}`:h>Lr&&this._append`A${a},${a},0,${+(h>=au)},${m},${this._x1=s+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(s,r,a,n){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function ex(t){let s=3;return t.digits=function(r){if(!arguments.length)return s;if(r==null)s=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);s=a}return t},()=>new O$(s)}function tx(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vy(t){this._context=t}vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function dc(t){return new vy(t)}function jy(t){return t[0]}function Ny(t){return t[1]}function wy(t,s){var r=tt(!0),a=null,n=dc,i=null,l=ex(o);t=typeof t=="function"?t:t===void 0?jy:tt(t),s=typeof s=="function"?s:s===void 0?Ny:tt(s);function o(d){var c,u=(d=tx(d)).length,m,h=!1,x;for(a==null&&(i=n(x=l())),c=0;c<=u;++c)!(c<u&&r(m=d[c],c,d))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,c,d),+s(m,c,d));if(x)return i=null,x+""||null}return o.x=function(d){return arguments.length?(t=typeof d=="function"?d:tt(+d),o):t},o.y=function(d){return arguments.length?(s=typeof d=="function"?d:tt(+d),o):s},o.defined=function(d){return arguments.length?(r=typeof d=="function"?d:tt(!!d),o):r},o.curve=function(d){return arguments.length?(n=d,a!=null&&(i=n(a)),o):n},o.context=function(d){return arguments.length?(d==null?a=i=null:i=n(a=d),o):a},o}function nl(t,s,r){var a=null,n=tt(!0),i=null,l=dc,o=null,d=ex(c);t=typeof t=="function"?t:t===void 0?jy:tt(+t),s=typeof s=="function"?s:tt(s===void 0?0:+s),r=typeof r=="function"?r:r===void 0?Ny:tt(+r);function c(m){var h,x,p,b=(m=tx(m)).length,v,j=!1,P,w=new Array(b),C=new Array(b);for(i==null&&(o=l(P=d())),h=0;h<=b;++h){if(!(h<b&&n(v=m[h],h,m))===j)if(j=!j)x=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=x;--p)o.point(w[p],C[p]);o.lineEnd(),o.areaEnd()}j&&(w[h]=+t(v,h,m),C[h]=+s(v,h,m),o.point(a?+a(v,h,m):w[h],r?+r(v,h,m):C[h]))}if(P)return o=null,P+""||null}function u(){return wy().defined(n).curve(l).context(i)}return c.x=function(m){return arguments.length?(t=typeof m=="function"?m:tt(+m),a=null,c):t},c.x0=function(m){return arguments.length?(t=typeof m=="function"?m:tt(+m),c):t},c.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:tt(+m),c):a},c.y=function(m){return arguments.length?(s=typeof m=="function"?m:tt(+m),r=null,c):s},c.y0=function(m){return arguments.length?(s=typeof m=="function"?m:tt(+m),c):s},c.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:tt(+m),c):r},c.lineX0=c.lineY0=function(){return u().x(t).y(s)},c.lineY1=function(){return u().x(t).y(r)},c.lineX1=function(){return u().x(a).y(s)},c.defined=function(m){return arguments.length?(n=typeof m=="function"?m:tt(!!m),c):n},c.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),c):l},c.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),c):i},c}class _y{constructor(s,r){this._context=s,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,r){switch(s=+s,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,r):this._context.moveTo(s,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,r,s,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,s,this._y0,s,r);break}}this._x0=s,this._y0=r}}function T$(t){return new _y(t,!0)}function E$(t){return new _y(t,!1)}const sx={draw(t,s){const r=Es(s/Ml);t.moveTo(r,0),t.arc(0,0,r,0,cc)}},F$={draw(t,s){const r=Es(s/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},ky=Es(1/3),M$=ky*2,R$={draw(t,s){const r=Es(s/M$),a=r*ky;t.moveTo(0,-r),t.lineTo(a,0),t.lineTo(0,r),t.lineTo(-a,0),t.closePath()}},D$={draw(t,s){const r=Es(s),a=-r/2;t.rect(a,a,r,r)}},L$=.8908130915292852,Sy=Fl(Ml/10)/Fl(7*Ml/10),I$=Fl(cc/10)*Sy,q$=-by(cc/10)*Sy,B$={draw(t,s){const r=Es(s*L$),a=I$*r,n=q$*r;t.moveTo(0,-r),t.lineTo(a,n);for(let i=1;i<5;++i){const l=cc*i/5,o=by(l),d=Fl(l);t.lineTo(d*r,-o*r),t.lineTo(o*a-d*n,d*a+o*n)}t.closePath()}},ld=Es(3),U$={draw(t,s){const r=-Es(s/(ld*3));t.moveTo(0,r*2),t.lineTo(-ld*r,-r),t.lineTo(ld*r,-r),t.closePath()}},us=-.5,ms=Es(3)/2,iu=1/Es(12),z$=(iu/2+1)*3,W$={draw(t,s){const r=Es(s/z$),a=r/2,n=r*iu,i=a,l=r*iu+r,o=-i,d=l;t.moveTo(a,n),t.lineTo(i,l),t.lineTo(o,d),t.lineTo(us*a-ms*n,ms*a+us*n),t.lineTo(us*i-ms*l,ms*i+us*l),t.lineTo(us*o-ms*d,ms*o+us*d),t.lineTo(us*a+ms*n,us*n-ms*a),t.lineTo(us*i+ms*l,us*l-ms*i),t.lineTo(us*o+ms*d,us*d-ms*o),t.closePath()}};function V$(t,s){let r=null,a=ex(n);t=typeof t=="function"?t:tt(t||sx),s=typeof s=="function"?s:tt(s===void 0?64:+s);function n(){let i;if(r||(r=i=a()),t.apply(this,arguments).draw(r,+s.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(t=typeof i=="function"?i:tt(i),n):t},n.size=function(i){return arguments.length?(s=typeof i=="function"?i:tt(+i),n):s},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function Rl(){}function Dl(t,s,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+r)/6)}function Cy(t){this._context=t}Cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dl(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function K$(t){return new Cy(t)}function Py(t){this._context=t}Py.prototype={areaStart:Rl,areaEnd:Rl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:Dl(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function H$(t){return new Py(t)}function Ay(t){this._context=t}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Dl(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function Y$(t){return new Ay(t)}function $y(t){this._context=t}$y.prototype={areaStart:Rl,areaEnd:Rl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function G$(t){return new $y(t)}function cp(t){return t<0?-1:1}function dp(t,s,r){var a=t._x1-t._x0,n=s-t._x1,i=(t._y1-t._y0)/(a||n<0&&-0),l=(r-t._y1)/(n||a<0&&-0),o=(i*n+l*a)/(a+n);return(cp(i)+cp(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function up(t,s){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-s)/2:s}function od(t,s,r){var a=t._x0,n=t._y0,i=t._x1,l=t._y1,o=(i-a)/3;t._context.bezierCurveTo(a+o,n+o*s,i-o,l-o*r,i,l)}function Ll(t){this._context=t}Ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:od(this,this._t0,up(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var r=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,od(this,up(this,r=dp(this,t,s)),r);break;default:od(this,this._t0,r=dp(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=r}}};function Oy(t){this._context=new Ty(t)}(Oy.prototype=Object.create(Ll.prototype)).point=function(t,s){Ll.prototype.point.call(this,s,t)};function Ty(t){this._context=t}Ty.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,r,a,n,i){this._context.bezierCurveTo(s,t,a,r,i,n)}};function Q$(t){return new Ll(t)}function X$(t){return new Oy(t)}function Ey(t){this._context=t}Ey.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),r===2)this._context.lineTo(t[1],s[1]);else for(var a=mp(t),n=mp(s),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(a[0][i],n[0][i],a[1][i],n[1][i],t[l],s[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function mp(t){var s,r=t.length-1,a,n=new Array(r),i=new Array(r),l=new Array(r);for(n[0]=0,i[0]=2,l[0]=t[0]+2*t[1],s=1;s<r-1;++s)n[s]=1,i[s]=4,l[s]=4*t[s]+2*t[s+1];for(n[r-1]=2,i[r-1]=7,l[r-1]=8*t[r-1]+t[r],s=1;s<r;++s)a=n[s]/i[s-1],i[s]-=a,l[s]-=a*l[s-1];for(n[r-1]=l[r-1]/i[r-1],s=r-2;s>=0;--s)n[s]=(l[s]-n[s+1])/i[s];for(i[r-1]=(t[r]+n[r-1])/2,s=0;s<r-1;++s)i[s]=2*t[s+1]-n[s+1];return[n,i]}function J$(t){return new Ey(t)}function uc(t,s){this._context=t,this._t=s}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,s)}break}}this._x=t,this._y=s}};function Z$(t){return new uc(t,.5)}function eO(t){return new uc(t,0)}function tO(t){return new uc(t,1)}function Ea(t,s){if((l=t.length)>1)for(var r=1,a,n,i=t[s[0]],l,o=i.length;r<l;++r)for(n=i,i=t[s[r]],a=0;a<o;++a)i[a][1]+=i[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function lu(t){for(var s=t.length,r=new Array(s);--s>=0;)r[s]=s;return r}function sO(t,s){return t[s]}function rO(t){const s=[];return s.key=t,s}function aO(){var t=tt([]),s=lu,r=Ea,a=sO;function n(i){var l=Array.from(t.apply(this,arguments),rO),o,d=l.length,c=-1,u;for(const m of i)for(o=0,++c;o<d;++o)(l[o][c]=[0,+a(m,l[o].key,c,i)]).data=m;for(o=0,u=tx(s(l));o<d;++o)l[u[o]].index=o;return r(l,u),l}return n.keys=function(i){return arguments.length?(t=typeof i=="function"?i:tt(Array.from(i)),n):t},n.value=function(i){return arguments.length?(a=typeof i=="function"?i:tt(+i),n):a},n.order=function(i){return arguments.length?(s=i==null?lu:typeof i=="function"?i:tt(Array.from(i)),n):s},n.offset=function(i){return arguments.length?(r=i??Ea,n):r},n}function nO(t,s){if((a=t.length)>0){for(var r,a,n=0,i=t[0].length,l;n<i;++n){for(l=r=0;r<a;++r)l+=t[r][n][1]||0;if(l)for(r=0;r<a;++r)t[r][n][1]/=l}Ea(t,s)}}function iO(t,s){if((n=t.length)>0){for(var r=0,a=t[s[0]],n,i=a.length;r<i;++r){for(var l=0,o=0;l<n;++l)o+=t[l][r][1]||0;a[r][1]+=a[r][0]=-o/2}Ea(t,s)}}function lO(t,s){if(!(!((l=t.length)>0)||!((i=(n=t[s[0]]).length)>0))){for(var r=0,a=1,n,i,l;a<i;++a){for(var o=0,d=0,c=0;o<l;++o){for(var u=t[s[o]],m=u[a][1]||0,h=u[a-1][1]||0,x=(m-h)/2,p=0;p<o;++p){var b=t[s[p]],v=b[a][1]||0,j=b[a-1][1]||0;x+=v-j}d+=m,c+=x*m}n[a-1][1]+=n[a-1][0]=r,d&&(r-=c/d)}n[a-1][1]+=n[a-1][0]=r,Ea(t,s)}}function ei(t){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ei(t)}var oO=["type","size","sizeType"];function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ou.apply(this,arguments)}function xp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function hp(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?xp(Object(r),!0).forEach(function(a){cO(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function cO(t,s,r){return s=dO(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function dO(t){var s=uO(t,"string");return ei(s)=="symbol"?s:s+""}function uO(t,s){if(ei(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ei(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function mO(t,s){if(t==null)return{};var r=xO(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function xO(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}var Fy={symbolCircle:sx,symbolCross:F$,symbolDiamond:R$,symbolSquare:D$,symbolStar:B$,symbolTriangle:U$,symbolWye:W$},hO=Math.PI/180,pO=function(s){var r="symbol".concat(oc(s));return Fy[r]||sx},gO=function(s,r,a){if(r==="area")return s;switch(a){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var n=18*hO;return 1.25*s*s*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},fO=function(s,r){Fy["symbol".concat(oc(s))]=r},rx=function(s){var r=s.type,a=r===void 0?"circle":r,n=s.size,i=n===void 0?64:n,l=s.sizeType,o=l===void 0?"area":l,d=mO(s,oO),c=hp(hp({},d),{},{type:a,size:i,sizeType:o}),u=function(){var v=pO(a),j=V$().type(v).size(gO(i,o,a));return j()},m=c.className,h=c.cx,x=c.cy,p=_e(c,!0);return h===+h&&x===+x&&i===+i?Z.createElement("path",ou({},p,{className:Ee("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};rx.registerSymbol=fO;function Fa(t){"@babel/helpers - typeof";return Fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fa(t)}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},cu.apply(this,arguments)}function pp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function bO(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?pp(Object(r),!0).forEach(function(a){ti(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function yO(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function vO(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ry(a.key),a)}}function jO(t,s,r){return s&&vO(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function NO(t,s,r){return s=Il(s),wO(t,My()?Reflect.construct(s,r||[],Il(t).constructor):s.apply(t,r))}function wO(t,s){if(s&&(Fa(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _O(t)}function _O(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function My(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(My=function(){return!!t})()}function Il(t){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Il(t)}function kO(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&du(t,s)}function du(t,s){return du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},du(t,s)}function ti(t,s,r){return s=Ry(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Ry(t){var s=SO(t,"string");return Fa(s)=="symbol"?s:s+""}function SO(t,s){if(Fa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Fa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xs=32,ax=function(t){function s(){return yO(this,s),NO(this,s,arguments)}return kO(s,t),jO(s,[{key:"renderIcon",value:function(a){var n=this.props.inactiveColor,i=xs/2,l=xs/6,o=xs/3,d=a.inactive?n:a.color;if(a.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:xs,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(xs,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return Z.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(xs/8,"h").concat(xs,"v").concat(xs*3/4,"h").concat(-xs,"z"),className:"recharts-legend-icon"});if(Z.isValidElement(a.legendIcon)){var c=bO({},a);return delete c.legendIcon,Z.cloneElement(a.legendIcon,c)}return Z.createElement(rx,{fill:d,cx:i,cy:i,size:xs,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,n=this.props,i=n.payload,l=n.iconSize,o=n.layout,d=n.formatter,c=n.inactiveColor,u={x:0,y:0,width:xs,height:xs},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,p){var b=x.formatter||d,v=Ee(ti(ti({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",x.inactive));if(x.type==="none")return null;var j=Ce(x.value)?null:x.value;Os(!Ce(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var P=x.inactive?c:x.color;return Z.createElement("li",cu({className:v,style:m,key:"legend-item-".concat(p)},ta(a.props,x,p)),Z.createElement(eu,{width:l,height:l,viewBox:u,style:h},a.renderIcon(x)),Z.createElement("span",{className:"recharts-legend-item-text",style:{color:P}},b?b(j,x,p):j))})}},{key:"render",value:function(){var a=this.props,n=a.payload,i=a.layout,l=a.align;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Z.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(_.PureComponent);ti(ax,"displayName","Legend");ti(ax,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var CO=Go;function PO(){this.__data__=new CO,this.size=0}var AO=PO;function $O(t){var s=this.__data__,r=s.delete(t);return this.size=s.size,r}var OO=$O;function TO(t){return this.__data__.get(t)}var EO=TO;function FO(t){return this.__data__.has(t)}var MO=FO,RO=Go,DO=Vm,LO=Km,IO=200;function qO(t,s){var r=this.__data__;if(r instanceof RO){var a=r.__data__;if(!DO||a.length<IO-1)return a.push([t,s]),this.size=++r.size,this;r=this.__data__=new LO(a)}return r.set(t,s),this.size=r.size,this}var BO=qO,UO=Go,zO=AO,WO=OO,VO=EO,KO=MO,HO=BO;function yn(t){var s=this.__data__=new UO(t);this.size=s.size}yn.prototype.clear=zO;yn.prototype.delete=WO;yn.prototype.get=VO;yn.prototype.has=KO;yn.prototype.set=HO;var Dy=yn,YO="__lodash_hash_undefined__";function GO(t){return this.__data__.set(t,YO),this}var QO=GO;function XO(t){return this.__data__.has(t)}var JO=XO,ZO=Km,eT=QO,tT=JO;function ql(t){var s=-1,r=t==null?0:t.length;for(this.__data__=new ZO;++s<r;)this.add(t[s])}ql.prototype.add=ql.prototype.push=eT;ql.prototype.has=tT;var Ly=ql;function sT(t,s){for(var r=-1,a=t==null?0:t.length;++r<a;)if(s(t[r],r,t))return!0;return!1}var Iy=sT;function rT(t,s){return t.has(s)}var qy=rT,aT=Ly,nT=Iy,iT=qy,lT=1,oT=2;function cT(t,s,r,a,n,i){var l=r&lT,o=t.length,d=s.length;if(o!=d&&!(l&&d>o))return!1;var c=i.get(t),u=i.get(s);if(c&&u)return c==s&&u==t;var m=-1,h=!0,x=r&oT?new aT:void 0;for(i.set(t,s),i.set(s,t);++m<o;){var p=t[m],b=s[m];if(a)var v=l?a(b,p,m,s,t,i):a(p,b,m,t,s,i);if(v!==void 0){if(v)continue;h=!1;break}if(x){if(!nT(s,function(j,P){if(!iT(x,P)&&(p===j||n(p,j,r,a,i)))return x.push(P)})){h=!1;break}}else if(!(p===b||n(p,b,r,a,i))){h=!1;break}}return i.delete(t),i.delete(s),h}var By=cT,dT=Hs,uT=dT.Uint8Array,mT=uT;function xT(t){var s=-1,r=Array(t.size);return t.forEach(function(a,n){r[++s]=[n,a]}),r}var hT=xT;function pT(t){var s=-1,r=Array(t.size);return t.forEach(function(a){r[++s]=a}),r}var nx=pT,gp=zi,fp=mT,gT=Wm,fT=By,bT=hT,yT=nx,vT=1,jT=2,NT="[object Boolean]",wT="[object Date]",_T="[object Error]",kT="[object Map]",ST="[object Number]",CT="[object RegExp]",PT="[object Set]",AT="[object String]",$T="[object Symbol]",OT="[object ArrayBuffer]",TT="[object DataView]",bp=gp?gp.prototype:void 0,cd=bp?bp.valueOf:void 0;function ET(t,s,r,a,n,i,l){switch(r){case TT:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case OT:return!(t.byteLength!=s.byteLength||!i(new fp(t),new fp(s)));case NT:case wT:case ST:return gT(+t,+s);case _T:return t.name==s.name&&t.message==s.message;case CT:case AT:return t==s+"";case kT:var o=bT;case PT:var d=a&vT;if(o||(o=yT),t.size!=s.size&&!d)return!1;var c=l.get(t);if(c)return c==s;a|=jT,l.set(t,s);var u=fT(o(t),o(s),a,n,i,l);return l.delete(t),u;case $T:if(cd)return cd.call(t)==cd.call(s)}return!1}var FT=ET;function MT(t,s){for(var r=-1,a=s.length,n=t.length;++r<a;)t[n+r]=s[r];return t}var Uy=MT,RT=Uy,DT=rs;function LT(t,s,r){var a=s(t);return DT(t)?a:RT(a,r(t))}var IT=LT;function qT(t,s){for(var r=-1,a=t==null?0:t.length,n=0,i=[];++r<a;){var l=t[r];s(l,r,t)&&(i[n++]=l)}return i}var BT=qT;function UT(){return[]}var zT=UT,WT=BT,VT=zT,KT=Object.prototype,HT=KT.propertyIsEnumerable,yp=Object.getOwnPropertySymbols,YT=yp?function(t){return t==null?[]:(t=Object(t),WT(yp(t),function(s){return HT.call(t,s)}))}:VT,GT=YT;function QT(t,s){for(var r=-1,a=Array(t);++r<t;)a[r]=s(r);return a}var XT=QT,JT=mr,ZT=xr,eE="[object Arguments]";function tE(t){return ZT(t)&&JT(t)==eE}var sE=tE,vp=sE,rE=xr,zy=Object.prototype,aE=zy.hasOwnProperty,nE=zy.propertyIsEnumerable,iE=vp(function(){return arguments}())?vp:function(t){return rE(t)&&aE.call(t,"callee")&&!nE.call(t,"callee")},ix=iE,Bl={exports:{}};function lE(){return!1}var oE=lE;Bl.exports;(function(t,s){var r=Hs,a=oE,n=s&&!s.nodeType&&s,i=n&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===n,o=l?r.Buffer:void 0,d=o?o.isBuffer:void 0,c=d||a;t.exports=c})(Bl,Bl.exports);var Wy=Bl.exports,cE=9007199254740991,dE=/^(?:0|[1-9]\d*)$/;function uE(t,s){var r=typeof t;return s=s??cE,!!s&&(r=="number"||r!="symbol"&&dE.test(t))&&t>-1&&t%1==0&&t<s}var lx=uE,mE=9007199254740991;function xE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mE}var ox=xE,hE=mr,pE=ox,gE=xr,fE="[object Arguments]",bE="[object Array]",yE="[object Boolean]",vE="[object Date]",jE="[object Error]",NE="[object Function]",wE="[object Map]",_E="[object Number]",kE="[object Object]",SE="[object RegExp]",CE="[object Set]",PE="[object String]",AE="[object WeakMap]",$E="[object ArrayBuffer]",OE="[object DataView]",TE="[object Float32Array]",EE="[object Float64Array]",FE="[object Int8Array]",ME="[object Int16Array]",RE="[object Int32Array]",DE="[object Uint8Array]",LE="[object Uint8ClampedArray]",IE="[object Uint16Array]",qE="[object Uint32Array]",at={};at[TE]=at[EE]=at[FE]=at[ME]=at[RE]=at[DE]=at[LE]=at[IE]=at[qE]=!0;at[fE]=at[bE]=at[$E]=at[yE]=at[OE]=at[vE]=at[jE]=at[NE]=at[wE]=at[_E]=at[kE]=at[SE]=at[CE]=at[PE]=at[AE]=!1;function BE(t){return gE(t)&&pE(t.length)&&!!at[hE(t)]}var UE=BE;function zE(t){return function(s){return t(s)}}var Vy=zE,Ul={exports:{}};Ul.exports;(function(t,s){var r=Zb,a=s&&!s.nodeType&&s,n=a&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===a,l=i&&r.process,o=function(){try{var d=n&&n.require&&n.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();t.exports=o})(Ul,Ul.exports);var WE=Ul.exports,VE=UE,KE=Vy,jp=WE,Np=jp&&jp.isTypedArray,HE=Np?KE(Np):VE,Ky=HE,YE=XT,GE=ix,QE=rs,XE=Wy,JE=lx,ZE=Ky,e7=Object.prototype,t7=e7.hasOwnProperty;function s7(t,s){var r=QE(t),a=!r&&GE(t),n=!r&&!a&&XE(t),i=!r&&!a&&!n&&ZE(t),l=r||a||n||i,o=l?YE(t.length,String):[],d=o.length;for(var c in t)(s||t7.call(t,c))&&!(l&&(c=="length"||n&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||JE(c,d)))&&o.push(c);return o}var r7=s7,a7=Object.prototype;function n7(t){var s=t&&t.constructor,r=typeof s=="function"&&s.prototype||a7;return t===r}var i7=n7;function l7(t,s){return function(r){return t(s(r))}}var Hy=l7,o7=Hy,c7=o7(Object.keys,Object),d7=c7,u7=i7,m7=d7,x7=Object.prototype,h7=x7.hasOwnProperty;function p7(t){if(!u7(t))return m7(t);var s=[];for(var r in Object(t))h7.call(t,r)&&r!="constructor"&&s.push(r);return s}var g7=p7,f7=zm,b7=ox;function y7(t){return t!=null&&b7(t.length)&&!f7(t)}var Wi=y7,v7=r7,j7=g7,N7=Wi;function w7(t){return N7(t)?v7(t):j7(t)}var mc=w7,_7=IT,k7=GT,S7=mc;function C7(t){return _7(t,S7,k7)}var P7=C7,wp=P7,A7=1,$7=Object.prototype,O7=$7.hasOwnProperty;function T7(t,s,r,a,n,i){var l=r&A7,o=wp(t),d=o.length,c=wp(s),u=c.length;if(d!=u&&!l)return!1;for(var m=d;m--;){var h=o[m];if(!(l?h in s:O7.call(s,h)))return!1}var x=i.get(t),p=i.get(s);if(x&&p)return x==s&&p==t;var b=!0;i.set(t,s),i.set(s,t);for(var v=l;++m<d;){h=o[m];var j=t[h],P=s[h];if(a)var w=l?a(P,j,h,s,t,i):a(j,P,h,t,s,i);if(!(w===void 0?j===P||n(j,P,r,a,i):w)){b=!1;break}v||(v=h=="constructor")}if(b&&!v){var C=t.constructor,f=s.constructor;C!=f&&"constructor"in t&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof f=="function"&&f instanceof f)&&(b=!1)}return i.delete(t),i.delete(s),b}var E7=T7,F7=ia,M7=Hs,R7=F7(M7,"DataView"),D7=R7,L7=ia,I7=Hs,q7=L7(I7,"Promise"),B7=q7,U7=ia,z7=Hs,W7=U7(z7,"Set"),Yy=W7,V7=ia,K7=Hs,H7=V7(K7,"WeakMap"),Y7=H7,uu=D7,mu=Vm,xu=B7,hu=Yy,pu=Y7,Gy=mr,vn=ty,_p="[object Map]",G7="[object Object]",kp="[object Promise]",Sp="[object Set]",Cp="[object WeakMap]",Pp="[object DataView]",Q7=vn(uu),X7=vn(mu),J7=vn(xu),Z7=vn(hu),e8=vn(pu),Ir=Gy;(uu&&Ir(new uu(new ArrayBuffer(1)))!=Pp||mu&&Ir(new mu)!=_p||xu&&Ir(xu.resolve())!=kp||hu&&Ir(new hu)!=Sp||pu&&Ir(new pu)!=Cp)&&(Ir=function(t){var s=Gy(t),r=s==G7?t.constructor:void 0,a=r?vn(r):"";if(a)switch(a){case Q7:return Pp;case X7:return _p;case J7:return kp;case Z7:return Sp;case e8:return Cp}return s});var t8=Ir,dd=Dy,s8=By,r8=FT,a8=E7,Ap=t8,$p=rs,Op=Wy,n8=Ky,i8=1,Tp="[object Arguments]",Ep="[object Array]",il="[object Object]",l8=Object.prototype,Fp=l8.hasOwnProperty;function o8(t,s,r,a,n,i){var l=$p(t),o=$p(s),d=l?Ep:Ap(t),c=o?Ep:Ap(s);d=d==Tp?il:d,c=c==Tp?il:c;var u=d==il,m=c==il,h=d==c;if(h&&Op(t)){if(!Op(s))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new dd),l||n8(t)?s8(t,s,r,a,n,i):r8(t,s,d,r,a,n,i);if(!(r&i8)){var x=u&&Fp.call(t,"__wrapped__"),p=m&&Fp.call(s,"__wrapped__");if(x||p){var b=x?t.value():t,v=p?s.value():s;return i||(i=new dd),n(b,v,r,a,i)}}return h?(i||(i=new dd),a8(t,s,r,a,n,i)):!1}var c8=o8,d8=c8,Mp=xr;function Qy(t,s,r,a,n){return t===s?!0:t==null||s==null||!Mp(t)&&!Mp(s)?t!==t&&s!==s:d8(t,s,r,a,Qy,n)}var cx=Qy,u8=Dy,m8=cx,x8=1,h8=2;function p8(t,s,r,a){var n=r.length,i=n,l=!a;if(t==null)return!i;for(t=Object(t);n--;){var o=r[n];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<i;){o=r[n];var d=o[0],c=t[d],u=o[1];if(l&&o[2]){if(c===void 0&&!(d in t))return!1}else{var m=new u8;if(a)var h=a(c,u,d,t,s,m);if(!(h===void 0?m8(u,c,x8|h8,a,m):h))return!1}}return!0}var g8=p8,f8=Pr;function b8(t){return t===t&&!f8(t)}var Xy=b8,y8=Xy,v8=mc;function j8(t){for(var s=v8(t),r=s.length;r--;){var a=s[r],n=t[a];s[r]=[a,n,y8(n)]}return s}var N8=j8;function w8(t,s){return function(r){return r==null?!1:r[t]===s&&(s!==void 0||t in Object(r))}}var Jy=w8,_8=g8,k8=N8,S8=Jy;function C8(t){var s=k8(t);return s.length==1&&s[0][2]?S8(s[0][0],s[0][1]):function(r){return r===t||_8(r,t,s)}}var P8=C8;function A8(t,s){return t!=null&&s in Object(t)}var $8=A8,O8=iy,T8=ix,E8=rs,F8=lx,M8=ox,R8=Xo;function D8(t,s,r){s=O8(s,t);for(var a=-1,n=s.length,i=!1;++a<n;){var l=R8(s[a]);if(!(i=t!=null&&r(t,l)))break;t=t[l]}return i||++a!=n?i:(n=t==null?0:t.length,!!n&&M8(n)&&F8(l,n)&&(E8(t)||T8(t)))}var L8=D8,I8=$8,q8=L8;function B8(t,s){return t!=null&&q8(t,s,I8)}var U8=B8,z8=cx,W8=ly,V8=U8,K8=Um,H8=Xy,Y8=Jy,G8=Xo,Q8=1,X8=2;function J8(t,s){return K8(t)&&H8(s)?Y8(G8(t),s):function(r){var a=W8(r,t);return a===void 0&&a===s?V8(r,t):z8(s,a,Q8|X8)}}var Z8=J8;function eF(t){return t}var jn=eF;function tF(t){return function(s){return s==null?void 0:s[t]}}var sF=tF,rF=Gm;function aF(t){return function(s){return rF(s,t)}}var nF=aF,iF=sF,lF=nF,oF=Um,cF=Xo;function dF(t){return oF(t)?iF(cF(t)):lF(t)}var uF=dF,mF=P8,xF=Z8,hF=jn,pF=rs,gF=uF;function fF(t){return typeof t=="function"?t:t==null?hF:typeof t=="object"?pF(t)?xF(t[0],t[1]):mF(t):gF(t)}var Ys=fF;function bF(t,s,r,a){for(var n=t.length,i=r+(a?1:-1);a?i--:++i<n;)if(s(t[i],i,t))return i;return-1}var Zy=bF;function yF(t){return t!==t}var vF=yF;function jF(t,s,r){for(var a=r-1,n=t.length;++a<n;)if(t[a]===s)return a;return-1}var NF=jF,wF=Zy,_F=vF,kF=NF;function SF(t,s,r){return s===s?kF(t,s,r):wF(t,_F,r)}var CF=SF,PF=CF;function AF(t,s){var r=t==null?0:t.length;return!!r&&PF(t,s,0)>-1}var $F=AF;function OF(t,s,r){for(var a=-1,n=t==null?0:t.length;++a<n;)if(r(s,t[a]))return!0;return!1}var TF=OF;function EF(){}var FF=EF,ud=Yy,MF=FF,RF=nx,DF=1/0,LF=ud&&1/RF(new ud([,-0]))[1]==DF?function(t){return new ud(t)}:MF,IF=LF,qF=Ly,BF=$F,UF=TF,zF=qy,WF=IF,VF=nx,KF=200;function HF(t,s,r){var a=-1,n=BF,i=t.length,l=!0,o=[],d=o;if(r)l=!1,n=UF;else if(i>=KF){var c=s?null:WF(t);if(c)return VF(c);l=!1,n=zF,d=new qF}else d=s?[]:o;e:for(;++a<i;){var u=t[a],m=s?s(u):u;if(u=r||u!==0?u:0,l&&m===m){for(var h=d.length;h--;)if(d[h]===m)continue e;s&&d.push(m),o.push(u)}else n(d,m,r)||(d!==o&&d.push(m),o.push(u))}return o}var YF=HF,GF=Ys,QF=YF;function XF(t,s){return t&&t.length?QF(t,GF(s)):[]}var JF=XF;const Rp=Je(JF);function ev(t,s,r){return s===!0?Rp(t,r):Ce(s)?Rp(t,s):t}function Ma(t){"@babel/helpers - typeof";return Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ma(t)}var ZF=["ref"];function Dp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Gs(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Dp(Object(r),!0).forEach(function(a){xc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function eM(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Lp(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sv(a.key),a)}}function tM(t,s,r){return s&&Lp(t.prototype,s),r&&Lp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sM(t,s,r){return s=zl(s),rM(t,tv()?Reflect.construct(s,r||[],zl(t).constructor):s.apply(t,r))}function rM(t,s){if(s&&(Ma(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aM(t)}function aM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tv=function(){return!!t})()}function zl(t){return zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zl(t)}function nM(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&gu(t,s)}function gu(t,s){return gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},gu(t,s)}function xc(t,s,r){return s=sv(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function sv(t){var s=iM(t,"string");return Ma(s)=="symbol"?s:s+""}function iM(t,s){if(Ma(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ma(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lM(t,s){if(t==null)return{};var r=oM(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function oM(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function cM(t){return t.value}function dM(t,s){if(Z.isValidElement(t))return Z.cloneElement(t,s);if(typeof t=="function")return Z.createElement(t,s);s.ref;var r=lM(s,ZF);return Z.createElement(ax,r)}var Ip=1,wr=function(t){function s(){var r;eM(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return r=sM(this,s,[].concat(n)),xc(r,"lastBoundingBox",{width:-1,height:-1}),r}return nM(s,t),tM(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>Ip||Math.abs(n.height-this.lastBoundingBox.height)>Ip)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,a&&a(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var n=this.props,i=n.layout,l=n.align,o=n.verticalAlign,d=n.margin,c=n.chartWidth,u=n.chartHeight,m,h;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((c||0)-x.width)/2}}else m=l==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(o==="middle"){var p=this.getBBoxSnapshot();h={top:((u||0)-p.height)/2}}else h=o==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Gs(Gs({},m),h)}},{key:"render",value:function(){var a=this,n=this.props,i=n.content,l=n.width,o=n.height,d=n.wrapperStyle,c=n.payloadUniqBy,u=n.payload,m=Gs(Gs({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(d)),d);return Z.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){a.wrapperNode=x}},dM(i,Gs(Gs({},this.props),{},{payload:ev(u,c,cM)})))}}],[{key:"getWithHeight",value:function(a,n){var i=Gs(Gs({},this.defaultProps),a.props),l=i.layout;return l==="vertical"&&xe(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||n}:null}}])}(_.PureComponent);xc(wr,"displayName","Legend");xc(wr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qp=zi,uM=ix,mM=rs,Bp=qp?qp.isConcatSpreadable:void 0;function xM(t){return mM(t)||uM(t)||!!(Bp&&t&&t[Bp])}var hM=xM,pM=Uy,gM=hM;function rv(t,s,r,a,n){var i=-1,l=t.length;for(r||(r=gM),n||(n=[]);++i<l;){var o=t[i];s>0&&r(o)?s>1?rv(o,s-1,r,a,n):pM(n,o):a||(n[n.length]=o)}return n}var av=rv;function fM(t){return function(s,r,a){for(var n=-1,i=Object(s),l=a(s),o=l.length;o--;){var d=l[t?o:++n];if(r(i[d],d,i)===!1)break}return s}}var bM=fM,yM=bM,vM=yM(),jM=vM,NM=jM,wM=mc;function _M(t,s){return t&&NM(t,s,wM)}var nv=_M,kM=Wi;function SM(t,s){return function(r,a){if(r==null)return r;if(!kM(r))return t(r,a);for(var n=r.length,i=s?n:-1,l=Object(r);(s?i--:++i<n)&&a(l[i],i,l)!==!1;);return r}}var CM=SM,PM=nv,AM=CM,$M=AM(PM),dx=$M,OM=dx,TM=Wi;function EM(t,s){var r=-1,a=TM(t)?Array(t.length):[];return OM(t,function(n,i,l){a[++r]=s(n,i,l)}),a}var iv=EM;function FM(t,s){var r=t.length;for(t.sort(s);r--;)t[r]=t[r].value;return t}var MM=FM,Up=mn;function RM(t,s){if(t!==s){var r=t!==void 0,a=t===null,n=t===t,i=Up(t),l=s!==void 0,o=s===null,d=s===s,c=Up(s);if(!o&&!c&&!i&&t>s||i&&l&&d&&!o&&!c||a&&l&&d||!r&&d||!n)return 1;if(!a&&!i&&!c&&t<s||c&&r&&n&&!a&&!i||o&&r&&n||!l&&n||!d)return-1}return 0}var DM=RM,LM=DM;function IM(t,s,r){for(var a=-1,n=t.criteria,i=s.criteria,l=n.length,o=r.length;++a<l;){var d=LM(n[a],i[a]);if(d){if(a>=o)return d;var c=r[a];return d*(c=="desc"?-1:1)}}return t.index-s.index}var qM=IM,md=Ym,BM=Gm,UM=Ys,zM=iv,WM=MM,VM=Vy,KM=qM,HM=jn,YM=rs;function GM(t,s,r){s.length?s=md(s,function(i){return YM(i)?function(l){return BM(l,i.length===1?i[0]:i)}:i}):s=[HM];var a=-1;s=md(s,VM(UM));var n=zM(t,function(i,l,o){var d=md(s,function(c){return c(i)});return{criteria:d,index:++a,value:i}});return WM(n,function(i,l){return KM(i,l,r)})}var QM=GM;function XM(t,s,r){switch(r.length){case 0:return t.call(s);case 1:return t.call(s,r[0]);case 2:return t.call(s,r[0],r[1]);case 3:return t.call(s,r[0],r[1],r[2])}return t.apply(s,r)}var JM=XM,ZM=JM,zp=Math.max;function e9(t,s,r){return s=zp(s===void 0?t.length-1:s,0),function(){for(var a=arguments,n=-1,i=zp(a.length-s,0),l=Array(i);++n<i;)l[n]=a[s+n];n=-1;for(var o=Array(s+1);++n<s;)o[n]=a[n];return o[s]=r(l),ZM(t,this,o)}}var t9=e9;function s9(t){return function(){return t}}var r9=s9,a9=ia,n9=function(){try{var t=a9(Object,"defineProperty");return t({},"",{}),t}catch{}}(),lv=n9,i9=r9,Wp=lv,l9=jn,o9=Wp?function(t,s){return Wp(t,"toString",{configurable:!0,enumerable:!1,value:i9(s),writable:!0})}:l9,c9=o9,d9=800,u9=16,m9=Date.now;function x9(t){var s=0,r=0;return function(){var a=m9(),n=u9-(a-r);if(r=a,n>0){if(++s>=d9)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var h9=x9,p9=c9,g9=h9,f9=g9(p9),b9=f9,y9=jn,v9=t9,j9=b9;function N9(t,s){return j9(v9(t,s,y9),t+"")}var w9=N9,_9=Wm,k9=Wi,S9=lx,C9=Pr;function P9(t,s,r){if(!C9(r))return!1;var a=typeof s;return(a=="number"?k9(r)&&S9(s,r.length):a=="string"&&s in r)?_9(r[s],t):!1}var hc=P9,A9=av,$9=QM,O9=w9,Vp=hc,T9=O9(function(t,s){if(t==null)return[];var r=s.length;return r>1&&Vp(t,s[0],s[1])?s=[]:r>2&&Vp(s[0],s[1],s[2])&&(s=[s[0]]),$9(t,A9(s,1),[])}),E9=T9;const ux=Je(E9);function si(t){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},si(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},fu.apply(this,arguments)}function F9(t,s){return L9(t)||D9(t,s)||R9(t,s)||M9()}function M9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R9(t,s){if(t){if(typeof t=="string")return Kp(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kp(t,s)}}function Kp(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function D9(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function L9(t){if(Array.isArray(t))return t}function Hp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function xd(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Hp(Object(r),!0).forEach(function(a){I9(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function I9(t,s,r){return s=q9(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function q9(t){var s=B9(t,"string");return si(s)=="symbol"?s:s+""}function B9(t,s){if(si(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(si(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function U9(t){return Array.isArray(t)&&wt(t[0])&&wt(t[1])?t.join(" ~ "):t}var z9=function(s){var r=s.separator,a=r===void 0?" : ":r,n=s.contentStyle,i=n===void 0?{}:n,l=s.itemStyle,o=l===void 0?{}:l,d=s.labelStyle,c=d===void 0?{}:d,u=s.payload,m=s.formatter,h=s.itemSorter,x=s.wrapperClassName,p=s.labelClassName,b=s.label,v=s.labelFormatter,j=s.accessibilityLayer,P=j===void 0?!1:j,w=function(){if(u&&u.length){var A={padding:0,margin:0},L=(h?ux(u,h):u).map(function(N,R){if(N.type==="none")return null;var O=xd({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},o),T=N.formatter||m||U9,g=N.value,D=N.name,S=g,$=D;if(T&&S!=null&&$!=null){var I=T(g,D,N,R,u);if(Array.isArray(I)){var K=F9(I,2);S=K[0],$=K[1]}else S=I}return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:O},wt($)?Z.createElement("span",{className:"recharts-tooltip-item-name"},$):null,wt($)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},S),Z.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:A},L)}return null},C=xd({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),f=xd({margin:0},c),k=!Ae(b),y=k?b:"",F=Ee("recharts-default-tooltip",x),M=Ee("recharts-tooltip-label",p);k&&v&&u!==void 0&&u!==null&&(y=v(b,u));var E=P?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",fu({className:F,style:C},E),Z.createElement("p",{className:M,style:f},Z.isValidElement(y)?y:"".concat(y)),w())};function ri(t){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ri(t)}function ll(t,s,r){return s=W9(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function W9(t){var s=V9(t,"string");return ri(s)=="symbol"?s:s+""}function V9(t,s){if(ri(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ri(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var On="recharts-tooltip-wrapper",K9={visibility:"hidden"};function H9(t){var s=t.coordinate,r=t.translateX,a=t.translateY;return Ee(On,ll(ll(ll(ll({},"".concat(On,"-right"),xe(r)&&s&&xe(s.x)&&r>=s.x),"".concat(On,"-left"),xe(r)&&s&&xe(s.x)&&r<s.x),"".concat(On,"-bottom"),xe(a)&&s&&xe(s.y)&&a>=s.y),"".concat(On,"-top"),xe(a)&&s&&xe(s.y)&&a<s.y))}function Yp(t){var s=t.allowEscapeViewBox,r=t.coordinate,a=t.key,n=t.offsetTopLeft,i=t.position,l=t.reverseDirection,o=t.tooltipDimension,d=t.viewBox,c=t.viewBoxDimension;if(i&&xe(i[a]))return i[a];var u=r[a]-o-n,m=r[a]+n;if(s[a])return l[a]?u:m;if(l[a]){var h=u,x=d[a];return h<x?Math.max(m,d[a]):Math.max(u,d[a])}var p=m+o,b=d[a]+c;return p>b?Math.max(u,d[a]):Math.max(m,d[a])}function Y9(t){var s=t.translateX,r=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(s,"px, ").concat(r,"px, 0)"):"translate(".concat(s,"px, ").concat(r,"px)")}}function G9(t){var s=t.allowEscapeViewBox,r=t.coordinate,a=t.offsetTopLeft,n=t.position,i=t.reverseDirection,l=t.tooltipBox,o=t.useTranslate3d,d=t.viewBox,c,u,m;return l.height>0&&l.width>0&&r?(u=Yp({allowEscapeViewBox:s,coordinate:r,key:"x",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),m=Yp({allowEscapeViewBox:s,coordinate:r,key:"y",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),c=Y9({translateX:u,translateY:m,useTranslate3d:o})):c=K9,{cssProperties:c,cssClasses:H9({translateX:u,translateY:m,coordinate:r})}}function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ra(t)}function Gp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Qp(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Gp(Object(r),!0).forEach(function(a){yu(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Q9(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function X9(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,cv(a.key),a)}}function J9(t,s,r){return s&&X9(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z9(t,s,r){return s=Wl(s),eR(t,ov()?Reflect.construct(s,r||[],Wl(t).constructor):s.apply(t,r))}function eR(t,s){if(s&&(Ra(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tR(t)}function tR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ov(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ov=function(){return!!t})()}function Wl(t){return Wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wl(t)}function sR(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&bu(t,s)}function bu(t,s){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},bu(t,s)}function yu(t,s,r){return s=cv(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function cv(t){var s=rR(t,"string");return Ra(s)=="symbol"?s:s+""}function rR(t,s){if(Ra(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ra(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xp=1,aR=function(t){function s(){var r;Q9(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return r=Z9(this,s,[].concat(n)),yu(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),yu(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,d,c,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&o!==void 0?o:0,y:(c=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),r}return sR(s,t),J9(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>Xp||Math.abs(a.height-this.state.lastBoundingBox.height)>Xp)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,c=n.children,u=n.coordinate,m=n.hasPayload,h=n.isAnimationActive,x=n.offset,p=n.position,b=n.reverseDirection,v=n.useTranslate3d,j=n.viewBox,P=n.wrapperStyle,w=G9({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:x,position:p,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:j}),C=w.cssClasses,f=w.cssProperties,k=Qp(Qp({transition:h&&i?"transform ".concat(o,"ms ").concat(d):void 0},f),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},P);return Z.createElement("div",{tabIndex:-1,className:C,style:k,ref:function(F){a.wrapperNode=F}},c)}}])}(_.PureComponent),nR=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},la={isSsr:nR()};function Da(t){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Da(t)}function Jp(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Zp(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Jp(Object(r),!0).forEach(function(a){mx(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jp(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function iR(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function lR(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,uv(a.key),a)}}function oR(t,s,r){return s&&lR(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function cR(t,s,r){return s=Vl(s),dR(t,dv()?Reflect.construct(s,r||[],Vl(t).constructor):s.apply(t,r))}function dR(t,s){if(s&&(Da(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uR(t)}function uR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dv=function(){return!!t})()}function Vl(t){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vl(t)}function mR(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&vu(t,s)}function vu(t,s){return vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},vu(t,s)}function mx(t,s,r){return s=uv(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function uv(t){var s=xR(t,"string");return Da(s)=="symbol"?s:s+""}function xR(t,s){if(Da(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Da(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hR(t){return t.dataKey}function pR(t,s){return Z.isValidElement(t)?Z.cloneElement(t,s):typeof t=="function"?Z.createElement(t,s):Z.createElement(z9,s)}var Ps=function(t){function s(){return iR(this,s),cR(this,s,arguments)}return mR(s,t),oR(s,[{key:"render",value:function(){var a=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,c=n.content,u=n.coordinate,m=n.filterNull,h=n.isAnimationActive,x=n.offset,p=n.payload,b=n.payloadUniqBy,v=n.position,j=n.reverseDirection,P=n.useTranslate3d,w=n.viewBox,C=n.wrapperStyle,f=p??[];m&&f.length&&(f=ev(p.filter(function(y){return y.value!=null&&(y.hide!==!0||a.props.includeHidden)}),b,hR));var k=f.length>0;return Z.createElement(aR,{allowEscapeViewBox:l,animationDuration:o,animationEasing:d,isAnimationActive:h,active:i,coordinate:u,hasPayload:k,offset:x,position:v,reverseDirection:j,useTranslate3d:P,viewBox:w,wrapperStyle:C},pR(c,Zp(Zp({},this.props),{},{payload:f})))}}])}(_.PureComponent);mx(Ps,"displayName","Tooltip");mx(Ps,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!la.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var gR=Hs,fR=function(){return gR.Date.now()},bR=fR,yR=/\s/;function vR(t){for(var s=t.length;s--&&yR.test(t.charAt(s)););return s}var jR=vR,NR=jR,wR=/^\s+/;function _R(t){return t&&t.slice(0,NR(t)+1).replace(wR,"")}var kR=_R,SR=kR,e0=Pr,CR=mn,t0=NaN,PR=/^[-+]0x[0-9a-f]+$/i,AR=/^0b[01]+$/i,$R=/^0o[0-7]+$/i,OR=parseInt;function TR(t){if(typeof t=="number")return t;if(CR(t))return t0;if(e0(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=e0(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=SR(t);var r=AR.test(t);return r||$R.test(t)?OR(t.slice(2),r?2:8):PR.test(t)?t0:+t}var mv=TR,ER=Pr,hd=bR,s0=mv,FR="Expected a function",MR=Math.max,RR=Math.min;function DR(t,s,r){var a,n,i,l,o,d,c=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(FR);s=s0(s)||0,ER(r)&&(u=!!r.leading,m="maxWait"in r,i=m?MR(s0(r.maxWait)||0,s):i,h="trailing"in r?!!r.trailing:h);function x(k){var y=a,F=n;return a=n=void 0,c=k,l=t.apply(F,y),l}function p(k){return c=k,o=setTimeout(j,s),u?x(k):l}function b(k){var y=k-d,F=k-c,M=s-y;return m?RR(M,i-F):M}function v(k){var y=k-d,F=k-c;return d===void 0||y>=s||y<0||m&&F>=i}function j(){var k=hd();if(v(k))return P(k);o=setTimeout(j,b(k))}function P(k){return o=void 0,h&&a?x(k):(a=n=void 0,l)}function w(){o!==void 0&&clearTimeout(o),c=0,a=d=n=o=void 0}function C(){return o===void 0?l:P(hd())}function f(){var k=hd(),y=v(k);if(a=arguments,n=this,d=k,y){if(o===void 0)return p(d);if(m)return clearTimeout(o),o=setTimeout(j,s),x(d)}return o===void 0&&(o=setTimeout(j,s)),l}return f.cancel=w,f.flush=C,f}var LR=DR,IR=LR,qR=Pr,BR="Expected a function";function UR(t,s,r){var a=!0,n=!0;if(typeof t!="function")throw new TypeError(BR);return qR(r)&&(a="leading"in r?!!r.leading:a,n="trailing"in r?!!r.trailing:n),IR(t,s,{leading:a,maxWait:s,trailing:n})}var zR=UR;const xv=Je(zR);function ai(t){"@babel/helpers - typeof";return ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ai(t)}function r0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function ol(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?r0(Object(r),!0).forEach(function(a){WR(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function WR(t,s,r){return s=VR(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function VR(t){var s=KR(t,"string");return ai(s)=="symbol"?s:s+""}function KR(t,s){if(ai(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ai(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function HR(t,s){return XR(t)||QR(t,s)||GR(t,s)||YR()}function YR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GR(t,s){if(t){if(typeof t=="string")return a0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a0(t,s)}}function a0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function QR(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function XR(t){if(Array.isArray(t))return t}var n0=_.forwardRef(function(t,s){var r=t.aspect,a=t.initialDimension,n=a===void 0?{width:-1,height:-1}:a,i=t.width,l=i===void 0?"100%":i,o=t.height,d=o===void 0?"100%":o,c=t.minWidth,u=c===void 0?0:c,m=t.minHeight,h=t.maxHeight,x=t.children,p=t.debounce,b=p===void 0?0:p,v=t.id,j=t.className,P=t.onResize,w=t.style,C=w===void 0?{}:w,f=_.useRef(null),k=_.useRef();k.current=P,_.useImperativeHandle(s,function(){return Object.defineProperty(f.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),f.current},configurable:!0})});var y=_.useState({containerWidth:n.width,containerHeight:n.height}),F=HR(y,2),M=F[0],E=F[1],B=_.useCallback(function(L,N){E(function(R){var O=Math.round(L),T=Math.round(N);return R.containerWidth===O&&R.containerHeight===T?R:{containerWidth:O,containerHeight:T}})},[]);_.useEffect(function(){var L=function(D){var S,$=D[0].contentRect,I=$.width,K=$.height;B(I,K),(S=k.current)===null||S===void 0||S.call(k,I,K)};b>0&&(L=xv(L,b,{trailing:!0,leading:!1}));var N=new ResizeObserver(L),R=f.current.getBoundingClientRect(),O=R.width,T=R.height;return B(O,T),N.observe(f.current),function(){N.disconnect()}},[B,b]);var A=_.useMemo(function(){var L=M.containerWidth,N=M.containerHeight;if(L<0||N<0)return null;Os(Wr(l)||Wr(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,d),Os(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=Wr(l)?L:l,O=Wr(d)?N:d;r&&r>0&&(R?O=R/r:O&&(R=O*r),h&&O>h&&(O=h)),Os(R>0||O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,O,l,d,u,m,r);var T=!Array.isArray(x)&&rr(x.type).endsWith("Chart");return Z.Children.map(x,function(g){return Z.isValidElement(g)?_.cloneElement(g,ol({width:R,height:O},T?{style:ol({height:"100%",width:"100%",maxHeight:O,maxWidth:R},g.props.style)}:{})):g})},[r,x,d,h,m,u,M,l]);return Z.createElement("div",{id:v?"".concat(v):void 0,className:Ee("recharts-responsive-container",j),style:ol(ol({},C),{},{width:l,height:d,minWidth:u,minHeight:m,maxHeight:h}),ref:f},A)}),pc=function(s){return null};pc.displayName="Cell";function ni(t){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ni(t)}function i0(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function ju(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?i0(Object(r),!0).forEach(function(a){JR(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i0(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function JR(t,s,r){return s=ZR(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function ZR(t){var s=eD(t,"string");return ni(s)=="symbol"?s:s+""}function eD(t,s){if(ni(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ni(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var xa={widthCache:{},cacheCount:0},tD=2e3,sD={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},l0="recharts_measurement_span";function rD(t){var s=ju({},t);return Object.keys(s).forEach(function(r){s[r]||delete s[r]}),s}var Vn=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||la.isSsr)return{width:0,height:0};var a=rD(r),n=JSON.stringify({text:s,copyStyle:a});if(xa.widthCache[n])return xa.widthCache[n];try{var i=document.getElementById(l0);i||(i=document.createElement("span"),i.setAttribute("id",l0),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=ju(ju({},sD),a);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),d={width:o.width,height:o.height};return xa.widthCache[n]=d,++xa.cacheCount>tD&&(xa.cacheCount=0,xa.widthCache={}),d}catch{return{width:0,height:0}}},aD=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function ii(t){"@babel/helpers - typeof";return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ii(t)}function Kl(t,s){return oD(t)||lD(t,s)||iD(t,s)||nD()}function nD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iD(t,s){if(t){if(typeof t=="string")return o0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o0(t,s)}}function o0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function lD(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function oD(t){if(Array.isArray(t))return t}function cD(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function c0(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,uD(a.key),a)}}function dD(t,s,r){return s&&c0(t.prototype,s),r&&c0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uD(t){var s=mD(t,"string");return ii(s)=="symbol"?s:s+""}function mD(t,s){if(ii(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ii(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var d0=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,u0=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xD=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,hD=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hv={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pD=Object.keys(hv),va="NaN";function gD(t,s){return t*hv[s]}var cl=function(){function t(s,r){cD(this,t),this.num=s,this.unit=r,this.num=s,this.unit=r,Number.isNaN(s)&&(this.unit=""),r!==""&&!xD.test(r)&&(this.num=NaN,this.unit=""),pD.includes(r)&&(this.num=gD(s,r),this.unit="px")}return dD(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,n=(a=hD.exec(r))!==null&&a!==void 0?a:[],i=Kl(n,3),l=i[1],o=i[2];return new t(parseFloat(l),o??"")}}])}();function pv(t){if(t.includes(va))return va;for(var s=t;s.includes("*")||s.includes("/");){var r,a=(r=d0.exec(s))!==null&&r!==void 0?r:[],n=Kl(a,4),i=n[1],l=n[2],o=n[3],d=cl.parse(i??""),c=cl.parse(o??""),u=l==="*"?d.multiply(c):d.divide(c);if(u.isNaN())return va;s=s.replace(d0,u.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var m,h=(m=u0.exec(s))!==null&&m!==void 0?m:[],x=Kl(h,4),p=x[1],b=x[2],v=x[3],j=cl.parse(p??""),P=cl.parse(v??""),w=b==="+"?j.add(P):j.subtract(P);if(w.isNaN())return va;s=s.replace(u0,w.toString())}return s}var m0=/\(([^()]*)\)/;function fD(t){for(var s=t;s.includes("(");){var r=m0.exec(s),a=Kl(r,2),n=a[1];s=s.replace(m0,pv(n))}return s}function bD(t){var s=t.replace(/\s+/g,"");return s=fD(s),s=pv(s),s}function yD(t){try{return bD(t)}catch{return va}}function pd(t){var s=yD(t.slice(5,-1));return s===va?"":s}var vD=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jD=["dx","dy","angle","className","breakAll"];function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Nu.apply(this,arguments)}function x0(t,s){if(t==null)return{};var r=ND(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function ND(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function h0(t,s){return SD(t)||kD(t,s)||_D(t,s)||wD()}function wD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _D(t,s){if(t){if(typeof t=="string")return p0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p0(t,s)}}function p0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function kD(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function SD(t){if(Array.isArray(t))return t}var gv=/[ \f\n\r\t\v\u2028\u2029]+/,fv=function(s){var r=s.children,a=s.breakAll,n=s.style;try{var i=[];Ae(r)||(a?i=r.toString().split(""):i=r.toString().split(gv));var l=i.map(function(d){return{word:d,width:Vn(d,n).width}}),o=a?0:Vn("",n).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},CD=function(s,r,a,n,i){var l=s.maxLines,o=s.children,d=s.style,c=s.breakAll,u=xe(l),m=o,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(O,T){var g=T.word,D=T.width,S=O[O.length-1];if(S&&(n==null||i||S.width+D+a<Number(n)))S.words.push(g),S.width+=D+a;else{var $={words:[g],width:D};O.push($)}return O},[])},x=h(r),p=function(R){return R.reduce(function(O,T){return O.width>T.width?O:T})};if(!u)return x;for(var b="",v=function(R){var O=m.slice(0,R),T=fv({breakAll:c,style:d,children:O+b}).wordsWithComputedWidth,g=h(T),D=g.length>l||p(g).width>Number(n);return[D,g]},j=0,P=m.length-1,w=0,C;j<=P&&w<=m.length-1;){var f=Math.floor((j+P)/2),k=f-1,y=v(k),F=h0(y,2),M=F[0],E=F[1],B=v(f),A=h0(B,1),L=A[0];if(!M&&!L&&(j=f+1),M&&L&&(P=f-1),!M&&L){C=E;break}w++}return C||x},g0=function(s){var r=Ae(s)?[]:s.toString().split(gv);return[{words:r}]},PD=function(s){var r=s.width,a=s.scaleToFit,n=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((r||a)&&!la.isSsr){var d,c,u=fv({breakAll:l,children:n,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;d=m,c=h}else return g0(n);return CD({breakAll:l,children:n,maxLines:o,style:i},d,c,r,a)}return g0(n)},f0="#808080",sa=function(s){var r=s.x,a=r===void 0?0:r,n=s.y,i=n===void 0?0:n,l=s.lineHeight,o=l===void 0?"1em":l,d=s.capHeight,c=d===void 0?"0.71em":d,u=s.scaleToFit,m=u===void 0?!1:u,h=s.textAnchor,x=h===void 0?"start":h,p=s.verticalAnchor,b=p===void 0?"end":p,v=s.fill,j=v===void 0?f0:v,P=x0(s,vD),w=_.useMemo(function(){return PD({breakAll:P.breakAll,children:P.children,maxLines:P.maxLines,scaleToFit:m,style:P.style,width:P.width})},[P.breakAll,P.children,P.maxLines,m,P.style,P.width]),C=P.dx,f=P.dy,k=P.angle,y=P.className,F=P.breakAll,M=x0(P,jD);if(!wt(a)||!wt(i))return null;var E=a+(xe(C)?C:0),B=i+(xe(f)?f:0),A;switch(b){case"start":A=pd("calc(".concat(c,")"));break;case"middle":A=pd("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:A=pd("calc(".concat(w.length-1," * -").concat(o,")"));break}var L=[];if(m){var N=w[0].width,R=P.width;L.push("scale(".concat((xe(R)?R/N:1)/N,")"))}return k&&L.push("rotate(".concat(k,", ").concat(E,", ").concat(B,")")),L.length&&(M.transform=L.join(" ")),Z.createElement("text",Nu({},_e(M,!0),{x:E,y:B,className:Ee("recharts-text",y),textAnchor:x,fill:j.includes("url")?f0:j}),w.map(function(O,T){var g=O.words.join(F?"":" ");return Z.createElement("tspan",{x:E,dy:T===0?A:o,key:"".concat(g,"-").concat(T)},g)}))};function _r(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function AD(t,s){return t==null||s==null?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function xx(t){let s,r,a;t.length!==2?(s=_r,r=(o,d)=>_r(t(o),d),a=(o,d)=>t(o)-d):(s=t===_r||t===AD?t:$D,r=t,a=t);function n(o,d,c=0,u=o.length){if(c<u){if(s(d,d)!==0)return u;do{const m=c+u>>>1;r(o[m],d)<0?c=m+1:u=m}while(c<u)}return c}function i(o,d,c=0,u=o.length){if(c<u){if(s(d,d)!==0)return u;do{const m=c+u>>>1;r(o[m],d)<=0?c=m+1:u=m}while(c<u)}return c}function l(o,d,c=0,u=o.length){const m=n(o,d,c,u-1);return m>c&&a(o[m-1],d)>-a(o[m],d)?m-1:m}return{left:n,center:l,right:i}}function $D(){return 0}function bv(t){return t===null?NaN:+t}function*OD(t,s){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const TD=xx(_r),Vi=TD.right;xx(bv).center;class b0 extends Map{constructor(s,r=MD){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),s!=null)for(const[a,n]of s)this.set(a,n)}get(s){return super.get(y0(this,s))}has(s){return super.has(y0(this,s))}set(s,r){return super.set(ED(this,s),r)}delete(s){return super.delete(FD(this,s))}}function y0({_intern:t,_key:s},r){const a=s(r);return t.has(a)?t.get(a):r}function ED({_intern:t,_key:s},r){const a=s(r);return t.has(a)?t.get(a):(t.set(a,r),r)}function FD({_intern:t,_key:s},r){const a=s(r);return t.has(a)&&(r=t.get(a),t.delete(a)),r}function MD(t){return t!==null&&typeof t=="object"?t.valueOf():t}function RD(t=_r){if(t===_r)return yv;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,r)=>{const a=t(s,r);return a||a===0?a:(t(r,r)===0)-(t(s,s)===0)}}function yv(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}const DD=Math.sqrt(50),LD=Math.sqrt(10),ID=Math.sqrt(2);function Hl(t,s,r){const a=(s-t)/Math.max(0,r),n=Math.floor(Math.log10(a)),i=a/Math.pow(10,n),l=i>=DD?10:i>=LD?5:i>=ID?2:1;let o,d,c;return n<0?(c=Math.pow(10,-n)/l,o=Math.round(t*c),d=Math.round(s*c),o/c<t&&++o,d/c>s&&--d,c=-c):(c=Math.pow(10,n)*l,o=Math.round(t/c),d=Math.round(s/c),o*c<t&&++o,d*c>s&&--d),d<o&&.5<=r&&r<2?Hl(t,s,r*2):[o,d,c]}function wu(t,s,r){if(s=+s,t=+t,r=+r,!(r>0))return[];if(t===s)return[t];const a=s<t,[n,i,l]=a?Hl(s,t,r):Hl(t,s,r);if(!(i>=n))return[];const o=i-n+1,d=new Array(o);if(a)if(l<0)for(let c=0;c<o;++c)d[c]=(i-c)/-l;else for(let c=0;c<o;++c)d[c]=(i-c)*l;else if(l<0)for(let c=0;c<o;++c)d[c]=(n+c)/-l;else for(let c=0;c<o;++c)d[c]=(n+c)*l;return d}function _u(t,s,r){return s=+s,t=+t,r=+r,Hl(t,s,r)[2]}function ku(t,s,r){s=+s,t=+t,r=+r;const a=s<t,n=a?_u(s,t,r):_u(t,s,r);return(a?-1:1)*(n<0?1/-n:n)}function v0(t,s){let r;for(const a of t)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function j0(t,s){let r;for(const a of t)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function vv(t,s,r=0,a=1/0,n){if(s=Math.floor(s),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(t.length-1,a)),!(r<=s&&s<=a))return t;for(n=n===void 0?yv:RD(n);a>r;){if(a-r>600){const d=a-r+1,c=s-r+1,u=Math.log(d),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(d-m)/d)*(c-d/2<0?-1:1),x=Math.max(r,Math.floor(s-c*m/d+h)),p=Math.min(a,Math.floor(s+(d-c)*m/d+h));vv(t,s,x,p,n)}const i=t[s];let l=r,o=a;for(Tn(t,r,s),n(t[a],i)>0&&Tn(t,r,a);l<o;){for(Tn(t,l,o),++l,--o;n(t[l],i)<0;)++l;for(;n(t[o],i)>0;)--o}n(t[r],i)===0?Tn(t,r,o):(++o,Tn(t,o,a)),o<=s&&(r=o+1),s<=o&&(a=o-1)}return t}function Tn(t,s,r){const a=t[s];t[s]=t[r],t[r]=a}function qD(t,s,r){if(t=Float64Array.from(OD(t)),!(!(a=t.length)||isNaN(s=+s))){if(s<=0||a<2)return j0(t);if(s>=1)return v0(t);var a,n=(a-1)*s,i=Math.floor(n),l=v0(vv(t,i).subarray(0,i+1)),o=j0(t.subarray(i+1));return l+(o-l)*(n-i)}}function BD(t,s,r=bv){if(!(!(a=t.length)||isNaN(s=+s))){if(s<=0||a<2)return+r(t[0],0,t);if(s>=1)return+r(t[a-1],a-1,t);var a,n=(a-1)*s,i=Math.floor(n),l=+r(t[i],i,t),o=+r(t[i+1],i+1,t);return l+(o-l)*(n-i)}}function UD(t,s,r){t=+t,s=+s,r=(n=arguments.length)<2?(s=t,t=0,1):n<3?1:+r;for(var a=-1,n=Math.max(0,Math.ceil((s-t)/r))|0,i=new Array(n);++a<n;)i[a]=t+a*r;return i}function ws(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t);break}return this}function hr(t,s){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const Su=Symbol("implicit");function hx(){var t=new b0,s=[],r=[],a=Su;function n(i){let l=t.get(i);if(l===void 0){if(a!==Su)return a;t.set(i,l=s.push(i)-1)}return r[l%r.length]}return n.domain=function(i){if(!arguments.length)return s.slice();s=[],t=new b0;for(const l of i)t.has(l)||t.set(l,s.push(l)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return hx(s,r).unknown(a)},ws.apply(n,arguments),n}function li(){var t=hx().unknown(void 0),s=t.domain,r=t.range,a=0,n=1,i,l,o=!1,d=0,c=0,u=.5;delete t.unknown;function m(){var h=s().length,x=n<a,p=x?n:a,b=x?a:n;i=(b-p)/Math.max(1,h-d+c*2),o&&(i=Math.floor(i)),p+=(b-p-i*(h-d))*u,l=i*(1-d),o&&(p=Math.round(p),l=Math.round(l));var v=UD(h).map(function(j){return p+i*j});return r(x?v.reverse():v)}return t.domain=function(h){return arguments.length?(s(h),m()):s()},t.range=function(h){return arguments.length?([a,n]=h,a=+a,n=+n,m()):[a,n]},t.rangeRound=function(h){return[a,n]=h,a=+a,n=+n,o=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,m()):o},t.padding=function(h){return arguments.length?(d=Math.min(1,c=+h),m()):d},t.paddingInner=function(h){return arguments.length?(d=Math.min(1,h),m()):d},t.paddingOuter=function(h){return arguments.length?(c=+h,m()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return li(s(),[a,n]).round(o).paddingInner(d).paddingOuter(c).align(u)},ws.apply(m(),arguments)}function jv(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jv(s())},t}function Kn(){return jv(li.apply(null,arguments).paddingInner(1))}function px(t,s,r){t.prototype=s.prototype=r,r.constructor=t}function Nv(t,s){var r=Object.create(t.prototype);for(var a in s)r[a]=s[a];return r}function Ki(){}var oi=.7,Yl=1/oi,Sa="\\s*([+-]?\\d+)\\s*",ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zD=/^#([0-9a-f]{3,8})$/,WD=new RegExp(`^rgb\\(${Sa},${Sa},${Sa}\\)$`),VD=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),KD=new RegExp(`^rgba\\(${Sa},${Sa},${Sa},${ci}\\)$`),HD=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${ci}\\)$`),YD=new RegExp(`^hsl\\(${ci},${Bs},${Bs}\\)$`),GD=new RegExp(`^hsla\\(${ci},${Bs},${Bs},${ci}\\)$`),N0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};px(Ki,di,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:w0,formatHex:w0,formatHex8:QD,formatHsl:XD,formatRgb:_0,toString:_0});function w0(){return this.rgb().formatHex()}function QD(){return this.rgb().formatHex8()}function XD(){return wv(this).formatHsl()}function _0(){return this.rgb().formatRgb()}function di(t){var s,r;return t=(t+"").trim().toLowerCase(),(s=zD.exec(t))?(r=s[1].length,s=parseInt(s[1],16),r===6?k0(s):r===3?new Zt(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):r===8?dl(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):r===4?dl(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=WD.exec(t))?new Zt(s[1],s[2],s[3],1):(s=VD.exec(t))?new Zt(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=KD.exec(t))?dl(s[1],s[2],s[3],s[4]):(s=HD.exec(t))?dl(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=YD.exec(t))?P0(s[1],s[2]/100,s[3]/100,1):(s=GD.exec(t))?P0(s[1],s[2]/100,s[3]/100,s[4]):N0.hasOwnProperty(t)?k0(N0[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function k0(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function dl(t,s,r,a){return a<=0&&(t=s=r=NaN),new Zt(t,s,r,a)}function JD(t){return t instanceof Ki||(t=di(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function Cu(t,s,r,a){return arguments.length===1?JD(t):new Zt(t,s,r,a??1)}function Zt(t,s,r,a){this.r=+t,this.g=+s,this.b=+r,this.opacity=+a}px(Zt,Cu,Nv(Ki,{brighter(t){return t=t==null?Yl:Math.pow(Yl,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?oi:Math.pow(oi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(Xr(this.r),Xr(this.g),Xr(this.b),Gl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S0,formatHex:S0,formatHex8:ZD,formatRgb:C0,toString:C0}));function S0(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}`}function ZD(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}${Vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function C0(){const t=Gl(this.opacity);return`${t===1?"rgb(":"rgba("}${Xr(this.r)}, ${Xr(this.g)}, ${Xr(this.b)}${t===1?")":`, ${t})`}`}function Gl(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vr(t){return t=Xr(t),(t<16?"0":"")+t.toString(16)}function P0(t,s,r,a){return a<=0?t=s=r=NaN:r<=0||r>=1?t=s=NaN:s<=0&&(t=NaN),new $s(t,s,r,a)}function wv(t){if(t instanceof $s)return new $s(t.h,t.s,t.l,t.opacity);if(t instanceof Ki||(t=di(t)),!t)return new $s;if(t instanceof $s)return t;t=t.rgb();var s=t.r/255,r=t.g/255,a=t.b/255,n=Math.min(s,r,a),i=Math.max(s,r,a),l=NaN,o=i-n,d=(i+n)/2;return o?(s===i?l=(r-a)/o+(r<a)*6:r===i?l=(a-s)/o+2:l=(s-r)/o+4,o/=d<.5?i+n:2-i-n,l*=60):o=d>0&&d<1?0:l,new $s(l,o,d,t.opacity)}function eL(t,s,r,a){return arguments.length===1?wv(t):new $s(t,s,r,a??1)}function $s(t,s,r,a){this.h=+t,this.s=+s,this.l=+r,this.opacity=+a}px($s,eL,Nv(Ki,{brighter(t){return t=t==null?Yl:Math.pow(Yl,t),new $s(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oi:Math.pow(oi,t),new $s(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*s,n=2*r-a;return new Zt(gd(t>=240?t-240:t+120,n,a),gd(t,n,a),gd(t<120?t+240:t-120,n,a),this.opacity)},clamp(){return new $s(A0(this.h),ul(this.s),ul(this.l),Gl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gl(this.opacity);return`${t===1?"hsl(":"hsla("}${A0(this.h)}, ${ul(this.s)*100}%, ${ul(this.l)*100}%${t===1?")":`, ${t})`}`}}));function A0(t){return t=(t||0)%360,t<0?t+360:t}function ul(t){return Math.max(0,Math.min(1,t||0))}function gd(t,s,r){return(t<60?s+(r-s)*t/60:t<180?r:t<240?s+(r-s)*(240-t)/60:s)*255}const gx=t=>()=>t;function tL(t,s){return function(r){return t+r*s}}function sL(t,s,r){return t=Math.pow(t,r),s=Math.pow(s,r)-t,r=1/r,function(a){return Math.pow(t+a*s,r)}}function rL(t){return(t=+t)==1?_v:function(s,r){return r-s?sL(s,r,t):gx(isNaN(s)?r:s)}}function _v(t,s){var r=s-t;return r?tL(t,r):gx(isNaN(t)?s:t)}const $0=function t(s){var r=rL(s);function a(n,i){var l=r((n=Cu(n)).r,(i=Cu(i)).r),o=r(n.g,i.g),d=r(n.b,i.b),c=_v(n.opacity,i.opacity);return function(u){return n.r=l(u),n.g=o(u),n.b=d(u),n.opacity=c(u),n+""}}return a.gamma=t,a}(1);function aL(t,s){s||(s=[]);var r=t?Math.min(s.length,t.length):0,a=s.slice(),n;return function(i){for(n=0;n<r;++n)a[n]=t[n]*(1-i)+s[n]*i;return a}}function nL(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iL(t,s){var r=s?s.length:0,a=t?Math.min(r,t.length):0,n=new Array(a),i=new Array(r),l;for(l=0;l<a;++l)n[l]=Nn(t[l],s[l]);for(;l<r;++l)i[l]=s[l];return function(o){for(l=0;l<a;++l)i[l]=n[l](o);return i}}function lL(t,s){var r=new Date;return t=+t,s=+s,function(a){return r.setTime(t*(1-a)+s*a),r}}function Ql(t,s){return t=+t,s=+s,function(r){return t*(1-r)+s*r}}function oL(t,s){var r={},a={},n;(t===null||typeof t!="object")&&(t={}),(s===null||typeof s!="object")&&(s={});for(n in s)n in t?r[n]=Nn(t[n],s[n]):a[n]=s[n];return function(i){for(n in r)a[n]=r[n](i);return a}}var Pu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fd=new RegExp(Pu.source,"g");function cL(t){return function(){return t}}function dL(t){return function(s){return t(s)+""}}function uL(t,s){var r=Pu.lastIndex=fd.lastIndex=0,a,n,i,l=-1,o=[],d=[];for(t=t+"",s=s+"";(a=Pu.exec(t))&&(n=fd.exec(s));)(i=n.index)>r&&(i=s.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(a=a[0])===(n=n[0])?o[l]?o[l]+=n:o[++l]=n:(o[++l]=null,d.push({i:l,x:Ql(a,n)})),r=fd.lastIndex;return r<s.length&&(i=s.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?d[0]?dL(d[0].x):cL(s):(s=d.length,function(c){for(var u=0,m;u<s;++u)o[(m=d[u]).i]=m.x(c);return o.join("")})}function Nn(t,s){var r=typeof s,a;return s==null||r==="boolean"?gx(s):(r==="number"?Ql:r==="string"?(a=di(s))?(s=a,$0):uL:s instanceof di?$0:s instanceof Date?lL:nL(s)?aL:Array.isArray(s)?iL:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?oL:Ql)(t,s)}function fx(t,s){return t=+t,s=+s,function(r){return Math.round(t*(1-r)+s*r)}}function mL(t,s){s===void 0&&(s=t,t=Nn);for(var r=0,a=s.length-1,n=s[0],i=new Array(a<0?0:a);r<a;)i[r]=t(n,n=s[++r]);return function(l){var o=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[o](l-o)}}function xL(t){return function(){return t}}function Xl(t){return+t}var O0=[0,1];function Qt(t){return t}function Au(t,s){return(s-=t=+t)?function(r){return(r-t)/s}:xL(isNaN(s)?NaN:.5)}function hL(t,s){var r;return t>s&&(r=t,t=s,s=r),function(a){return Math.max(t,Math.min(s,a))}}function pL(t,s,r){var a=t[0],n=t[1],i=s[0],l=s[1];return n<a?(a=Au(n,a),i=r(l,i)):(a=Au(a,n),i=r(i,l)),function(o){return i(a(o))}}function gL(t,s,r){var a=Math.min(t.length,s.length)-1,n=new Array(a),i=new Array(a),l=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++l<a;)n[l]=Au(t[l],t[l+1]),i[l]=r(s[l],s[l+1]);return function(o){var d=Vi(t,o,1,a)-1;return i[d](n[d](o))}}function Hi(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gc(){var t=O0,s=O0,r=Nn,a,n,i,l=Qt,o,d,c;function u(){var h=Math.min(t.length,s.length);return l!==Qt&&(l=hL(t[0],t[h-1])),o=h>2?gL:pL,d=c=null,m}function m(h){return h==null||isNaN(h=+h)?i:(d||(d=o(t.map(a),s,r)))(a(l(h)))}return m.invert=function(h){return l(n((c||(c=o(s,t.map(a),Ql)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,Xl),u()):t.slice()},m.range=function(h){return arguments.length?(s=Array.from(h),u()):s.slice()},m.rangeRound=function(h){return s=Array.from(h),r=fx,u()},m.clamp=function(h){return arguments.length?(l=h?!0:Qt,u()):l!==Qt},m.interpolate=function(h){return arguments.length?(r=h,u()):r},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return a=h,n=x,u()}}function bx(){return gc()(Qt,Qt)}function fL(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jl(t,s){if((r=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var r,a=t.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+t.slice(r+1)]}function La(t){return t=Jl(Math.abs(t)),t?t[1]:NaN}function bL(t,s){return function(r,a){for(var n=r.length,i=[],l=0,o=t[0],d=0;n>0&&o>0&&(d+o+1>a&&(o=Math.max(1,a-d)),i.push(r.substring(n-=o,n+o)),!((d+=o+1)>a));)o=t[l=(l+1)%t.length];return i.reverse().join(s)}}function yL(t){return function(s){return s.replace(/[0-9]/g,function(r){return t[+r]})}}var vL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ui(t){if(!(s=vL.exec(t)))throw new Error("invalid format: "+t);var s;return new yx({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}ui.prototype=yx.prototype;function yx(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}yx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jL(t){e:for(var s=t.length,r=1,a=-1,n;r<s;++r)switch(t[r]){case".":a=n=r;break;case"0":a===0&&(a=r),n=r;break;default:if(!+t[r])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(n+1):t}var kv;function NL(t,s){var r=Jl(t,s);if(!r)return t+"";var a=r[0],n=r[1],i=n-(kv=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Jl(t,Math.max(0,s+i-1))[0]}function T0(t,s){var r=Jl(t,s);if(!r)return t+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const E0={"%":(t,s)=>(t*100).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fL,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>T0(t*100,s),r:T0,s:NL,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function F0(t){return t}var M0=Array.prototype.map,R0=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wL(t){var s=t.grouping===void 0||t.thousands===void 0?F0:bL(M0.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?F0:yL(M0.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function c(m){m=ui(m);var h=m.fill,x=m.align,p=m.sign,b=m.symbol,v=m.zero,j=m.width,P=m.comma,w=m.precision,C=m.trim,f=m.type;f==="n"?(P=!0,f="g"):E0[f]||(w===void 0&&(w=12),C=!0,f="g"),(v||h==="0"&&x==="=")&&(v=!0,h="0",x="=");var k=b==="$"?r:b==="#"&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",y=b==="$"?a:/[%p]/.test(f)?l:"",F=E0[f],M=/[defgprs%]/.test(f);w=w===void 0?6:/[gprs]/.test(f)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(B){var A=k,L=y,N,R,O;if(f==="c")L=F(B)+L,B="";else{B=+B;var T=B<0||1/B<0;if(B=isNaN(B)?d:F(Math.abs(B),w),C&&(B=jL(B)),T&&+B==0&&p!=="+"&&(T=!1),A=(T?p==="("?p:o:p==="-"||p==="("?"":p)+A,L=(f==="s"?R0[8+kv/3]:"")+L+(T&&p==="("?")":""),M){for(N=-1,R=B.length;++N<R;)if(O=B.charCodeAt(N),48>O||O>57){L=(O===46?n+B.slice(N+1):B.slice(N))+L,B=B.slice(0,N);break}}}P&&!v&&(B=s(B,1/0));var g=A.length+B.length+L.length,D=g<j?new Array(j-g+1).join(h):"";switch(P&&v&&(B=s(D+B,D.length?j-L.length:1/0),D=""),x){case"<":B=A+B+L+D;break;case"=":B=A+D+B+L;break;case"^":B=D.slice(0,g=D.length>>1)+A+B+L+D.slice(g);break;default:B=D+A+B+L;break}return i(B)}return E.toString=function(){return m+""},E}function u(m,h){var x=c((m=ui(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(La(h)/3)))*3,b=Math.pow(10,-p),v=R0[8+p/3];return function(j){return x(b*j)+v}}return{format:c,formatPrefix:u}}var ml,vx,Sv;_L({thousands:",",grouping:[3],currency:["$",""]});function _L(t){return ml=wL(t),vx=ml.format,Sv=ml.formatPrefix,ml}function kL(t){return Math.max(0,-La(Math.abs(t)))}function SL(t,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(La(s)/3)))*3-La(Math.abs(t)))}function CL(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,La(s)-La(t))+1}function Cv(t,s,r,a){var n=ku(t,s,r),i;switch(a=ui(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(s));return a.precision==null&&!isNaN(i=SL(n,l))&&(a.precision=i),Sv(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=CL(n,Math.max(Math.abs(t),Math.abs(s))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=kL(n))&&(a.precision=i-(a.type==="%")*2);break}}return vx(a)}function Ar(t){var s=t.domain;return t.ticks=function(r){var a=s();return wu(a[0],a[a.length-1],r??10)},t.tickFormat=function(r,a){var n=s();return Cv(n[0],n[n.length-1],r??10,a)},t.nice=function(r){r==null&&(r=10);var a=s(),n=0,i=a.length-1,l=a[n],o=a[i],d,c,u=10;for(o<l&&(c=l,l=o,o=c,c=n,n=i,i=c);u-- >0;){if(c=_u(l,o,r),c===d)return a[n]=l,a[i]=o,s(a);if(c>0)l=Math.floor(l/c)*c,o=Math.ceil(o/c)*c;else if(c<0)l=Math.ceil(l*c)/c,o=Math.floor(o*c)/c;else break;d=c}return t},t}function Zl(){var t=bx();return t.copy=function(){return Hi(t,Zl())},ws.apply(t,arguments),Ar(t)}function Pv(t){var s;function r(a){return a==null||isNaN(a=+a)?s:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(t=Array.from(a,Xl),r):t.slice()},r.unknown=function(a){return arguments.length?(s=a,r):s},r.copy=function(){return Pv(t).unknown(s)},t=arguments.length?Array.from(t,Xl):[0,1],Ar(r)}function Av(t,s){t=t.slice();var r=0,a=t.length-1,n=t[r],i=t[a],l;return i<n&&(l=r,r=a,a=l,l=n,n=i,i=l),t[r]=s.floor(n),t[a]=s.ceil(i),t}function D0(t){return Math.log(t)}function L0(t){return Math.exp(t)}function PL(t){return-Math.log(-t)}function AL(t){return-Math.exp(-t)}function $L(t){return isFinite(t)?+("1e"+t):t<0?0:t}function OL(t){return t===10?$L:t===Math.E?Math.exp:s=>Math.pow(t,s)}function TL(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function I0(t){return(s,r)=>-t(-s,r)}function jx(t){const s=t(D0,L0),r=s.domain;let a=10,n,i;function l(){return n=TL(a),i=OL(a),r()[0]<0?(n=I0(n),i=I0(i),t(PL,AL)):t(D0,L0),s}return s.base=function(o){return arguments.length?(a=+o,l()):a},s.domain=function(o){return arguments.length?(r(o),l()):r()},s.ticks=o=>{const d=r();let c=d[0],u=d[d.length-1];const m=u<c;m&&([c,u]=[u,c]);let h=n(c),x=n(u),p,b;const v=o==null?10:+o;let j=[];if(!(a%1)&&x-h<v){if(h=Math.floor(h),x=Math.ceil(x),c>0){for(;h<=x;++h)for(p=1;p<a;++p)if(b=h<0?p/i(-h):p*i(h),!(b<c)){if(b>u)break;j.push(b)}}else for(;h<=x;++h)for(p=a-1;p>=1;--p)if(b=h>0?p/i(-h):p*i(h),!(b<c)){if(b>u)break;j.push(b)}j.length*2<v&&(j=wu(c,u,v))}else j=wu(h,x,Math.min(x-h,v)).map(i);return m?j.reverse():j},s.tickFormat=(o,d)=>{if(o==null&&(o=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=ui(d)).precision==null&&(d.trim=!0),d=vx(d)),o===1/0)return d;const c=Math.max(1,a*o/s.ticks().length);return u=>{let m=u/i(Math.round(n(u)));return m*a<a-.5&&(m*=a),m<=c?d(u):""}},s.nice=()=>r(Av(r(),{floor:o=>i(Math.floor(n(o))),ceil:o=>i(Math.ceil(n(o)))})),s}function $v(){const t=jx(gc()).domain([1,10]);return t.copy=()=>Hi(t,$v()).base(t.base()),ws.apply(t,arguments),t}function q0(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function B0(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function Nx(t){var s=1,r=t(q0(s),B0(s));return r.constant=function(a){return arguments.length?t(q0(s=+a),B0(s)):s},Ar(r)}function Ov(){var t=Nx(gc());return t.copy=function(){return Hi(t,Ov()).constant(t.constant())},ws.apply(t,arguments)}function U0(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function EL(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function FL(t){return t<0?-t*t:t*t}function wx(t){var s=t(Qt,Qt),r=1;function a(){return r===1?t(Qt,Qt):r===.5?t(EL,FL):t(U0(r),U0(1/r))}return s.exponent=function(n){return arguments.length?(r=+n,a()):r},Ar(s)}function _x(){var t=wx(gc());return t.copy=function(){return Hi(t,_x()).exponent(t.exponent())},ws.apply(t,arguments),t}function ML(){return _x.apply(null,arguments).exponent(.5)}function z0(t){return Math.sign(t)*t*t}function RL(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Tv(){var t=bx(),s=[0,1],r=!1,a;function n(i){var l=RL(t(i));return isNaN(l)?a:r?Math.round(l):l}return n.invert=function(i){return t.invert(z0(i))},n.domain=function(i){return arguments.length?(t.domain(i),n):t.domain()},n.range=function(i){return arguments.length?(t.range((s=Array.from(i,Xl)).map(z0)),n):s.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(t.clamp(i),n):t.clamp()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return Tv(t.domain(),s).round(r).clamp(t.clamp()).unknown(a)},ws.apply(n,arguments),Ar(n)}function Ev(){var t=[],s=[],r=[],a;function n(){var l=0,o=Math.max(1,s.length);for(r=new Array(o-1);++l<o;)r[l-1]=BD(t,l/o);return i}function i(l){return l==null||isNaN(l=+l)?a:s[Vi(r,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let o of l)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(_r),n()},i.range=function(l){return arguments.length?(s=Array.from(l),n()):s.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return Ev().domain(t).range(s).unknown(a)},ws.apply(i,arguments)}function Fv(){var t=0,s=1,r=1,a=[.5],n=[0,1],i;function l(d){return d!=null&&d<=d?n[Vi(a,d,0,r)]:i}function o(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*s-(d-r)*t)/(r+1);return l}return l.domain=function(d){return arguments.length?([t,s]=d,t=+t,s=+s,o()):[t,s]},l.range=function(d){return arguments.length?(r=(n=Array.from(d)).length-1,o()):n.slice()},l.invertExtent=function(d){var c=n.indexOf(d);return c<0?[NaN,NaN]:c<1?[t,a[0]]:c>=r?[a[r-1],s]:[a[c-1],a[c]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return a.slice()},l.copy=function(){return Fv().domain([t,s]).range(n).unknown(i)},ws.apply(Ar(l),arguments)}function Mv(){var t=[.5],s=[0,1],r,a=1;function n(i){return i!=null&&i<=i?s[Vi(t,i,0,a)]:r}return n.domain=function(i){return arguments.length?(t=Array.from(i),a=Math.min(t.length,s.length-1),n):t.slice()},n.range=function(i){return arguments.length?(s=Array.from(i),a=Math.min(t.length,s.length-1),n):s.slice()},n.invertExtent=function(i){var l=s.indexOf(i);return[t[l-1],t[l]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return Mv().domain(t).range(s).unknown(r)},ws.apply(n,arguments)}const bd=new Date,yd=new Date;function St(t,s,r,a){function n(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(t(i=new Date(+i)),i),n.ceil=i=>(t(i=new Date(i-1)),s(i,1),t(i),i),n.round=i=>{const l=n(i),o=n.ceil(i);return i-l<o-i?l:o},n.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),n.range=(i,l,o)=>{const d=[];if(i=n.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return d;let c;do d.push(c=new Date(+i)),s(i,o),t(i);while(c<i&&i<l);return d},n.filter=i=>St(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),r&&(n.count=(i,l)=>(bd.setTime(+i),yd.setTime(+l),t(bd),t(yd),Math.floor(r(bd,yd))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(a?l=>a(l)%i===0:l=>n.count(0,l)%i===0):n)),n}const eo=St(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);eo.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?St(s=>{s.setTime(Math.floor(s/t)*t)},(s,r)=>{s.setTime(+s+r*t)},(s,r)=>(r-s)/t):eo);eo.range;const er=1e3,gs=er*60,tr=gs*60,lr=tr*24,kx=lr*7,W0=lr*30,vd=lr*365,Kr=St(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+s*er)},(t,s)=>(s-t)/er,t=>t.getUTCSeconds());Kr.range;const Sx=St(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*er)},(t,s)=>{t.setTime(+t+s*gs)},(t,s)=>(s-t)/gs,t=>t.getMinutes());Sx.range;const Cx=St(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+s*gs)},(t,s)=>(s-t)/gs,t=>t.getUTCMinutes());Cx.range;const Px=St(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*er-t.getMinutes()*gs)},(t,s)=>{t.setTime(+t+s*tr)},(t,s)=>(s-t)/tr,t=>t.getHours());Px.range;const Ax=St(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+s*tr)},(t,s)=>(s-t)/tr,t=>t.getUTCHours());Ax.range;const Yi=St(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*gs)/lr,t=>t.getDate()-1);Yi.range;const fc=St(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/lr,t=>t.getUTCDate()-1);fc.range;const Rv=St(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/lr,t=>Math.floor(t/lr));Rv.range;function oa(t){return St(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(s,r)=>{s.setDate(s.getDate()+r*7)},(s,r)=>(r-s-(r.getTimezoneOffset()-s.getTimezoneOffset())*gs)/kx)}const bc=oa(0),to=oa(1),DL=oa(2),LL=oa(3),Ia=oa(4),IL=oa(5),qL=oa(6);bc.range;to.range;DL.range;LL.range;Ia.range;IL.range;qL.range;function ca(t){return St(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCDate(s.getUTCDate()+r*7)},(s,r)=>(r-s)/kx)}const yc=ca(0),so=ca(1),BL=ca(2),UL=ca(3),qa=ca(4),zL=ca(5),WL=ca(6);yc.range;so.range;BL.range;UL.range;qa.range;zL.range;WL.range;const $x=St(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+(s.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$x.range;const Ox=St(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+(s.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ox.range;const or=St(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());or.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:St(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,r)=>{s.setFullYear(s.getFullYear()+r*t)});or.range;const cr=St(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());cr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:St(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCFullYear(s.getUTCFullYear()+r*t)});cr.range;function Dv(t,s,r,a,n,i){const l=[[Kr,1,er],[Kr,5,5*er],[Kr,15,15*er],[Kr,30,30*er],[i,1,gs],[i,5,5*gs],[i,15,15*gs],[i,30,30*gs],[n,1,tr],[n,3,3*tr],[n,6,6*tr],[n,12,12*tr],[a,1,lr],[a,2,2*lr],[r,1,kx],[s,1,W0],[s,3,3*W0],[t,1,vd]];function o(c,u,m){const h=u<c;h&&([c,u]=[u,c]);const x=m&&typeof m.range=="function"?m:d(c,u,m),p=x?x.range(c,+u+1):[];return h?p.reverse():p}function d(c,u,m){const h=Math.abs(u-c)/m,x=xx(([,,v])=>v).right(l,h);if(x===l.length)return t.every(ku(c/vd,u/vd,m));if(x===0)return eo.every(Math.max(ku(c,u,m),1));const[p,b]=l[h/l[x-1][2]<l[x][2]/h?x-1:x];return p.every(b)}return[o,d]}const[VL,KL]=Dv(cr,Ox,yc,Rv,Ax,Cx),[HL,YL]=Dv(or,$x,bc,Yi,Px,Sx);function jd(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nd(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function En(t,s,r){return{y:t,m:s,d:r,H:0,M:0,S:0,L:0}}function GL(t){var s=t.dateTime,r=t.date,a=t.time,n=t.periods,i=t.days,l=t.shortDays,o=t.months,d=t.shortMonths,c=Fn(n),u=Mn(n),m=Fn(i),h=Mn(i),x=Fn(l),p=Mn(l),b=Fn(o),v=Mn(o),j=Fn(d),P=Mn(d),w={a:T,A:g,b:D,B:S,c:null,d:Q0,e:Q0,f:bI,g:PI,G:$I,H:pI,I:gI,j:fI,L:Lv,m:yI,M:vI,p:$,q:I,Q:Z0,s:eg,S:jI,u:NI,U:wI,V:_I,w:kI,W:SI,x:null,X:null,y:CI,Y:AI,Z:OI,"%":J0},C={a:K,A:U,b:q,B:z,c:null,d:X0,e:X0,f:MI,g:VI,G:HI,H:TI,I:EI,j:FI,L:qv,m:RI,M:DI,p:Y,q:se,Q:Z0,s:eg,S:LI,u:II,U:qI,V:BI,w:UI,W:zI,x:null,X:null,y:WI,Y:KI,Z:YI,"%":J0},f={a:E,A:B,b:A,B:L,c:N,d:Y0,e:Y0,f:uI,g:H0,G:K0,H:G0,I:G0,j:lI,L:dI,m:iI,M:oI,p:M,q:nI,Q:xI,s:hI,S:cI,u:eI,U:tI,V:sI,w:ZL,W:rI,x:R,X:O,y:H0,Y:K0,Z:aI,"%":mI};w.x=k(r,w),w.X=k(a,w),w.c=k(s,w),C.x=k(r,C),C.X=k(a,C),C.c=k(s,C);function k(J,te){return function(V){var W=[],X=-1,H=0,ee=J.length,ue,be,ke;for(V instanceof Date||(V=new Date(+V));++X<ee;)J.charCodeAt(X)===37&&(W.push(J.slice(H,X)),(be=V0[ue=J.charAt(++X)])!=null?ue=J.charAt(++X):be=ue==="e"?" ":"0",(ke=te[ue])&&(ue=ke(V,be)),W.push(ue),H=X+1);return W.push(J.slice(H,X)),W.join("")}}function y(J,te){return function(V){var W=En(1900,void 0,1),X=F(W,J,V+="",0),H,ee;if(X!=V.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(te&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(H=Nd(En(W.y,0,1)),ee=H.getUTCDay(),H=ee>4||ee===0?so.ceil(H):so(H),H=fc.offset(H,(W.V-1)*7),W.y=H.getUTCFullYear(),W.m=H.getUTCMonth(),W.d=H.getUTCDate()+(W.w+6)%7):(H=jd(En(W.y,0,1)),ee=H.getDay(),H=ee>4||ee===0?to.ceil(H):to(H),H=Yi.offset(H,(W.V-1)*7),W.y=H.getFullYear(),W.m=H.getMonth(),W.d=H.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),ee="Z"in W?Nd(En(W.y,0,1)).getUTCDay():jd(En(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(ee+5)%7:W.w+W.U*7-(ee+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,Nd(W)):jd(W)}}function F(J,te,V,W){for(var X=0,H=te.length,ee=V.length,ue,be;X<H;){if(W>=ee)return-1;if(ue=te.charCodeAt(X++),ue===37){if(ue=te.charAt(X++),be=f[ue in V0?te.charAt(X++):ue],!be||(W=be(J,V,W))<0)return-1}else if(ue!=V.charCodeAt(W++))return-1}return W}function M(J,te,V){var W=c.exec(te.slice(V));return W?(J.p=u.get(W[0].toLowerCase()),V+W[0].length):-1}function E(J,te,V){var W=x.exec(te.slice(V));return W?(J.w=p.get(W[0].toLowerCase()),V+W[0].length):-1}function B(J,te,V){var W=m.exec(te.slice(V));return W?(J.w=h.get(W[0].toLowerCase()),V+W[0].length):-1}function A(J,te,V){var W=j.exec(te.slice(V));return W?(J.m=P.get(W[0].toLowerCase()),V+W[0].length):-1}function L(J,te,V){var W=b.exec(te.slice(V));return W?(J.m=v.get(W[0].toLowerCase()),V+W[0].length):-1}function N(J,te,V){return F(J,s,te,V)}function R(J,te,V){return F(J,r,te,V)}function O(J,te,V){return F(J,a,te,V)}function T(J){return l[J.getDay()]}function g(J){return i[J.getDay()]}function D(J){return d[J.getMonth()]}function S(J){return o[J.getMonth()]}function $(J){return n[+(J.getHours()>=12)]}function I(J){return 1+~~(J.getMonth()/3)}function K(J){return l[J.getUTCDay()]}function U(J){return i[J.getUTCDay()]}function q(J){return d[J.getUTCMonth()]}function z(J){return o[J.getUTCMonth()]}function Y(J){return n[+(J.getUTCHours()>=12)]}function se(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var te=k(J+="",w);return te.toString=function(){return J},te},parse:function(J){var te=y(J+="",!1);return te.toString=function(){return J},te},utcFormat:function(J){var te=k(J+="",C);return te.toString=function(){return J},te},utcParse:function(J){var te=y(J+="",!0);return te.toString=function(){return J},te}}}var V0={"-":"",_:" ",0:"0"},$t=/^\s*\d+/,QL=/^%/,XL=/[\\^$*+?|[\]().{}]/g;function Ue(t,s,r){var a=t<0?"-":"",n=(a?-t:t)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(s)+n:n)}function JL(t){return t.replace(XL,"\\$&")}function Fn(t){return new RegExp("^(?:"+t.map(JL).join("|")+")","i")}function Mn(t){return new Map(t.map((s,r)=>[s.toLowerCase(),r]))}function ZL(t,s,r){var a=$t.exec(s.slice(r,r+1));return a?(t.w=+a[0],r+a[0].length):-1}function eI(t,s,r){var a=$t.exec(s.slice(r,r+1));return a?(t.u=+a[0],r+a[0].length):-1}function tI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.U=+a[0],r+a[0].length):-1}function sI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.V=+a[0],r+a[0].length):-1}function rI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.W=+a[0],r+a[0].length):-1}function K0(t,s,r){var a=$t.exec(s.slice(r,r+4));return a?(t.y=+a[0],r+a[0].length):-1}function H0(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function aI(t,s,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(r,r+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function nI(t,s,r){var a=$t.exec(s.slice(r,r+1));return a?(t.q=a[0]*3-3,r+a[0].length):-1}function iI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.m=a[0]-1,r+a[0].length):-1}function Y0(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.d=+a[0],r+a[0].length):-1}function lI(t,s,r){var a=$t.exec(s.slice(r,r+3));return a?(t.m=0,t.d=+a[0],r+a[0].length):-1}function G0(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.H=+a[0],r+a[0].length):-1}function oI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.M=+a[0],r+a[0].length):-1}function cI(t,s,r){var a=$t.exec(s.slice(r,r+2));return a?(t.S=+a[0],r+a[0].length):-1}function dI(t,s,r){var a=$t.exec(s.slice(r,r+3));return a?(t.L=+a[0],r+a[0].length):-1}function uI(t,s,r){var a=$t.exec(s.slice(r,r+6));return a?(t.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function mI(t,s,r){var a=QL.exec(s.slice(r,r+1));return a?r+a[0].length:-1}function xI(t,s,r){var a=$t.exec(s.slice(r));return a?(t.Q=+a[0],r+a[0].length):-1}function hI(t,s,r){var a=$t.exec(s.slice(r));return a?(t.s=+a[0],r+a[0].length):-1}function Q0(t,s){return Ue(t.getDate(),s,2)}function pI(t,s){return Ue(t.getHours(),s,2)}function gI(t,s){return Ue(t.getHours()%12||12,s,2)}function fI(t,s){return Ue(1+Yi.count(or(t),t),s,3)}function Lv(t,s){return Ue(t.getMilliseconds(),s,3)}function bI(t,s){return Lv(t,s)+"000"}function yI(t,s){return Ue(t.getMonth()+1,s,2)}function vI(t,s){return Ue(t.getMinutes(),s,2)}function jI(t,s){return Ue(t.getSeconds(),s,2)}function NI(t){var s=t.getDay();return s===0?7:s}function wI(t,s){return Ue(bc.count(or(t)-1,t),s,2)}function Iv(t){var s=t.getDay();return s>=4||s===0?Ia(t):Ia.ceil(t)}function _I(t,s){return t=Iv(t),Ue(Ia.count(or(t),t)+(or(t).getDay()===4),s,2)}function kI(t){return t.getDay()}function SI(t,s){return Ue(to.count(or(t)-1,t),s,2)}function CI(t,s){return Ue(t.getFullYear()%100,s,2)}function PI(t,s){return t=Iv(t),Ue(t.getFullYear()%100,s,2)}function AI(t,s){return Ue(t.getFullYear()%1e4,s,4)}function $I(t,s){var r=t.getDay();return t=r>=4||r===0?Ia(t):Ia.ceil(t),Ue(t.getFullYear()%1e4,s,4)}function OI(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+Ue(s/60|0,"0",2)+Ue(s%60,"0",2)}function X0(t,s){return Ue(t.getUTCDate(),s,2)}function TI(t,s){return Ue(t.getUTCHours(),s,2)}function EI(t,s){return Ue(t.getUTCHours()%12||12,s,2)}function FI(t,s){return Ue(1+fc.count(cr(t),t),s,3)}function qv(t,s){return Ue(t.getUTCMilliseconds(),s,3)}function MI(t,s){return qv(t,s)+"000"}function RI(t,s){return Ue(t.getUTCMonth()+1,s,2)}function DI(t,s){return Ue(t.getUTCMinutes(),s,2)}function LI(t,s){return Ue(t.getUTCSeconds(),s,2)}function II(t){var s=t.getUTCDay();return s===0?7:s}function qI(t,s){return Ue(yc.count(cr(t)-1,t),s,2)}function Bv(t){var s=t.getUTCDay();return s>=4||s===0?qa(t):qa.ceil(t)}function BI(t,s){return t=Bv(t),Ue(qa.count(cr(t),t)+(cr(t).getUTCDay()===4),s,2)}function UI(t){return t.getUTCDay()}function zI(t,s){return Ue(so.count(cr(t)-1,t),s,2)}function WI(t,s){return Ue(t.getUTCFullYear()%100,s,2)}function VI(t,s){return t=Bv(t),Ue(t.getUTCFullYear()%100,s,2)}function KI(t,s){return Ue(t.getUTCFullYear()%1e4,s,4)}function HI(t,s){var r=t.getUTCDay();return t=r>=4||r===0?qa(t):qa.ceil(t),Ue(t.getUTCFullYear()%1e4,s,4)}function YI(){return"+0000"}function J0(){return"%"}function Z0(t){return+t}function eg(t){return Math.floor(+t/1e3)}var ha,Uv,zv;GI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GI(t){return ha=GL(t),Uv=ha.format,ha.parse,zv=ha.utcFormat,ha.utcParse,ha}function QI(t){return new Date(t)}function XI(t){return t instanceof Date?+t:+new Date(+t)}function Tx(t,s,r,a,n,i,l,o,d,c){var u=bx(),m=u.invert,h=u.domain,x=c(".%L"),p=c(":%S"),b=c("%I:%M"),v=c("%I %p"),j=c("%a %d"),P=c("%b %d"),w=c("%B"),C=c("%Y");function f(k){return(d(k)<k?x:o(k)<k?p:l(k)<k?b:i(k)<k?v:a(k)<k?n(k)<k?j:P:r(k)<k?w:C)(k)}return u.invert=function(k){return new Date(m(k))},u.domain=function(k){return arguments.length?h(Array.from(k,XI)):h().map(QI)},u.ticks=function(k){var y=h();return t(y[0],y[y.length-1],k??10)},u.tickFormat=function(k,y){return y==null?f:c(y)},u.nice=function(k){var y=h();return(!k||typeof k.range!="function")&&(k=s(y[0],y[y.length-1],k??10)),k?h(Av(y,k)):u},u.copy=function(){return Hi(u,Tx(t,s,r,a,n,i,l,o,d,c))},u}function JI(){return ws.apply(Tx(HL,YL,or,$x,bc,Yi,Px,Sx,Kr,Uv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZI(){return ws.apply(Tx(VL,KL,cr,Ox,yc,fc,Ax,Cx,Kr,zv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vc(){var t=0,s=1,r,a,n,i,l=Qt,o=!1,d;function c(m){return m==null||isNaN(m=+m)?d:l(n===0?.5:(m=(i(m)-r)*n,o?Math.max(0,Math.min(1,m)):m))}c.domain=function(m){return arguments.length?([t,s]=m,r=i(t=+t),a=i(s=+s),n=r===a?0:1/(a-r),c):[t,s]},c.clamp=function(m){return arguments.length?(o=!!m,c):o},c.interpolator=function(m){return arguments.length?(l=m,c):l};function u(m){return function(h){var x,p;return arguments.length?([x,p]=h,l=m(x,p),c):[l(0),l(1)]}}return c.range=u(Nn),c.rangeRound=u(fx),c.unknown=function(m){return arguments.length?(d=m,c):d},function(m){return i=m,r=m(t),a=m(s),n=r===a?0:1/(a-r),c}}function $r(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Wv(){var t=Ar(vc()(Qt));return t.copy=function(){return $r(t,Wv())},hr.apply(t,arguments)}function Vv(){var t=jx(vc()).domain([1,10]);return t.copy=function(){return $r(t,Vv()).base(t.base())},hr.apply(t,arguments)}function Kv(){var t=Nx(vc());return t.copy=function(){return $r(t,Kv()).constant(t.constant())},hr.apply(t,arguments)}function Ex(){var t=wx(vc());return t.copy=function(){return $r(t,Ex()).exponent(t.exponent())},hr.apply(t,arguments)}function eq(){return Ex.apply(null,arguments).exponent(.5)}function Hv(){var t=[],s=Qt;function r(a){if(a!=null&&!isNaN(a=+a))return s((Vi(t,a,1)-1)/(t.length-1))}return r.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let n of a)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(_r),r},r.interpolator=function(a){return arguments.length?(s=a,r):s},r.range=function(){return t.map((a,n)=>s(n/(t.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(n,i)=>qD(t,i/a))},r.copy=function(){return Hv(s).domain(t)},hr.apply(r,arguments)}function jc(){var t=0,s=.5,r=1,a=1,n,i,l,o,d,c=Qt,u,m=!1,h;function x(b){return isNaN(b=+b)?h:(b=.5+((b=+u(b))-i)*(a*b<a*i?o:d),c(m?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([t,s,r]=b,n=u(t=+t),i=u(s=+s),l=u(r=+r),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),a=i<n?-1:1,x):[t,s,r]},x.clamp=function(b){return arguments.length?(m=!!b,x):m},x.interpolator=function(b){return arguments.length?(c=b,x):c};function p(b){return function(v){var j,P,w;return arguments.length?([j,P,w]=v,c=mL(b,[j,P,w]),x):[c(0),c(.5),c(1)]}}return x.range=p(Nn),x.rangeRound=p(fx),x.unknown=function(b){return arguments.length?(h=b,x):h},function(b){return u=b,n=b(t),i=b(s),l=b(r),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),a=i<n?-1:1,x}}function Yv(){var t=Ar(jc()(Qt));return t.copy=function(){return $r(t,Yv())},hr.apply(t,arguments)}function Gv(){var t=jx(jc()).domain([.1,1,10]);return t.copy=function(){return $r(t,Gv()).base(t.base())},hr.apply(t,arguments)}function Qv(){var t=Nx(jc());return t.copy=function(){return $r(t,Qv()).constant(t.constant())},hr.apply(t,arguments)}function Fx(){var t=wx(jc());return t.copy=function(){return $r(t,Fx()).exponent(t.exponent())},hr.apply(t,arguments)}function tq(){return Fx.apply(null,arguments).exponent(.5)}const tg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:li,scaleDiverging:Yv,scaleDivergingLog:Gv,scaleDivergingPow:Fx,scaleDivergingSqrt:tq,scaleDivergingSymlog:Qv,scaleIdentity:Pv,scaleImplicit:Su,scaleLinear:Zl,scaleLog:$v,scaleOrdinal:hx,scalePoint:Kn,scalePow:_x,scaleQuantile:Ev,scaleQuantize:Fv,scaleRadial:Tv,scaleSequential:Wv,scaleSequentialLog:Vv,scaleSequentialPow:Ex,scaleSequentialQuantile:Hv,scaleSequentialSqrt:eq,scaleSequentialSymlog:Kv,scaleSqrt:ML,scaleSymlog:Ov,scaleThreshold:Mv,scaleTime:JI,scaleUtc:ZI,tickFormat:Cv},Symbol.toStringTag,{value:"Module"}));var sq=mn;function rq(t,s,r){for(var a=-1,n=t.length;++a<n;){var i=t[a],l=s(i);if(l!=null&&(o===void 0?l===l&&!sq(l):r(l,o)))var o=l,d=i}return d}var Nc=rq;function aq(t,s){return t>s}var Xv=aq,nq=Nc,iq=Xv,lq=jn;function oq(t){return t&&t.length?nq(t,lq,iq):void 0}var cq=oq;const vr=Je(cq);function dq(t,s){return t<s}var Jv=dq,uq=Nc,mq=Jv,xq=jn;function hq(t){return t&&t.length?uq(t,xq,mq):void 0}var pq=hq;const wc=Je(pq);var gq=Ym,fq=Ys,bq=iv,yq=rs;function vq(t,s){var r=yq(t)?gq:bq;return r(t,fq(s))}var jq=vq,Nq=av,wq=jq;function _q(t,s){return Nq(wq(t,s),1)}var kq=_q;const Sq=Je(kq);var Cq=cx;function Pq(t,s){return Cq(t,s)}var Aq=Pq;const Ba=Je(Aq);var wn=1e9,$q={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Rx,it=!0,bs="[DecimalError] ",Jr=bs+"Invalid argument: ",Mx=bs+"Exponent out of range: ",_n=Math.floor,qr=Math.pow,Oq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,is,Ct=1e7,nt=7,Zv=9007199254740991,ro=_n(Zv/nt),ye={};ye.absoluteValue=ye.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ye.comparedTo=ye.cmp=function(t){var s,r,a,n,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(a=i.d.length,n=t.d.length,s=0,r=a<n?a:n;s<r;++s)if(i.d[s]!==t.d[s])return i.d[s]>t.d[s]^i.s<0?1:-1;return a===n?0:a>n^i.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var t=this,s=t.d.length-1,r=(s-t.e)*nt;if(s=t.d[s],s)for(;s%10==0;s/=10)r--;return r<0?0:r};ye.dividedBy=ye.div=function(t){return ar(this,new this.constructor(t))};ye.dividedToIntegerBy=ye.idiv=function(t){var s=this,r=s.constructor;return Ze(ar(s,new r(t),0,1),r.precision)};ye.equals=ye.eq=function(t){return!this.cmp(t)};ye.exponent=function(){return ft(this)};ye.greaterThan=ye.gt=function(t){return this.cmp(t)>0};ye.greaterThanOrEqualTo=ye.gte=function(t){return this.cmp(t)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(t){return this.cmp(t)<0};ye.lessThanOrEqualTo=ye.lte=function(t){return this.cmp(t)<1};ye.logarithm=ye.log=function(t){var s,r=this,a=r.constructor,n=a.precision,i=n+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(is))throw Error(bs+"NaN");if(r.s<1)throw Error(bs+(r.s?"NaN":"-Infinity"));return r.eq(is)?new a(0):(it=!1,s=ar(mi(r,i),mi(t,i),i),it=!0,Ze(s,n))};ye.minus=ye.sub=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?sj(s,t):ej(s,(t.s=-t.s,t))};ye.modulo=ye.mod=function(t){var s,r=this,a=r.constructor,n=a.precision;if(t=new a(t),!t.s)throw Error(bs+"NaN");return r.s?(it=!1,s=ar(r,t,0,1).times(t),it=!0,r.minus(s)):Ze(new a(r),n)};ye.naturalExponential=ye.exp=function(){return tj(this)};ye.naturalLogarithm=ye.ln=function(){return mi(this)};ye.negated=ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ye.plus=ye.add=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?ej(s,t):sj(s,(t.s=-t.s,t))};ye.precision=ye.sd=function(t){var s,r,a,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Jr+t);if(s=ft(n)+1,a=n.d.length-1,r=a*nt+1,a=n.d[a],a){for(;a%10==0;a/=10)r--;for(a=n.d[0];a>=10;a/=10)r++}return t&&s>r?s:r};ye.squareRoot=ye.sqrt=function(){var t,s,r,a,n,i,l,o=this,d=o.constructor;if(o.s<1){if(!o.s)return new d(0);throw Error(bs+"NaN")}for(t=ft(o),it=!1,n=Math.sqrt(+o),n==0||n==1/0?(s=Ds(o.d),(s.length+t)%2==0&&(s+="0"),n=Math.sqrt(s),t=_n((t+1)/2)-(t<0||t%2),n==1/0?s="5e"+t:(s=n.toExponential(),s=s.slice(0,s.indexOf("e")+1)+t),a=new d(s)):a=new d(n.toString()),r=d.precision,n=l=r+3;;)if(i=a,a=i.plus(ar(o,i,l+2)).times(.5),Ds(i.d).slice(0,l)===(s=Ds(a.d)).slice(0,l)){if(s=s.slice(l-3,l+1),n==l&&s=="4999"){if(Ze(i,r+1,0),i.times(i).eq(o)){a=i;break}}else if(s!="9999")break;l+=4}return it=!0,Ze(a,r)};ye.times=ye.mul=function(t){var s,r,a,n,i,l,o,d,c,u=this,m=u.constructor,h=u.d,x=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,r=u.e+t.e,d=h.length,c=x.length,d<c&&(i=h,h=x,x=i,l=d,d=c,c=l),i=[],l=d+c,a=l;a--;)i.push(0);for(a=c;--a>=0;){for(s=0,n=d+a;n>a;)o=i[n]+x[a]*h[n-a-1]+s,i[n--]=o%Ct|0,s=o/Ct|0;i[n]=(i[n]+s)%Ct|0}for(;!i[--l];)i.pop();return s?++r:i.shift(),t.d=i,t.e=r,it?Ze(t,m.precision):t};ye.toDecimalPlaces=ye.todp=function(t,s){var r=this,a=r.constructor;return r=new a(r),t===void 0?r:(Vs(t,0,wn),s===void 0?s=a.rounding:Vs(s,0,8),Ze(r,t+ft(r)+1,s))};ye.toExponential=function(t,s){var r,a=this,n=a.constructor;return t===void 0?r=ra(a,!0):(Vs(t,0,wn),s===void 0?s=n.rounding:Vs(s,0,8),a=Ze(new n(a),t+1,s),r=ra(a,!0,t+1)),r};ye.toFixed=function(t,s){var r,a,n=this,i=n.constructor;return t===void 0?ra(n):(Vs(t,0,wn),s===void 0?s=i.rounding:Vs(s,0,8),a=Ze(new i(n),t+ft(n)+1,s),r=ra(a.abs(),!1,t+ft(a)+1),n.isneg()&&!n.isZero()?"-"+r:r)};ye.toInteger=ye.toint=function(){var t=this,s=t.constructor;return Ze(new s(t),ft(t)+1,s.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(t){var s,r,a,n,i,l,o=this,d=o.constructor,c=12,u=+(t=new d(t));if(!t.s)return new d(is);if(o=new d(o),!o.s){if(t.s<1)throw Error(bs+"Infinity");return o}if(o.eq(is))return o;if(a=d.precision,t.eq(is))return Ze(o,a);if(s=t.e,r=t.d.length-1,l=s>=r,i=o.s,l){if((r=u<0?-u:u)<=Zv){for(n=new d(is),s=Math.ceil(a/nt+4),it=!1;r%2&&(n=n.times(o),rg(n.d,s)),r=_n(r/2),r!==0;)o=o.times(o),rg(o.d,s);return it=!0,t.s<0?new d(is).div(n):Ze(n,a)}}else if(i<0)throw Error(bs+"NaN");return i=i<0&&t.d[Math.max(s,r)]&1?-1:1,o.s=1,it=!1,n=t.times(mi(o,a+c)),it=!0,n=tj(n),n.s=i,n};ye.toPrecision=function(t,s){var r,a,n=this,i=n.constructor;return t===void 0?(r=ft(n),a=ra(n,r<=i.toExpNeg||r>=i.toExpPos)):(Vs(t,1,wn),s===void 0?s=i.rounding:Vs(s,0,8),n=Ze(new i(n),t,s),r=ft(n),a=ra(n,t<=r||r<=i.toExpNeg,t)),a};ye.toSignificantDigits=ye.tosd=function(t,s){var r=this,a=r.constructor;return t===void 0?(t=a.precision,s=a.rounding):(Vs(t,1,wn),s===void 0?s=a.rounding:Vs(s,0,8)),Ze(new a(r),t,s)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,s=ft(t),r=t.constructor;return ra(t,s<=r.toExpNeg||s>=r.toExpPos)};function ej(t,s){var r,a,n,i,l,o,d,c,u=t.constructor,m=u.precision;if(!t.s||!s.s)return s.s||(s=new u(t)),it?Ze(s,m):s;if(d=t.d,c=s.d,l=t.e,n=s.e,d=d.slice(),i=l-n,i){for(i<0?(a=d,i=-i,o=c.length):(a=c,n=l,o=d.length),l=Math.ceil(m/nt),o=l>o?l+1:o+1,i>o&&(i=o,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(o=d.length,i=c.length,o-i<0&&(i=o,a=c,c=d,d=a),r=0;i;)r=(d[--i]=d[i]+c[i]+r)/Ct|0,d[i]%=Ct;for(r&&(d.unshift(r),++n),o=d.length;d[--o]==0;)d.pop();return s.d=d,s.e=n,it?Ze(s,m):s}function Vs(t,s,r){if(t!==~~t||t<s||t>r)throw Error(Jr+t)}function Ds(t){var s,r,a,n=t.length-1,i="",l=t[0];if(n>0){for(i+=l,s=1;s<n;s++)a=t[s]+"",r=nt-a.length,r&&(i+=br(r)),i+=a;l=t[s],a=l+"",r=nt-a.length,r&&(i+=br(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var ar=function(){function t(a,n){var i,l=0,o=a.length;for(a=a.slice();o--;)i=a[o]*n+l,a[o]=i%Ct|0,l=i/Ct|0;return l&&a.unshift(l),a}function s(a,n,i,l){var o,d;if(i!=l)d=i>l?1:-1;else for(o=d=0;o<i;o++)if(a[o]!=n[o]){d=a[o]>n[o]?1:-1;break}return d}function r(a,n,i){for(var l=0;i--;)a[i]-=l,l=a[i]<n[i]?1:0,a[i]=l*Ct+a[i]-n[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,i,l){var o,d,c,u,m,h,x,p,b,v,j,P,w,C,f,k,y,F,M=a.constructor,E=a.s==n.s?1:-1,B=a.d,A=n.d;if(!a.s)return new M(a);if(!n.s)throw Error(bs+"Division by zero");for(d=a.e-n.e,y=A.length,f=B.length,x=new M(E),p=x.d=[],c=0;A[c]==(B[c]||0);)++c;if(A[c]>(B[c]||0)&&--d,i==null?P=i=M.precision:l?P=i+(ft(a)-ft(n))+1:P=i,P<0)return new M(0);if(P=P/nt+2|0,c=0,y==1)for(u=0,A=A[0],P++;(c<f||u)&&P--;c++)w=u*Ct+(B[c]||0),p[c]=w/A|0,u=w%A|0;else{for(u=Ct/(A[0]+1)|0,u>1&&(A=t(A,u),B=t(B,u),y=A.length,f=B.length),C=y,b=B.slice(0,y),v=b.length;v<y;)b[v++]=0;F=A.slice(),F.unshift(0),k=A[0],A[1]>=Ct/2&&++k;do u=0,o=s(A,b,y,v),o<0?(j=b[0],y!=v&&(j=j*Ct+(b[1]||0)),u=j/k|0,u>1?(u>=Ct&&(u=Ct-1),m=t(A,u),h=m.length,v=b.length,o=s(m,b,h,v),o==1&&(u--,r(m,y<h?F:A,h))):(u==0&&(o=u=1),m=A.slice()),h=m.length,h<v&&m.unshift(0),r(b,m,v),o==-1&&(v=b.length,o=s(A,b,y,v),o<1&&(u++,r(b,y<v?F:A,v))),v=b.length):o===0&&(u++,b=[0]),p[c++]=u,o&&b[0]?b[v++]=B[C]||0:(b=[B[C]],v=1);while((C++<f||b[0]!==void 0)&&P--)}return p[0]||p.shift(),x.e=d,Ze(x,l?i+ft(x)+1:i)}}();function tj(t,s){var r,a,n,i,l,o,d=0,c=0,u=t.constructor,m=u.precision;if(ft(t)>16)throw Error(Mx+ft(t));if(!t.s)return new u(is);for(it=!1,o=m,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),c+=5;for(a=Math.log(qr(2,c))/Math.LN10*2+5|0,o+=a,r=n=i=new u(is),u.precision=o;;){if(n=Ze(n.times(t),o),r=r.times(++d),l=i.plus(ar(n,r,o)),Ds(l.d).slice(0,o)===Ds(i.d).slice(0,o)){for(;c--;)i=Ze(i.times(i),o);return u.precision=m,s==null?(it=!0,Ze(i,m)):i}i=l}}function ft(t){for(var s=t.e*nt,r=t.d[0];r>=10;r/=10)s++;return s}function wd(t,s,r){if(s>t.LN10.sd())throw it=!0,r&&(t.precision=r),Error(bs+"LN10 precision limit exceeded");return Ze(new t(t.LN10),s)}function br(t){for(var s="";t--;)s+="0";return s}function mi(t,s){var r,a,n,i,l,o,d,c,u,m=1,h=10,x=t,p=x.d,b=x.constructor,v=b.precision;if(x.s<1)throw Error(bs+(x.s?"NaN":"-Infinity"));if(x.eq(is))return new b(0);if(s==null?(it=!1,c=v):c=s,x.eq(10))return s==null&&(it=!0),wd(b,c);if(c+=h,b.precision=c,r=Ds(p),a=r.charAt(0),i=ft(x),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(t),r=Ds(x.d),a=r.charAt(0),m++;i=ft(x),a>1?(x=new b("0."+r),i++):x=new b(a+"."+r.slice(1))}else return d=wd(b,c+2,v).times(i+""),x=mi(new b(a+"."+r.slice(1)),c-h).plus(d),b.precision=v,s==null?(it=!0,Ze(x,v)):x;for(o=l=x=ar(x.minus(is),x.plus(is),c),u=Ze(x.times(x),c),n=3;;){if(l=Ze(l.times(u),c),d=o.plus(ar(l,new b(n),c)),Ds(d.d).slice(0,c)===Ds(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(wd(b,c+2,v).times(i+""))),o=ar(o,new b(m),c),b.precision=v,s==null?(it=!0,Ze(o,v)):o;o=d,n+=2}}function sg(t,s){var r,a,n;for((r=s.indexOf("."))>-1&&(s=s.replace(".","")),(a=s.search(/e/i))>0?(r<0&&(r=a),r+=+s.slice(a+1),s=s.substring(0,a)):r<0&&(r=s.length),a=0;s.charCodeAt(a)===48;)++a;for(n=s.length;s.charCodeAt(n-1)===48;)--n;if(s=s.slice(a,n),s){if(n-=a,r=r-a-1,t.e=_n(r/nt),t.d=[],a=(r+1)%nt,r<0&&(a+=nt),a<n){for(a&&t.d.push(+s.slice(0,a)),n-=nt;a<n;)t.d.push(+s.slice(a,a+=nt));s=s.slice(a),a=nt-s.length}else a-=n;for(;a--;)s+="0";if(t.d.push(+s),it&&(t.e>ro||t.e<-ro))throw Error(Mx+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ze(t,s,r){var a,n,i,l,o,d,c,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(a=s-l,a<0)a+=nt,n=s,c=m[u=0];else{if(u=Math.ceil((a+1)/nt),i=m.length,u>=i)return t;for(c=i=m[u],l=1;i>=10;i/=10)l++;a%=nt,n=a-nt+l}if(r!==void 0&&(i=qr(10,l-n-1),o=c/i%10|0,d=s<0||m[u+1]!==void 0||c%i,d=r<4?(o||d)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||d||r==6&&(a>0?n>0?c/qr(10,l-n):0:m[u-1])%10&1||r==(t.s<0?8:7))),s<1||!m[0])return d?(i=ft(t),m.length=1,s=s-i-1,m[0]=qr(10,(nt-s%nt)%nt),t.e=_n(-s/nt)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(a==0?(m.length=u,i=1,u--):(m.length=u+1,i=qr(10,nt-a),m[u]=n>0?(c/qr(10,l-n)%qr(10,n)|0)*i:0),d)for(;;)if(u==0){(m[0]+=i)==Ct&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=Ct)break;m[u--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(it&&(t.e>ro||t.e<-ro))throw Error(Mx+ft(t));return t}function sj(t,s){var r,a,n,i,l,o,d,c,u,m,h=t.constructor,x=h.precision;if(!t.s||!s.s)return s.s?s.s=-s.s:s=new h(t),it?Ze(s,x):s;if(d=t.d,m=s.d,a=s.e,c=t.e,d=d.slice(),l=c-a,l){for(u=l<0,u?(r=d,l=-l,o=m.length):(r=m,a=c,o=d.length),n=Math.max(Math.ceil(x/nt),o)+2,l>n&&(l=n,r.length=1),r.reverse(),n=l;n--;)r.push(0);r.reverse()}else{for(n=d.length,o=m.length,u=n<o,u&&(o=n),n=0;n<o;n++)if(d[n]!=m[n]){u=d[n]<m[n];break}l=0}for(u&&(r=d,d=m,m=r,s.s=-s.s),o=d.length,n=m.length-o;n>0;--n)d[o++]=0;for(n=m.length;n>l;){if(d[--n]<m[n]){for(i=n;i&&d[--i]===0;)d[i]=Ct-1;--d[i],d[n]+=Ct}d[n]-=m[n]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(s.d=d,s.e=a,it?Ze(s,x):s):new h(0)}function ra(t,s,r){var a,n=ft(t),i=Ds(t.d),l=i.length;return s?(r&&(a=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+br(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+br(-n-1)+i,r&&(a=r-l)>0&&(i+=br(a))):n>=l?(i+=br(n+1-l),r&&(a=r-n-1)>0&&(i=i+"."+br(a))):((a=n+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-l)>0&&(n+1===l&&(i+="."),i+=br(a))),t.s<0?"-"+i:i}function rg(t,s){if(t.length>s)return t.length=s,!0}function rj(t){var s,r,a;function n(i){var l=this;if(!(l instanceof n))return new n(i);if(l.constructor=n,i instanceof n){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Jr+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return sg(l,i.toString())}else if(typeof i!="string")throw Error(Jr+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,Oq.test(i))sg(l,i);else throw Error(Jr+i)}if(n.prototype=ye,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=rj,n.config=n.set=Tq,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<a.length;)t.hasOwnProperty(r=a[s++])||(t[r]=this[r]);return n.config(t),n}function Tq(t){if(!t||typeof t!="object")throw Error(bs+"Object expected");var s,r,a,n=["precision",1,wn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<n.length;s+=3)if((a=t[r=n[s]])!==void 0)if(_n(a)===a&&a>=n[s+1]&&a<=n[s+2])this[r]=a;else throw Error(Jr+r+": "+a);if((a=t[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Jr+r+": "+a);return this}var Rx=rj($q);is=new Rx(1);const Qe=Rx;function Eq(t){return Dq(t)||Rq(t)||Mq(t)||Fq()}function Fq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mq(t,s){if(t){if(typeof t=="string")return $u(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(t,s)}}function Rq(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Dq(t){if(Array.isArray(t))return $u(t)}function $u(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}var Lq=function(s){return s},aj={},nj=function(s){return s===aj},ag=function(s){return function r(){return arguments.length===0||arguments.length===1&&nj(arguments.length<=0?void 0:arguments[0])?r:s.apply(void 0,arguments)}},Iq=function t(s,r){return s===1?r:ag(function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];var l=n.filter(function(o){return o!==aj}).length;return l>=s?r.apply(void 0,n):t(s-l,ag(function(){for(var o=arguments.length,d=new Array(o),c=0;c<o;c++)d[c]=arguments[c];var u=n.map(function(m){return nj(m)?d.shift():m});return r.apply(void 0,Eq(u).concat(d))}))})},_c=function(s){return Iq(s.length,s)},Ou=function(s,r){for(var a=[],n=s;n<r;++n)a[n-s]=n;return a},qq=_c(function(t,s){return Array.isArray(s)?s.map(t):Object.keys(s).map(function(r){return s[r]}).map(t)}),Bq=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];if(!r.length)return Lq;var n=r.reverse(),i=n[0],l=n.slice(1);return function(){return l.reduce(function(o,d){return d(o)},i.apply(void 0,arguments))}},Tu=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},ij=function(s){var r=null,a=null;return function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r&&i.every(function(o,d){return o===r[d]})||(r=i,a=s.apply(void 0,i)),a}};function Uq(t){var s;return t===0?s=1:s=Math.floor(new Qe(t).abs().log(10).toNumber())+1,s}function zq(t,s,r){for(var a=new Qe(t),n=0,i=[];a.lt(s)&&n<1e5;)i.push(a.toNumber()),a=a.add(r),n++;return i}var Wq=_c(function(t,s,r){var a=+t,n=+s;return a+r*(n-a)}),Vq=_c(function(t,s,r){var a=s-+t;return a=a||1/0,(r-t)/a}),Kq=_c(function(t,s,r){var a=s-+t;return a=a||1/0,Math.max(0,Math.min(1,(r-t)/a))});const kc={rangeStep:zq,getDigitCount:Uq,interpolateNumber:Wq,uninterpolateNumber:Vq,uninterpolateTruncation:Kq};function Eu(t){return Gq(t)||Yq(t)||lj(t)||Hq()}function Hq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yq(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Gq(t){if(Array.isArray(t))return Fu(t)}function xi(t,s){return Jq(t)||Xq(t,s)||lj(t,s)||Qq()}function Qq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lj(t,s){if(t){if(typeof t=="string")return Fu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fu(t,s)}}function Fu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Xq(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,n=!1,i=void 0;try{for(var l=t[Symbol.iterator](),o;!(a=(o=l.next()).done)&&(r.push(o.value),!(s&&r.length===s));a=!0);}catch(d){n=!0,i=d}finally{try{!a&&l.return!=null&&l.return()}finally{if(n)throw i}}return r}}function Jq(t){if(Array.isArray(t))return t}function oj(t){var s=xi(t,2),r=s[0],a=s[1],n=r,i=a;return r>a&&(n=a,i=r),[n,i]}function cj(t,s,r){if(t.lte(0))return new Qe(0);var a=kc.getDigitCount(t.toNumber()),n=new Qe(10).pow(a),i=t.div(n),l=a!==1?.05:.1,o=new Qe(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=o.mul(n);return s?d:new Qe(Math.ceil(d))}function Zq(t,s,r){var a=1,n=new Qe(t);if(!n.isint()&&r){var i=Math.abs(t);i<1?(a=new Qe(10).pow(kc.getDigitCount(t)-1),n=new Qe(Math.floor(n.div(a).toNumber())).mul(a)):i>1&&(n=new Qe(Math.floor(t)))}else t===0?n=new Qe(Math.floor((s-1)/2)):r||(n=new Qe(Math.floor(t)));var l=Math.floor((s-1)/2),o=Bq(qq(function(d){return n.add(new Qe(d-l).mul(a)).toNumber()}),Ou);return o(0,s)}function dj(t,s,r,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(r-1)))return{step:new Qe(0),tickMin:new Qe(0),tickMax:new Qe(0)};var i=cj(new Qe(s).sub(t).div(r-1),a,n),l;t<=0&&s>=0?l=new Qe(0):(l=new Qe(t).add(s).div(2),l=l.sub(new Qe(l).mod(i)));var o=Math.ceil(l.sub(t).div(i).toNumber()),d=Math.ceil(new Qe(s).sub(l).div(i).toNumber()),c=o+d+1;return c>r?dj(t,s,r,a,n+1):(c<r&&(d=s>0?d+(r-c):d,o=s>0?o:o+(r-c)),{step:i,tickMin:l.sub(new Qe(o).mul(i)),tickMax:l.add(new Qe(d).mul(i))})}function eB(t){var s=xi(t,2),r=s[0],a=s[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),o=oj([r,a]),d=xi(o,2),c=d[0],u=d[1];if(c===-1/0||u===1/0){var m=u===1/0?[c].concat(Eu(Ou(0,n-1).map(function(){return 1/0}))):[].concat(Eu(Ou(0,n-1).map(function(){return-1/0})),[u]);return r>a?Tu(m):m}if(c===u)return Zq(c,n,i);var h=dj(c,u,l,i),x=h.step,p=h.tickMin,b=h.tickMax,v=kc.rangeStep(p,b.add(new Qe(.1).mul(x)),x);return r>a?Tu(v):v}function tB(t,s){var r=xi(t,2),a=r[0],n=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=oj([a,n]),o=xi(l,2),d=o[0],c=o[1];if(d===-1/0||c===1/0)return[a,n];if(d===c)return[d];var u=Math.max(s,2),m=cj(new Qe(c).sub(d).div(u-1),i,0),h=[].concat(Eu(kc.rangeStep(new Qe(d),new Qe(c).sub(new Qe(.99).mul(m)),m)),[c]);return a>n?Tu(h):h}var sB=ij(eB),rB=ij(tB),aB="Invariant failed";function aa(t,s){throw new Error(aB)}var nB=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ua(t){"@babel/helpers - typeof";return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ua(t)}function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ao.apply(this,arguments)}function iB(t,s){return dB(t)||cB(t,s)||oB(t,s)||lB()}function lB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oB(t,s){if(t){if(typeof t=="string")return ng(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ng(t,s)}}function ng(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function cB(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function dB(t){if(Array.isArray(t))return t}function uB(t,s){if(t==null)return{};var r=mB(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function mB(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function xB(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function hB(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,xj(a.key),a)}}function pB(t,s,r){return s&&hB(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function gB(t,s,r){return s=no(s),fB(t,uj()?Reflect.construct(s,r||[],no(t).constructor):s.apply(t,r))}function fB(t,s){if(s&&(Ua(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bB(t)}function bB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uj=function(){return!!t})()}function no(t){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},no(t)}function yB(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Mu(t,s)}function Mu(t,s){return Mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Mu(t,s)}function mj(t,s,r){return s=xj(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function xj(t){var s=vB(t,"string");return Ua(s)=="symbol"?s:s+""}function vB(t,s){if(Ua(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ua(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sc=function(t){function s(){return xB(this,s),gB(this,s,arguments)}return yB(s,t),pB(s,[{key:"render",value:function(){var a=this.props,n=a.offset,i=a.layout,l=a.width,o=a.dataKey,d=a.data,c=a.dataPointFormatter,u=a.xAxis,m=a.yAxis,h=uB(a,nB),x=_e(h,!1);this.props.direction==="x"&&u.type!=="number"&&aa();var p=d.map(function(b){var v=c(b,o),j=v.x,P=v.y,w=v.value,C=v.errorVal;if(!C)return null;var f=[],k,y;if(Array.isArray(C)){var F=iB(C,2);k=F[0],y=F[1]}else k=y=C;if(i==="vertical"){var M=u.scale,E=P+n,B=E+l,A=E-l,L=M(w-k),N=M(w+y);f.push({x1:N,y1:B,x2:N,y2:A}),f.push({x1:L,y1:E,x2:N,y2:E}),f.push({x1:L,y1:B,x2:L,y2:A})}else if(i==="horizontal"){var R=m.scale,O=j+n,T=O-l,g=O+l,D=R(w-k),S=R(w+y);f.push({x1:T,y1:S,x2:g,y2:S}),f.push({x1:O,y1:D,x2:O,y2:S}),f.push({x1:T,y1:D,x2:g,y2:D})}return Z.createElement(qe,ao({className:"recharts-errorBar",key:"bar-".concat(f.map(function($){return"".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))},x),f.map(function($){return Z.createElement("line",ao({},$,{key:"line-".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))}))});return Z.createElement(qe,{className:"recharts-errorBars"},p)}}])}(Z.Component);mj(Sc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mj(Sc,"displayName","ErrorBar");function hi(t){"@babel/helpers - typeof";return hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hi(t)}function ig(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Mr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ig(Object(r),!0).forEach(function(a){jB(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ig(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function jB(t,s,r){return s=NB(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function NB(t){var s=wB(t,"string");return hi(s)=="symbol"?s:s+""}function wB(t,s){if(hi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(hi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var hj=function(s){var r=s.children,a=s.formattedGraphicalItems,n=s.legendWidth,i=s.legendContent,l=ns(r,wr);if(!l)return null;var o=wr.defaultProps,d=o!==void 0?Mr(Mr({},o),l.props):{},c;return l.props&&l.props.payload?c=l.props&&l.props.payload:i==="children"?c=(a||[]).reduce(function(u,m){var h=m.item,x=m.props,p=x.sectors||x.data||[];return u.concat(p.map(function(b){return{type:l.props.iconType||h.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):c=(a||[]).map(function(u){var m=u.item,h=m.type.defaultProps,x=h!==void 0?Mr(Mr({},h),m.props):{},p=x.dataKey,b=x.name,v=x.legendType,j=x.hide;return{inactive:j,dataKey:p,type:d.iconType||v||"square",color:Dx(m),value:b||p,payload:x}}),Mr(Mr(Mr({},d),wr.getWithHeight(l,n)),{},{payload:c,item:l})};function pi(t){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},pi(t)}function lg(t){return CB(t)||SB(t)||kB(t)||_B()}function _B(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kB(t,s){if(t){if(typeof t=="string")return Ru(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ru(t,s)}}function SB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CB(t){if(Array.isArray(t))return Ru(t)}function Ru(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function og(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function ot(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?og(Object(r),!0).forEach(function(a){Ca(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):og(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ca(t,s,r){return s=PB(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function PB(t){var s=AB(t,"string");return pi(s)=="symbol"?s:s+""}function AB(t,s){if(pi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(pi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Nt(t,s,r){return Ae(t)||Ae(s)?r:wt(s)?cs(t,s,r):Ce(s)?s(t):r}function Hn(t,s,r,a){var n=Sq(t,function(o){return Nt(o,s)});if(r==="number"){var i=n.filter(function(o){return xe(o)||parseFloat(o)});return i.length?[wc(i),vr(i)]:[1/0,-1/0]}var l=a?n.filter(function(o){return!Ae(o)}):n;return l.map(function(o){return wt(o)||o instanceof Date?o:""})}var $B=function(s){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,c=0;c<o;c++){var u=c>0?n[c-1].coordinate:n[o-1].coordinate,m=n[c].coordinate,h=c>=o-1?n[0].coordinate:n[c+1].coordinate,x=void 0;if(Yt(m-u)!==Yt(h-m)){var p=[];if(Yt(h-m)===Yt(d[1]-d[0])){x=h;var b=m+d[1]-d[0];p[0]=Math.min(b,(b+u)/2),p[1]=Math.max(b,(b+u)/2)}else{x=u;var v=h+d[1]-d[0];p[0]=Math.min(m,(v+m)/2),p[1]=Math.max(m,(v+m)/2)}var j=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(s>j[0]&&s<=j[1]||s>=p[0]&&s<=p[1]){l=n[c].index;break}}else{var P=Math.min(u,h),w=Math.max(u,h);if(s>(P+m)/2&&s<=(w+m)/2){l=n[c].index;break}}}else for(var C=0;C<o;C++)if(C===0&&s<=(a[C].coordinate+a[C+1].coordinate)/2||C>0&&C<o-1&&s>(a[C].coordinate+a[C-1].coordinate)/2&&s<=(a[C].coordinate+a[C+1].coordinate)/2||C===o-1&&s>(a[C].coordinate+a[C-1].coordinate)/2){l=a[C].index;break}return l},Dx=function(s){var r,a=s,n=a.type.displayName,i=(r=s.type)!==null&&r!==void 0&&r.defaultProps?ot(ot({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,d;switch(n){case"Line":d=l;break;case"Area":case"Radar":d=l&&l!=="none"?l:o;break;default:d=o;break}return d},OB=function(s){var r=s.barSize,a=s.totalSize,n=s.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var l={},o=Object.keys(i),d=0,c=o.length;d<c;d++)for(var u=i[o[d]].stackGroups,m=Object.keys(u),h=0,x=m.length;h<x;h++){var p=u[m[h]],b=p.items,v=p.cateAxisId,j=b.filter(function(y){return rr(y.type).indexOf("Bar")>=0});if(j&&j.length){var P=j[0].type.defaultProps,w=P!==void 0?ot(ot({},P),j[0].props):j[0].props,C=w.barSize,f=w[v];l[f]||(l[f]=[]);var k=Ae(C)?r:C;l[f].push({item:j[0],stackList:j.slice(1),barSize:Ae(k)?void 0:Gt(k,a,0)})}}return l},TB=function(s){var r=s.barGap,a=s.barCategoryGap,n=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,d=l.length;if(d<1)return null;var c=Gt(r,n,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,x=n/d,p=l.reduce(function(C,f){return C+f.barSize||0},0);p+=(d-1)*c,p>=n&&(p-=(d-1)*c,c=0),p>=n&&x>0&&(h=!0,x*=.9,p=d*x);var b=(n-p)/2>>0,v={offset:b-c,size:0};u=l.reduce(function(C,f){var k={item:f.item,position:{offset:v.offset+v.size+c,size:h?x:f.barSize}},y=[].concat(lg(C),[k]);return v=y[y.length-1].position,f.stackList&&f.stackList.length&&f.stackList.forEach(function(F){y.push({item:F,position:v})}),y},m)}else{var j=Gt(a,n,0,!0);n-2*j-(d-1)*c<=0&&(c=0);var P=(n-2*j-(d-1)*c)/d;P>1&&(P>>=0);var w=o===+o?Math.min(P,o):P;u=l.reduce(function(C,f,k){var y=[].concat(lg(C),[{item:f.item,position:{offset:j+(P+c)*k+(P-w)/2,size:w}}]);return f.stackList&&f.stackList.length&&f.stackList.forEach(function(F){y.push({item:F,position:y[y.length-1].position})}),y},m)}return u},EB=function(s,r,a,n){var i=a.children,l=a.width,o=a.margin,d=l-(o.left||0)-(o.right||0),c=hj({children:i,legendWidth:d});if(c){var u=n||{},m=u.width,h=u.height,x=c.align,p=c.verticalAlign,b=c.layout;if((b==="vertical"||b==="horizontal"&&p==="middle")&&x!=="center"&&xe(s[x]))return ot(ot({},s),{},Ca({},x,s[x]+(m||0)));if((b==="horizontal"||b==="vertical"&&x==="center")&&p!=="middle"&&xe(s[p]))return ot(ot({},s),{},Ca({},p,s[p]+(h||0)))}return s},FB=function(s,r,a){return Ae(r)?!0:s==="horizontal"?r==="yAxis":s==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},pj=function(s,r,a,n,i){var l=r.props.children,o=fs(l,Sc).filter(function(c){return FB(n,i,c.props.direction)});if(o&&o.length){var d=o.map(function(c){return c.props.dataKey});return s.reduce(function(c,u){var m=Nt(u,a);if(Ae(m))return c;var h=Array.isArray(m)?[wc(m),vr(m)]:[m,m],x=d.reduce(function(p,b){var v=Nt(u,b,0),j=h[0]-Math.abs(Array.isArray(v)?v[0]:v),P=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(j,p[0]),Math.max(P,p[1])]},[1/0,-1/0]);return[Math.min(x[0],c[0]),Math.max(x[1],c[1])]},[1/0,-1/0])}return null},MB=function(s,r,a,n,i){var l=r.map(function(o){return pj(s,o,a,i,n)}).filter(function(o){return!Ae(o)});return l&&l.length?l.reduce(function(o,d){return[Math.min(o[0],d[0]),Math.max(o[1],d[1])]},[1/0,-1/0]):null},gj=function(s,r,a,n,i){var l=r.map(function(d){var c=d.props.dataKey;return a==="number"&&c&&pj(s,d,c,n)||Hn(s,c,a,i)});if(a==="number")return l.reduce(function(d,c){return[Math.min(d[0],c[0]),Math.max(d[1],c[1])]},[1/0,-1/0]);var o={};return l.reduce(function(d,c){for(var u=0,m=c.length;u<m;u++)o[c[u]]||(o[c[u]]=!0,d.push(c[u]));return d},[])},fj=function(s,r){return s==="horizontal"&&r==="xAxis"||s==="vertical"&&r==="yAxis"||s==="centric"&&r==="angleAxis"||s==="radial"&&r==="radiusAxis"},bj=function(s,r,a,n){if(n)return s.map(function(d){return d.coordinate});var i,l,o=s.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===a&&(l=!0),d.coordinate});return i||o.push(r),l||o.push(a),o},sr=function(s,r,a){if(!s)return null;var n=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,d=s.realScaleType==="scaleBand"?n.bandwidth()/2:2,c=(r||a)&&l==="category"&&n.bandwidth?n.bandwidth()/d:0;if(c=s.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Yt(o[0]-o[1])*2*c:c,r&&(s.ticks||s.niceTicks)){var u=(s.ticks||s.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:n(h)+c,value:m,offset:c}});return u.filter(function(m){return!fn(m.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(m,h){return{coordinate:n(m)+c,value:m,index:h,offset:c}}):n.ticks&&!a?n.ticks(s.tickCount).map(function(m){return{coordinate:n(m)+c,value:m,offset:c}}):n.domain().map(function(m,h){return{coordinate:n(m)+c,value:i?i[m]:m,index:h,offset:c}})},_d=new WeakMap,xl=function(s,r){if(typeof r!="function")return s;_d.has(s)||_d.set(s,new WeakMap);var a=_d.get(s);if(a.has(r))return a.get(r);var n=function(){s.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,n),n},yj=function(s,r,a){var n=s.scale,i=s.type,l=s.layout,o=s.axisType;if(n==="auto")return l==="radial"&&o==="radiusAxis"?{scale:li(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Zl(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:Kn(),realScaleType:"point"}:i==="category"?{scale:li(),realScaleType:"band"}:{scale:Zl(),realScaleType:"linear"};if(ea(n)){var d="scale".concat(oc(n));return{scale:(tg[d]||Kn)(),realScaleType:tg[d]?d:"point"}}return Ce(n)?{scale:n}:{scale:Kn(),realScaleType:"point"}},cg=1e-4,vj=function(s){var r=s.domain();if(!(!r||r.length<=2)){var a=r.length,n=s.range(),i=Math.min(n[0],n[1])-cg,l=Math.max(n[0],n[1])+cg,o=s(r[0]),d=s(r[a-1]);(o<i||o>l||d<i||d>l)&&s.domain([r[0],r[a-1]])}},RB=function(s,r){if(!s)return null;for(var a=0,n=s.length;a<n;a++)if(s[a].item===r)return s[a].position;return null},DB=function(s,r){if(!r||r.length!==2||!xe(r[0])||!xe(r[1]))return s;var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]),i=[s[0],s[1]];return(!xe(s[0])||s[0]<a)&&(i[0]=a),(!xe(s[1])||s[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<a&&(i[1]=a),i},LB=function(s){var r=s.length;if(!(r<=0))for(var a=0,n=s[0].length;a<n;++a)for(var i=0,l=0,o=0;o<r;++o){var d=fn(s[o][a][1])?s[o][a][0]:s[o][a][1];d>=0?(s[o][a][0]=i,s[o][a][1]=i+d,i=s[o][a][1]):(s[o][a][0]=l,s[o][a][1]=l+d,l=s[o][a][1])}},IB=function(s){var r=s.length;if(!(r<=0))for(var a=0,n=s[0].length;a<n;++a)for(var i=0,l=0;l<r;++l){var o=fn(s[l][a][1])?s[l][a][0]:s[l][a][1];o>=0?(s[l][a][0]=i,s[l][a][1]=i+o,i=s[l][a][1]):(s[l][a][0]=0,s[l][a][1]=0)}},qB={sign:LB,expand:nO,none:Ea,silhouette:iO,wiggle:lO,positive:IB},BB=function(s,r,a){var n=r.map(function(o){return o.props.dataKey}),i=qB[a],l=aO().keys(n).value(function(o,d){return+Nt(o,d,0)}).order(lu).offset(i);return l(s)},UB=function(s,r,a,n,i,l){if(!s)return null;var o=l?r.reverse():r,d={},c=o.reduce(function(m,h){var x,p=(x=h.type)!==null&&x!==void 0&&x.defaultProps?ot(ot({},h.type.defaultProps),h.props):h.props,b=p.stackId,v=p.hide;if(v)return m;var j=p[a],P=m[j]||{hasStack:!1,stackGroups:{}};if(wt(b)){var w=P.stackGroups[b]||{numericAxisId:a,cateAxisId:n,items:[]};w.items.push(h),P.hasStack=!0,P.stackGroups[b]=w}else P.stackGroups[bn("_stackId_")]={numericAxisId:a,cateAxisId:n,items:[h]};return ot(ot({},m),{},Ca({},j,P))},d),u={};return Object.keys(c).reduce(function(m,h){var x=c[h];if(x.hasStack){var p={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(b,v){var j=x.stackGroups[v];return ot(ot({},b),{},Ca({},v,{numericAxisId:a,cateAxisId:n,items:j.items,stackedData:BB(s,j.items,i)}))},p)}return ot(ot({},m),{},Ca({},h,x))},u)},jj=function(s,r){var a=r.realScaleType,n=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,d=a||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&n==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var c=s.domain();if(!c.length)return null;var u=sB(c,i,o);return s.domain([wc(u),vr(u)]),{niceTicks:u}}if(i&&n==="number"){var m=s.domain(),h=rB(m,i,o);return{niceTicks:h}}return null};function dg(t){var s=t.axis,r=t.ticks,a=t.bandSize,n=t.entry,i=t.index,l=t.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!Ae(n[s.dataKey])){var o=Tl(r,"value",n[s.dataKey]);if(o)return o.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=Nt(n,Ae(l)?s.dataKey:l);return Ae(d)?null:s.scale(d)}var ug=function(s){var r=s.axis,a=s.ticks,n=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(r.type==="category")return a[o]?a[o].coordinate+n:null;var d=Nt(l,r.dataKey,r.domain[o]);return Ae(d)?null:r.scale(d)-i/2+n},zB=function(s){var r=s.numericAxis,a=r.scale.domain();if(r.type==="number"){var n=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return n<=0&&i>=0?0:i<0?i:n}return a[0]},WB=function(s,r){var a,n=(a=s.type)!==null&&a!==void 0&&a.defaultProps?ot(ot({},s.type.defaultProps),s.props):s.props,i=n.stackId;if(wt(i)){var l=r[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},VB=function(s){return s.reduce(function(r,a){return[wc(a.concat([r[0]]).filter(xe)),vr(a.concat([r[1]]).filter(xe))]},[1/0,-1/0])},Nj=function(s,r,a){return Object.keys(s).reduce(function(n,i){var l=s[i],o=l.stackedData,d=o.reduce(function(c,u){var m=VB(u.slice(r,a+1));return[Math.min(c[0],m[0]),Math.max(c[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},mg=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xg=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Du=function(s,r,a){if(Ce(s))return s(r,a);if(!Array.isArray(s))return r;var n=[];if(xe(s[0]))n[0]=a?s[0]:Math.min(s[0],r[0]);else if(mg.test(s[0])){var i=+mg.exec(s[0])[1];n[0]=r[0]-i}else Ce(s[0])?n[0]=s[0](r[0]):n[0]=r[0];if(xe(s[1]))n[1]=a?s[1]:Math.max(s[1],r[1]);else if(xg.test(s[1])){var l=+xg.exec(s[1])[1];n[1]=r[1]+l}else Ce(s[1])?n[1]=s[1](r[1]):n[1]=r[1];return n},io=function(s,r,a){if(s&&s.scale&&s.scale.bandwidth){var n=s.scale.bandwidth();if(!a||n>0)return n}if(s&&r&&r.length>=2){for(var i=ux(r,function(m){return m.coordinate}),l=1/0,o=1,d=i.length;o<d;o++){var c=i[o],u=i[o-1];l=Math.min((c.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},hg=function(s,r,a){return!s||!s.length||Ba(s,cs(a,"type.defaultProps.domain"))?r:s},wj=function(s,r){var a=s.type.defaultProps?ot(ot({},s.type.defaultProps),s.props):s.props,n=a.dataKey,i=a.name,l=a.unit,o=a.formatter,d=a.tooltipType,c=a.chartType,u=a.hide;return ot(ot({},_e(s,!1)),{},{dataKey:n,unit:l,formatter:o,name:i||n,color:Dx(s),value:Nt(r,n),type:d,payload:r,chartType:c,hide:u})};function gi(t){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gi(t)}function pg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Xs(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?pg(Object(r),!0).forEach(function(a){_j(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function _j(t,s,r){return s=KB(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function KB(t){var s=HB(t,"string");return gi(s)=="symbol"?s:s+""}function HB(t,s){if(gi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(gi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function YB(t,s){return JB(t)||XB(t,s)||QB(t,s)||GB()}function GB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QB(t,s){if(t){if(typeof t=="string")return gg(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gg(t,s)}}function gg(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function XB(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function JB(t){if(Array.isArray(t))return t}var lo=Math.PI/180,ZB=function(s){return s*180/Math.PI},st=function(s,r,a,n){return{x:s+Math.cos(-lo*n)*a,y:r+Math.sin(-lo*n)*a}},kj=function(s,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(s-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},eU=function(s,r,a,n,i){var l=s.width,o=s.height,d=s.startAngle,c=s.endAngle,u=Gt(s.cx,l,l/2),m=Gt(s.cy,o,o/2),h=kj(l,o,a),x=Gt(s.innerRadius,h,0),p=Gt(s.outerRadius,h,h*.8),b=Object.keys(r);return b.reduce(function(v,j){var P=r[j],w=P.domain,C=P.reversed,f;if(Ae(P.range))n==="angleAxis"?f=[d,c]:n==="radiusAxis"&&(f=[x,p]),C&&(f=[f[1],f[0]]);else{f=P.range;var k=f,y=YB(k,2);d=y[0],c=y[1]}var F=yj(P,i),M=F.realScaleType,E=F.scale;E.domain(w).range(f),vj(E);var B=jj(E,Xs(Xs({},P),{},{realScaleType:M})),A=Xs(Xs(Xs({},P),B),{},{range:f,radius:p,realScaleType:M,scale:E,cx:u,cy:m,innerRadius:x,outerRadius:p,startAngle:d,endAngle:c});return Xs(Xs({},v),{},_j({},j,A))},{})},tU=function(s,r){var a=s.x,n=s.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(n-l,2))},sU=function(s,r){var a=s.x,n=s.y,i=r.cx,l=r.cy,o=tU({x:a,y:n},{x:i,y:l});if(o<=0)return{radius:o};var d=(a-i)/o,c=Math.acos(d);return n>l&&(c=2*Math.PI-c),{radius:o,angle:ZB(c),angleInRadian:c}},rU=function(s){var r=s.startAngle,a=s.endAngle,n=Math.floor(r/360),i=Math.floor(a/360),l=Math.min(n,i);return{startAngle:r-l*360,endAngle:a-l*360}},aU=function(s,r){var a=r.startAngle,n=r.endAngle,i=Math.floor(a/360),l=Math.floor(n/360),o=Math.min(i,l);return s+o*360},fg=function(s,r){var a=s.x,n=s.y,i=sU({x:a,y:n},r),l=i.radius,o=i.angle,d=r.innerRadius,c=r.outerRadius;if(l<d||l>c)return!1;if(l===0)return!0;var u=rU(r),m=u.startAngle,h=u.endAngle,x=o,p;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;p=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;p=x>=h&&x<=m}return p?Xs(Xs({},r),{},{radius:l,angle:aU(x,r)}):null},Sj=function(s){return!_.isValidElement(s)&&!Ce(s)&&typeof s!="boolean"?s.className:""};function fi(t){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fi(t)}var nU=["offset"];function iU(t){return dU(t)||cU(t)||oU(t)||lU()}function lU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oU(t,s){if(t){if(typeof t=="string")return Lu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lu(t,s)}}function cU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dU(t){if(Array.isArray(t))return Lu(t)}function Lu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function uU(t,s){if(t==null)return{};var r=mU(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function mU(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function bg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function yt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?bg(Object(r),!0).forEach(function(a){xU(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function xU(t,s,r){return s=hU(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function hU(t){var s=pU(t,"string");return fi(s)=="symbol"?s:s+""}function pU(t,s){if(fi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(fi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},bi.apply(this,arguments)}var gU=function(s){var r=s.value,a=s.formatter,n=Ae(s.children)?r:s.children;return Ce(a)?a(n):n},fU=function(s,r){var a=Yt(r-s),n=Math.min(Math.abs(r-s),360);return a*n},bU=function(s,r,a){var n=s.position,i=s.viewBox,l=s.offset,o=s.className,d=i,c=d.cx,u=d.cy,m=d.innerRadius,h=d.outerRadius,x=d.startAngle,p=d.endAngle,b=d.clockWise,v=(m+h)/2,j=fU(x,p),P=j>=0?1:-1,w,C;n==="insideStart"?(w=x+P*l,C=b):n==="insideEnd"?(w=p-P*l,C=!b):n==="end"&&(w=p+P*l,C=b),C=j<=0?C:!C;var f=st(c,u,v,w),k=st(c,u,v,w+(C?1:-1)*359),y="M".concat(f.x,",").concat(f.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),F=Ae(s.id)?bn("recharts-radial-line-"):s.id;return Z.createElement("text",bi({},a,{dominantBaseline:"central",className:Ee("recharts-radial-bar-label",o)}),Z.createElement("defs",null,Z.createElement("path",{id:F,d:y})),Z.createElement("textPath",{xlinkHref:"#".concat(F)},r))},yU=function(s){var r=s.viewBox,a=s.offset,n=s.position,i=r,l=i.cx,o=i.cy,d=i.innerRadius,c=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(n==="outside"){var x=st(l,o,c+a,h),p=x.x,b=x.y;return{x:p,y:b,textAnchor:p>=l?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(d+c)/2,j=st(l,o,v,h),P=j.x,w=j.y;return{x:P,y:w,textAnchor:"middle",verticalAnchor:"middle"}},vU=function(s){var r=s.viewBox,a=s.parentViewBox,n=s.offset,i=s.position,l=r,o=l.x,d=l.y,c=l.width,u=l.height,m=u>=0?1:-1,h=m*n,x=m>0?"end":"start",p=m>0?"start":"end",b=c>=0?1:-1,v=b*n,j=b>0?"end":"start",P=b>0?"start":"end";if(i==="top"){var w={x:o+c/2,y:d-m*n,textAnchor:"middle",verticalAnchor:x};return yt(yt({},w),a?{height:Math.max(d-a.y,0),width:c}:{})}if(i==="bottom"){var C={x:o+c/2,y:d+u+h,textAnchor:"middle",verticalAnchor:p};return yt(yt({},C),a?{height:Math.max(a.y+a.height-(d+u),0),width:c}:{})}if(i==="left"){var f={x:o-v,y:d+u/2,textAnchor:j,verticalAnchor:"middle"};return yt(yt({},f),a?{width:Math.max(f.x-a.x,0),height:u}:{})}if(i==="right"){var k={x:o+c+v,y:d+u/2,textAnchor:P,verticalAnchor:"middle"};return yt(yt({},k),a?{width:Math.max(a.x+a.width-k.x,0),height:u}:{})}var y=a?{width:c,height:u}:{};return i==="insideLeft"?yt({x:o+v,y:d+u/2,textAnchor:P,verticalAnchor:"middle"},y):i==="insideRight"?yt({x:o+c-v,y:d+u/2,textAnchor:j,verticalAnchor:"middle"},y):i==="insideTop"?yt({x:o+c/2,y:d+h,textAnchor:"middle",verticalAnchor:p},y):i==="insideBottom"?yt({x:o+c/2,y:d+u-h,textAnchor:"middle",verticalAnchor:x},y):i==="insideTopLeft"?yt({x:o+v,y:d+h,textAnchor:P,verticalAnchor:p},y):i==="insideTopRight"?yt({x:o+c-v,y:d+h,textAnchor:j,verticalAnchor:p},y):i==="insideBottomLeft"?yt({x:o+v,y:d+u-h,textAnchor:P,verticalAnchor:x},y):i==="insideBottomRight"?yt({x:o+c-v,y:d+u-h,textAnchor:j,verticalAnchor:x},y):xn(i)&&(xe(i.x)||Wr(i.x))&&(xe(i.y)||Wr(i.y))?yt({x:o+Gt(i.x,c),y:d+Gt(i.y,u),textAnchor:"end",verticalAnchor:"end"},y):yt({x:o+c/2,y:d+u/2,textAnchor:"middle",verticalAnchor:"middle"},y)},jU=function(s){return"cx"in s&&xe(s.cx)};function Pt(t){var s=t.offset,r=s===void 0?5:s,a=uU(t,nU),n=yt({offset:r},a),i=n.viewBox,l=n.position,o=n.value,d=n.children,c=n.content,u=n.className,m=u===void 0?"":u,h=n.textBreakAll;if(!i||Ae(o)&&Ae(d)&&!_.isValidElement(c)&&!Ce(c))return null;if(_.isValidElement(c))return _.cloneElement(c,n);var x;if(Ce(c)){if(x=_.createElement(c,n),_.isValidElement(x))return x}else x=gU(n);var p=jU(i),b=_e(n,!0);if(p&&(l==="insideStart"||l==="insideEnd"||l==="end"))return bU(n,x,b);var v=p?yU(n):vU(n);return Z.createElement(sa,bi({className:Ee("recharts-label",m)},b,v,{breakAll:h}),x)}Pt.displayName="Label";var Cj=function(s){var r=s.cx,a=s.cy,n=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,d=s.radius,c=s.innerRadius,u=s.outerRadius,m=s.x,h=s.y,x=s.top,p=s.left,b=s.width,v=s.height,j=s.clockWise,P=s.labelViewBox;if(P)return P;if(xe(b)&&xe(v)){if(xe(m)&&xe(h))return{x:m,y:h,width:b,height:v};if(xe(x)&&xe(p))return{x,y:p,width:b,height:v}}return xe(m)&&xe(h)?{x:m,y:h,width:0,height:0}:xe(r)&&xe(a)?{cx:r,cy:a,startAngle:i||n||0,endAngle:l||n||0,innerRadius:c||0,outerRadius:u||d||o||0,clockWise:j}:s.viewBox?s.viewBox:{}},NU=function(s,r){return s?s===!0?Z.createElement(Pt,{key:"label-implicit",viewBox:r}):wt(s)?Z.createElement(Pt,{key:"label-implicit",viewBox:r,value:s}):_.isValidElement(s)?s.type===Pt?_.cloneElement(s,{key:"label-implicit",viewBox:r}):Z.createElement(Pt,{key:"label-implicit",content:s,viewBox:r}):Ce(s)?Z.createElement(Pt,{key:"label-implicit",content:s,viewBox:r}):xn(s)?Z.createElement(Pt,bi({viewBox:r},s,{key:"label-implicit"})):null:null},wU=function(s,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&a&&!s.label)return null;var n=s.children,i=Cj(s),l=fs(n,Pt).map(function(d,c){return _.cloneElement(d,{viewBox:r||i,key:"label-".concat(c)})});if(!a)return l;var o=NU(s.label,r||i);return[o].concat(iU(l))};Pt.parseViewBox=Cj;Pt.renderCallByParent=wU;function _U(t){var s=t==null?0:t.length;return s?t[s-1]:void 0}var kU=_U;const SU=Je(kU);function yi(t){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},yi(t)}var CU=["valueAccessor"],PU=["data","dataKey","clockWise","id","textBreakAll"];function AU(t){return EU(t)||TU(t)||OU(t)||$U()}function $U(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OU(t,s){if(t){if(typeof t=="string")return Iu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iu(t,s)}}function TU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EU(t){if(Array.isArray(t))return Iu(t)}function Iu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},oo.apply(this,arguments)}function yg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function vg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?yg(Object(r),!0).forEach(function(a){FU(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function FU(t,s,r){return s=MU(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function MU(t){var s=RU(t,"string");return yi(s)=="symbol"?s:s+""}function RU(t,s){if(yi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(yi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function jg(t,s){if(t==null)return{};var r=DU(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function DU(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}var LU=function(s){return Array.isArray(s.value)?SU(s.value):s.value};function nr(t){var s=t.valueAccessor,r=s===void 0?LU:s,a=jg(t,CU),n=a.data,i=a.dataKey,l=a.clockWise,o=a.id,d=a.textBreakAll,c=jg(a,PU);return!n||!n.length?null:Z.createElement(qe,{className:"recharts-label-list"},n.map(function(u,m){var h=Ae(i)?r(u,m):Nt(u&&u.payload,i),x=Ae(o)?{}:{id:"".concat(o,"-").concat(m)};return Z.createElement(Pt,oo({},_e(u,!0),c,x,{parentViewBox:u.parentViewBox,value:h,textBreakAll:d,viewBox:Pt.parseViewBox(Ae(l)?u:vg(vg({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}nr.displayName="LabelList";function IU(t,s){return t?t===!0?Z.createElement(nr,{key:"labelList-implicit",data:s}):Z.isValidElement(t)||Ce(t)?Z.createElement(nr,{key:"labelList-implicit",data:s,content:t}):xn(t)?Z.createElement(nr,oo({data:s},t,{key:"labelList-implicit"})):null:null}function qU(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,n=fs(a,nr).map(function(l,o){return _.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!r)return n;var i=IU(t.label,s);return[i].concat(AU(n))}nr.renderCallByParent=qU;function vi(t){"@babel/helpers - typeof";return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vi(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},qu.apply(this,arguments)}function Ng(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function wg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ng(Object(r),!0).forEach(function(a){BU(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ng(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function BU(t,s,r){return s=UU(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function UU(t){var s=zU(t,"string");return vi(s)=="symbol"?s:s+""}function zU(t,s){if(vi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(vi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var WU=function(s,r){var a=Yt(r-s),n=Math.min(Math.abs(r-s),359.999);return a*n},hl=function(s){var r=s.cx,a=s.cy,n=s.radius,i=s.angle,l=s.sign,o=s.isExternal,d=s.cornerRadius,c=s.cornerIsExternal,u=d*(o?1:-1)+n,m=Math.asin(d/u)/lo,h=c?i:i+l*m,x=st(r,a,u,h),p=st(r,a,n,h),b=c?i-l*m:i,v=st(r,a,u*Math.cos(m*lo),b);return{center:x,circleTangency:p,lineTangency:v,theta:m}},Pj=function(s){var r=s.cx,a=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,d=WU(l,o),c=l+d,u=st(r,a,i,l),m=st(r,a,i,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(l>c),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(n>0){var x=st(r,a,n,l),p=st(r,a,n,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(l<=c),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(r,",").concat(a," Z");return h},VU=function(s){var r=s.cx,a=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,d=s.cornerIsExternal,c=s.startAngle,u=s.endAngle,m=Yt(u-c),h=hl({cx:r,cy:a,radius:i,angle:c,sign:m,cornerRadius:l,cornerIsExternal:d}),x=h.circleTangency,p=h.lineTangency,b=h.theta,v=hl({cx:r,cy:a,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:d}),j=v.circleTangency,P=v.lineTangency,w=v.theta,C=d?Math.abs(c-u):Math.abs(c-u)-b-w;if(C<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):Pj({cx:r,cy:a,innerRadius:n,outerRadius:i,startAngle:c,endAngle:u});var f="M ".concat(p.x,",").concat(p.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,`
  `);if(n>0){var k=hl({cx:r,cy:a,radius:n,angle:c,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),y=k.circleTangency,F=k.lineTangency,M=k.theta,E=hl({cx:r,cy:a,radius:n,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),B=E.circleTangency,A=E.lineTangency,L=E.theta,N=d?Math.abs(c-u):Math.abs(c-u)-M-L;if(N<0&&l===0)return"".concat(f,"L").concat(r,",").concat(a,"Z");f+="L".concat(A.x,",").concat(A.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(m>0),",").concat(y.x,",").concat(y.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,"Z")}else f+="L".concat(r,",").concat(a,"Z");return f},KU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Aj=function(s){var r=wg(wg({},KU),s),a=r.cx,n=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,d=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,m=r.endAngle,h=r.className;if(l<i||u===m)return null;var x=Ee("recharts-sector",h),p=l-i,b=Gt(o,p,0,!0),v;return b>0&&Math.abs(u-m)<360?v=VU({cx:a,cy:n,innerRadius:i,outerRadius:l,cornerRadius:Math.min(b,p/2),forceCornerRadius:d,cornerIsExternal:c,startAngle:u,endAngle:m}):v=Pj({cx:a,cy:n,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),Z.createElement("path",qu({},_e(r,!0),{className:x,d:v,role:"img"}))};function ji(t){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ji(t)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Bu.apply(this,arguments)}function _g(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function kg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?_g(Object(r),!0).forEach(function(a){HU(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_g(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function HU(t,s,r){return s=YU(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function YU(t){var s=GU(t,"string");return ji(s)=="symbol"?s:s+""}function GU(t,s){if(ji(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ji(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Sg={curveBasisClosed:H$,curveBasisOpen:Y$,curveBasis:K$,curveBumpX:T$,curveBumpY:E$,curveLinearClosed:G$,curveLinear:dc,curveMonotoneX:Q$,curveMonotoneY:X$,curveNatural:J$,curveStep:Z$,curveStepAfter:tO,curveStepBefore:eO},pl=function(s){return s.x===+s.x&&s.y===+s.y},Rn=function(s){return s.x},Dn=function(s){return s.y},QU=function(s,r){if(Ce(s))return s;var a="curve".concat(oc(s));return(a==="curveMonotone"||a==="curveBump")&&r?Sg["".concat(a).concat(r==="vertical"?"Y":"X")]:Sg[a]||dc},XU=function(s){var r=s.type,a=r===void 0?"linear":r,n=s.points,i=n===void 0?[]:n,l=s.baseLine,o=s.layout,d=s.connectNulls,c=d===void 0?!1:d,u=QU(a,o),m=c?i.filter(function(b){return pl(b)}):i,h;if(Array.isArray(l)){var x=c?l.filter(function(b){return pl(b)}):l,p=m.map(function(b,v){return kg(kg({},b),{},{base:x[v]})});return o==="vertical"?h=nl().y(Dn).x1(Rn).x0(function(b){return b.base.x}):h=nl().x(Rn).y1(Dn).y0(function(b){return b.base.y}),h.defined(pl).curve(u),h(p)}return o==="vertical"&&xe(l)?h=nl().y(Dn).x1(Rn).x0(l):xe(l)?h=nl().x(Rn).y1(Dn).y0(l):h=wy().x(Rn).y(Dn),h.defined(pl).curve(u),h(m)},Pa=function(s){var r=s.className,a=s.points,n=s.path,i=s.pathRef;if((!a||!a.length)&&!n)return null;var l=a&&a.length?XU(s):n;return _.createElement("path",Bu({},_e(s,!1),El(s),{className:Ee("recharts-curve",r),d:l,ref:i}))},$j={exports:{}},JU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZU=JU,ez=ZU;function Oj(){}function Tj(){}Tj.resetWarningCache=Oj;var tz=function(){function t(a,n,i,l,o,d){if(d!==ez){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:Tj,resetWarningCache:Oj};return r.PropTypes=r,r};$j.exports=tz();var sz=$j.exports;const Ke=Je(sz);var rz=Object.getOwnPropertyNames,az=Object.getOwnPropertySymbols,nz=Object.prototype.hasOwnProperty;function Cg(t,s){return function(a,n,i){return t(a,n,i)&&s(a,n,i)}}function gl(t){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return t(r,a,n);var i=n.cache,l=i.get(r),o=i.get(a);if(l&&o)return l===a&&o===r;i.set(r,a),i.set(a,r);var d=t(r,a,n);return i.delete(r),i.delete(a),d}}function iz(t){return t!=null?t[Symbol.toStringTag]:void 0}function Pg(t){return rz(t).concat(az(t))}var lz=Object.hasOwn||function(t,s){return nz.call(t,s)};function da(t,s){return t===s||!t&&!s&&t!==t&&s!==s}var oz="__v",cz="__o",dz="_owner",Ag=Object.getOwnPropertyDescriptor,$g=Object.keys;function uz(t,s,r){var a=t.length;if(s.length!==a)return!1;for(;a-- >0;)if(!r.equals(t[a],s[a],a,a,t,s,r))return!1;return!0}function mz(t,s){return da(t.getTime(),s.getTime())}function xz(t,s){return t.name===s.name&&t.message===s.message&&t.cause===s.cause&&t.stack===s.stack}function hz(t,s){return t===s}function Og(t,s,r){var a=t.size;if(a!==s.size)return!1;if(!a)return!0;for(var n=new Array(a),i=t.entries(),l,o,d=0;(l=i.next())&&!l.done;){for(var c=s.entries(),u=!1,m=0;(o=c.next())&&!o.done;){if(n[m]){m++;continue}var h=l.value,x=o.value;if(r.equals(h[0],x[0],d,m,t,s,r)&&r.equals(h[1],x[1],h[0],x[0],t,s,r)){u=n[m]=!0;break}m++}if(!u)return!1;d++}return!0}var pz=da;function gz(t,s,r){var a=$g(t),n=a.length;if($g(s).length!==n)return!1;for(;n-- >0;)if(!Ej(t,s,r,a[n]))return!1;return!0}function Ln(t,s,r){var a=Pg(t),n=a.length;if(Pg(s).length!==n)return!1;for(var i,l,o;n-- >0;)if(i=a[n],!Ej(t,s,r,i)||(l=Ag(t,i),o=Ag(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function fz(t,s){return da(t.valueOf(),s.valueOf())}function bz(t,s){return t.source===s.source&&t.flags===s.flags}function Tg(t,s,r){var a=t.size;if(a!==s.size)return!1;if(!a)return!0;for(var n=new Array(a),i=t.values(),l,o;(l=i.next())&&!l.done;){for(var d=s.values(),c=!1,u=0;(o=d.next())&&!o.done;){if(!n[u]&&r.equals(l.value,o.value,l.value,o.value,t,s,r)){c=n[u]=!0;break}u++}if(!c)return!1}return!0}function yz(t,s){var r=t.length;if(s.length!==r)return!1;for(;r-- >0;)if(t[r]!==s[r])return!1;return!0}function vz(t,s){return t.hostname===s.hostname&&t.pathname===s.pathname&&t.protocol===s.protocol&&t.port===s.port&&t.hash===s.hash&&t.username===s.username&&t.password===s.password}function Ej(t,s,r,a){return(a===dz||a===cz||a===oz)&&(t.$$typeof||s.$$typeof)?!0:lz(s,a)&&r.equals(t[a],s[a],a,a,t,s,r)}var jz="[object Arguments]",Nz="[object Boolean]",wz="[object Date]",_z="[object Error]",kz="[object Map]",Sz="[object Number]",Cz="[object Object]",Pz="[object RegExp]",Az="[object Set]",$z="[object String]",Oz="[object URL]",Tz=Array.isArray,Eg=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,Fg=Object.assign,Ez=Object.prototype.toString.call.bind(Object.prototype.toString);function Fz(t){var s=t.areArraysEqual,r=t.areDatesEqual,a=t.areErrorsEqual,n=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,o=t.areObjectsEqual,d=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual,x=t.unknownTagComparators;return function(b,v,j){if(b===v)return!0;if(b==null||v==null)return!1;var P=typeof b;if(P!==typeof v)return!1;if(P!=="object")return P==="number"?l(b,v,j):P==="function"?n(b,v,j):!1;var w=b.constructor;if(w!==v.constructor)return!1;if(w===Object)return o(b,v,j);if(Tz(b))return s(b,v,j);if(Eg!=null&&Eg(b))return m(b,v,j);if(w===Date)return r(b,v,j);if(w===RegExp)return c(b,v,j);if(w===Map)return i(b,v,j);if(w===Set)return u(b,v,j);var C=Ez(b);if(C===wz)return r(b,v,j);if(C===Pz)return c(b,v,j);if(C===kz)return i(b,v,j);if(C===Az)return u(b,v,j);if(C===Cz)return typeof b.then!="function"&&typeof v.then!="function"&&o(b,v,j);if(C===Oz)return h(b,v,j);if(C===_z)return a(b,v,j);if(C===jz)return o(b,v,j);if(C===Nz||C===Sz||C===$z)return d(b,v,j);if(x){var f=x[C];if(!f){var k=iz(b);k&&(f=x[k])}if(f)return f(b,v,j)}return!1}}function Mz(t){var s=t.circular,r=t.createCustomConfig,a=t.strict,n={areArraysEqual:a?Ln:uz,areDatesEqual:mz,areErrorsEqual:xz,areFunctionsEqual:hz,areMapsEqual:a?Cg(Og,Ln):Og,areNumbersEqual:pz,areObjectsEqual:a?Ln:gz,arePrimitiveWrappersEqual:fz,areRegExpsEqual:bz,areSetsEqual:a?Cg(Tg,Ln):Tg,areTypedArraysEqual:a?Ln:yz,areUrlsEqual:vz,unknownTagComparators:void 0};if(r&&(n=Fg({},n,r(n))),s){var i=gl(n.areArraysEqual),l=gl(n.areMapsEqual),o=gl(n.areObjectsEqual),d=gl(n.areSetsEqual);n=Fg({},n,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:d})}return n}function Rz(t){return function(s,r,a,n,i,l,o){return t(s,r,o)}}function Dz(t){var s=t.circular,r=t.comparator,a=t.createState,n=t.equals,i=t.strict;if(a)return function(d,c){var u=a(),m=u.cache,h=m===void 0?s?new WeakMap:void 0:m,x=u.meta;return r(d,c,{cache:h,equals:n,meta:x,strict:i})};if(s)return function(d,c){return r(d,c,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var l={cache:void 0,equals:n,meta:void 0,strict:i};return function(d,c){return r(d,c,l)}}var Lz=Or();Or({strict:!0});Or({circular:!0});Or({circular:!0,strict:!0});Or({createInternalComparator:function(){return da}});Or({strict:!0,createInternalComparator:function(){return da}});Or({circular:!0,createInternalComparator:function(){return da}});Or({circular:!0,createInternalComparator:function(){return da},strict:!0});function Or(t){t===void 0&&(t={});var s=t.circular,r=s===void 0?!1:s,a=t.createInternalComparator,n=t.createState,i=t.strict,l=i===void 0?!1:i,o=Mz(t),d=Fz(o),c=a?a(d):Rz(d);return Dz({circular:r,comparator:d,createState:n,equals:c,strict:l})}function Iz(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Mg(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function n(i){r<0&&(r=i),i-r>s?(t(i),r=-1):Iz(n)};requestAnimationFrame(a)}function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Uu(t)}function qz(t){return Wz(t)||zz(t)||Uz(t)||Bz()}function Bz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uz(t,s){if(t){if(typeof t=="string")return Rg(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rg(t,s)}}function Rg(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function zz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wz(t){if(Array.isArray(t))return t}function Vz(){var t={},s=function(){return null},r=!1,a=function n(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=qz(l),d=o[0],c=o.slice(1);if(typeof d=="number"){Mg(n.bind(null,c),d);return}n(d),Mg(n.bind(null,c));return}Uu(i)==="object"&&(t=i,s(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function Ni(t){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ni(t)}function Dg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Lg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Dg(Object(r),!0).forEach(function(a){Fj(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Fj(t,s,r){return s=Kz(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Kz(t){var s=Hz(t,"string");return Ni(s)==="symbol"?s:String(s)}function Hz(t,s){if(Ni(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ni(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Yz=function(s,r){return[Object.keys(s),Object.keys(r)].reduce(function(a,n){return a.filter(function(i){return n.includes(i)})})},Gz=function(s){return s},Qz=function(s){return s.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Yn=function(s,r){return Object.keys(r).reduce(function(a,n){return Lg(Lg({},a),{},Fj({},n,s(n,r[n])))},{})},Ig=function(s,r,a){return s.map(function(n){return"".concat(Qz(n)," ").concat(r,"ms ").concat(a)}).join(",")};function Xz(t,s){return eW(t)||Zz(t,s)||Mj(t,s)||Jz()}function Jz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function eW(t){if(Array.isArray(t))return t}function tW(t){return aW(t)||rW(t)||Mj(t)||sW()}function sW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mj(t,s){if(t){if(typeof t=="string")return zu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zu(t,s)}}function rW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aW(t){if(Array.isArray(t))return zu(t)}function zu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}var co=1e-4,Rj=function(s,r){return[0,3*s,3*r-6*s,3*s-3*r+1]},Dj=function(s,r){return s.map(function(a,n){return a*Math.pow(r,n)}).reduce(function(a,n){return a+n})},qg=function(s,r){return function(a){var n=Rj(s,r);return Dj(n,a)}},nW=function(s,r){return function(a){var n=Rj(s,r),i=[].concat(tW(n.map(function(l,o){return l*o}).slice(1)),[0]);return Dj(i,a)}},Bg=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];var n=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":n=0,i=0,l=1,o=1;break;case"ease":n=.25,i=.1,l=.25,o=1;break;case"ease-in":n=.42,i=0,l=1,o=1;break;case"ease-out":n=.42,i=0,l=.58,o=1;break;case"ease-in-out":n=0,i=0,l=.58,o=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var c=d[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=Xz(c,4);n=u[0],i=u[1],l=u[2],o=u[3]}}}var m=qg(n,l),h=qg(i,o),x=nW(n,l),p=function(j){return j>1?1:j<0?0:j},b=function(j){for(var P=j>1?1:j,w=P,C=0;C<8;++C){var f=m(w)-P,k=x(w);if(Math.abs(f-P)<co||k<co)return h(w);w=p(w-f/k)}return h(w)};return b.isStepper=!1,b},iW=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s.stiff,a=r===void 0?100:r,n=s.damping,i=n===void 0?8:n,l=s.dt,o=l===void 0?17:l,d=function(u,m,h){var x=-(u-m)*a,p=h*i,b=h+(x-p)*o/1e3,v=h*o/1e3+u;return Math.abs(v-m)<co&&Math.abs(b)<co?[m,0]:[v,b]};return d.isStepper=!0,d.dt=o,d},lW=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];var n=r[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Bg(n);case"spring":return iW();default:if(n.split("(")[0]==="cubic-bezier")return Bg(n)}return typeof n=="function"?n:null};function wi(t){"@babel/helpers - typeof";return wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wi(t)}function Ug(t){return dW(t)||cW(t)||Lj(t)||oW()}function oW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dW(t){if(Array.isArray(t))return Vu(t)}function zg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Tt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?zg(Object(r),!0).forEach(function(a){Wu(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Wu(t,s,r){return s=uW(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function uW(t){var s=mW(t,"string");return wi(s)==="symbol"?s:String(s)}function mW(t,s){if(wi(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(wi(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xW(t,s){return gW(t)||pW(t,s)||Lj(t,s)||hW()}function hW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lj(t,s){if(t){if(typeof t=="string")return Vu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vu(t,s)}}function Vu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function pW(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function gW(t){if(Array.isArray(t))return t}var uo=function(s,r,a){return s+(r-s)*a},Ku=function(s){var r=s.from,a=s.to;return r!==a},fW=function t(s,r,a){var n=Yn(function(i,l){if(Ku(l)){var o=s(l.from,l.to,l.velocity),d=xW(o,2),c=d[0],u=d[1];return Tt(Tt({},l),{},{from:c,velocity:u})}return l},r);return a<1?Yn(function(i,l){return Ku(l)?Tt(Tt({},l),{},{velocity:uo(l.velocity,n[i].velocity,a),from:uo(l.from,n[i].from,a)}):l},r):t(s,n,a-1)};const bW=function(t,s,r,a,n){var i=Yz(t,s),l=i.reduce(function(v,j){return Tt(Tt({},v),{},Wu({},j,[t[j],s[j]]))},{}),o=i.reduce(function(v,j){return Tt(Tt({},v),{},Wu({},j,{from:t[j],velocity:0,to:s[j]}))},{}),d=-1,c,u,m=function(){return null},h=function(){return Yn(function(j,P){return P.from},o)},x=function(){return!Object.values(o).filter(Ku).length},p=function(j){c||(c=j);var P=j-c,w=P/r.dt;o=fW(r,o,w),n(Tt(Tt(Tt({},t),s),h())),c=j,x()||(d=requestAnimationFrame(m))},b=function(j){u||(u=j);var P=(j-u)/a,w=Yn(function(f,k){return uo.apply(void 0,Ug(k).concat([r(P)]))},l);if(n(Tt(Tt(Tt({},t),s),w)),P<1)d=requestAnimationFrame(m);else{var C=Yn(function(f,k){return uo.apply(void 0,Ug(k).concat([r(1)]))},l);n(Tt(Tt(Tt({},t),s),C))}};return m=r.isStepper?p:b,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}};function za(t){"@babel/helpers - typeof";return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},za(t)}var yW=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function vW(t,s){if(t==null)return{};var r=jW(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function jW(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function kd(t){return kW(t)||_W(t)||wW(t)||NW()}function NW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wW(t,s){if(t){if(typeof t=="string")return Hu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hu(t,s)}}function _W(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kW(t){if(Array.isArray(t))return Hu(t)}function Hu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Wg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function ks(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Wg(Object(r),!0).forEach(function(a){zn(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function zn(t,s,r){return s=Ij(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function SW(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function CW(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ij(a.key),a)}}function PW(t,s,r){return s&&CW(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ij(t){var s=AW(t,"string");return za(s)==="symbol"?s:String(s)}function AW(t,s){if(za(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(za(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function $W(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Yu(t,s)}function Yu(t,s){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Yu(t,s)}function OW(t){var s=TW();return function(){var a=mo(t),n;if(s){var i=mo(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Gu(this,n)}}function Gu(t,s){if(s&&(za(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qu(t)}function Qu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mo(t){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mo(t)}var Ks=function(t){$W(r,t);var s=OW(r);function r(a,n){var i;SW(this,r),i=s.call(this,a,n);var l=i.props,o=l.isActive,d=l.attributeName,c=l.from,u=l.to,m=l.steps,h=l.children,x=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Qu(i)),i.changeStyle=i.changeStyle.bind(Qu(i)),!o||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),Gu(i);if(m&&m.length)i.state={style:m[0].style};else if(c){if(typeof h=="function")return i.state={style:c},Gu(i);i.state={style:d?zn({},d,c):c}}else i.state={style:{}};return i}return PW(r,[{key:"componentDidMount",value:function(){var n=this.props,i=n.isActive,l=n.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var i=this.props,l=i.isActive,o=i.canBegin,d=i.attributeName,c=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(o){if(!l){var x={style:d?zn({},d,u):u};this.state&&h&&(d&&h[d]!==u||!d&&h!==u)&&this.setState(x);return}if(!(Lz(n.to,u)&&n.canBegin&&n.isActive)){var p=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=p||c?m:n.to;if(this.state&&h){var v={style:d?zn({},d,b):b};(d&&h[d]!==b||!d&&h!==b)&&this.setState(v)}this.runAnimation(ks(ks({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var i=this,l=n.from,o=n.to,d=n.duration,c=n.easing,u=n.begin,m=n.onAnimationEnd,h=n.onAnimationStart,x=bW(l,o,lW(c),d,this.changeStyle),p=function(){i.stopJSAnimation=x()};this.manager.start([h,u,p,d,m])}},{key:"runStepAnimation",value:function(n){var i=this,l=n.steps,o=n.begin,d=n.onAnimationStart,c=l[0],u=c.style,m=c.duration,h=m===void 0?0:m,x=function(b,v,j){if(j===0)return b;var P=v.duration,w=v.easing,C=w===void 0?"ease":w,f=v.style,k=v.properties,y=v.onAnimationEnd,F=j>0?l[j-1]:v,M=k||Object.keys(f);if(typeof C=="function"||C==="spring")return[].concat(kd(b),[i.runJSAnimation.bind(i,{from:F.style,to:f,duration:P,easing:C}),P]);var E=Ig(M,P,C),B=ks(ks(ks({},F.style),f),{},{transition:E});return[].concat(kd(b),[B,P,y]).filter(Gz)};return this.manager.start([d].concat(kd(l.reduce(x,[u,Math.max(h,o)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=Vz());var i=n.begin,l=n.duration,o=n.attributeName,d=n.to,c=n.easing,u=n.onAnimationStart,m=n.onAnimationEnd,h=n.steps,x=n.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof x=="function"||c==="spring"){this.runJSAnimation(n);return}if(h.length>1){this.runStepAnimation(n);return}var b=o?zn({},o,d):d,v=Ig(Object.keys(b),l,c);p.start([u,i,ks(ks({},b),{},{transition:v}),l,m])}},{key:"render",value:function(){var n=this.props,i=n.children;n.begin;var l=n.duration;n.attributeName,n.easing;var o=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var d=vW(n,yW),c=_.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||c===0||l<=0)return i;var m=function(x){var p=x.props,b=p.style,v=b===void 0?{}:b,j=p.className,P=_.cloneElement(x,ks(ks({},d),{},{style:ks(ks({},v),u),className:j}));return P};return c===1?m(_.Children.only(i)):Z.createElement("div",null,_.Children.map(i,function(h){return m(h)}))}}]),r}(_.PureComponent);Ks.displayName="Animate";Ks.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ks.propTypes={from:Ke.oneOfType([Ke.object,Ke.string]),to:Ke.oneOfType([Ke.object,Ke.string]),attributeName:Ke.string,duration:Ke.number,begin:Ke.number,easing:Ke.oneOfType([Ke.string,Ke.func]),steps:Ke.arrayOf(Ke.shape({duration:Ke.number.isRequired,style:Ke.object.isRequired,easing:Ke.oneOfType([Ke.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ke.func]),properties:Ke.arrayOf("string"),onAnimationEnd:Ke.func})),children:Ke.oneOfType([Ke.node,Ke.func]),isActive:Ke.bool,canBegin:Ke.bool,onAnimationEnd:Ke.func,shouldReAnimate:Ke.bool,onAnimationStart:Ke.func,onAnimationReStart:Ke.func};function _i(t){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_i(t)}function xo(){return xo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},xo.apply(this,arguments)}function EW(t,s){return DW(t)||RW(t,s)||MW(t,s)||FW()}function FW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MW(t,s){if(t){if(typeof t=="string")return Vg(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vg(t,s)}}function Vg(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function RW(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function DW(t){if(Array.isArray(t))return t}function Kg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Hg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Kg(Object(r),!0).forEach(function(a){LW(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function LW(t,s,r){return s=IW(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function IW(t){var s=qW(t,"string");return _i(s)=="symbol"?s:s+""}function qW(t,s){if(_i(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(_i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Yg=function(s,r,a,n,i){var l=Math.min(Math.abs(a)/2,Math.abs(n)/2),o=n>=0?1:-1,d=a>=0?1:-1,c=n>=0&&a>=0||n<0&&a<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>l?l:i[h];u="M".concat(s,",").concat(r+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(c,",").concat(s+d*m[0],",").concat(r)),u+="L ".concat(s+a-d*m[1],",").concat(r),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(c,`,
        `).concat(s+a,",").concat(r+o*m[1])),u+="L ".concat(s+a,",").concat(r+n-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(c,`,
        `).concat(s+a-d*m[2],",").concat(r+n)),u+="L ".concat(s+d*m[3],",").concat(r+n),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(c,`,
        `).concat(s,",").concat(r+n-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var p=Math.min(l,i);u="M ".concat(s,",").concat(r+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(s+d*p,",").concat(r,`
            L `).concat(s+a-d*p,",").concat(r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(s+a,",").concat(r+o*p,`
            L `).concat(s+a,",").concat(r+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(s+a-d*p,",").concat(r+n,`
            L `).concat(s+d*p,",").concat(r+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(s,",").concat(r+n-o*p," Z")}else u="M ".concat(s,",").concat(r," h ").concat(a," v ").concat(n," h ").concat(-a," Z");return u},BW=function(s,r){if(!s||!r)return!1;var a=s.x,n=s.y,i=r.x,l=r.y,o=r.width,d=r.height;if(Math.abs(o)>0&&Math.abs(d)>0){var c=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+d),h=Math.max(l,l+d);return a>=c&&a<=u&&n>=m&&n<=h}return!1},UW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lx=function(s){var r=Hg(Hg({},UW),s),a=_.useRef(),n=_.useState(-1),i=EW(n,2),l=i[0],o=i[1];_.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&o(C)}catch{}},[]);var d=r.x,c=r.y,u=r.width,m=r.height,h=r.radius,x=r.className,p=r.animationEasing,b=r.animationDuration,v=r.animationBegin,j=r.isAnimationActive,P=r.isUpdateAnimationActive;if(d!==+d||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var w=Ee("recharts-rectangle",x);return P?Z.createElement(Ks,{canBegin:l>0,from:{width:u,height:m,x:d,y:c},to:{width:u,height:m,x:d,y:c},duration:b,animationEasing:p,isActive:P},function(C){var f=C.width,k=C.height,y=C.x,F=C.y;return Z.createElement(Ks,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:b,isActive:j,easing:p},Z.createElement("path",xo({},_e(r,!0),{className:w,d:Yg(y,F,f,k,h),ref:a})))}):Z.createElement("path",xo({},_e(r,!0),{className:w,d:Yg(d,c,u,m,h)}))},zW=["points","className","baseLinePoints","connectNulls"];function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ja.apply(this,arguments)}function WW(t,s){if(t==null)return{};var r=VW(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function VW(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Gg(t){return GW(t)||YW(t)||HW(t)||KW()}function KW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HW(t,s){if(t){if(typeof t=="string")return Xu(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xu(t,s)}}function YW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GW(t){if(Array.isArray(t))return Xu(t)}function Xu(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}var Qg=function(s){return s&&s.x===+s.x&&s.y===+s.y},QW=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return s.forEach(function(a){Qg(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),Qg(s[0])&&r[r.length-1].push(s[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Gn=function(s,r){var a=QW(s);r&&(a=[a.reduce(function(i,l){return[].concat(Gg(i),Gg(l))},[])]);var n=a.map(function(i){return i.reduce(function(l,o,d){return"".concat(l).concat(d===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return a.length===1?"".concat(n,"Z"):n},XW=function(s,r,a){var n=Gn(s,a);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Gn(r.reverse(),a).slice(1))},JW=function(s){var r=s.points,a=s.className,n=s.baseLinePoints,i=s.connectNulls,l=WW(s,zW);if(!r||!r.length)return null;var o=Ee("recharts-polygon",a);if(n&&n.length){var d=l.stroke&&l.stroke!=="none",c=XW(r,n,i);return Z.createElement("g",{className:o},Z.createElement("path",ja({},_e(l,!0),{fill:c.slice(-1)==="Z"?l.fill:"none",stroke:"none",d:c})),d?Z.createElement("path",ja({},_e(l,!0),{fill:"none",d:Gn(r,i)})):null,d?Z.createElement("path",ja({},_e(l,!0),{fill:"none",d:Gn(n,i)})):null)}var u=Gn(r,i);return Z.createElement("path",ja({},_e(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function Ju(){return Ju=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ju.apply(this,arguments)}var Cc=function(s){var r=s.cx,a=s.cy,n=s.r,i=s.className,l=Ee("recharts-dot",i);return r===+r&&a===+a&&n===+n?_.createElement("circle",Ju({},_e(s,!1),El(s),{className:l,cx:r,cy:a,r:n})):null};function ki(t){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ki(t)}var ZW=["x","y","top","left","width","height","className"];function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Zu.apply(this,arguments)}function Xg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function eV(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Xg(Object(r),!0).forEach(function(a){tV(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function tV(t,s,r){return s=sV(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function sV(t){var s=rV(t,"string");return ki(s)=="symbol"?s:s+""}function rV(t,s){if(ki(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(ki(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function aV(t,s){if(t==null)return{};var r=nV(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function nV(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}var iV=function(s,r,a,n,i,l){return"M".concat(s,",").concat(i,"v").concat(n,"M").concat(l,",").concat(r,"h").concat(a)},lV=function(s){var r=s.x,a=r===void 0?0:r,n=s.y,i=n===void 0?0:n,l=s.top,o=l===void 0?0:l,d=s.left,c=d===void 0?0:d,u=s.width,m=u===void 0?0:u,h=s.height,x=h===void 0?0:h,p=s.className,b=aV(s,ZW),v=eV({x:a,y:i,top:o,left:c,width:m,height:x},b);return!xe(a)||!xe(i)||!xe(m)||!xe(x)||!xe(o)||!xe(c)?null:Z.createElement("path",Zu({},_e(v,!0),{className:Ee("recharts-cross",p),d:iV(a,i,m,x,o,c)}))},oV=Nc,cV=Xv,dV=Ys;function uV(t,s){return t&&t.length?oV(t,dV(s),cV):void 0}var mV=uV;const xV=Je(mV);var hV=Nc,pV=Ys,gV=Jv;function fV(t,s){return t&&t.length?hV(t,pV(s),gV):void 0}var bV=fV;const yV=Je(bV);var vV=["cx","cy","angle","ticks","axisLine"],jV=["ticks","tick","angle","tickFormatter","stroke"];function Wa(t){"@babel/helpers - typeof";return Wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wa(t)}function Qn(){return Qn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Qn.apply(this,arguments)}function Jg(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Rr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Jg(Object(r),!0).forEach(function(a){Pc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jg(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Zg(t,s){if(t==null)return{};var r=NV(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function NV(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function wV(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ef(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Bj(a.key),a)}}function _V(t,s,r){return s&&ef(t.prototype,s),r&&ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kV(t,s,r){return s=ho(s),SV(t,qj()?Reflect.construct(s,r||[],ho(t).constructor):s.apply(t,r))}function SV(t,s){if(s&&(Wa(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CV(t)}function CV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qj=function(){return!!t})()}function ho(t){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ho(t)}function PV(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&em(t,s)}function em(t,s){return em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},em(t,s)}function Pc(t,s,r){return s=Bj(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Bj(t){var s=AV(t,"string");return Wa(s)=="symbol"?s:s+""}function AV(t,s){if(Wa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Wa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ac=function(t){function s(){return wV(this,s),kV(this,s,arguments)}return PV(s,t),_V(s,[{key:"getTickValueCoord",value:function(a){var n=a.coordinate,i=this.props,l=i.angle,o=i.cx,d=i.cy;return st(o,d,n,l)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,n;switch(a){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var a=this.props,n=a.cx,i=a.cy,l=a.angle,o=a.ticks,d=xV(o,function(u){return u.coordinate||0}),c=yV(o,function(u){return u.coordinate||0});return{cx:n,cy:i,startAngle:l,endAngle:l,innerRadius:c.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,l=a.angle,o=a.ticks,d=a.axisLine,c=Zg(a,vV),u=o.reduce(function(p,b){return[Math.min(p[0],b.coordinate),Math.max(p[1],b.coordinate)]},[1/0,-1/0]),m=st(n,i,u[0],l),h=st(n,i,u[1],l),x=Rr(Rr(Rr({},_e(c,!1)),{},{fill:"none"},_e(d,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return Z.createElement("line",Qn({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,l=n.tick,o=n.angle,d=n.tickFormatter,c=n.stroke,u=Zg(n,jV),m=this.getTickTextAnchor(),h=_e(u,!1),x=_e(l,!1),p=i.map(function(b,v){var j=a.getTickValueCoord(b),P=Rr(Rr(Rr(Rr({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(j.x,", ").concat(j.y,")")},h),{},{stroke:"none",fill:c},x),{},{index:v},j),{},{payload:b});return Z.createElement(qe,Qn({className:Ee("recharts-polar-radius-axis-tick",Sj(l)),key:"tick-".concat(b.coordinate)},ta(a.props,b,v)),s.renderTickItem(l,P,d?d(b.value,v):b.value))});return Z.createElement(qe,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.axisLine,l=a.tick;return!n||!n.length?null:Z.createElement(qe,{className:Ee("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Pt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,n,i){var l;return Z.isValidElement(a)?l=Z.cloneElement(a,n):Ce(a)?l=a(n):l=Z.createElement(sa,Qn({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(_.PureComponent);Pc(Ac,"displayName","PolarRadiusAxis");Pc(Ac,"axisType","radiusAxis");Pc(Ac,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Va(t){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Va(t)}function Ur(){return Ur=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ur.apply(this,arguments)}function tf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Dr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?tf(Object(r),!0).forEach(function(a){$c(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function $V(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function sf(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,zj(a.key),a)}}function OV(t,s,r){return s&&sf(t.prototype,s),r&&sf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function TV(t,s,r){return s=po(s),EV(t,Uj()?Reflect.construct(s,r||[],po(t).constructor):s.apply(t,r))}function EV(t,s){if(s&&(Va(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FV(t)}function FV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uj=function(){return!!t})()}function po(t){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},po(t)}function MV(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&tm(t,s)}function tm(t,s){return tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},tm(t,s)}function $c(t,s,r){return s=zj(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function zj(t){var s=RV(t,"string");return Va(s)=="symbol"?s:s+""}function RV(t,s){if(Va(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Va(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DV=Math.PI/180,rf=1e-5,Oc=function(t){function s(){return $V(this,s),TV(this,s,arguments)}return MV(s,t),OV(s,[{key:"getTickLineCoord",value:function(a){var n=this.props,i=n.cx,l=n.cy,o=n.radius,d=n.orientation,c=n.tickSize,u=c||8,m=st(i,l,o,a.coordinate),h=st(i,l,o+(d==="inner"?-1:1)*u,a.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var n=this.props.orientation,i=Math.cos(-a.coordinate*DV),l;return i>rf?l=n==="outer"?"start":"end":i<-rf?l=n==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,l=a.radius,o=a.axisLine,d=a.axisLineType,c=Dr(Dr({},_e(this.props,!1)),{},{fill:"none"},_e(o,!1));if(d==="circle")return Z.createElement(Cc,Ur({className:"recharts-polar-angle-axis-line"},c,{cx:n,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return st(n,i,l,h.coordinate)});return Z.createElement(JW,Ur({className:"recharts-polar-angle-axis-line"},c,{points:m}))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,l=n.tick,o=n.tickLine,d=n.tickFormatter,c=n.stroke,u=_e(this.props,!1),m=_e(l,!1),h=Dr(Dr({},u),{},{fill:"none"},_e(o,!1)),x=i.map(function(p,b){var v=a.getTickLineCoord(p),j=a.getTickTextAnchor(p),P=Dr(Dr(Dr({textAnchor:j},u),{},{stroke:"none",fill:c},m),{},{index:b,payload:p,x:v.x2,y:v.y2});return Z.createElement(qe,Ur({className:Ee("recharts-polar-angle-axis-tick",Sj(l)),key:"tick-".concat(p.coordinate)},ta(a.props,p,b)),o&&Z.createElement("line",Ur({className:"recharts-polar-angle-axis-tick-line"},h,v)),l&&s.renderTickItem(l,P,d?d(p.value,b):p.value))});return Z.createElement(qe,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.radius,l=a.axisLine;return i<=0||!n||!n.length?null:Z.createElement(qe,{className:Ee("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,n,i){var l;return Z.isValidElement(a)?l=Z.cloneElement(a,n):Ce(a)?l=a(n):l=Z.createElement(sa,Ur({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(_.PureComponent);$c(Oc,"displayName","PolarAngleAxis");$c(Oc,"axisType","angleAxis");$c(Oc,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var LV=Hy,IV=LV(Object.getPrototypeOf,Object),qV=IV,BV=mr,UV=qV,zV=xr,WV="[object Object]",VV=Function.prototype,KV=Object.prototype,Wj=VV.toString,HV=KV.hasOwnProperty,YV=Wj.call(Object);function GV(t){if(!zV(t)||BV(t)!=WV)return!1;var s=UV(t);if(s===null)return!0;var r=HV.call(s,"constructor")&&s.constructor;return typeof r=="function"&&r instanceof r&&Wj.call(r)==YV}var QV=GV;const XV=Je(QV);var JV=mr,ZV=xr,eK="[object Boolean]";function tK(t){return t===!0||t===!1||ZV(t)&&JV(t)==eK}var sK=tK;const rK=Je(sK);function Si(t){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Si(t)}function go(){return go=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},go.apply(this,arguments)}function aK(t,s){return oK(t)||lK(t,s)||iK(t,s)||nK()}function nK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iK(t,s){if(t){if(typeof t=="string")return af(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return af(t,s)}}function af(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function lK(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function oK(t){if(Array.isArray(t))return t}function nf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function lf(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?nf(Object(r),!0).forEach(function(a){cK(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function cK(t,s,r){return s=dK(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function dK(t){var s=uK(t,"string");return Si(s)=="symbol"?s:s+""}function uK(t,s){if(Si(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Si(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var of=function(s,r,a,n,i){var l=a-n,o;return o="M ".concat(s,",").concat(r),o+="L ".concat(s+a,",").concat(r),o+="L ".concat(s+a-l/2,",").concat(r+i),o+="L ".concat(s+a-l/2-n,",").concat(r+i),o+="L ".concat(s,",").concat(r," Z"),o},mK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xK=function(s){var r=lf(lf({},mK),s),a=_.useRef(),n=_.useState(-1),i=aK(n,2),l=i[0],o=i[1];_.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var w=a.current.getTotalLength();w&&o(w)}catch{}},[]);var d=r.x,c=r.y,u=r.upperWidth,m=r.lowerWidth,h=r.height,x=r.className,p=r.animationEasing,b=r.animationDuration,v=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||c!==+c||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var P=Ee("recharts-trapezoid",x);return j?Z.createElement(Ks,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:d,y:c},to:{upperWidth:u,lowerWidth:m,height:h,x:d,y:c},duration:b,animationEasing:p,isActive:j},function(w){var C=w.upperWidth,f=w.lowerWidth,k=w.height,y=w.x,F=w.y;return Z.createElement(Ks,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:b,easing:p},Z.createElement("path",go({},_e(r,!0),{className:P,d:of(y,F,C,f,k),ref:a})))}):Z.createElement("g",null,Z.createElement("path",go({},_e(r,!0),{className:P,d:of(d,c,u,m,h)})))},hK=["option","shapeType","propTransformer","activeClassName","isActive"];function Ci(t){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ci(t)}function pK(t,s){if(t==null)return{};var r=gK(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function gK(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function cf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function fo(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?cf(Object(r),!0).forEach(function(a){fK(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function fK(t,s,r){return s=bK(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function bK(t){var s=yK(t,"string");return Ci(s)=="symbol"?s:s+""}function yK(t,s){if(Ci(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ci(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function vK(t,s){return fo(fo({},s),t)}function jK(t,s){return t==="symbols"}function df(t){var s=t.shapeType,r=t.elementProps;switch(s){case"rectangle":return Z.createElement(Lx,r);case"trapezoid":return Z.createElement(xK,r);case"sector":return Z.createElement(Aj,r);case"symbols":if(jK(s))return Z.createElement(rx,r);break;default:return null}}function NK(t){return _.isValidElement(t)?t.props:t}function Vj(t){var s=t.option,r=t.shapeType,a=t.propTransformer,n=a===void 0?vK:a,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,o=t.isActive,d=pK(t,hK),c;if(_.isValidElement(s))c=_.cloneElement(s,fo(fo({},d),NK(s)));else if(Ce(s))c=s(d);else if(XV(s)&&!rK(s)){var u=n(s,d);c=Z.createElement(df,{shapeType:r,elementProps:u})}else{var m=d;c=Z.createElement(df,{shapeType:r,elementProps:m})}return o?Z.createElement(qe,{className:l},c):c}function Tc(t,s){return s!=null&&"trapezoids"in t.props}function Ec(t,s){return s!=null&&"sectors"in t.props}function Pi(t,s){return s!=null&&"points"in t.props}function wK(t,s){var r,a,n=t.x===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===s.x,i=t.y===(s==null||(a=s.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===s.y;return n&&i}function _K(t,s){var r=t.endAngle===s.endAngle,a=t.startAngle===s.startAngle;return r&&a}function kK(t,s){var r=t.x===s.x,a=t.y===s.y,n=t.z===s.z;return r&&a&&n}function SK(t,s){var r;return Tc(t,s)?r=wK:Ec(t,s)?r=_K:Pi(t,s)&&(r=kK),r}function CK(t,s){var r;return Tc(t,s)?r="trapezoids":Ec(t,s)?r="sectors":Pi(t,s)&&(r="points"),r}function PK(t,s){if(Tc(t,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Ec(t,s)){var a;return(a=s.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Pi(t,s)?s.payload:{}}function AK(t){var s=t.activeTooltipItem,r=t.graphicalItem,a=t.itemData,n=CK(r,s),i=PK(r,s),l=a.filter(function(d,c){var u=Ba(i,d),m=r.props[n].filter(function(p){var b=SK(r,s);return b(p,s)}),h=r.props[n].indexOf(m[m.length-1]),x=c===h;return u&&x}),o=a.indexOf(l[l.length-1]);return o}var Cl;function Ka(t){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ka(t)}function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Na.apply(this,arguments)}function uf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function et(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?uf(Object(r),!0).forEach(function(a){ps(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function $K(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function mf(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Hj(a.key),a)}}function OK(t,s,r){return s&&mf(t.prototype,s),r&&mf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function TK(t,s,r){return s=bo(s),EK(t,Kj()?Reflect.construct(s,r||[],bo(t).constructor):s.apply(t,r))}function EK(t,s){if(s&&(Ka(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FK(t)}function FK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kj=function(){return!!t})()}function bo(t){return bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bo(t)}function MK(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&sm(t,s)}function sm(t,s){return sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},sm(t,s)}function ps(t,s,r){return s=Hj(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Hj(t){var s=RK(t,"string");return Ka(s)=="symbol"?s:s+""}function RK(t,s){if(Ka(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ka(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pr=function(t){function s(r){var a;return $K(this,s),a=TK(this,s,[r]),ps(a,"pieRef",null),ps(a,"sectorRefs",[]),ps(a,"id",bn("recharts-pie-")),ps(a,"handleAnimationEnd",function(){var n=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Ce(n)&&n()}),ps(a,"handleAnimationStart",function(){var n=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Ce(n)&&n()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return MK(s,t),OK(s,[{key:"isActiveIndex",value:function(a){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(a)!==-1:a===n}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,d=i.dataKey,c=i.valueKey,u=_e(this.props,!1),m=_e(l,!1),h=_e(o,!1),x=l&&l.offsetRadius||20,p=a.map(function(b,v){var j=(b.startAngle+b.endAngle)/2,P=st(b.cx,b.cy,b.outerRadius+x,j),w=et(et(et(et({},u),b),{},{stroke:"none"},m),{},{index:v,textAnchor:s.getTextAnchor(P.x,b.cx)},P),C=et(et(et(et({},u),b),{},{fill:"none",stroke:b.fill},h),{},{index:v,points:[st(b.cx,b.cy,b.outerRadius,j),P]}),f=d;return Ae(d)&&Ae(c)?f="value":Ae(d)&&(f=c),Z.createElement(qe,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(v)},o&&s.renderLabelLineItem(o,C,"line"),s.renderLabelItem(l,w,Nt(b,f)))});return Z.createElement(qe,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(a){var n=this,i=this.props,l=i.activeShape,o=i.blendStroke,d=i.inactiveShape;return a.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&a.length!==1)return null;var m=n.isActiveIndex(u),h=d&&n.hasActiveIndex()?d:null,x=m?l:h,p=et(et({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return Z.createElement(qe,Na({ref:function(v){v&&!n.sectorRefs.includes(v)&&n.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},ta(n.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),Z.createElement(Vj,Na({option:x,isActive:m,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,n=this.props,i=n.sectors,l=n.isAnimationActive,o=n.animationBegin,d=n.animationDuration,c=n.animationEasing,u=n.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return Z.createElement(Ks,{begin:o,duration:d,isActive:l,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var b=p.t,v=[],j=i&&i[0],P=j.startAngle;return i.forEach(function(w,C){var f=h&&h[C],k=C>0?cs(w,"paddingAngle",0):0;if(f){var y=Jt(f.endAngle-f.startAngle,w.endAngle-w.startAngle),F=et(et({},w),{},{startAngle:P+k,endAngle:P+y(b)+k});v.push(F),P=F.endAngle}else{var M=w.endAngle,E=w.startAngle,B=Jt(0,M-E),A=B(b),L=et(et({},w),{},{startAngle:P+k,endAngle:P+A+k});v.push(L),P=L.endAngle}}),Z.createElement(qe,null,a.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(a){var n=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[l].focus(),n.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[o].focus(),n.setState({sectorToFocus:o});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,n=a.sectors,i=a.isAnimationActive,l=this.state.prevSectors;return i&&n&&n.length&&(!l||!Ba(l,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,n=this.props,i=n.hide,l=n.sectors,o=n.className,d=n.label,c=n.cx,u=n.cy,m=n.innerRadius,h=n.outerRadius,x=n.isAnimationActive,p=this.state.isAnimationFinished;if(i||!l||!l.length||!xe(c)||!xe(u)||!xe(m)||!xe(h))return null;var b=Ee("recharts-pie",o);return Z.createElement(qe,{tabIndex:this.props.rootTabIndex,className:b,ref:function(j){a.pieRef=j}},this.renderSectors(),d&&this.renderLabels(l),Pt.renderCallByParent(this.props,null,!1),(!x||p)&&nr.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return n.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:a.sectors!==n.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,n){return a>n?"start":a<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,n,i){if(Z.isValidElement(a))return Z.cloneElement(a,n);if(Ce(a))return a(n);var l=Ee("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Z.createElement(Pa,Na({},n,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(a,n,i){if(Z.isValidElement(a))return Z.cloneElement(a,n);var l=i;if(Ce(a)&&(l=a(n),Z.isValidElement(l)))return l;var o=Ee("recharts-pie-label-text",typeof a!="boolean"&&!Ce(a)?a.className:"");return Z.createElement(sa,Na({},n,{alignmentBaseline:"middle",className:o}),l)}}])}(_.PureComponent);Cl=pr;ps(pr,"displayName","Pie");ps(pr,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!la.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ps(pr,"parseDeltaAngle",function(t,s){var r=Yt(s-t),a=Math.min(Math.abs(s-t),360);return r*a});ps(pr,"getRealPieData",function(t){var s=t.data,r=t.children,a=_e(t,!1),n=fs(r,pc);return s&&s.length?s.map(function(i,l){return et(et(et({payload:i},a),i),n&&n[l]&&n[l].props)}):n&&n.length?n.map(function(i){return et(et({},a),i.props)}):[]});ps(pr,"parseCoordinateOfPie",function(t,s){var r=s.top,a=s.left,n=s.width,i=s.height,l=kj(n,i),o=a+Gt(t.cx,n,n/2),d=r+Gt(t.cy,i,i/2),c=Gt(t.innerRadius,l,0),u=Gt(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:o,cy:d,innerRadius:c,outerRadius:u,maxRadius:m}});ps(pr,"getComposedData",function(t){var s=t.item,r=t.offset,a=s.type.defaultProps!==void 0?et(et({},s.type.defaultProps),s.props):s.props,n=Cl.getRealPieData(a);if(!n||!n.length)return null;var i=a.cornerRadius,l=a.startAngle,o=a.endAngle,d=a.paddingAngle,c=a.dataKey,u=a.nameKey,m=a.valueKey,h=a.tooltipType,x=Math.abs(a.minAngle),p=Cl.parseCoordinateOfPie(a,r),b=Cl.parseDeltaAngle(l,o),v=Math.abs(b),j=c;Ae(c)&&Ae(m)?(Os(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Ae(c)&&(Os(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=m);var P=n.filter(function(F){return Nt(F,j,0)!==0}).length,w=(v>=360?P:P-1)*d,C=v-P*x-w,f=n.reduce(function(F,M){var E=Nt(M,j,0);return F+(xe(E)?E:0)},0),k;if(f>0){var y;k=n.map(function(F,M){var E=Nt(F,j,0),B=Nt(F,u,M),A=(xe(E)?E:0)/f,L;M?L=y.endAngle+Yt(b)*d*(E!==0?1:0):L=l;var N=L+Yt(b)*((E!==0?x:0)+A*C),R=(L+N)/2,O=(p.innerRadius+p.outerRadius)/2,T=[{name:B,value:E,payload:F,dataKey:j,type:h}],g=st(p.cx,p.cy,O,R);return y=et(et(et({percent:A,cornerRadius:i,name:B,tooltipPayload:T,midAngle:R,middleRadius:O,tooltipPosition:g},F),p),{},{value:Nt(F,j),startAngle:L,endAngle:N,payload:F,paddingAngle:Yt(b)*d}),y})}return et(et({},p),{},{sectors:k,data:n})});var DK=Math.ceil,LK=Math.max;function IK(t,s,r,a){for(var n=-1,i=LK(DK((s-t)/(r||1)),0),l=Array(i);i--;)l[a?i:++n]=t,t+=r;return l}var qK=IK,BK=mv,xf=1/0,UK=17976931348623157e292;function zK(t){if(!t)return t===0?t:0;if(t=BK(t),t===xf||t===-xf){var s=t<0?-1:1;return s*UK}return t===t?t:0}var Yj=zK,WK=qK,VK=hc,Sd=Yj;function KK(t){return function(s,r,a){return a&&typeof a!="number"&&VK(s,r,a)&&(r=a=void 0),s=Sd(s),r===void 0?(r=s,s=0):r=Sd(r),a=a===void 0?s<r?1:-1:Sd(a),WK(s,r,a,t)}}var HK=KK,YK=HK,GK=YK(),QK=GK;const yo=Je(QK);function Ai(t){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ai(t)}function hf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function pf(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?hf(Object(r),!0).forEach(function(a){Gj(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Gj(t,s,r){return s=XK(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function XK(t){var s=JK(t,"string");return Ai(s)=="symbol"?s:s+""}function JK(t,s){if(Ai(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ai(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var ZK=["Webkit","Moz","O","ms"],eH=function(s,r){var a=s.replace(/(\w)/,function(i){return i.toUpperCase()}),n=ZK.reduce(function(i,l){return pf(pf({},i),{},Gj({},l+a,r))},{});return n[s]=r,n};function Ha(t){"@babel/helpers - typeof";return Ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ha(t)}function vo(){return vo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},vo.apply(this,arguments)}function gf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Cd(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?gf(Object(r),!0).forEach(function(a){as(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function tH(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ff(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Xj(a.key),a)}}function sH(t,s,r){return s&&ff(t.prototype,s),r&&ff(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rH(t,s,r){return s=jo(s),aH(t,Qj()?Reflect.construct(s,r||[],jo(t).constructor):s.apply(t,r))}function aH(t,s){if(s&&(Ha(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nH(t)}function nH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qj=function(){return!!t})()}function jo(t){return jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jo(t)}function iH(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&rm(t,s)}function rm(t,s){return rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},rm(t,s)}function as(t,s,r){return s=Xj(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Xj(t){var s=lH(t,"string");return Ha(s)=="symbol"?s:s+""}function lH(t,s){if(Ha(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ha(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oH=function(s){var r=s.data,a=s.startIndex,n=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!r||!r.length)return{};var d=r.length,c=Kn().domain(yo(0,d)).range([i,i+l-o]),u=c.domain().map(function(m){return c(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(a),endX:c(n),scale:c,scaleValues:u}},bf=function(s){return s.changedTouches&&!!s.changedTouches.length},Ya=function(t){function s(r){var a;return tH(this,s),a=rH(this,s,[r]),as(a,"handleDrag",function(n){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(n):a.state.isSlideMoving&&a.handleSlideDrag(n)}),as(a,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&a.handleDrag(n.changedTouches[0])}),as(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=a.props,i=n.endIndex,l=n.onDragEnd,o=n.startIndex;l==null||l({endIndex:i,startIndex:o})}),a.detachDragEndListener()}),as(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),as(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),as(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),as(a,"handleSlideDragStart",function(n){var i=bf(n)?n.changedTouches[0]:n;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return iH(s,t),sH(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var n=a.startX,i=a.endX,l=this.state.scaleValues,o=this.props,d=o.gap,c=o.data,u=c.length-1,m=Math.min(n,i),h=Math.max(n,i),x=s.getIndexInRange(l,m),p=s.getIndexInRange(l,h);return{startIndex:x-x%d,endIndex:p===u?u:p-p%d}}},{key:"getTextOfTick",value:function(a){var n=this.props,i=n.data,l=n.tickFormatter,o=n.dataKey,d=Nt(i[a],o,a);return Ce(l)?l(d,a):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var n=this.state,i=n.slideMoveStartX,l=n.startX,o=n.endX,d=this.props,c=d.x,u=d.width,m=d.travellerWidth,h=d.startIndex,x=d.endIndex,p=d.onChange,b=a.pageX-i;b>0?b=Math.min(b,c+u-m-o,c+u-m-l):b<0&&(b=Math.max(b,c-l,c-o));var v=this.getIndex({startX:l+b,endX:o+b});(v.startIndex!==h||v.endIndex!==x)&&p&&p(v),this.setState({startX:l+b,endX:o+b,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,n){var i=bf(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var n=this.state,i=n.brushMoveStartX,l=n.movingTravellerId,o=n.endX,d=n.startX,c=this.state[l],u=this.props,m=u.x,h=u.width,x=u.travellerWidth,p=u.onChange,b=u.gap,v=u.data,j={startX:this.state.startX,endX:this.state.endX},P=a.pageX-i;P>0?P=Math.min(P,m+h-x-c):P<0&&(P=Math.max(P,m-c)),j[l]=c+P;var w=this.getIndex(j),C=w.startIndex,f=w.endIndex,k=function(){var F=v.length-1;return l==="startX"&&(o>d?C%b===0:f%b===0)||o<d&&f===F||l==="endX"&&(o>d?f%b===0:C%b===0)||o>d&&f===F};this.setState(as(as({},l,c+P),"brushMoveStartX",a.pageX),function(){p&&k()&&p(w)})}},{key:"handleTravellerMoveKeyboard",value:function(a,n){var i=this,l=this.state,o=l.scaleValues,d=l.startX,c=l.endX,u=this.state[n],m=o.indexOf(u);if(m!==-1){var h=m+a;if(!(h===-1||h>=o.length)){var x=o[h];n==="startX"&&x>=c||n==="endX"&&x<=d||this.setState(as({},n,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,n=a.x,i=a.y,l=a.width,o=a.height,d=a.fill,c=a.stroke;return Z.createElement("rect",{stroke:c,fill:d,x:n,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var a=this.props,n=a.x,i=a.y,l=a.width,o=a.height,d=a.data,c=a.children,u=a.padding,m=_.Children.only(c);return m?Z.cloneElement(m,{x:n,y:i,width:l,height:o,margin:u,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(a,n){var i,l,o=this,d=this.props,c=d.y,u=d.travellerWidth,m=d.height,h=d.traveller,x=d.ariaLabel,p=d.data,b=d.startIndex,v=d.endIndex,j=Math.max(a,this.props.x),P=Cd(Cd({},_e(this.props,!1)),{},{x:j,y:c,width:u,height:m}),w=x||"Min value: ".concat((i=p[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=p[v])===null||l===void 0?void 0:l.name);return Z.createElement(qe,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(f){["ArrowLeft","ArrowRight"].includes(f.key)&&(f.preventDefault(),f.stopPropagation(),o.handleTravellerMoveKeyboard(f.key==="ArrowRight"?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(h,P))}},{key:"renderSlide",value:function(a,n){var i=this.props,l=i.y,o=i.height,d=i.stroke,c=i.travellerWidth,u=Math.min(a,n)+c,m=Math.max(Math.abs(n-a)-c,0);return Z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var a=this.props,n=a.startIndex,i=a.endIndex,l=a.y,o=a.height,d=a.travellerWidth,c=a.stroke,u=this.state,m=u.startX,h=u.endX,x=5,p={pointerEvents:"none",fill:c};return Z.createElement(qe,{className:"recharts-brush-texts"},Z.createElement(sa,vo({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:l+o/2},p),this.getTextOfTick(n)),Z.createElement(sa,vo({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+d+x,y:l+o/2},p),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,n=a.data,i=a.className,l=a.children,o=a.x,d=a.y,c=a.width,u=a.height,m=a.alwaysShowText,h=this.state,x=h.startX,p=h.endX,b=h.isTextActive,v=h.isSlideMoving,j=h.isTravellerMoving,P=h.isTravellerFocused;if(!n||!n.length||!xe(o)||!xe(d)||!xe(c)||!xe(u)||c<=0||u<=0)return null;var w=Ee("recharts-brush",i),C=Z.Children.count(l)===1,f=eH("userSelect","none");return Z.createElement(qe,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:f},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(x,p),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(p,"endX"),(b||v||j||P||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var n=a.x,i=a.y,l=a.width,o=a.height,d=a.stroke,c=Math.floor(i+o/2)-1;return Z.createElement(Z.Fragment,null,Z.createElement("rect",{x:n,y:i,width:l,height:o,fill:d,stroke:"none"}),Z.createElement("line",{x1:n+1,y1:c,x2:n+l-1,y2:c,fill:"none",stroke:"#fff"}),Z.createElement("line",{x1:n+1,y1:c+2,x2:n+l-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,n){var i;return Z.isValidElement(a)?i=Z.cloneElement(a,n):Ce(a)?i=a(n):i=s.renderDefaultTraveller(n),i}},{key:"getDerivedStateFromProps",value:function(a,n){var i=a.data,l=a.width,o=a.x,d=a.travellerWidth,c=a.updateId,u=a.startIndex,m=a.endIndex;if(i!==n.prevData||c!==n.prevUpdateId)return Cd({prevData:i,prevTravellerWidth:d,prevUpdateId:c,prevX:o,prevWidth:l},i&&i.length?oH({data:i,width:l,x:o,travellerWidth:d,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(n.scale&&(l!==n.prevWidth||o!==n.prevX||d!==n.prevTravellerWidth)){n.scale.range([o,o+l-d]);var h=n.scale.domain().map(function(x){return n.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:c,prevX:o,prevWidth:l,startX:n.scale(a.startIndex),endX:n.scale(a.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(a,n){for(var i=a.length,l=0,o=i-1;o-l>1;){var d=Math.floor((l+o)/2);a[d]>n?o=d:l=d}return n>=a[o]?o:l}}])}(_.PureComponent);as(Ya,"displayName","Brush");as(Ya,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cH=dx;function dH(t,s){var r;return cH(t,function(a,n,i){return r=s(a,n,i),!r}),!!r}var uH=dH,mH=Iy,xH=Ys,hH=uH,pH=rs,gH=hc;function fH(t,s,r){var a=pH(t)?mH:hH;return r&&gH(t,s,r)&&(s=void 0),a(t,xH(s))}var bH=fH;const yH=Je(bH);var Us=function(s,r){var a=s.alwaysShow,n=s.ifOverflow;return a&&(n="extendDomain"),n===r},yf=lv;function vH(t,s,r){s=="__proto__"&&yf?yf(t,s,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[s]=r}var jH=vH,NH=jH,wH=nv,_H=Ys;function kH(t,s){var r={};return s=_H(s),wH(t,function(a,n,i){NH(r,n,s(a,n,i))}),r}var SH=kH;const CH=Je(SH);function PH(t,s){for(var r=-1,a=t==null?0:t.length;++r<a;)if(!s(t[r],r,t))return!1;return!0}var AH=PH,$H=dx;function OH(t,s){var r=!0;return $H(t,function(a,n,i){return r=!!s(a,n,i),r}),r}var TH=OH,EH=AH,FH=TH,MH=Ys,RH=rs,DH=hc;function LH(t,s,r){var a=RH(t)?EH:FH;return r&&DH(t,s,r)&&(s=void 0),a(t,MH(s))}var IH=LH;const Jj=Je(IH);var qH=["x","y"];function $i(t){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$i(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},am.apply(this,arguments)}function vf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function In(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?vf(Object(r),!0).forEach(function(a){BH(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function BH(t,s,r){return s=UH(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function UH(t){var s=zH(t,"string");return $i(s)=="symbol"?s:s+""}function zH(t,s){if($i(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if($i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function WH(t,s){if(t==null)return{};var r=VH(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function VH(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function KH(t,s){var r=t.x,a=t.y,n=WH(t,qH),i="".concat(r),l=parseInt(i,10),o="".concat(a),d=parseInt(o,10),c="".concat(s.height||n.height),u=parseInt(c,10),m="".concat(s.width||n.width),h=parseInt(m,10);return In(In(In(In(In({},s),n),l?{x:l}:{}),d?{y:d}:{}),{},{height:u,width:h,name:s.name,radius:s.radius})}function jf(t){return Z.createElement(Vj,am({shapeType:"rectangle",propTransformer:KH,activeClassName:"recharts-active-bar"},t))}var HH=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,n){if(typeof s=="number")return s;var i=xe(a)||fA(a);return i?s(a,n):(i||aa(),r)}},YH=["value","background"],Zj;function Ga(t){"@babel/helpers - typeof";return Ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ga(t)}function GH(t,s){if(t==null)return{};var r=QH(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function QH(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function No(){return No=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},No.apply(this,arguments)}function Nf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function pt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Nf(Object(r),!0).forEach(function(a){jr(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function XH(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wf(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,tN(a.key),a)}}function JH(t,s,r){return s&&wf(t.prototype,s),r&&wf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZH(t,s,r){return s=wo(s),eY(t,eN()?Reflect.construct(s,r||[],wo(t).constructor):s.apply(t,r))}function eY(t,s){if(s&&(Ga(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tY(t)}function tY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!t})()}function wo(t){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wo(t)}function sY(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&nm(t,s)}function nm(t,s){return nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},nm(t,s)}function jr(t,s,r){return s=tN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function tN(t){var s=rY(t,"string");return Ga(s)=="symbol"?s:s+""}function rY(t,s){if(Ga(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ga(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gi=function(t){function s(){var r;XH(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return r=ZH(this,s,[].concat(n)),jr(r,"state",{isAnimationFinished:!1}),jr(r,"id",bn("recharts-bar-")),jr(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),jr(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return sY(s,t),JH(s,[{key:"renderRectanglesStatically",value:function(a){var n=this,i=this.props,l=i.shape,o=i.dataKey,d=i.activeIndex,c=i.activeBar,u=_e(this.props,!1);return a&&a.map(function(m,h){var x=h===d,p=x?c:l,b=pt(pt(pt({},u),m),{},{isActive:x,option:p,index:h,dataKey:o,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return Z.createElement(qe,No({className:"recharts-bar-rectangle"},ta(n.props,m,h),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(h)}),Z.createElement(jf,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,n=this.props,i=n.data,l=n.layout,o=n.isAnimationActive,d=n.animationBegin,c=n.animationDuration,u=n.animationEasing,m=n.animationId,h=this.state.prevData;return Z.createElement(Ks,{begin:d,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var p=x.t,b=i.map(function(v,j){var P=h&&h[j];if(P){var w=Jt(P.x,v.x),C=Jt(P.y,v.y),f=Jt(P.width,v.width),k=Jt(P.height,v.height);return pt(pt({},v),{},{x:w(p),y:C(p),width:f(p),height:k(p)})}if(l==="horizontal"){var y=Jt(0,v.height),F=y(p);return pt(pt({},v),{},{y:v.y+v.height-F,height:F})}var M=Jt(0,v.width),E=M(p);return pt(pt({},v),{},{width:E})});return Z.createElement(qe,null,a.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var a=this.props,n=a.data,i=a.isAnimationActive,l=this.state.prevData;return i&&n&&n.length&&(!l||!Ba(l,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var a=this,n=this.props,i=n.data,l=n.dataKey,o=n.activeIndex,d=_e(this.props.background,!1);return i.map(function(c,u){c.value;var m=c.background,h=GH(c,YH);if(!m)return null;var x=pt(pt(pt(pt(pt({},h),{},{fill:"#eee"},m),d),ta(a.props,c,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return Z.createElement(jf,No({key:"background-bar-".concat(u),option:a.props.background,isActive:u===o},x))})}},{key:"renderErrorBar",value:function(a,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,d=i.yAxis,c=i.layout,u=i.children,m=fs(u,Sc);if(!m)return null;var h=c==="vertical"?l[0].height/2:l[0].width/2,x=function(v,j){var P=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:P,errorVal:Nt(v,j)}},p={clipPath:a?"url(#clipPath-".concat(n,")"):null};return Z.createElement(qe,p,m.map(function(b){return Z.cloneElement(b,{key:"error-bar-".concat(n,"-").concat(b.props.dataKey),data:l,xAxis:o,yAxis:d,layout:c,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,n=a.hide,i=a.data,l=a.className,o=a.xAxis,d=a.yAxis,c=a.left,u=a.top,m=a.width,h=a.height,x=a.isAnimationActive,p=a.background,b=a.id;if(n||!i||!i.length)return null;var v=this.state.isAnimationFinished,j=Ee("recharts-bar",l),P=o&&o.allowDataOverflow,w=d&&d.allowDataOverflow,C=P||w,f=Ae(b)?this.id:b;return Z.createElement(qe,{className:j},P||w?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(f)},Z.createElement("rect",{x:P?c:c-m/2,y:w?u:u-h/2,width:P?m:m*2,height:w?h:h*2}))):null,Z.createElement(qe,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(f,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,f),(!x||v)&&nr.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:n.curData}:a.data!==n.curData?{curData:a.data}:null}}])}(_.PureComponent);Zj=Gi;jr(Gi,"displayName","Bar");jr(Gi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!la.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});jr(Gi,"getComposedData",function(t){var s=t.props,r=t.item,a=t.barPosition,n=t.bandSize,i=t.xAxis,l=t.yAxis,o=t.xAxisTicks,d=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=RB(a,r);if(!x)return null;var p=s.layout,b=r.type.defaultProps,v=b!==void 0?pt(pt({},b),r.props):r.props,j=v.dataKey,P=v.children,w=v.minPointSize,C=p==="horizontal"?l:i,f=c?C.scale.domain():null,k=zB({numericAxis:C}),y=fs(P,pc),F=m.map(function(M,E){var B,A,L,N,R,O;c?B=DB(c[u+E],f):(B=Nt(M,j),Array.isArray(B)||(B=[k,B]));var T=HH(w,Zj.defaultProps.minPointSize)(B[1],E);if(p==="horizontal"){var g,D=[l.scale(B[0]),l.scale(B[1])],S=D[0],$=D[1];A=ug({axis:i,ticks:o,bandSize:n,offset:x.offset,entry:M,index:E}),L=(g=$??S)!==null&&g!==void 0?g:void 0,N=x.size;var I=S-$;if(R=Number.isNaN(I)?0:I,O={x:A,y:l.y,width:N,height:l.height},Math.abs(T)>0&&Math.abs(R)<Math.abs(T)){var K=Yt(R||T)*(Math.abs(T)-Math.abs(R));L-=K,R+=K}}else{var U=[i.scale(B[0]),i.scale(B[1])],q=U[0],z=U[1];if(A=q,L=ug({axis:l,ticks:d,bandSize:n,offset:x.offset,entry:M,index:E}),N=z-q,R=x.size,O={x:i.x,y:L,width:i.width,height:R},Math.abs(T)>0&&Math.abs(N)<Math.abs(T)){var Y=Yt(N||T)*(Math.abs(T)-Math.abs(N));N+=Y}}return pt(pt(pt({},M),{},{x:A,y:L,width:N,height:R,value:c?B:B[1],payload:M,background:O},y&&y[E]&&y[E].props),{},{tooltipPayload:[wj(r,M)],tooltipPosition:{x:A+N/2,y:L+R/2}})});return pt({data:F,layout:p},h)});function Oi(t){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Oi(t)}function aY(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _f(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,sN(a.key),a)}}function nY(t,s,r){return s&&_f(t.prototype,s),r&&_f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function As(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?kf(Object(r),!0).forEach(function(a){Fc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Fc(t,s,r){return s=sN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function sN(t){var s=iY(t,"string");return Oi(s)=="symbol"?s:s+""}function iY(t,s){if(Oi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Oi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var lY=function(s,r,a,n,i){var l=s.width,o=s.height,d=s.layout,c=s.children,u=Object.keys(r),m={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:o-a.bottom,bottomMirror:o-a.bottom},h=!!ns(c,Gi);return u.reduce(function(x,p){var b=r[p],v=b.orientation,j=b.domain,P=b.padding,w=P===void 0?{}:P,C=b.mirror,f=b.reversed,k="".concat(v).concat(C?"Mirror":""),y,F,M,E,B;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var A=j[1]-j[0],L=1/0,N=b.categoricalDomain.sort(vA);if(N.forEach(function(U,q){q>0&&(L=Math.min((U||0)-(N[q-1]||0),L))}),Number.isFinite(L)){var R=L/A,O=b.layout==="vertical"?a.height:a.width;if(b.padding==="gap"&&(y=R*O/2),b.padding==="no-gap"){var T=Gt(s.barCategoryGap,R*O),g=R*O/2;y=g-T-(g-T)/O*T}}}n==="xAxis"?F=[a.left+(w.left||0)+(y||0),a.left+a.width-(w.right||0)-(y||0)]:n==="yAxis"?F=d==="horizontal"?[a.top+a.height-(w.bottom||0),a.top+(w.top||0)]:[a.top+(w.top||0)+(y||0),a.top+a.height-(w.bottom||0)-(y||0)]:F=b.range,f&&(F=[F[1],F[0]]);var D=yj(b,i,h),S=D.scale,$=D.realScaleType;S.domain(j).range(F),vj(S);var I=jj(S,As(As({},b),{},{realScaleType:$}));n==="xAxis"?(B=v==="top"&&!C||v==="bottom"&&C,M=a.left,E=m[k]-B*b.height):n==="yAxis"&&(B=v==="left"&&!C||v==="right"&&C,M=m[k]-B*b.width,E=a.top);var K=As(As(As({},b),I),{},{realScaleType:$,x:M,y:E,scale:S,width:n==="xAxis"?a.width:b.width,height:n==="yAxis"?a.height:b.height});return K.bandSize=io(K,I),!b.hide&&n==="xAxis"?m[k]+=(B?-1:1)*K.height:b.hide||(m[k]+=(B?-1:1)*K.width),As(As({},x),{},Fc({},p,K))},{})},rN=function(s,r){var a=s.x,n=s.y,i=r.x,l=r.y;return{x:Math.min(a,i),y:Math.min(n,l),width:Math.abs(i-a),height:Math.abs(l-n)}},oY=function(s){var r=s.x1,a=s.y1,n=s.x2,i=s.y2;return rN({x:r,y:a},{x:n,y:i})},aN=function(){function t(s){aY(this,t),this.scale=s}return nY(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(n){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),n=a[0],i=a[a.length-1];return n<=i?r>=n&&r<=i:r>=i&&r<=n}}],[{key:"create",value:function(r){return new t(r)}}])}();Fc(aN,"EPS",1e-4);var Ix=function(s){var r=Object.keys(s).reduce(function(a,n){return As(As({},a),{},Fc({},n,aN.create(s[n])))},{});return As(As({},r),{},{apply:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return CH(n,function(d,c){return r[c].apply(d,{bandAware:l,position:o})})},isInRange:function(n){return Jj(n,function(i,l){return r[l].isInRange(i)})}})};function cY(t){return(t%180+180)%180}var dY=function(s){var r=s.width,a=s.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=cY(n),l=i*Math.PI/180,o=Math.atan(a/r),d=l>o&&l<Math.PI-o?a/Math.sin(l):r/Math.cos(l);return Math.abs(d)},uY=Ys,mY=Wi,xY=mc;function hY(t){return function(s,r,a){var n=Object(s);if(!mY(s)){var i=uY(r);s=xY(s),r=function(o){return i(n[o],o,n)}}var l=t(s,r,a);return l>-1?n[i?s[l]:l]:void 0}}var pY=hY,gY=Yj;function fY(t){var s=gY(t),r=s%1;return s===s?r?s-r:s:0}var bY=fY,yY=Zy,vY=Ys,jY=bY,NY=Math.max;function wY(t,s,r){var a=t==null?0:t.length;if(!a)return-1;var n=r==null?0:jY(r);return n<0&&(n=NY(a+n,0)),yY(t,vY(s),n)}var _Y=wY,kY=pY,SY=_Y,CY=kY(SY),PY=CY;const AY=Je(PY);var $Y=wP(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),qx=_.createContext(void 0),Bx=_.createContext(void 0),nN=_.createContext(void 0),iN=_.createContext({}),lN=_.createContext(void 0),oN=_.createContext(0),cN=_.createContext(0),Sf=function(s){var r=s.state,a=r.xAxisMap,n=r.yAxisMap,i=r.offset,l=s.clipPathId,o=s.children,d=s.width,c=s.height,u=$Y(i);return Z.createElement(qx.Provider,{value:a},Z.createElement(Bx.Provider,{value:n},Z.createElement(iN.Provider,{value:i},Z.createElement(nN.Provider,{value:u},Z.createElement(lN.Provider,{value:l},Z.createElement(oN.Provider,{value:c},Z.createElement(cN.Provider,{value:d},o)))))))},OY=function(){return _.useContext(lN)},dN=function(s){var r=_.useContext(qx);r==null&&aa();var a=r[s];return a==null&&aa(),a},TY=function(){var s=_.useContext(qx);return yr(s)},EY=function(){var s=_.useContext(Bx),r=AY(s,function(a){return Jj(a.domain,Number.isFinite)});return r||yr(s)},uN=function(s){var r=_.useContext(Bx);r==null&&aa();var a=r[s];return a==null&&aa(),a},FY=function(){var s=_.useContext(nN);return s},MY=function(){return _.useContext(iN)},Ux=function(){return _.useContext(cN)},zx=function(){return _.useContext(oN)};function Qa(t){"@babel/helpers - typeof";return Qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qa(t)}function RY(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function DY(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,xN(a.key),a)}}function LY(t,s,r){return s&&DY(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function IY(t,s,r){return s=_o(s),qY(t,mN()?Reflect.construct(s,r||[],_o(t).constructor):s.apply(t,r))}function qY(t,s){if(s&&(Qa(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BY(t)}function BY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mN=function(){return!!t})()}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_o(t)}function UY(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&im(t,s)}function im(t,s){return im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},im(t,s)}function Cf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Pf(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Cf(Object(r),!0).forEach(function(a){Wx(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Wx(t,s,r){return s=xN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function xN(t){var s=zY(t,"string");return Qa(s)=="symbol"?s:s+""}function zY(t,s){if(Qa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Qa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function WY(t,s){return YY(t)||HY(t,s)||KY(t,s)||VY()}function VY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KY(t,s){if(t){if(typeof t=="string")return Af(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Af(t,s)}}function Af(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function HY(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function YY(t){if(Array.isArray(t))return t}function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},lm.apply(this,arguments)}var GY=function(s,r){var a;return Z.isValidElement(s)?a=Z.cloneElement(s,r):Ce(s)?a=s(r):a=Z.createElement("line",lm({},r,{className:"recharts-reference-line-line"})),a},QY=function(s,r,a,n,i,l,o,d,c){var u=i.x,m=i.y,h=i.width,x=i.height;if(a){var p=c.y,b=s.y.apply(p,{position:l});if(Us(c,"discard")&&!s.y.isInRange(b))return null;var v=[{x:u+h,y:b},{x:u,y:b}];return d==="left"?v.reverse():v}if(r){var j=c.x,P=s.x.apply(j,{position:l});if(Us(c,"discard")&&!s.x.isInRange(P))return null;var w=[{x:P,y:m+x},{x:P,y:m}];return o==="top"?w.reverse():w}if(n){var C=c.segment,f=C.map(function(k){return s.apply(k,{position:l})});return Us(c,"discard")&&yH(f,function(k){return!s.isInRange(k)})?null:f}return null};function XY(t){var s=t.x,r=t.y,a=t.segment,n=t.xAxisId,i=t.yAxisId,l=t.shape,o=t.className,d=t.alwaysShow,c=OY(),u=dN(n),m=uN(i),h=FY();if(!c||!h)return null;Os(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=Ix({x:u.scale,y:m.scale}),p=wt(s),b=wt(r),v=a&&a.length===2,j=QY(x,p,b,v,h,t.position,u.orientation,m.orientation,t);if(!j)return null;var P=WY(j,2),w=P[0],C=w.x,f=w.y,k=P[1],y=k.x,F=k.y,M=Us(t,"hidden")?"url(#".concat(c,")"):void 0,E=Pf(Pf({clipPath:M},_e(t,!0)),{},{x1:C,y1:f,x2:y,y2:F});return Z.createElement(qe,{className:Ee("recharts-reference-line",o)},GY(l,E),Pt.renderCallByParent(t,oY({x1:C,y1:f,x2:y,y2:F})))}var Vx=function(t){function s(){return RY(this,s),IY(this,s,arguments)}return UY(s,t),LY(s,[{key:"render",value:function(){return Z.createElement(XY,this.props)}}])}(Z.Component);Wx(Vx,"displayName","ReferenceLine");Wx(Vx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function om(){return om=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},om.apply(this,arguments)}function Xa(t){"@babel/helpers - typeof";return Xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xa(t)}function $f(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Of(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?$f(Object(r),!0).forEach(function(a){Mc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$f(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function JY(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ZY(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,pN(a.key),a)}}function eG(t,s,r){return s&&ZY(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function tG(t,s,r){return s=ko(s),sG(t,hN()?Reflect.construct(s,r||[],ko(t).constructor):s.apply(t,r))}function sG(t,s){if(s&&(Xa(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rG(t)}function rG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hN=function(){return!!t})()}function ko(t){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ko(t)}function aG(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&cm(t,s)}function cm(t,s){return cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},cm(t,s)}function Mc(t,s,r){return s=pN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function pN(t){var s=nG(t,"string");return Xa(s)=="symbol"?s:s+""}function nG(t,s){if(Xa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Xa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iG=function(s){var r=s.x,a=s.y,n=s.xAxis,i=s.yAxis,l=Ix({x:n.scale,y:i.scale}),o=l.apply({x:r,y:a},{bandAware:!0});return Us(s,"discard")&&!l.isInRange(o)?null:o},Rc=function(t){function s(){return JY(this,s),tG(this,s,arguments)}return aG(s,t),eG(s,[{key:"render",value:function(){var a=this.props,n=a.x,i=a.y,l=a.r,o=a.alwaysShow,d=a.clipPathId,c=wt(n),u=wt(i);if(Os(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var m=iG(this.props);if(!m)return null;var h=m.x,x=m.y,p=this.props,b=p.shape,v=p.className,j=Us(this.props,"hidden")?"url(#".concat(d,")"):void 0,P=Of(Of({clipPath:j},_e(this.props,!0)),{},{cx:h,cy:x});return Z.createElement(qe,{className:Ee("recharts-reference-dot",v)},s.renderDot(b,P),Pt.renderCallByParent(this.props,{x:h-l,y:x-l,width:2*l,height:2*l}))}}])}(Z.Component);Mc(Rc,"displayName","ReferenceDot");Mc(Rc,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Mc(Rc,"renderDot",function(t,s){var r;return Z.isValidElement(t)?r=Z.cloneElement(t,s):Ce(t)?r=t(s):r=Z.createElement(Cc,om({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),r});function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},dm.apply(this,arguments)}function Ja(t){"@babel/helpers - typeof";return Ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ja(t)}function Tf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ef(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Tf(Object(r),!0).forEach(function(a){Dc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function lG(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function oG(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,fN(a.key),a)}}function cG(t,s,r){return s&&oG(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function dG(t,s,r){return s=So(s),uG(t,gN()?Reflect.construct(s,r||[],So(t).constructor):s.apply(t,r))}function uG(t,s){if(s&&(Ja(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mG(t)}function mG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gN=function(){return!!t})()}function So(t){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},So(t)}function xG(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&um(t,s)}function um(t,s){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},um(t,s)}function Dc(t,s,r){return s=fN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function fN(t){var s=hG(t,"string");return Ja(s)=="symbol"?s:s+""}function hG(t,s){if(Ja(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ja(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pG=function(s,r,a,n,i){var l=i.x1,o=i.x2,d=i.y1,c=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=Ix({x:u.scale,y:m.scale}),x={x:s?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:a?h.y.apply(d,{position:"start"}):h.y.rangeMin},p={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:n?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Us(i,"discard")&&(!h.isInRange(x)||!h.isInRange(p))?null:rN(x,p)},Lc=function(t){function s(){return lG(this,s),dG(this,s,arguments)}return xG(s,t),cG(s,[{key:"render",value:function(){var a=this.props,n=a.x1,i=a.x2,l=a.y1,o=a.y2,d=a.className,c=a.alwaysShow,u=a.clipPathId;Os(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=wt(n),h=wt(i),x=wt(l),p=wt(o),b=this.props.shape;if(!m&&!h&&!x&&!p&&!b)return null;var v=pG(m,h,x,p,this.props);if(!v&&!b)return null;var j=Us(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Z.createElement(qe,{className:Ee("recharts-reference-area",d)},s.renderRect(b,Ef(Ef({clipPath:j},_e(this.props,!0)),v)),Pt.renderCallByParent(this.props,v))}}])}(Z.Component);Dc(Lc,"displayName","ReferenceArea");Dc(Lc,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Dc(Lc,"renderRect",function(t,s){var r;return Z.isValidElement(t)?r=Z.cloneElement(t,s):Ce(t)?r=t(s):r=Z.createElement(Lx,dm({},s,{className:"recharts-reference-area-rect"})),r});function bN(t,s,r){if(s<1)return[];if(s===1&&r===void 0)return t;for(var a=[],n=0;n<t.length;n+=s)a.push(t[n]);return a}function gG(t,s,r){var a={width:t.width+s.width,height:t.height+s.height};return dY(a,r)}function fG(t,s,r){var a=r==="width",n=t.x,i=t.y,l=t.width,o=t.height;return s===1?{start:a?n:i,end:a?n+l:i+o}:{start:a?n+l:i+o,end:a?n:i}}function Co(t,s,r,a,n){if(t*s<t*a||t*s>t*n)return!1;var i=r();return t*(s-t*i/2-a)>=0&&t*(s+t*i/2-n)<=0}function bG(t,s){return bN(t,s+1)}function yG(t,s,r,a,n){for(var i=(a||[]).slice(),l=s.start,o=s.end,d=0,c=1,u=l,m=function(){var p=a==null?void 0:a[d];if(p===void 0)return{v:bN(a,c)};var b=d,v,j=function(){return v===void 0&&(v=r(p,b)),v},P=p.coordinate,w=d===0||Co(t,P,j,u,o);w||(d=0,u=l,c+=1),w&&(u=P+t*(j()/2+n),d+=c)},h;c<=i.length;)if(h=m(),h)return h.v;return[]}function Ti(t){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ti(t)}function Ff(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function qt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ff(Object(r),!0).forEach(function(a){vG(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ff(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function vG(t,s,r){return s=jG(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function jG(t){var s=NG(t,"string");return Ti(s)=="symbol"?s:s+""}function NG(t,s){if(Ti(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Ti(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function wG(t,s,r,a,n){for(var i=(a||[]).slice(),l=i.length,o=s.start,d=s.end,c=function(h){var x=i[h],p,b=function(){return p===void 0&&(p=r(x,h)),p};if(h===l-1){var v=t*(x.coordinate+t*b()/2-d);i[h]=x=qt(qt({},x),{},{tickCoord:v>0?x.coordinate-v*t:x.coordinate})}else i[h]=x=qt(qt({},x),{},{tickCoord:x.coordinate});var j=Co(t,x.tickCoord,b,o,d);j&&(d=x.tickCoord-t*(b()/2+n),i[h]=qt(qt({},x),{},{isShow:!0}))},u=l-1;u>=0;u--)c(u);return i}function _G(t,s,r,a,n,i){var l=(a||[]).slice(),o=l.length,d=s.start,c=s.end;if(i){var u=a[o-1],m=r(u,o-1),h=t*(u.coordinate+t*m/2-c);l[o-1]=u=qt(qt({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var x=Co(t,u.tickCoord,function(){return m},d,c);x&&(c=u.tickCoord-t*(m/2+n),l[o-1]=qt(qt({},u),{},{isShow:!0}))}for(var p=i?o-1:o,b=function(P){var w=l[P],C,f=function(){return C===void 0&&(C=r(w,P)),C};if(P===0){var k=t*(w.coordinate-t*f()/2-d);l[P]=w=qt(qt({},w),{},{tickCoord:k<0?w.coordinate-k*t:w.coordinate})}else l[P]=w=qt(qt({},w),{},{tickCoord:w.coordinate});var y=Co(t,w.tickCoord,f,d,c);y&&(d=w.tickCoord+t*(f()/2+n),l[P]=qt(qt({},w),{},{isShow:!0}))},v=0;v<p;v++)b(v);return l}function Kx(t,s,r){var a=t.tick,n=t.ticks,i=t.viewBox,l=t.minTickGap,o=t.orientation,d=t.interval,c=t.tickFormatter,u=t.unit,m=t.angle;if(!n||!n.length||!a)return[];if(xe(d)||la.isSsr)return bG(n,typeof d=="number"&&xe(d)?d:0);var h=[],x=o==="top"||o==="bottom"?"width":"height",p=u&&x==="width"?Vn(u,{fontSize:s,letterSpacing:r}):{width:0,height:0},b=function(w,C){var f=Ce(c)?c(w.value,C):w.value;return x==="width"?gG(Vn(f,{fontSize:s,letterSpacing:r}),p,m):Vn(f,{fontSize:s,letterSpacing:r})[x]},v=n.length>=2?Yt(n[1].coordinate-n[0].coordinate):1,j=fG(i,v,x);return d==="equidistantPreserveStart"?yG(v,j,b,n,l):(d==="preserveStart"||d==="preserveStartEnd"?h=_G(v,j,b,n,l,d==="preserveStartEnd"):h=wG(v,j,b,n,l),h.filter(function(P){return P.isShow}))}var kG=["viewBox"],SG=["viewBox"],CG=["ticks"];function Za(t){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Za(t)}function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},wa.apply(this,arguments)}function Mf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function bt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Mf(Object(r),!0).forEach(function(a){Hx(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Pd(t,s){if(t==null)return{};var r=PG(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function PG(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function AG(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Rf(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,vN(a.key),a)}}function $G(t,s,r){return s&&Rf(t.prototype,s),r&&Rf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OG(t,s,r){return s=Po(s),TG(t,yN()?Reflect.construct(s,r||[],Po(t).constructor):s.apply(t,r))}function TG(t,s){if(s&&(Za(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EG(t)}function EG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yN=function(){return!!t})()}function Po(t){return Po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Po(t)}function FG(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&mm(t,s)}function mm(t,s){return mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},mm(t,s)}function Hx(t,s,r){return s=vN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function vN(t){var s=MG(t,"string");return Za(s)=="symbol"?s:s+""}function MG(t,s){if(Za(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Za(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kn=function(t){function s(r){var a;return AG(this,s),a=OG(this,s,[r]),a.state={fontSize:"",letterSpacing:""},a}return FG(s,t),$G(s,[{key:"shouldComponentUpdate",value:function(a,n){var i=a.viewBox,l=Pd(a,kG),o=this.props,d=o.viewBox,c=Pd(o,SG);return!ka(i,d)||!ka(l,c)||!ka(n,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var n=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var n=this.props,i=n.x,l=n.y,o=n.width,d=n.height,c=n.orientation,u=n.tickSize,m=n.mirror,h=n.tickMargin,x,p,b,v,j,P,w=m?-1:1,C=a.tickSize||u,f=xe(a.tickCoord)?a.tickCoord:a.coordinate;switch(c){case"top":x=p=a.coordinate,v=l+ +!m*d,b=v-w*C,P=b-w*h,j=f;break;case"left":b=v=a.coordinate,p=i+ +!m*o,x=p-w*C,j=x-w*h,P=f;break;case"right":b=v=a.coordinate,p=i+ +m*o,x=p+w*C,j=x+w*h,P=f;break;default:x=p=a.coordinate,v=l+ +m*d,b=v+w*C,P=b+w*h,j=f;break}return{line:{x1:x,y1:b,x2:p,y2:v},tick:{x:j,y:P}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,n=a.orientation,i=a.mirror,l;switch(n){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,n=a.orientation,i=a.mirror,l="end";switch(n){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.x,i=a.y,l=a.width,o=a.height,d=a.orientation,c=a.mirror,u=a.axisLine,m=bt(bt(bt({},_e(this.props,!1)),_e(u,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var h=+(d==="top"&&!c||d==="bottom"&&c);m=bt(bt({},m),{},{x1:n,y1:i+h*o,x2:n+l,y2:i+h*o})}else{var x=+(d==="left"&&!c||d==="right"&&c);m=bt(bt({},m),{},{x1:n+x*l,y1:i,x2:n+x*l,y2:i+o})}return Z.createElement("line",wa({},m,{className:Ee("recharts-cartesian-axis-line",cs(u,"className"))}))}},{key:"renderTicks",value:function(a,n,i){var l=this,o=this.props,d=o.tickLine,c=o.stroke,u=o.tick,m=o.tickFormatter,h=o.unit,x=Kx(bt(bt({},this.props),{},{ticks:a}),n,i),p=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),v=_e(this.props,!1),j=_e(u,!1),P=bt(bt({},v),{},{fill:"none"},_e(d,!1)),w=x.map(function(C,f){var k=l.getTickLineCoord(C),y=k.line,F=k.tick,M=bt(bt(bt(bt({textAnchor:p,verticalAnchor:b},v),{},{stroke:"none",fill:c},j),F),{},{index:f,payload:C,visibleTicksCount:x.length,tickFormatter:m});return Z.createElement(qe,wa({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},ta(l.props,C,f)),d&&Z.createElement("line",wa({},P,y,{className:Ee("recharts-cartesian-axis-tick-line",cs(d,"className"))})),u&&s.renderTickItem(u,M,"".concat(Ce(m)?m(C.value,f):C.value).concat(h||"")))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var a=this,n=this.props,i=n.axisLine,l=n.width,o=n.height,d=n.ticksGenerator,c=n.className,u=n.hide;if(u)return null;var m=this.props,h=m.ticks,x=Pd(m,CG),p=h;return Ce(d)&&(p=h&&h.length>0?d(this.props):d(x)),l<=0||o<=0||!p||!p.length?null:Z.createElement(qe,{className:Ee("recharts-cartesian-axis",c),ref:function(v){a.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Pt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,n,i){var l,o=Ee(n.className,"recharts-cartesian-axis-tick-value");return Z.isValidElement(a)?l=Z.cloneElement(a,bt(bt({},n),{},{className:o})):Ce(a)?l=a(bt(bt({},n),{},{className:o})):l=Z.createElement(sa,wa({},n,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(_.Component);Hx(kn,"displayName","CartesianAxis");Hx(kn,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var RG=["x1","y1","x2","y2","key"],DG=["offset"];function na(t){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},na(t)}function Df(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ut(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Df(Object(r),!0).forEach(function(a){LG(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Df(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function LG(t,s,r){return s=IG(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function IG(t){var s=qG(t,"string");return na(s)=="symbol"?s:s+""}function qG(t,s){if(na(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(na(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Hr(){return Hr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Hr.apply(this,arguments)}function Lf(t,s){if(t==null)return{};var r=BG(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function BG(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}var UG=function(s){var r=s.fill;if(!r||r==="none")return null;var a=s.fillOpacity,n=s.x,i=s.y,l=s.width,o=s.height,d=s.ry;return Z.createElement("rect",{x:n,y:i,ry:d,width:l,height:o,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function jN(t,s){var r;if(Z.isValidElement(t))r=Z.cloneElement(t,s);else if(Ce(t))r=t(s);else{var a=s.x1,n=s.y1,i=s.x2,l=s.y2,o=s.key,d=Lf(s,RG),c=_e(d,!1);c.offset;var u=Lf(c,DG);r=Z.createElement("line",Hr({},u,{x1:a,y1:n,x2:i,y2:l,fill:"none",key:o}))}return r}function zG(t){var s=t.x,r=t.width,a=t.horizontal,n=a===void 0?!0:a,i=t.horizontalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var c=Ut(Ut({},t),{},{x1:s,y1:o,x2:s+r,y2:o,key:"line-".concat(d),index:d});return jN(n,c)});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function WG(t){var s=t.y,r=t.height,a=t.vertical,n=a===void 0?!0:a,i=t.verticalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var c=Ut(Ut({},t),{},{x1:o,y1:s,x2:o,y2:s+r,key:"line-".concat(d),index:d});return jN(n,c)});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function VG(t){var s=t.horizontalFill,r=t.fillOpacity,a=t.x,n=t.y,i=t.width,l=t.height,o=t.horizontalPoints,d=t.horizontal,c=d===void 0?!0:d;if(!c||!s||!s.length)return null;var u=o.map(function(h){return Math.round(h+n-n)}).sort(function(h,x){return h-x});n!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var p=!u[x+1],b=p?n+l-h:u[x+1]-h;if(b<=0)return null;var v=x%s.length;return Z.createElement("rect",{key:"react-".concat(x),y:h,x:a,height:b,width:i,stroke:"none",fill:s[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function KG(t){var s=t.vertical,r=s===void 0?!0:s,a=t.verticalFill,n=t.fillOpacity,i=t.x,l=t.y,o=t.width,d=t.height,c=t.verticalPoints;if(!r||!a||!a.length)return null;var u=c.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var p=!u[x+1],b=p?i+o-h:u[x+1]-h;if(b<=0)return null;var v=x%a.length;return Z.createElement("rect",{key:"react-".concat(x),x:h,y:l,width:b,height:d,stroke:"none",fill:a[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var HG=function(s,r){var a=s.xAxis,n=s.width,i=s.height,l=s.offset;return bj(Kx(Ut(Ut(Ut({},kn.defaultProps),a),{},{ticks:sr(a,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,r)},YG=function(s,r){var a=s.yAxis,n=s.width,i=s.height,l=s.offset;return bj(Kx(Ut(Ut(Ut({},kn.defaultProps),a),{},{ticks:sr(a,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,r)},pa={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function NN(t){var s,r,a,n,i,l,o=Ux(),d=zx(),c=MY(),u=Ut(Ut({},t),{},{stroke:(s=t.stroke)!==null&&s!==void 0?s:pa.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:pa.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:pa.horizontal,horizontalFill:(n=t.horizontalFill)!==null&&n!==void 0?n:pa.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:pa.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:pa.verticalFill,x:xe(t.x)?t.x:c.left,y:xe(t.y)?t.y:c.top,width:xe(t.width)?t.width:c.width,height:xe(t.height)?t.height:c.height}),m=u.x,h=u.y,x=u.width,p=u.height,b=u.syncWithTicks,v=u.horizontalValues,j=u.verticalValues,P=TY(),w=EY();if(!xe(x)||x<=0||!xe(p)||p<=0||!xe(m)||m!==+m||!xe(h)||h!==+h)return null;var C=u.verticalCoordinatesGenerator||HG,f=u.horizontalCoordinatesGenerator||YG,k=u.horizontalPoints,y=u.verticalPoints;if((!k||!k.length)&&Ce(f)){var F=v&&v.length,M=f({yAxis:w?Ut(Ut({},w),{},{ticks:F?v:w.ticks}):void 0,width:o,height:d,offset:c},F?!0:b);Os(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(na(M),"]")),Array.isArray(M)&&(k=M)}if((!y||!y.length)&&Ce(C)){var E=j&&j.length,B=C({xAxis:P?Ut(Ut({},P),{},{ticks:E?j:P.ticks}):void 0,width:o,height:d,offset:c},E?!0:b);Os(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(na(B),"]")),Array.isArray(B)&&(y=B)}return Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(UG,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Z.createElement(zG,Hr({},u,{offset:c,horizontalPoints:k,xAxis:P,yAxis:w})),Z.createElement(WG,Hr({},u,{offset:c,verticalPoints:y,xAxis:P,yAxis:w})),Z.createElement(VG,Hr({},u,{horizontalPoints:k})),Z.createElement(KG,Hr({},u,{verticalPoints:y})))}NN.displayName="CartesianGrid";var GG=["layout","type","stroke","connectNulls","isRange","ref"],QG=["key"],wN;function en(t){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},en(t)}function _N(t,s){if(t==null)return{};var r=XG(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function XG(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Yr(){return Yr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Yr.apply(this,arguments)}function If(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function fr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?If(Object(r),!0).forEach(function(a){Ls(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):If(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function JG(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function qf(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,SN(a.key),a)}}function ZG(t,s,r){return s&&qf(t.prototype,s),r&&qf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function eQ(t,s,r){return s=Ao(s),tQ(t,kN()?Reflect.construct(s,r||[],Ao(t).constructor):s.apply(t,r))}function tQ(t,s){if(s&&(en(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sQ(t)}function sQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kN=function(){return!!t})()}function Ao(t){return Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ao(t)}function rQ(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&xm(t,s)}function xm(t,s){return xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},xm(t,s)}function Ls(t,s,r){return s=SN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function SN(t){var s=aQ(t,"string");return en(s)=="symbol"?s:s+""}function aQ(t,s){if(en(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(en(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dr=function(t){function s(){var r;JG(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return r=eQ(this,s,[].concat(n)),Ls(r,"state",{isAnimationFinished:!0}),Ls(r,"id",bn("recharts-area-")),Ls(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ce(l)&&l()}),Ls(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ce(l)&&l()}),r}return rQ(s,t),ZG(s,[{key:"renderDots",value:function(a,n,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var d=this.props,c=d.dot,u=d.points,m=d.dataKey,h=_e(this.props,!1),x=_e(c,!0),p=u.map(function(v,j){var P=fr(fr(fr({key:"dot-".concat(j),r:3},h),x),{},{index:j,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:u});return s.renderDotItem(c,P)}),b={clipPath:a?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return Z.createElement(qe,Yr({className:"recharts-area-dots"},b),p)}},{key:"renderHorizontalRect",value:function(a){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].x,c=l[l.length-1].x,u=a*Math.abs(d-c),m=vr(l.map(function(h){return h.y||0}));return xe(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(vr(i.map(function(h){return h.y||0})),m)),xe(m)?Z.createElement("rect",{x:d<c?d:d-u,y:0,width:u,height:Math.floor(m+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].y,c=l[l.length-1].y,u=a*Math.abs(d-c),m=vr(l.map(function(h){return h.x||0}));return xe(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(vr(i.map(function(h){return h.x||0})),m)),xe(m)?Z.createElement("rect",{x:0,y:d<c?d:d-u,width:m+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,n,i,l){var o=this.props,d=o.layout,c=o.type,u=o.stroke,m=o.connectNulls,h=o.isRange;o.ref;var x=_N(o,GG);return Z.createElement(qe,{clipPath:i?"url(#clipPath-".concat(l,")"):null},Z.createElement(Pa,Yr({},_e(x,!0),{points:a,connectNulls:m,type:c,baseLine:n,layout:d,stroke:"none",className:"recharts-area-area"})),u!=="none"&&Z.createElement(Pa,Yr({},_e(this.props,!1),{className:"recharts-area-curve",layout:d,type:c,connectNulls:m,fill:"none",points:a})),u!=="none"&&h&&Z.createElement(Pa,Yr({},_e(this.props,!1),{className:"recharts-area-curve",layout:d,type:c,connectNulls:m,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(a,n){var i=this,l=this.props,o=l.points,d=l.baseLine,c=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,p=this.state,b=p.prevPoints,v=p.prevBaseLine;return Z.createElement(Ks,{begin:u,duration:m,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var P=j.t;if(b){var w=b.length/o.length,C=o.map(function(F,M){var E=Math.floor(M*w);if(b[E]){var B=b[E],A=Jt(B.x,F.x),L=Jt(B.y,F.y);return fr(fr({},F),{},{x:A(P),y:L(P)})}return F}),f;if(xe(d)&&typeof d=="number"){var k=Jt(v,d);f=k(P)}else if(Ae(d)||fn(d)){var y=Jt(v,0);f=y(P)}else f=d.map(function(F,M){var E=Math.floor(M*w);if(v[E]){var B=v[E],A=Jt(B.x,F.x),L=Jt(B.y,F.y);return fr(fr({},F),{},{x:A(P),y:L(P)})}return F});return i.renderAreaStatically(C,f,a,n)}return Z.createElement(qe,null,Z.createElement("defs",null,Z.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(P))),Z.createElement(qe,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(o,d,a,n)))})}},{key:"renderArea",value:function(a,n){var i=this.props,l=i.points,o=i.baseLine,d=i.isAnimationActive,c=this.state,u=c.prevPoints,m=c.prevBaseLine,h=c.totalLength;return d&&l&&l.length&&(!u&&h>0||!Ba(u,l)||!Ba(m,o))?this.renderAreaWithAnimation(a,n):this.renderAreaStatically(l,o,a,n)}},{key:"render",value:function(){var a,n=this.props,i=n.hide,l=n.dot,o=n.points,d=n.className,c=n.top,u=n.left,m=n.xAxis,h=n.yAxis,x=n.width,p=n.height,b=n.isAnimationActive,v=n.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,P=o.length===1,w=Ee("recharts-area",d),C=m&&m.allowDataOverflow,f=h&&h.allowDataOverflow,k=C||f,y=Ae(v)?this.id:v,F=(a=_e(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},M=F.r,E=M===void 0?3:M,B=F.strokeWidth,A=B===void 0?2:B,L=AA(l)?l:{},N=L.clipDot,R=N===void 0?!0:N,O=E*2+A;return Z.createElement(qe,{className:w},C||f?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(y)},Z.createElement("rect",{x:C?u:u-x/2,y:f?c:c-p/2,width:C?x:x*2,height:f?p:p*2})),!R&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(y)},Z.createElement("rect",{x:u-O/2,y:c-O/2,width:x+O,height:p+O}))):null,P?null:this.renderArea(k,y),(l||P)&&this.renderDots(k,R,y),(!b||j)&&nr.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:a.points!==n.curPoints||a.baseLine!==n.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(_.PureComponent);wN=dr;Ls(dr,"displayName","Area");Ls(dr,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!la.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ls(dr,"getBaseValue",function(t,s,r,a){var n=t.layout,i=t.baseValue,l=s.props.baseValue,o=l??i;if(xe(o)&&typeof o=="number")return o;var d=n==="horizontal"?a:r,c=d.scale.domain();if(d.type==="number"){var u=Math.max(c[0],c[1]),m=Math.min(c[0],c[1]);return o==="dataMin"?m:o==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});Ls(dr,"getComposedData",function(t){var s=t.props,r=t.item,a=t.xAxis,n=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,o=t.bandSize,d=t.dataKey,c=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=s.layout,p=c&&c.length,b=wN.getBaseValue(s,r,a,n),v=x==="horizontal",j=!1,P=m.map(function(C,f){var k;p?k=c[u+f]:(k=Nt(C,d),Array.isArray(k)?j=!0:k=[b,k]);var y=k[1]==null||p&&Nt(C,d)==null;return v?{x:dg({axis:a,ticks:i,bandSize:o,entry:C,index:f}),y:y?null:n.scale(k[1]),value:k,payload:C}:{x:y?null:a.scale(k[1]),y:dg({axis:n,ticks:l,bandSize:o,entry:C,index:f}),value:k,payload:C}}),w;return p||j?w=P.map(function(C){var f=Array.isArray(C.value)?C.value[0]:null;return v?{x:C.x,y:f!=null&&C.y!=null?n.scale(f):null}:{x:f!=null?a.scale(f):null,y:C.y}}):w=v?n.scale(b):a.scale(b),fr({points:P,baseLine:w,layout:x,isRange:j},h)});Ls(dr,"renderDotItem",function(t,s){var r;if(Z.isValidElement(t))r=Z.cloneElement(t,s);else if(Ce(t))r=t(s);else{var a=Ee("recharts-area-dot",typeof t!="boolean"?t.className:""),n=s.key,i=_N(s,QG);r=Z.createElement(Cc,Yr({},i,{key:n,className:a}))}return r});function tn(t){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tn(t)}function nQ(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function iQ(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,AN(a.key),a)}}function lQ(t,s,r){return s&&iQ(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function oQ(t,s,r){return s=$o(s),cQ(t,CN()?Reflect.construct(s,r||[],$o(t).constructor):s.apply(t,r))}function cQ(t,s){if(s&&(tn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dQ(t)}function dQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CN=function(){return!!t})()}function $o(t){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$o(t)}function uQ(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&hm(t,s)}function hm(t,s){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},hm(t,s)}function PN(t,s,r){return s=AN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function AN(t){var s=mQ(t,"string");return tn(s)=="symbol"?s:s+""}function mQ(t,s){if(tn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(tn(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},pm.apply(this,arguments)}function xQ(t){var s=t.xAxisId,r=Ux(),a=zx(),n=dN(s);return n==null?null:_.createElement(kn,pm({},n,{className:Ee("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return sr(l,!0)}}))}var Ic=function(t){function s(){return nQ(this,s),oQ(this,s,arguments)}return uQ(s,t),lQ(s,[{key:"render",value:function(){return _.createElement(xQ,this.props)}}])}(_.Component);PN(Ic,"displayName","XAxis");PN(Ic,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function sn(t){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sn(t)}function hQ(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function pQ(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,TN(a.key),a)}}function gQ(t,s,r){return s&&pQ(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function fQ(t,s,r){return s=Oo(s),bQ(t,$N()?Reflect.construct(s,r||[],Oo(t).constructor):s.apply(t,r))}function bQ(t,s){if(s&&(sn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yQ(t)}function yQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($N=function(){return!!t})()}function Oo(t){return Oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oo(t)}function vQ(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&gm(t,s)}function gm(t,s){return gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},gm(t,s)}function ON(t,s,r){return s=TN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function TN(t){var s=jQ(t,"string");return sn(s)=="symbol"?s:s+""}function jQ(t,s){if(sn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(sn(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},fm.apply(this,arguments)}var NQ=function(s){var r=s.yAxisId,a=Ux(),n=zx(),i=uN(r);return i==null?null:_.createElement(kn,fm({},i,{className:Ee("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:n},ticksGenerator:function(o){return sr(o,!0)}}))},Ei=function(t){function s(){return hQ(this,s),fQ(this,s,arguments)}return vQ(s,t),gQ(s,[{key:"render",value:function(){return _.createElement(NQ,this.props)}}])}(_.Component);ON(Ei,"displayName","YAxis");ON(Ei,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Bf(t){return SQ(t)||kQ(t)||_Q(t)||wQ()}function wQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Q(t,s){if(t){if(typeof t=="string")return bm(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bm(t,s)}}function kQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SQ(t){if(Array.isArray(t))return bm(t)}function bm(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}var ym=function(s,r,a,n,i){var l=fs(s,Vx),o=fs(s,Rc),d=[].concat(Bf(l),Bf(o)),c=fs(s,Lc),u="".concat(n,"Id"),m=n[0],h=r;if(d.length&&(h=d.reduce(function(b,v){if(v.props[u]===a&&Us(v.props,"extendDomain")&&xe(v.props[m])){var j=v.props[m];return[Math.min(b[0],j),Math.max(b[1],j)]}return b},h)),c.length){var x="".concat(m,"1"),p="".concat(m,"2");h=c.reduce(function(b,v){if(v.props[u]===a&&Us(v.props,"extendDomain")&&xe(v.props[x])&&xe(v.props[p])){var j=v.props[x],P=v.props[p];return[Math.min(b[0],j,P),Math.max(b[1],j,P)]}return b},h)}return i&&i.length&&(h=i.reduce(function(b,v){return xe(v)?[Math.min(b[0],v),Math.max(b[1],v)]:b},h)),h},EN={exports:{}};(function(t){var s=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function n(d,c,u){this.fn=d,this.context=c,this.once=u||!1}function i(d,c,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new n(u,m||d,h),p=r?r+c:c;return d._events[p]?d._events[p].fn?d._events[p]=[d._events[p],x]:d._events[p].push(x):(d._events[p]=x,d._eventsCount++),d}function l(d,c){--d._eventsCount===0?d._events=new a:delete d._events[c]}function o(){this._events=new a,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,m;if(this._eventsCount===0)return c;for(m in u=this._events)s.call(u,m)&&c.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=r?r+c:c,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,p=new Array(x);h<x;h++)p[h]=m[h].fn;return p},o.prototype.listenerCount=function(c){var u=r?r+c:c,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(c,u,m,h,x,p){var b=r?r+c:c;if(!this._events[b])return!1;var v=this._events[b],j=arguments.length,P,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,m),!0;case 4:return v.fn.call(v.context,u,m,h),!0;case 5:return v.fn.call(v.context,u,m,h,x),!0;case 6:return v.fn.call(v.context,u,m,h,x,p),!0}for(w=1,P=new Array(j-1);w<j;w++)P[w-1]=arguments[w];v.fn.apply(v.context,P)}else{var C=v.length,f;for(w=0;w<C;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),j){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,u);break;case 3:v[w].fn.call(v[w].context,u,m);break;case 4:v[w].fn.call(v[w].context,u,m,h);break;default:if(!P)for(f=1,P=new Array(j-1);f<j;f++)P[f-1]=arguments[f];v[w].fn.apply(v[w].context,P)}}return!0},o.prototype.on=function(c,u,m){return i(this,c,u,m,!1)},o.prototype.once=function(c,u,m){return i(this,c,u,m,!0)},o.prototype.removeListener=function(c,u,m,h){var x=r?r+c:c;if(!this._events[x])return this;if(!u)return l(this,x),this;var p=this._events[x];if(p.fn)p.fn===u&&(!h||p.once)&&(!m||p.context===m)&&l(this,x);else{for(var b=0,v=[],j=p.length;b<j;b++)(p[b].fn!==u||h&&!p[b].once||m&&p[b].context!==m)&&v.push(p[b]);v.length?this._events[x]=v.length===1?v[0]:v:l(this,x)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&l(this,u)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(EN);var CQ=EN.exports;const PQ=Je(CQ);var Ad=new PQ,$d="recharts.syncMouseEvents";function Fi(t){"@babel/helpers - typeof";return Fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fi(t)}function AQ(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function $Q(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,FN(a.key),a)}}function OQ(t,s,r){return s&&$Q(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Od(t,s,r){return s=FN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function FN(t){var s=TQ(t,"string");return Fi(s)=="symbol"?s:s+""}function TQ(t,s){if(Fi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Fi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var EQ=function(){function t(){AQ(this,t),Od(this,"activeIndex",0),Od(this,"coordinateList",[]),Od(this,"layout","horizontal")}return OQ(t,[{key:"setDetails",value:function(r){var a,n=r.coordinateList,i=n===void 0?null:n,l=r.container,o=l===void 0?null:l,d=r.layout,c=d===void 0?null:d,u=r.offset,m=u===void 0?null:u,h=r.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),i=n.x,l=n.y,o=n.height,d=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+d+c,h=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function FQ(t,s,r){if(r==="number"&&s===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],n=t==null?void 0:t[1];if(a&&n&&xe(a)&&xe(n))return!0}return!1}function MQ(t,s,r,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?s.x-n:r.left+.5,y:t==="horizontal"?r.top+.5:s.y-n,width:t==="horizontal"?a:r.width-1,height:t==="horizontal"?r.height-1:a}}function MN(t){var s=t.cx,r=t.cy,a=t.radius,n=t.startAngle,i=t.endAngle,l=st(s,r,a,n),o=st(s,r,a,i);return{points:[l,o],cx:s,cy:r,radius:a,startAngle:n,endAngle:i}}function RQ(t,s,r){var a,n,i,l;if(t==="horizontal")a=s.x,i=a,n=r.top,l=r.top+r.height;else if(t==="vertical")n=s.y,l=n,a=r.left,i=r.left+r.width;else if(s.cx!=null&&s.cy!=null)if(t==="centric"){var o=s.cx,d=s.cy,c=s.innerRadius,u=s.outerRadius,m=s.angle,h=st(o,d,c,m),x=st(o,d,u,m);a=h.x,n=h.y,i=x.x,l=x.y}else return MN(s);return[{x:a,y:n},{x:i,y:l}]}function Mi(t){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Mi(t)}function Uf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function fl(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Uf(Object(r),!0).forEach(function(a){DQ(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function DQ(t,s,r){return s=LQ(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function LQ(t){var s=IQ(t,"string");return Mi(s)=="symbol"?s:s+""}function IQ(t,s){if(Mi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Mi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function qQ(t){var s,r,a=t.element,n=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,o=t.activePayload,d=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,x=(s=a.props.cursor)!==null&&s!==void 0?s:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!x||!i||!l||h!=="ScatterChart"&&n!=="axis")return null;var p,b=Pa;if(h==="ScatterChart")p=l,b=lV;else if(h==="BarChart")p=MQ(m,l,d,u),b=Lx;else if(m==="radial"){var v=MN(l),j=v.cx,P=v.cy,w=v.radius,C=v.startAngle,f=v.endAngle;p={cx:j,cy:P,startAngle:C,endAngle:f,innerRadius:w,outerRadius:w},b=Aj}else p={points:RQ(m,l,d)},b=Pa;var k=fl(fl(fl(fl({stroke:"#ccc",pointerEvents:"none"},d),p),_e(x,!1)),{},{payload:o,payloadIndex:c,className:Ee("recharts-tooltip-cursor",x.className)});return _.isValidElement(x)?_.cloneElement(x,k):_.createElement(b,k)}var BQ=["item"],UQ=["children","className","width","height","style","compact","title","desc"];function rn(t){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rn(t)}function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_a.apply(this,arguments)}function zf(t,s){return VQ(t)||WQ(t,s)||DN(t,s)||zQ()}function zQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WQ(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,l,o=[],d=!0,c=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(d=(a=i.call(r)).done)&&(o.push(a.value),o.length!==s);d=!0);}catch(u){c=!0,n=u}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw n}}return o}}function VQ(t){if(Array.isArray(t))return t}function Wf(t,s){if(t==null)return{};var r=KQ(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function KQ(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function HQ(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function YQ(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,LN(a.key),a)}}function GQ(t,s,r){return s&&YQ(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function QQ(t,s,r){return s=To(s),XQ(t,RN()?Reflect.construct(s,r||[],To(t).constructor):s.apply(t,r))}function XQ(t,s){if(s&&(rn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JQ(t)}function JQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RN=function(){return!!t})()}function To(t){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},To(t)}function ZQ(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&vm(t,s)}function vm(t,s){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},vm(t,s)}function an(t){return sX(t)||tX(t)||DN(t)||eX()}function eX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DN(t,s){if(t){if(typeof t=="string")return jm(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jm(t,s)}}function tX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sX(t){if(Array.isArray(t))return jm(t)}function jm(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Vf(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function le(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Vf(Object(r),!0).forEach(function(a){Se(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Se(t,s,r){return s=LN(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function LN(t){var s=rX(t,"string");return rn(s)=="symbol"?s:s+""}function rX(t,s){if(rn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(rn(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var aX={xAxis:["bottom","top"],yAxis:["left","right"]},nX={width:"100%",height:"100%"},IN={x:0,y:0};function bl(t){return t}var iX=function(s,r){return r==="horizontal"?s.x:r==="vertical"?s.y:r==="centric"?s.angle:s.radius},lX=function(s,r,a,n){var i=r.find(function(u){return u&&u.index===a});if(i){if(s==="horizontal")return{x:i.coordinate,y:n.y};if(s==="vertical")return{x:n.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=n.radius;return le(le(le({},n),st(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}var d=i.coordinate,c=n.angle;return le(le(le({},n),st(n.cx,n.cy,d,c)),{},{angle:c,radius:d})}return IN},qc=function(s,r){var a=r.graphicalItems,n=r.dataStartIndex,i=r.dataEndIndex,l=(a??[]).reduce(function(o,d){var c=d.props.data;return c&&c.length?[].concat(an(o),an(c)):o},[]);return l.length>0?l:s&&s.length&&xe(n)&&xe(i)?s.slice(n,i+1):[]};function qN(t){return t==="number"?[0,"auto"]:void 0}var Nm=function(s,r,a,n){var i=s.graphicalItems,l=s.tooltipAxis,o=qc(r,s);return a<0||!i||!i.length||a>=o.length?null:i.reduce(function(d,c){var u,m=(u=c.props.data)!==null&&u!==void 0?u:r;m&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=a&&(m=m.slice(s.dataStartIndex,s.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?o:m;h=Tl(x,l.dataKey,n)}else h=m&&m[a]||o[a];return h?[].concat(an(d),[wj(c,h)]):d},[])},Kf=function(s,r,a,n){var i=n||{x:s.chartX,y:s.chartY},l=iX(i,a),o=s.orderedTooltipTicks,d=s.tooltipAxis,c=s.tooltipTicks,u=$B(l,o,c,d);if(u>=0&&c){var m=c[u]&&c[u].value,h=Nm(s,r,u,m),x=lX(a,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},oX=function(s,r){var a=r.axes,n=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,d=r.dataStartIndex,c=r.dataEndIndex,u=s.layout,m=s.children,h=s.stackOffset,x=fj(u,i);return a.reduce(function(p,b){var v,j=b.type.defaultProps!==void 0?le(le({},b.type.defaultProps),b.props):b.props,P=j.type,w=j.dataKey,C=j.allowDataOverflow,f=j.allowDuplicatedCategory,k=j.scale,y=j.ticks,F=j.includeHidden,M=j[l];if(p[M])return p;var E=qc(s.data,{graphicalItems:n.filter(function(I){var K,U=l in I.props?I.props[l]:(K=I.type.defaultProps)===null||K===void 0?void 0:K[l];return U===M}),dataStartIndex:d,dataEndIndex:c}),B=E.length,A,L,N;FQ(j.domain,C,P)&&(A=Du(j.domain,null,C),x&&(P==="number"||k!=="auto")&&(N=Hn(E,w,"category")));var R=qN(P);if(!A||A.length===0){var O,T=(O=j.domain)!==null&&O!==void 0?O:R;if(w){if(A=Hn(E,w,P),P==="category"&&x){var g=yA(A);f&&g?(L=A,A=yo(0,B)):f||(A=hg(T,A,b).reduce(function(I,K){return I.indexOf(K)>=0?I:[].concat(an(I),[K])},[]))}else if(P==="category")f?A=A.filter(function(I){return I!==""&&!Ae(I)}):A=hg(T,A,b).reduce(function(I,K){return I.indexOf(K)>=0||K===""||Ae(K)?I:[].concat(an(I),[K])},[]);else if(P==="number"){var D=MB(E,n.filter(function(I){var K,U,q=l in I.props?I.props[l]:(K=I.type.defaultProps)===null||K===void 0?void 0:K[l],z="hide"in I.props?I.props.hide:(U=I.type.defaultProps)===null||U===void 0?void 0:U.hide;return q===M&&(F||!z)}),w,i,u);D&&(A=D)}x&&(P==="number"||k!=="auto")&&(N=Hn(E,w,"category"))}else x?A=yo(0,B):o&&o[M]&&o[M].hasStack&&P==="number"?A=h==="expand"?[0,1]:Nj(o[M].stackGroups,d,c):A=gj(E,n.filter(function(I){var K=l in I.props?I.props[l]:I.type.defaultProps[l],U="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return K===M&&(F||!U)}),P,u,!0);if(P==="number")A=ym(m,A,M,i,y),T&&(A=Du(T,A,C));else if(P==="category"&&T){var S=T,$=A.every(function(I){return S.indexOf(I)>=0});$&&(A=S)}}return le(le({},p),{},Se({},M,le(le({},j),{},{axisType:i,domain:A,categoricalDomain:N,duplicateDomain:L,originalDomain:(v=j.domain)!==null&&v!==void 0?v:R,isCategorical:x,layout:u})))},{})},cX=function(s,r){var a=r.graphicalItems,n=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,d=r.dataStartIndex,c=r.dataEndIndex,u=s.layout,m=s.children,h=qc(s.data,{graphicalItems:a,dataStartIndex:d,dataEndIndex:c}),x=h.length,p=fj(u,i),b=-1;return a.reduce(function(v,j){var P=j.type.defaultProps!==void 0?le(le({},j.type.defaultProps),j.props):j.props,w=P[l],C=qN("number");if(!v[w]){b++;var f;return p?f=yo(0,x):o&&o[w]&&o[w].hasStack?(f=Nj(o[w].stackGroups,d,c),f=ym(m,f,w,i)):(f=Du(C,gj(h,a.filter(function(k){var y,F,M=l in k.props?k.props[l]:(y=k.type.defaultProps)===null||y===void 0?void 0:y[l],E="hide"in k.props?k.props.hide:(F=k.type.defaultProps)===null||F===void 0?void 0:F.hide;return M===w&&!E}),"number",u),n.defaultProps.allowDataOverflow),f=ym(m,f,w,i)),le(le({},v),{},Se({},w,le(le({axisType:i},n.defaultProps),{},{hide:!0,orientation:cs(aX,"".concat(i,".").concat(b%2),null),domain:f,originalDomain:C,isCategorical:p,layout:u})))}return v},{})},dX=function(s,r){var a=r.axisType,n=a===void 0?"xAxis":a,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,d=r.dataStartIndex,c=r.dataEndIndex,u=s.children,m="".concat(n,"Id"),h=fs(u,i),x={};return h&&h.length?x=oX(s,{axes:h,graphicalItems:l,axisType:n,axisIdKey:m,stackGroups:o,dataStartIndex:d,dataEndIndex:c}):l&&l.length&&(x=cX(s,{Axis:i,graphicalItems:l,axisType:n,axisIdKey:m,stackGroups:o,dataStartIndex:d,dataEndIndex:c})),x},uX=function(s){var r=yr(s),a=sr(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:ux(a,function(n){return n.coordinate}),tooltipAxis:r,tooltipAxisBandSize:io(r,a)}},Hf=function(s){var r=s.children,a=s.defaultShowTooltip,n=ns(r,Ya),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(l=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},mX=function(s){return!s||!s.length?!1:s.some(function(r){var a=rr(r&&r.type);return a&&a.indexOf("Bar")>=0})},Yf=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xX=function(s,r){var a=s.props,n=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,d=o===void 0?{}:o,c=a.width,u=a.height,m=a.children,h=a.margin||{},x=ns(m,Ya),p=ns(m,wr),b=Object.keys(d).reduce(function(f,k){var y=d[k],F=y.orientation;return!y.mirror&&!y.hide?le(le({},f),{},Se({},F,f[F]+y.width)):f},{left:h.left||0,right:h.right||0}),v=Object.keys(l).reduce(function(f,k){var y=l[k],F=y.orientation;return!y.mirror&&!y.hide?le(le({},f),{},Se({},F,cs(f,"".concat(F))+y.height)):f},{top:h.top||0,bottom:h.bottom||0}),j=le(le({},v),b),P=j.bottom;x&&(j.bottom+=x.props.height||Ya.defaultProps.height),p&&r&&(j=EB(j,n,a,r));var w=c-j.left-j.right,C=u-j.top-j.bottom;return le(le({brushBottom:P},j),{},{width:Math.max(w,0),height:Math.max(C,0)})},hX=function(s,r){if(r==="xAxis")return s[r].width;if(r==="yAxis")return s[r].height},BN=function(s){var r=s.chartName,a=s.GraphicalChild,n=s.defaultTooltipEventType,i=n===void 0?"axis":n,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,d=s.axisComponents,c=s.legendContent,u=s.formatAxisMap,m=s.defaultProps,h=function(j,P){var w=P.graphicalItems,C=P.stackGroups,f=P.offset,k=P.updateId,y=P.dataStartIndex,F=P.dataEndIndex,M=j.barSize,E=j.layout,B=j.barGap,A=j.barCategoryGap,L=j.maxBarSize,N=Yf(E),R=N.numericAxisName,O=N.cateAxisName,T=mX(w),g=[];return w.forEach(function(D,S){var $=qc(j.data,{graphicalItems:[D],dataStartIndex:y,dataEndIndex:F}),I=D.type.defaultProps!==void 0?le(le({},D.type.defaultProps),D.props):D.props,K=I.dataKey,U=I.maxBarSize,q=I["".concat(R,"Id")],z=I["".concat(O,"Id")],Y={},se=d.reduce(function(me,We){var Fs=P["".concat(We.axisType,"Map")],ds=I["".concat(We.axisType,"Id")];Fs&&Fs[ds]||We.axisType==="zAxis"||aa();var Er=Fs[ds];return le(le({},me),{},Se(Se({},We.axisType,Er),"".concat(We.axisType,"Ticks"),sr(Er)))},Y),J=se[O],te=se["".concat(O,"Ticks")],V=C&&C[q]&&C[q].hasStack&&WB(D,C[q].stackGroups),W=rr(D.type).indexOf("Bar")>=0,X=io(J,te),H=[],ee=T&&OB({barSize:M,stackGroups:C,totalSize:hX(se,O)});if(W){var ue,be,ke=Ae(U)?L:U,De=(ue=(be=io(J,te,!0))!==null&&be!==void 0?be:ke)!==null&&ue!==void 0?ue:0;H=TB({barGap:B,barCategoryGap:A,bandSize:De!==X?De:X,sizeList:ee[z],maxBarSize:ke}),De!==X&&(H=H.map(function(me){return le(le({},me),{},{position:le(le({},me.position),{},{offset:me.position.offset-De/2})})}))}var ht=D&&D.type&&D.type.getComposedData;ht&&g.push({props:le(le({},ht(le(le({},se),{},{displayedData:$,props:j,dataKey:K,item:D,bandSize:X,barPosition:H,offset:f,stackedData:V,layout:E,dataStartIndex:y,dataEndIndex:F}))),{},Se(Se(Se({key:D.key||"item-".concat(S)},R,se[R]),O,se[O]),"animationId",k)),childIndex:TA(D,j.children),item:D})}),g},x=function(j,P){var w=j.props,C=j.dataStartIndex,f=j.dataEndIndex,k=j.updateId;if(!ip({props:w}))return null;var y=w.children,F=w.layout,M=w.stackOffset,E=w.data,B=w.reverseStackOrder,A=Yf(F),L=A.numericAxisName,N=A.cateAxisName,R=fs(y,a),O=UB(E,R,"".concat(L,"Id"),"".concat(N,"Id"),M,B),T=d.reduce(function(I,K){var U="".concat(K.axisType,"Map");return le(le({},I),{},Se({},U,dX(w,le(le({},K),{},{graphicalItems:R,stackGroups:K.axisType===L&&O,dataStartIndex:C,dataEndIndex:f}))))},{}),g=xX(le(le({},T),{},{props:w,graphicalItems:R}),P==null?void 0:P.legendBBox);Object.keys(T).forEach(function(I){T[I]=u(w,T[I],g,I.replace("Map",""),r)});var D=T["".concat(N,"Map")],S=uX(D),$=h(w,le(le({},T),{},{dataStartIndex:C,dataEndIndex:f,updateId:k,graphicalItems:R,stackGroups:O,offset:g}));return le(le({formattedGraphicalItems:$,graphicalItems:R,offset:g,stackGroups:O},S),T)},p=function(v){function j(P){var w,C,f;return HQ(this,j),f=QQ(this,j,[P]),Se(f,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Se(f,"accessibilityManager",new EQ),Se(f,"handleLegendBBoxUpdate",function(k){if(k){var y=f.state,F=y.dataStartIndex,M=y.dataEndIndex,E=y.updateId;f.setState(le({legendBBox:k},x({props:f.props,dataStartIndex:F,dataEndIndex:M,updateId:E},le(le({},f.state),{},{legendBBox:k}))))}}),Se(f,"handleReceiveSyncEvent",function(k,y,F){if(f.props.syncId===k){if(F===f.eventEmitterSymbol&&typeof f.props.syncMethod!="function")return;f.applySyncEvent(y)}}),Se(f,"handleBrushChange",function(k){var y=k.startIndex,F=k.endIndex;if(y!==f.state.dataStartIndex||F!==f.state.dataEndIndex){var M=f.state.updateId;f.setState(function(){return le({dataStartIndex:y,dataEndIndex:F},x({props:f.props,dataStartIndex:y,dataEndIndex:F,updateId:M},f.state))}),f.triggerSyncEvent({dataStartIndex:y,dataEndIndex:F})}}),Se(f,"handleMouseEnter",function(k){var y=f.getMouseInfo(k);if(y){var F=le(le({},y),{},{isTooltipActive:!0});f.setState(F),f.triggerSyncEvent(F);var M=f.props.onMouseEnter;Ce(M)&&M(F,k)}}),Se(f,"triggeredAfterMouseMove",function(k){var y=f.getMouseInfo(k),F=y?le(le({},y),{},{isTooltipActive:!0}):{isTooltipActive:!1};f.setState(F),f.triggerSyncEvent(F);var M=f.props.onMouseMove;Ce(M)&&M(F,k)}),Se(f,"handleItemMouseEnter",function(k){f.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Se(f,"handleItemMouseLeave",function(){f.setState(function(){return{isTooltipActive:!1}})}),Se(f,"handleMouseMove",function(k){k.persist(),f.throttleTriggeredAfterMouseMove(k)}),Se(f,"handleMouseLeave",function(k){f.throttleTriggeredAfterMouseMove.cancel();var y={isTooltipActive:!1};f.setState(y),f.triggerSyncEvent(y);var F=f.props.onMouseLeave;Ce(F)&&F(y,k)}),Se(f,"handleOuterEvent",function(k){var y=OA(k),F=cs(f.props,"".concat(y));if(y&&Ce(F)){var M,E;/.*touch.*/i.test(y)?E=f.getMouseInfo(k.changedTouches[0]):E=f.getMouseInfo(k),F((M=E)!==null&&M!==void 0?M:{},k)}}),Se(f,"handleClick",function(k){var y=f.getMouseInfo(k);if(y){var F=le(le({},y),{},{isTooltipActive:!0});f.setState(F),f.triggerSyncEvent(F);var M=f.props.onClick;Ce(M)&&M(F,k)}}),Se(f,"handleMouseDown",function(k){var y=f.props.onMouseDown;if(Ce(y)){var F=f.getMouseInfo(k);y(F,k)}}),Se(f,"handleMouseUp",function(k){var y=f.props.onMouseUp;if(Ce(y)){var F=f.getMouseInfo(k);y(F,k)}}),Se(f,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&f.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Se(f,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&f.handleMouseDown(k.changedTouches[0])}),Se(f,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&f.handleMouseUp(k.changedTouches[0])}),Se(f,"handleDoubleClick",function(k){var y=f.props.onDoubleClick;if(Ce(y)){var F=f.getMouseInfo(k);y(F,k)}}),Se(f,"handleContextMenu",function(k){var y=f.props.onContextMenu;if(Ce(y)){var F=f.getMouseInfo(k);y(F,k)}}),Se(f,"triggerSyncEvent",function(k){f.props.syncId!==void 0&&Ad.emit($d,f.props.syncId,k,f.eventEmitterSymbol)}),Se(f,"applySyncEvent",function(k){var y=f.props,F=y.layout,M=y.syncMethod,E=f.state.updateId,B=k.dataStartIndex,A=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)f.setState(le({dataStartIndex:B,dataEndIndex:A},x({props:f.props,dataStartIndex:B,dataEndIndex:A,updateId:E},f.state)));else if(k.activeTooltipIndex!==void 0){var L=k.chartX,N=k.chartY,R=k.activeTooltipIndex,O=f.state,T=O.offset,g=O.tooltipTicks;if(!T)return;if(typeof M=="function")R=M(g,k);else if(M==="value"){R=-1;for(var D=0;D<g.length;D++)if(g[D].value===k.activeLabel){R=D;break}}var S=le(le({},T),{},{x:T.left,y:T.top}),$=Math.min(L,S.x+S.width),I=Math.min(N,S.y+S.height),K=g[R]&&g[R].value,U=Nm(f.state,f.props.data,R),q=g[R]?{x:F==="horizontal"?g[R].coordinate:$,y:F==="horizontal"?I:g[R].coordinate}:IN;f.setState(le(le({},k),{},{activeLabel:K,activeCoordinate:q,activePayload:U,activeTooltipIndex:R}))}else f.setState(k)}),Se(f,"renderCursor",function(k){var y,F=f.state,M=F.isTooltipActive,E=F.activeCoordinate,B=F.activePayload,A=F.offset,L=F.activeTooltipIndex,N=F.tooltipAxisBandSize,R=f.getTooltipEventType(),O=(y=k.props.active)!==null&&y!==void 0?y:M,T=f.props.layout,g=k.key||"_recharts-cursor";return Z.createElement(qQ,{key:g,activeCoordinate:E,activePayload:B,activeTooltipIndex:L,chartName:r,element:k,isActive:O,layout:T,offset:A,tooltipAxisBandSize:N,tooltipEventType:R})}),Se(f,"renderPolarAxis",function(k,y,F){var M=cs(k,"type.axisType"),E=cs(f.state,"".concat(M,"Map")),B=k.type.defaultProps,A=B!==void 0?le(le({},B),k.props):k.props,L=E&&E[A["".concat(M,"Id")]];return _.cloneElement(k,le(le({},L),{},{className:Ee(M,L.className),key:k.key||"".concat(y,"-").concat(F),ticks:sr(L,!0)}))}),Se(f,"renderPolarGrid",function(k){var y=k.props,F=y.radialLines,M=y.polarAngles,E=y.polarRadius,B=f.state,A=B.radiusAxisMap,L=B.angleAxisMap,N=yr(A),R=yr(L),O=R.cx,T=R.cy,g=R.innerRadius,D=R.outerRadius;return _.cloneElement(k,{polarAngles:Array.isArray(M)?M:sr(R,!0).map(function(S){return S.coordinate}),polarRadius:Array.isArray(E)?E:sr(N,!0).map(function(S){return S.coordinate}),cx:O,cy:T,innerRadius:g,outerRadius:D,key:k.key||"polar-grid",radialLines:F})}),Se(f,"renderLegend",function(){var k=f.state.formattedGraphicalItems,y=f.props,F=y.children,M=y.width,E=y.height,B=f.props.margin||{},A=M-(B.left||0)-(B.right||0),L=hj({children:F,formattedGraphicalItems:k,legendWidth:A,legendContent:c});if(!L)return null;var N=L.item,R=Wf(L,BQ);return _.cloneElement(N,le(le({},R),{},{chartWidth:M,chartHeight:E,margin:B,onBBoxUpdate:f.handleLegendBBoxUpdate}))}),Se(f,"renderTooltip",function(){var k,y=f.props,F=y.children,M=y.accessibilityLayer,E=ns(F,Ps);if(!E)return null;var B=f.state,A=B.isTooltipActive,L=B.activeCoordinate,N=B.activePayload,R=B.activeLabel,O=B.offset,T=(k=E.props.active)!==null&&k!==void 0?k:A;return _.cloneElement(E,{viewBox:le(le({},O),{},{x:O.left,y:O.top}),active:T,label:R,payload:T?N:[],coordinate:L,accessibilityLayer:M})}),Se(f,"renderBrush",function(k){var y=f.props,F=y.margin,M=y.data,E=f.state,B=E.offset,A=E.dataStartIndex,L=E.dataEndIndex,N=E.updateId;return _.cloneElement(k,{key:k.key||"_recharts-brush",onChange:xl(f.handleBrushChange,k.props.onChange),data:M,x:xe(k.props.x)?k.props.x:B.left,y:xe(k.props.y)?k.props.y:B.top+B.height+B.brushBottom-(F.bottom||0),width:xe(k.props.width)?k.props.width:B.width,startIndex:A,endIndex:L,updateId:"brush-".concat(N)})}),Se(f,"renderReferenceElement",function(k,y,F){if(!k)return null;var M=f,E=M.clipPathId,B=f.state,A=B.xAxisMap,L=B.yAxisMap,N=B.offset,R=k.type.defaultProps||{},O=k.props,T=O.xAxisId,g=T===void 0?R.xAxisId:T,D=O.yAxisId,S=D===void 0?R.yAxisId:D;return _.cloneElement(k,{key:k.key||"".concat(y,"-").concat(F),xAxis:A[g],yAxis:L[S],viewBox:{x:N.left,y:N.top,width:N.width,height:N.height},clipPathId:E})}),Se(f,"renderActivePoints",function(k){var y=k.item,F=k.activePoint,M=k.basePoint,E=k.childIndex,B=k.isRange,A=[],L=y.props.key,N=y.item.type.defaultProps!==void 0?le(le({},y.item.type.defaultProps),y.item.props):y.item.props,R=N.activeDot,O=N.dataKey,T=le(le({index:E,dataKey:O,cx:F.x,cy:F.y,r:4,fill:Dx(y.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},_e(R,!1)),El(R));return A.push(j.renderActiveDot(R,T,"".concat(L,"-activePoint-").concat(E))),M?A.push(j.renderActiveDot(R,le(le({},T),{},{cx:M.x,cy:M.y}),"".concat(L,"-basePoint-").concat(E))):B&&A.push(null),A}),Se(f,"renderGraphicChild",function(k,y,F){var M=f.filterFormatItem(k,y,F);if(!M)return null;var E=f.getTooltipEventType(),B=f.state,A=B.isTooltipActive,L=B.tooltipAxis,N=B.activeTooltipIndex,R=B.activeLabel,O=f.props.children,T=ns(O,Ps),g=M.props,D=g.points,S=g.isRange,$=g.baseLine,I=M.item.type.defaultProps!==void 0?le(le({},M.item.type.defaultProps),M.item.props):M.item.props,K=I.activeDot,U=I.hide,q=I.activeBar,z=I.activeShape,Y=!!(!U&&A&&T&&(K||q||z)),se={};E!=="axis"&&T&&T.props.trigger==="click"?se={onClick:xl(f.handleItemMouseEnter,k.props.onClick)}:E!=="axis"&&(se={onMouseLeave:xl(f.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:xl(f.handleItemMouseEnter,k.props.onMouseEnter)});var J=_.cloneElement(k,le(le({},M.props),se));function te(We){return typeof L.dataKey=="function"?L.dataKey(We.payload):null}if(Y)if(N>=0){var V,W;if(L.dataKey&&!L.allowDuplicatedCategory){var X=typeof L.dataKey=="function"?te:"payload.".concat(L.dataKey.toString());V=Tl(D,X,R),W=S&&$&&Tl($,X,R)}else V=D==null?void 0:D[N],W=S&&$&&$[N];if(z||q){var H=k.props.activeIndex!==void 0?k.props.activeIndex:N;return[_.cloneElement(k,le(le(le({},M.props),se),{},{activeIndex:H})),null,null]}if(!Ae(V))return[J].concat(an(f.renderActivePoints({item:M,activePoint:V,basePoint:W,childIndex:N,isRange:S})))}else{var ee,ue=(ee=f.getItemByXY(f.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:J},be=ue.graphicalItem,ke=be.item,De=ke===void 0?k:ke,ht=be.childIndex,me=le(le(le({},M.props),se),{},{activeIndex:ht});return[_.cloneElement(De,me),null,null]}return S?[J,null,null]:[J,null]}),Se(f,"renderCustomized",function(k,y,F){return _.cloneElement(k,le(le({key:"recharts-customized-".concat(F)},f.props),f.state))}),Se(f,"renderMap",{CartesianGrid:{handler:bl,once:!0},ReferenceArea:{handler:f.renderReferenceElement},ReferenceLine:{handler:bl},ReferenceDot:{handler:f.renderReferenceElement},XAxis:{handler:bl},YAxis:{handler:bl},Brush:{handler:f.renderBrush,once:!0},Bar:{handler:f.renderGraphicChild},Line:{handler:f.renderGraphicChild},Area:{handler:f.renderGraphicChild},Radar:{handler:f.renderGraphicChild},RadialBar:{handler:f.renderGraphicChild},Scatter:{handler:f.renderGraphicChild},Pie:{handler:f.renderGraphicChild},Funnel:{handler:f.renderGraphicChild},Tooltip:{handler:f.renderCursor,once:!0},PolarGrid:{handler:f.renderPolarGrid,once:!0},PolarAngleAxis:{handler:f.renderPolarAxis},PolarRadiusAxis:{handler:f.renderPolarAxis},Customized:{handler:f.renderCustomized}}),f.clipPathId="".concat((w=P.id)!==null&&w!==void 0?w:bn("recharts"),"-clip"),f.throttleTriggeredAfterMouseMove=xv(f.triggeredAfterMouseMove,(C=P.throttleDelay)!==null&&C!==void 0?C:1e3/60),f.state={},f}return ZQ(j,v),GQ(j,[{key:"componentDidMount",value:function(){var w,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,C=w.children,f=w.data,k=w.height,y=w.layout,F=ns(C,Ps);if(F){var M=F.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,B=Nm(this.state,f,M,E),A=this.state.tooltipTicks[M].coordinate,L=(this.state.offset.top+k)/2,N=y==="horizontal",R=N?{x:A,y:L}:{y:A,x:L},O=this.state.formattedGraphicalItems.find(function(g){var D=g.item;return D.type.name==="Scatter"});O&&(R=le(le({},R),O.props.points[M].tooltipPosition),B=O.props.points[M].tooltipPayload);var T={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:E,activePayload:B,activeCoordinate:R};this.setState(T),this.renderCursor(F),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var f,k;this.accessibilityManager.setDetails({offset:{left:(f=this.props.margin.left)!==null&&f!==void 0?f:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(w){Jd([ns(w.children,Ps)],[ns(this.props.children,Ps)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=ns(this.props.children,Ps);if(w&&typeof w.props.shared=="boolean"){var C=w.props.shared?"axis":"item";return o.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var C=this.container,f=C.getBoundingClientRect(),k=aD(f),y={chartX:Math.round(w.pageX-k.left),chartY:Math.round(w.pageY-k.top)},F=f.width/C.offsetWidth||1,M=this.inRange(y.chartX,y.chartY,F);if(!M)return null;var E=this.state,B=E.xAxisMap,A=E.yAxisMap,L=this.getTooltipEventType(),N=Kf(this.state,this.props.data,this.props.layout,M);if(L!=="axis"&&B&&A){var R=yr(B).scale,O=yr(A).scale,T=R&&R.invert?R.invert(y.chartX):null,g=O&&O.invert?O.invert(y.chartY):null;return le(le({},y),{},{xValue:T,yValue:g},N)}return N?le(le({},y),N):null}},{key:"inRange",value:function(w,C){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,y=w/f,F=C/f;if(k==="horizontal"||k==="vertical"){var M=this.state.offset,E=y>=M.left&&y<=M.left+M.width&&F>=M.top&&F<=M.top+M.height;return E?{x:y,y:F}:null}var B=this.state,A=B.angleAxisMap,L=B.radiusAxisMap;if(A&&L){var N=yr(A);return fg({x:y,y:F},N)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,C=this.getTooltipEventType(),f=ns(w,Ps),k={};f&&C==="axis"&&(f.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var y=El(this.props,this.handleOuterEvent);return le(le({},y),k)}},{key:"addListener",value:function(){Ad.on($d,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Ad.removeListener($d,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,C,f){for(var k=this.state.formattedGraphicalItems,y=0,F=k.length;y<F;y++){var M=k[y];if(M.item===w||M.props.key===w.key||C===rr(M.item.type)&&f===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,C=this.state.offset,f=C.left,k=C.top,y=C.height,F=C.width;return Z.createElement("defs",null,Z.createElement("clipPath",{id:w},Z.createElement("rect",{x:f,y:k,height:y,width:F})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(C,f){var k=zf(f,2),y=k[0],F=k[1];return le(le({},C),{},Se({},y,F.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(C,f){var k=zf(f,2),y=k[0],F=k[1];return le(le({},C),{},Se({},y,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(w){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(w){var C=this.state,f=C.formattedGraphicalItems,k=C.activeItem;if(f&&f.length)for(var y=0,F=f.length;y<F;y++){var M=f[y],E=M.props,B=M.item,A=B.type.defaultProps!==void 0?le(le({},B.type.defaultProps),B.props):B.props,L=rr(B.type);if(L==="Bar"){var N=(E.data||[]).find(function(g){return BW(w,g)});if(N)return{graphicalItem:M,payload:N}}else if(L==="RadialBar"){var R=(E.data||[]).find(function(g){return fg(w,g)});if(R)return{graphicalItem:M,payload:R}}else if(Tc(M,k)||Ec(M,k)||Pi(M,k)){var O=AK({graphicalItem:M,activeTooltipItem:k,itemData:A.data}),T=A.activeIndex===void 0?O:A.activeIndex;return{graphicalItem:le(le({},M),{},{childIndex:T}),payload:Pi(M,k)?A.data[O]:M.props.data[O]}}}return null}},{key:"render",value:function(){var w=this;if(!ip(this))return null;var C=this.props,f=C.children,k=C.className,y=C.width,F=C.height,M=C.style,E=C.compact,B=C.title,A=C.desc,L=Wf(C,UQ),N=_e(L,!1);if(E)return Z.createElement(Sf,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement(eu,_a({},N,{width:y,height:F,title:B,desc:A}),this.renderClipPath(),op(f,this.renderMap)));if(this.props.accessibilityLayer){var R,O;N.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,N.role=(O=this.props.role)!==null&&O!==void 0?O:"application",N.onKeyDown=function(g){w.accessibilityManager.keyboardEvent(g)},N.onFocus=function(){w.accessibilityManager.focus()}}var T=this.parseEventsOfWrapper();return Z.createElement(Sf,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement("div",_a({className:Ee("recharts-wrapper",k),style:le({position:"relative",cursor:"default",width:y,height:F},M)},T,{ref:function(D){w.container=D}}),Z.createElement(eu,_a({},N,{width:y,height:F,title:B,desc:A,style:nX}),this.renderClipPath(),op(f,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);Se(p,"displayName",r),Se(p,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Se(p,"getDerivedStateFromProps",function(v,j){var P=v.dataKey,w=v.data,C=v.children,f=v.width,k=v.height,y=v.layout,F=v.stackOffset,M=v.margin,E=j.dataStartIndex,B=j.dataEndIndex;if(j.updateId===void 0){var A=Hf(v);return le(le(le({},A),{},{updateId:0},x(le(le({props:v},A),{},{updateId:0}),j)),{},{prevDataKey:P,prevData:w,prevWidth:f,prevHeight:k,prevLayout:y,prevStackOffset:F,prevMargin:M,prevChildren:C})}if(P!==j.prevDataKey||w!==j.prevData||f!==j.prevWidth||k!==j.prevHeight||y!==j.prevLayout||F!==j.prevStackOffset||!ka(M,j.prevMargin)){var L=Hf(v),N={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},R=le(le({},Kf(j,w,y)),{},{updateId:j.updateId+1}),O=le(le(le({},L),N),R);return le(le(le({},O),x(le({props:v},O),j)),{},{prevDataKey:P,prevData:w,prevWidth:f,prevHeight:k,prevLayout:y,prevStackOffset:F,prevMargin:M,prevChildren:C})}if(!Jd(C,j.prevChildren)){var T,g,D,S,$=ns(C,Ya),I=$&&(T=(g=$.props)===null||g===void 0?void 0:g.startIndex)!==null&&T!==void 0?T:E,K=$&&(D=(S=$.props)===null||S===void 0?void 0:S.endIndex)!==null&&D!==void 0?D:B,U=I!==E||K!==B,q=!Ae(w),z=q&&!U?j.updateId:j.updateId+1;return le(le({updateId:z},x(le(le({props:v},j),{},{updateId:z,dataStartIndex:I,dataEndIndex:K}),j)),{},{prevChildren:C,dataStartIndex:I,dataEndIndex:K})}return null}),Se(p,"renderActiveDot",function(v,j,P){var w;return _.isValidElement(v)?w=_.cloneElement(v,j):Ce(v)?w=v(j):w=Z.createElement(Cc,j),Z.createElement(qe,{className:"recharts-active-dot",key:P},w)});var b=_.forwardRef(function(j,P){return Z.createElement(p,_a({},j,{ref:P}))});return b.displayName=p.displayName,b},pX=BN({chartName:"PieChart",GraphicalChild:pr,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Oc},{axisType:"radiusAxis",AxisComp:Ac}],formatAxisMap:eU,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),gX=BN({chartName:"AreaChart",GraphicalChild:dr,axisComponents:[{axisType:"xAxis",AxisComp:Ic},{axisType:"yAxis",AxisComp:Ei}],formatAxisMap:lY});function _s(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Sr(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function fX(t,s){const r=_s(t);return isNaN(s)?Sr(t,NaN):(r.setDate(r.getDate()+s),r)}const UN=6048e5,bX=864e5;let yX={};function Bc(){return yX}function Ri(t,s){var o,d,c,u;const r=Bc(),a=(s==null?void 0:s.weekStartsOn)??((d=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,n=_s(t),i=n.getDay(),l=(i<a?7:0)+i-a;return n.setDate(n.getDate()-l),n.setHours(0,0,0,0),n}function Eo(t){return Ri(t,{weekStartsOn:1})}function zN(t){const s=_s(t),r=s.getFullYear(),a=Sr(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Eo(a),i=Sr(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Eo(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function Gf(t){const s=_s(t);return s.setHours(0,0,0,0),s}function Qf(t){const s=_s(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function vX(t,s){const r=Gf(t),a=Gf(s),n=+r-Qf(r),i=+a-Qf(a);return Math.round((n-i)/bX)}function jX(t){const s=zN(t),r=Sr(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Eo(r)}function NX(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wX(t){if(!NX(t)&&typeof t!="number")return!1;const s=_s(t);return!isNaN(Number(s))}function _X(t){const s=_s(t),r=Sr(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}const kX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},SX=(t,s,r)=>{let a;const n=kX[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Td(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const CX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$X={date:Td({formats:CX,defaultWidth:"full"}),time:Td({formats:PX,defaultWidth:"full"}),dateTime:Td({formats:AX,defaultWidth:"full"})},OX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TX=(t,s,r,a)=>OX[t];function qn(t){return(s,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):l;n=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const EX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},FX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},IX=(t,s)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},qX={ordinalNumber:IX,era:qn({values:EX,defaultWidth:"wide"}),quarter:qn({values:FX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qn({values:MX,defaultWidth:"wide"}),day:qn({values:RX,defaultWidth:"wide"}),dayPeriod:qn({values:DX,defaultWidth:"wide",formattingValues:LX,defaultFormattingWidth:"wide"})};function Bn(t){return(s,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const l=i[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(o)?UX(o,m=>m.test(l)):BX(o,m=>m.test(l));let c;c=t.valueCallback?t.valueCallback(d):d,c=r.valueCallback?r.valueCallback(c):c;const u=s.slice(l.length);return{value:c,rest:u}}}function BX(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function UX(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function zX(t){return(s,r={})=>{const a=s.match(t.matchPattern);if(!a)return null;const n=a[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const o=s.slice(n.length);return{value:l,rest:o}}}const WX=/^(\d+)(th|st|nd|rd)?/i,VX=/\d+/i,KX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},HX={any:[/^b/i,/^(a|c)/i]},YX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},GX={any:[/1/i,/2/i,/3/i,/4/i]},QX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sJ={ordinalNumber:zX({matchPattern:WX,parsePattern:VX,valueCallback:t=>parseInt(t,10)}),era:Bn({matchPatterns:KX,defaultMatchWidth:"wide",parsePatterns:HX,defaultParseWidth:"any"}),quarter:Bn({matchPatterns:YX,defaultMatchWidth:"wide",parsePatterns:GX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bn({matchPatterns:QX,defaultMatchWidth:"wide",parsePatterns:XX,defaultParseWidth:"any"}),day:Bn({matchPatterns:JX,defaultMatchWidth:"wide",parsePatterns:ZX,defaultParseWidth:"any"}),dayPeriod:Bn({matchPatterns:eJ,defaultMatchWidth:"any",parsePatterns:tJ,defaultParseWidth:"any"})},rJ={code:"en-US",formatDistance:SX,formatLong:$X,formatRelative:TX,localize:qX,match:sJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aJ(t){const s=_s(t);return vX(s,_X(s))+1}function nJ(t){const s=_s(t),r=+Eo(s)-+jX(s);return Math.round(r/UN)+1}function WN(t,s){var u,m,h,x;const r=_s(t),a=r.getFullYear(),n=Bc(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,l=Sr(t,0);l.setFullYear(a+1,0,i),l.setHours(0,0,0,0);const o=Ri(l,s),d=Sr(t,0);d.setFullYear(a,0,i),d.setHours(0,0,0,0);const c=Ri(d,s);return r.getTime()>=o.getTime()?a+1:r.getTime()>=c.getTime()?a:a-1}function iJ(t,s){var o,d,c,u;const r=Bc(),a=(s==null?void 0:s.firstWeekContainsDate)??((d=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,n=WN(t,s),i=Sr(t,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Ri(i,s)}function lJ(t,s){const r=_s(t),a=+Ri(r,s)-+iJ(r,s);return Math.round(a/UN)+1}function Ye(t,s){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(s,"0");return r+a}const gr={y(t,s){const r=t.getFullYear(),a=r>0?r:1-r;return Ye(s==="yy"?a%100:a,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):Ye(r+1,2)},d(t,s){return Ye(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return Ye(t.getHours()%12||12,s.length)},H(t,s){return Ye(t.getHours(),s.length)},m(t,s){return Ye(t.getMinutes(),s.length)},s(t,s){return Ye(t.getSeconds(),s.length)},S(t,s){const r=s.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return Ye(n,s.length)}},ga={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xf={G:function(t,s,r){const a=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return gr.y(t,s)},Y:function(t,s,r,a){const n=WN(t,a),i=n>0?n:1-n;if(s==="YY"){const l=i%100;return Ye(l,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):Ye(i,s.length)},R:function(t,s){const r=zN(t);return Ye(r,s.length)},u:function(t,s){const r=t.getFullYear();return Ye(r,s.length)},Q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return Ye(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return Ye(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,r){const a=t.getMonth();switch(s){case"M":case"MM":return gr.M(t,s);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,r){const a=t.getMonth();switch(s){case"L":return String(a+1);case"LL":return Ye(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,r,a){const n=lJ(t,a);return s==="wo"?r.ordinalNumber(n,{unit:"week"}):Ye(n,s.length)},I:function(t,s,r){const a=nJ(t);return s==="Io"?r.ordinalNumber(a,{unit:"week"}):Ye(a,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):gr.d(t,s)},D:function(t,s,r){const a=aJ(t);return s==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Ye(a,s.length)},E:function(t,s,r){const a=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Ye(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Ye(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,r){const a=t.getDay(),n=a===0?7:a;switch(s){case"i":return String(n);case"ii":return Ye(n,s.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,r){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,r){const a=t.getHours();let n;switch(a===12?n=ga.noon:a===0?n=ga.midnight:n=a/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,r){const a=t.getHours();let n;switch(a>=17?n=ga.evening:a>=12?n=ga.afternoon:a>=4?n=ga.morning:n=ga.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return gr.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):gr.H(t,s)},K:function(t,s,r){const a=t.getHours()%12;return s==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Ye(a,s.length)},k:function(t,s,r){let a=t.getHours();return a===0&&(a=24),s==="ko"?r.ordinalNumber(a,{unit:"hour"}):Ye(a,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):gr.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):gr.s(t,s)},S:function(t,s){return gr.S(t,s)},X:function(t,s,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(s){case"X":return Zf(a);case"XXXX":case"XX":return Br(a);case"XXXXX":case"XXX":default:return Br(a,":")}},x:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"x":return Zf(a);case"xxxx":case"xx":return Br(a);case"xxxxx":case"xxx":default:return Br(a,":")}},O:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Jf(a,":");case"OOOO":default:return"GMT"+Br(a,":")}},z:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Jf(a,":");case"zzzz":default:return"GMT"+Br(a,":")}},t:function(t,s,r){const a=Math.trunc(t.getTime()/1e3);return Ye(a,s.length)},T:function(t,s,r){const a=t.getTime();return Ye(a,s.length)}};function Jf(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+s+Ye(i,2)}function Zf(t,s){return t%60===0?(t>0?"-":"+")+Ye(Math.abs(t)/60,2):Br(t,s)}function Br(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=Ye(Math.trunc(a/60),2),i=Ye(a%60,2);return r+n+s+i}const eb=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},VN=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},oJ=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return eb(t,s);let i;switch(a){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",eb(a,s)).replace("{{time}}",VN(n,s))},cJ={p:VN,P:oJ},dJ=/^D+$/,uJ=/^Y+$/,mJ=["D","DD","YY","YYYY"];function xJ(t){return dJ.test(t)}function hJ(t){return uJ.test(t)}function pJ(t,s,r){const a=gJ(t,s,r);if(console.warn(a),mJ.includes(t))throw new RangeError(a)}function gJ(t,s,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yJ=/^'([^]*?)'?$/,vJ=/''/g,jJ=/[a-zA-Z]/;function yl(t,s,r){var u,m,h,x;const a=Bc(),n=a.locale??rJ,i=a.firstWeekContainsDate??((m=(u=a.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,l=a.weekStartsOn??((x=(h=a.locale)==null?void 0:h.options)==null?void 0:x.weekStartsOn)??0,o=_s(t);if(!wX(o))throw new RangeError("Invalid time value");let d=s.match(bJ).map(p=>{const b=p[0];if(b==="p"||b==="P"){const v=cJ[b];return v(p,n.formatLong)}return p}).join("").match(fJ).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const b=p[0];if(b==="'")return{isToken:!1,value:NJ(p)};if(Xf[b])return{isToken:!0,value:p};if(b.match(jJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(d=n.localize.preprocessor(o,d));const c={firstWeekContainsDate:i,weekStartsOn:l,locale:n};return d.map(p=>{if(!p.isToken)return p.value;const b=p.value;(hJ(b)||xJ(b))&&pJ(b,s,String(t));const v=Xf[b[0]];return v(o,b,n.localize,c)}).join("")}function NJ(t){const s=t.match(yJ);return s?s[1].replace(vJ,"'"):t}function wJ(t,s){return fX(t,-30)}const _J=async(t,s)=>{var l;const n=(await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard",{params:{metric_type:"overview",date_range:s},headers:{Authorization:`Bearer ${t}`}})).data,i=((l=n.daily_orders)==null?void 0:l.map(o=>({date:o.date,count:Number(o.count||0),value:Number(o.total_amount||0)})))||[];return{total_users:Number(n.total_users||0),active_users:Number(n.active_users||0),total_orders:Number(n.total_orders||0),gross_merchandise_value:Number(n.gmv||0),platform_revenue:Number(n.total_revenue||0),user_growth_rate:Number(n.user_growth_rate||0),order_volume_trend:i}},kJ=async(t,s)=>{const a=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/dashboard",{params:{metric_type:"users",date_range:s},headers:{Authorization:`Bearer ${t}`}});return{new_registrations:[],user_retention_rates:{day_1:85,day_7:60,day_30:45},user_activity_patterns:[],churn_analysis:{churned_users:0,churn_rate:0},user_demographics:{by_type:[{type:"customer",count:a.data.total_customers||0},{type:"supplier",count:a.data.total_suppliers||0}],by_account_type:[]}}},SJ=async(t,s,r)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/analytics/export",{export_type:s,data_categories:["platform_overview","users","transactions","suppliers"],date_range:r},{headers:{Authorization:`Bearer ${t}`},responseType:"blob"})).data,CJ=()=>{var B;const t=re(A=>A.authentication_state.auth_token),[s,r]=Fe(),a=s.get("metric_type")||"overview",n=s.get("date_range")||"last_30_days",[i,l]=_.useState(n),[o,d]=_.useState({start:yl(wJ(new Date),"yyyy-MM-dd"),end:yl(new Date,"yyyy-MM-dd")}),{data:c,isLoading:u,error:m,refetch:h}=ne({queryKey:["admin-analytics-platform",i],queryFn:()=>_J(t,i),enabled:!!t&&a==="overview",staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:x,isLoading:p,error:b}=ne({queryKey:["admin-analytics-users",i],queryFn:()=>kJ(t,i),enabled:!!t&&a==="users",staleTime:5*60*1e3,refetchOnWindowFocus:!1}),v=A=>{r(L=>{const N=new URLSearchParams(L);return N.set("metric_type",A),N})},j=A=>{l(A),r(L=>{const N=new URLSearchParams(L);return N.set("date_range",A),N})},P=()=>{l("custom")},w=async A=>{if(t)try{const L=await SJ(t,A,i),N=window.URL.createObjectURL(L),R=document.createElement("a");R.href=N,R.download=`buildeasy-analytics-${A}-${new Date().toISOString().split("T")[0]}.${A}`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(N)}catch(L){console.error("Export failed:",L)}},C=()=>{h()},f=_.useMemo(()=>c?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c.gross_merchandise_value):"$0",[c]),k=_.useMemo(()=>c?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c.platform_revenue):"$0",[c]),y=_.useMemo(()=>{if(!c)return"0%";const A=c.user_growth_rate;return`${A>=0?"+":""}${A.toFixed(1)}%`},[c]),F={primary:"#2563eb",secondary:"#10b981"},M=["#2563eb","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"],E=_.useMemo(()=>c?[{title:"Total Users",value:c.total_users.toLocaleString(),icon:ct,change:y,changeType:c.user_growth_rate>=0?"positive":"negative",color:"blue"},{title:"Active Users (30d)",value:c.active_users.toLocaleString(),icon:Rs,change:`${(c.active_users/c.total_users*100).toFixed(1)}% of total`,changeType:"neutral",color:"green"},{title:"Total Orders",value:c.total_orders.toLocaleString(),icon:Be,change:void 0,changeType:"neutral",color:"purple"},{title:"GMV",value:f,icon:Te,change:void 0,changeType:"neutral",color:"amber"},{title:"Platform Revenue",value:k,icon:Re,change:void 0,changeType:"neutral",color:"emerald"}]:[],[c,f,k,y]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive performance metrics and insights"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:C,disabled:u,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50",children:[e.jsx(vt,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>w("csv"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Export as CSV"}),e.jsx("button",{onClick:()=>w("xlsx"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Export as Excel"})]})})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mt,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date Range:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[["last_7_days","last_30_days","last_90_days","last_year","all_time"].map(A=>e.jsx("button",{onClick:()=>j(A),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${i===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase())},A)),e.jsx("button",{onClick:()=>j("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${i==="custom"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),i==="custom"&&e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-end space-y-3 sm:space-y-0 sm:space-x-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:o.start,onChange:A=>d(L=>({...L,start:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:o.end,onChange:A=>d(L=>({...L,end:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Apply"})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:Rs},{id:"users",label:"User Analytics",icon:ct},{id:"transactions",label:"Transactions",icon:Te},{id:"suppliers",label:"Suppliers",icon:Js},{id:"products",label:"Products",icon:ve}].map(A=>{const L=A.icon;return e.jsxs("button",{onClick:()=>v(A.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${a===A.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:A.label})]},A.id)})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a==="overview"&&e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading analytics"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:m instanceof Error?m.message:"Failed to load platform metrics"})]})]})}),u?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5].map(A=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]},A))}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})]}):c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:E.map((A,L)=>{const N=A.icon,R={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600",emerald:"bg-emerald-50 text-emerald-600"}[A.color]||"bg-gray-50 text-gray-600";return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:A.title}),e.jsx("div",{className:`p-3 rounded-lg ${R}`,children:e.jsx(N,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex items-baseline justify-between",children:e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:A.value})}),A.change&&e.jsx("div",{className:"mt-2 flex items-center",children:e.jsx("span",{className:`text-sm font-medium ${A.changeType==="positive"?"text-green-600":A.changeType==="negative"?"text-red-600":"text-gray-600"}`,children:A.change})})]},L)})}),c.order_volume_trend&&c.order_volume_trend.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Volume Trend"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Daily order count and value over time"})]})}),e.jsx(n0,{width:"100%",height:400,children:e.jsxs(gX,{data:c.order_volume_trend,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:F.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:F.primary,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:F.secondary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:F.secondary,stopOpacity:0})]})]}),e.jsx(NN,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Ic,{dataKey:"date",stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:A=>yl(new Date(A),"MMM dd")}),e.jsx(Ei,{yAxisId:"left",stroke:"#6b7280",style:{fontSize:"12px"},label:{value:"Order Count",angle:-90,position:"insideLeft",style:{fontSize:"12px"}}}),e.jsx(Ei,{yAxisId:"right",orientation:"right",stroke:"#6b7280",style:{fontSize:"12px"},label:{value:"Order Value ($)",angle:90,position:"insideRight",style:{fontSize:"12px"}}}),e.jsx(Ps,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},labelFormatter:A=>yl(new Date(A),"MMM dd, yyyy"),formatter:(A,L)=>L==="count"?[A,"Orders"]:[`$${A.toLocaleString()}`,"Value"]}),e.jsx(wr,{wrapperStyle:{paddingTop:"20px"},formatter:A=>A==="count"?"Order Count":"Order Value"}),e.jsx(dr,{yAxisId:"left",type:"monotone",dataKey:"count",stroke:F.primary,strokeWidth:2,fillOpacity:1,fill:"url(#colorCount)"}),e.jsx(dr,{yAxisId:"right",type:"monotone",dataKey:"value",stroke:F.secondary,strokeWidth:2,fillOpacity:1,fill:"url(#colorValue)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"User Distribution"}),(B=x==null?void 0:x.user_demographics)!=null&&B.by_type&&x.user_demographics.by_type.length>0?e.jsx(n0,{width:"100%",height:250,children:e.jsxs(pX,{children:[e.jsx(pr,{data:x.user_demographics.by_type,dataKey:"count",nameKey:"type",cx:"50%",cy:"50%",outerRadius:80,label:A=>`${A.type}: ${A.count}`,children:x.user_demographics.by_type.map((A,L)=>e.jsx(pc,{fill:M[L%M.length]},`cell-${L}`))}),e.jsx(Ps,{}),e.jsx(wr,{})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsx("p",{children:"No user distribution data available"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Platform Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Rs,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"System Status"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Operational"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-600 text-white text-xs font-semibold rounded-full",children:"99.9%"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Be,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Active Orders"}),e.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:c.total_orders>0?Math.floor(c.total_orders*.15):0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(Re,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Guest to customer"})]})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"8.5%"})]})]})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(Rs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No analytics data available"})]})]}),a==="users"&&e.jsx(e.Fragment,{children:p?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):b?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("p",{className:"text-red-800",children:"Failed to load user analytics"})]})}):x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"User Retention Rates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Day 1 Retention"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[x.user_retention_rates.day_1,"%"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Day 7 Retention"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[x.user_retention_rates.day_7,"%"]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Day 30 Retention"}),e.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:[x.user_retention_rates.day_30,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"User Demographics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.user_demographics.by_type.map((A,L)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:M[L%M.length]}}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:A.type})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:A.count.toLocaleString()})]},L))})]})]}):null}),a==="transactions"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[e.jsx(Te,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Transaction Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Detailed transaction analytics coming soon. This will include payment method distribution, refund rates, and average order value trends."})]}),a==="suppliers"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[e.jsx(Js,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Supplier Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Supplier performance analytics coming soon. This will include revenue rankings, fulfillment rates, and satisfaction metrics."})]}),a==="products"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[e.jsx(ve,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Product performance analytics coming soon. This will include popular products, category performance, and search trends."})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Me,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Admin Analytics Dashboard"}),e.jsx("p",{className:"text-sm text-blue-800",children:"All metrics update automatically based on your selected date range. Use the export button to download data for external analysis. Custom reports and advanced filtering features are available in the premium analytics module."})]})]})})})]})})},PJ=async t=>{const{data:s}=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/communications/announcements?include_analytics=true&status=active,scheduled,draft",{headers:{Authorization:`Bearer ${t}`}});return s},AJ=async(t,s)=>{const{data:r}=await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/communications/announcements",{title:s.subject,content:s.content,target_segments:s.target_segments,delivery_channels:s.delivery_channels,schedule_date:s.schedule_date},{headers:{Authorization:`Bearer ${t}`}});return r},$J=async t=>{const{data:s}=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/users/segments",{headers:{Authorization:`Bearer ${t}`}});return s},OJ=async t=>{const{data:s}=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/notifications/templates?template_type=email,sms",{headers:{Authorization:`Bearer ${t}`}});return s},TJ=async(t,s,r)=>{const{data:a}=await G.put(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/notifications/templates/${s}`,r,{headers:{Authorization:`Bearer ${t}`}});return a},EJ=async(t,s,r)=>{const{data:a}=await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/communications/emergency-broadcast",{message:s,severity:r,channels:["email","sms","in_app"],target_all_users:!0},{headers:{Authorization:`Bearer ${t}`}});return a},FJ=()=>{var q,z;const[t,s]=Fe(),r=Pe(),a=re(Y=>Y.authentication_state.auth_token),[n,i]=_.useState(t.get("communication_type")||"announcements"),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(null),[h,x]=_.useState({subject:"",content:"",target_segments:[],delivery_channels:["in_app"],schedule_date:null,is_draft:!1}),[p,b]=_.useState(""),[v,j]=_.useState("high"),[P,w]=_.useState(""),[C,f]=_.useState([]),[k,y]=_.useState("all"),{data:F,isLoading:M}=ne({queryKey:["admin-announcements",k],queryFn:()=>PJ(a),enabled:!!a&&n==="announcements",staleTime:6e4,refetchOnWindowFocus:!1}),{data:E,isLoading:B}=ne({queryKey:["admin-user-segments"],queryFn:()=>$J(a),enabled:!!a,staleTime:3e5,refetchOnWindowFocus:!1}),{data:A,isLoading:L}=ne({queryKey:["admin-notification-templates"],queryFn:()=>OJ(a),enabled:!!a&&n==="templates",staleTime:6e4,refetchOnWindowFocus:!1}),N=oe({mutationFn:Y=>AJ(a,Y),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-announcements"]}),o(!1),x({subject:"",content:"",target_segments:[],delivery_channels:["in_app"],schedule_date:null,is_draft:!1})}}),R=oe({mutationFn:({template_id:Y,updates:se})=>TJ(a,Y,se),onSuccess:()=>{r.invalidateQueries({queryKey:["admin-notification-templates"]}),m(null)}}),O=oe({mutationFn:({message:Y,severity:se})=>EJ(a,Y,se),onSuccess:()=>{b(""),j("high"),c(!1)}}),T=Y=>{i(Y),s({communication_type:Y})},g=()=>{N.mutate(h)},D=()=>{u&&R.mutate({template_id:u.template_id,updates:{template_content:P,template_variables:C}})},S=()=>{O.mutate({message:p,severity:v})},$=Y=>{x(se=>({...se,target_segments:se.target_segments.includes(Y)?se.target_segments.filter(J=>J!==Y):[...se.target_segments,Y]}))},I=Y=>{x(se=>({...se,delivery_channels:se.delivery_channels.includes(Y)?se.delivery_channels.filter(J=>J!==Y):[...se.delivery_channels,Y]}))},K=(F==null?void 0:F.filter(Y=>k==="all"?!0:Y.status===k))||[],U=h.target_segments.reduce((Y,se)=>{var te;const J=(te=E==null?void 0:E.segments)==null?void 0:te.find(V=>V.segment_id===se);return Y+((J==null?void 0:J.user_count)||0)},0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Communication"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage announcements, templates, campaigns, and emergency broadcasts"})]}),n==="announcements"&&e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"New Announcement"]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>T("announcements"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="announcements"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-5 h-5"}),e.jsx("span",{children:"Announcements"})]})}),e.jsx("button",{onClick:()=>T("templates"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="templates"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Templates"})]})}),e.jsx("button",{onClick:()=>T("campaigns"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="campaigns"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zs,{className:"w-5 h-5"}),e.jsx("span",{children:"Campaigns"})]})}),e.jsx("button",{onClick:()=>T("segments"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="segments"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"w-5 h-5"}),e.jsx("span",{children:"User Segments"})]})}),e.jsx("button",{onClick:()=>T("emergency"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${n==="emergency"?"border-red-600 text-red-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(At,{className:"w-5 h-5"}),e.jsx("span",{children:"Emergency"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="announcements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-400"}),e.jsx("div",{className:"flex space-x-2",children:["all","active","scheduled","draft"].map(Y=>e.jsx("button",{onClick:()=>y(Y),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${k===Y?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Y.charAt(0).toUpperCase()+Y.slice(1)},Y))})]})})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Channels"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):K.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(Ht,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No announcements found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create your first announcement to get started"})]})}):K.map(Y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:Y.content})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[Y.status==="active"&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Active"]}),Y.status==="scheduled"&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),"Scheduled"]}),Y.status==="draft"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Draft"})]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[Y.target_segments.length," segment",Y.target_segments.length!==1?"s":""]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex space-x-1",children:Y.delivery_channels.map(se=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700",children:se},se))})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-gray-900",children:Y.views_count||0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsxs("span",{className:"text-gray-900",children:[Y.delivery_rate||0,"%"]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(Y.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(ib,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx(_t,{className:"w-4 h-4"})})]})})]},Y.announcement_id))})]})})})]}),n==="templates"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Templates"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:L?e.jsx("div",{className:"p-6 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):A==null?void 0:A.map(Y=>e.jsxs("button",{onClick:()=>{m(Y),w(Y.template_content),f(Y.template_variables)},className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${(u==null?void 0:u.template_id)===Y.template_id?"bg-blue-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:Y.template_name}),Y.template_type==="email"?e.jsx(jt,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ft,{className:"w-4 h-4 text-gray-400"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Used ",Y.usage_count," times"]})]},Y.template_id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Template"}),e.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:u.template_name,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{value:P,onChange:Y=>w(Y.target.value),rows:10,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Enter template content..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Variables"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((Y,se)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-md bg-blue-100 text-blue-800 text-sm font-medium",children:`{{${Y}}}`},se))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>m(null),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:R.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:R.isPending?"Saving...":"Save Template"})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Select a template to edit"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Choose a template from the list to view and edit its content"})]})})]}),n==="campaigns"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Campaign Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Delivery Rate"}),e.jsx(Re,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"98.5%"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"+2.3% from last month"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Open Rate"}),e.jsx(jt,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"42.8%"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"+5.1% from last month"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-lg p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Click Rate"}),e.jsx(ob,{className:"w-5 h-5 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"12.4%"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"+1.8% from last month"})]})]})]})}),n==="segments"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"User Segments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Available audience segments for targeted communications"})]}),e.jsx("div",{className:"p-6",children:B?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(q=E==null?void 0:E.segments)==null?void 0:q.map(Y=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:Y.name}),e.jsx(ct,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:Y.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Y.user_count.toLocaleString()}),e.jsx("span",{className:"text-xs text-gray-500",children:"users"})]})]},Y.segment_id))})})]}),n==="emergency"&&e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-100 rounded-xl border-2 border-red-300 p-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-red-600 rounded-full",children:e.jsx(At,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Emergency Broadcast"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Send critical platform-wide notifications to all users"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Severity Level"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["low","medium","high","critical"].map(Y=>e.jsx("button",{onClick:()=>j(Y),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${v===Y?Y==="critical"?"bg-red-600 text-white shadow-lg":Y==="high"?"bg-orange-600 text-white shadow-lg":Y==="medium"?"bg-yellow-600 text-white shadow-lg":"bg-blue-600 text-white shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:Y.charAt(0).toUpperCase()+Y.slice(1)},Y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Emergency Message"}),e.jsx("textarea",{value:p,onChange:Y=>b(Y.target.value),rows:6,placeholder:"Enter emergency message to broadcast to all users...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-300 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(At,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Warning"}),e.jsx("p",{className:"text-sm text-gray-700",children:"This will send an immediate notification via email, SMS, and in-app to all platform users. This action cannot be undone. Please ensure the message is accurate before sending."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{b(""),j("high")},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear"}),e.jsx("button",{onClick:()=>c(!0),disabled:!p.trim()||O.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg",children:O.isPending?"Sending...":"Send Emergency Broadcast"})]})]})]})})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Announcement"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Announcement Title"}),e.jsx("input",{type:"text",value:h.subject,onChange:Y=>x(se=>({...se,subject:Y.target.value})),placeholder:"Enter announcement title...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Content"}),e.jsx("textarea",{value:h.content,onChange:Y=>x(se=>({...se,content:Y.target.value})),rows:6,placeholder:"Enter announcement message...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Target Audience"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(z=E==null?void 0:E.segments)==null?void 0:z.map(Y=>e.jsxs("label",{className:"flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:h.target_segments.includes(Y.segment_id),onChange:()=>$(Y.segment_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Y.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Y.user_count.toLocaleString()," users"]})]})]},Y.segment_id))}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Total target audience: ",U.toLocaleString()," users"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Delivery Channels"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["in_app","email","sms"].map(Y=>e.jsxs("label",{className:"flex items-center p-3 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:h.delivery_channels.includes(Y),onChange:()=>I(Y),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:Y==="in_app"?"In-App":Y.toUpperCase()})]},Y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule Date (Optional)"}),e.jsx("input",{type:"datetime-local",value:h.schedule_date||"",onChange:Y=>x(se=>({...se,schedule_date:Y.target.value||null})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to send immediately"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{x(Y=>({...Y,is_draft:!0})),g()},disabled:N.isPending,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:"Save as Draft"}),e.jsx("button",{onClick:()=>{x(Y=>({...Y,is_draft:!1})),g()},disabled:!h.subject.trim()||!h.content.trim()||h.target_segments.length===0||N.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg",children:N.isPending?"Publishing...":"Publish Announcement"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(At,{className:"w-6 h-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Confirm Emergency Broadcast"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"You are about to send:"}),e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',p,'"']}),e.jsxs("p",{className:"text-xs text-red-700 mt-3",children:["Severity: ",e.jsx("span",{className:"font-bold uppercase",children:v})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:"This will immediately notify all users via email, SMS, and in-app notifications. This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:O.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 font-medium shadow-lg",children:O.isPending?"Sending...":"Confirm & Send Now"})]})]})})}),N.isSuccess&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center space-x-2 animate-fade-in",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Announcement created successfully!"})]}),R.isSuccess&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center space-x-2 animate-fade-in",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Template updated successfully!"})]}),O.isSuccess&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center space-x-2 animate-fade-in",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Emergency broadcast sent!"})]})]})},Yx="https://123create-construction-app-with-a.launchpulse.ai",MJ=async(t,s)=>{const r={user_type:"admin"};s&&(r.role_filter=s);const{data:a}=await G.get(`${Yx}/api/admin/users`,{params:r,headers:{Authorization:`Bearer ${t}`}}),n=a.users.map(l=>{var o,d;return{user_id:l.user_id,email:l.email,first_name:l.first_name,last_name:l.last_name,role:((o=l.admin)==null?void 0:o.role)||"support_admin",permissions:((d=l.admin)==null?void 0:d.permissions)||{},is_active:l.status==="active",last_login_date:l.last_login_date,created_at:l.created_at}}),i={};return n.forEach(l=>{i[l.role]=(i[l.role]||0)+1}),{admin_users:n,total_count:a.total||n.length,active_count:n.filter(l=>l.is_active).length,role_distribution:i}},RJ=async()=>[{role_name:"super_admin",display_name:"Super Administrator",permissions:["*"],is_custom:!1},{role_name:"support_admin",display_name:"Support Administrator",permissions:["users.view","users.edit","orders.view","disputes.manage","support.manage"],is_custom:!1},{role_name:"finance_admin",display_name:"Finance Administrator",permissions:["financials.view","financials.edit","payouts.manage","orders.view"],is_custom:!1},{role_name:"content_admin",display_name:"Content Administrator",permissions:["content.moderate","products.view","reviews.moderate","suppliers.view"],is_custom:!1}],DJ=async(t,s)=>[{log_id:"1",admin_id:"admin_001",admin_name:"John Admin",action_type:"user_update",action_description:"Updated user permissions",affected_entity_type:"user",affected_entity_id:"user_123",timestamp:new Date().toISOString(),ip_address:"192.168.1.1"}],LJ=async(t,s)=>{const r=Math.random().toString(36).slice(-12),a={email:s.email,password:r,user_type:"admin",first_name:s.first_name,last_name:s.last_name,status:s.is_active?"active":"inactive"},{data:n}=await G.post(`${Yx}/api/admin/users`,a,{headers:{Authorization:`Bearer ${t}`}});return n},tb=async(t,s,r)=>{const{data:a}=await G.patch(`${Yx}/api/admin/users/${s}`,r,{headers:{Authorization:`Bearer ${t}`}});return a},IJ=()=>{const t=Pe(),[s,r]=Fe(),a=re(q=>q.authentication_state.auth_token),n=re(q=>q.authentication_state.current_user),[i,l]=_.useState("team"),[o,d]=_.useState(!1),[c,u]=_.useState(!1),[m,h]=_.useState(!1),[x,p]=_.useState(""),[b,v]=_.useState(null),j=s.get("role_filter")||void 0,P=s.get("activity_date_range")||"last_7_days",[w,C]=_.useState({user_id:null,email:"",first_name:"",last_name:"",role:"support_admin",permissions:{},is_active:!0,requires_password_change:!0}),[f,k]=_.useState({}),{data:y,isLoading:F,error:M}=ne({queryKey:["admin-users",j],queryFn:()=>MJ(a,j),enabled:!!a&&i==="team",staleTime:6e4}),{data:E,isLoading:B}=ne({queryKey:["admin-roles"],queryFn:RJ,enabled:i==="roles",staleTime:3e5}),{data:A,isLoading:L}=ne({queryKey:["admin-activity-logs",P],queryFn:()=>DJ(a,{date_from:P==="last_7_days"?new Date(Date.now()-7*24*60*60*1e3).toISOString():void 0}),enabled:!!a&&i==="activity",staleTime:3e4}),N=oe({mutationFn:q=>LJ(a,q),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-users"]}),d(!1),I(),alert("Admin user created successfully. Temporary password sent to email.")},onError:q=>{var z,Y;alert(((Y=(z=q.response)==null?void 0:z.data)==null?void 0:Y.message)||"Failed to create admin user")}}),R=oe({mutationFn:({userId:q,updates:z})=>tb(a,q,z),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-users"]}),u(!1),I()},onError:q=>{var z,Y;alert(((Y=(z=q.response)==null?void 0:z.data)==null?void 0:Y.message)||"Failed to update permissions")}}),O=oe({mutationFn:q=>tb(a,q,{status:"inactive"}),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-users"]}),h(!1),v(null)},onError:q=>{var z,Y;alert(((Y=(z=q.response)==null?void 0:z.data)==null?void 0:Y.message)||"Failed to deactivate admin user")}}),T=()=>{const q={};if(w.email||(q.email="Email is required"),w.first_name||(q.first_name="First name is required"),w.last_name||(q.last_name="Last name is required"),w.role||(q.role="Role is required"),Object.keys(q).length>0){k(q);return}N.mutate(w)},g=q=>{C({user_id:q.user_id,email:q.email,first_name:q.first_name,last_name:q.last_name,role:q.role,permissions:q.permissions,is_active:q.is_active,requires_password_change:!1}),u(!0)},D=()=>{w.user_id&&R.mutate({userId:w.user_id,updates:{status:w.is_active?"active":"inactive"}})},S=q=>{if(q===(n==null?void 0:n.user_id)){alert("You cannot deactivate your own account");return}v(q),h(!0)},$=()=>{b&&O.mutate(b)},I=()=>{C({user_id:null,email:"",first_name:"",last_name:"",role:"support_admin",permissions:{},is_active:!0,requires_password_change:!0}),k({})},K=q=>{q?s.set("role_filter",q):s.delete("role_filter"),r(s)},U=_.useMemo(()=>y!=null&&y.admin_users?y.admin_users.filter(q=>{const z=x.toLowerCase();return q.email.toLowerCase().includes(z)||q.first_name.toLowerCase().includes(z)||q.last_name.toLowerCase().includes(z)}):[],[y,x]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Team Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage administrative users, roles, permissions, and monitor team activity"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>alert("Export feature would generate PDF report"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs("button",{onClick:()=>{I(),d(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[e.jsx(Pw,{className:"w-4 h-4 mr-2"}),"Add New Admin"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>l("team"),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${i==="team"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Xt,{className:"w-4 h-4 inline-block mr-2"}),"Team Members"]}),e.jsxs("button",{onClick:()=>l("roles"),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${i==="roles"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Mt,{className:"w-4 h-4 inline-block mr-2"}),"Roles & Permissions"]}),e.jsxs("button",{onClick:()=>l("activity"),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${i==="activity"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Rs,{className:"w-4 h-4 inline-block mr-2"}),"Activity Logs"]}),e.jsxs("button",{onClick:()=>l("security"),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${i==="security"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Vt,{className:"w-4 h-4 inline-block mr-2"}),"Security Settings"]})]})})}),i==="team"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Admins"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:(y==null?void 0:y.total_count)||0})]}),e.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:e.jsx(Xt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Admins"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:(y==null?void 0:y.active_count)||0})]}),e.jsx("div",{className:"bg-green-100 rounded-full p-3",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Roles"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:(E==null?void 0:E.length)||4})]}),e.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:e.jsx(Mt,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search admin users by name or email...",value:x,onChange:q=>p(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:j||"",onChange:q=>K(q.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"support_admin",children:"Support Admin"}),e.jsx("option",{value:"finance_admin",children:"Finance Admin"}),e.jsx("option",{value:"content_admin",children:"Content Admin"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:F?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin users..."})]}):M?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(de,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:"Failed to load admin users"})]}):U.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Xt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No admin users found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold text-sm",children:[q.first_name.charAt(0),q.last_name.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[q.first_name," ",q.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:q.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.role==="super_admin"?"bg-purple-100 text-purple-800":q.role==="support_admin"?"bg-blue-100 text-blue-800":q.role==="finance_admin"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:q.role.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.is_active?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.last_login_date?new Date(q.last_login_date).toLocaleDateString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>g(q),className:"text-blue-600 hover:text-blue-900 p-2 hover:bg-blue-50 rounded transition-colors",title:"Edit Permissions",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>alert(`View activity for ${q.first_name}`),className:"text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded transition-colors",title:"View Activity",children:e.jsx(xt,{className:"w-4 h-4"})}),q.user_id!==(n==null?void 0:n.user_id)&&e.jsx("button",{onClick:()=>S(q.user_id),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded transition-colors",title:"Deactivate User",children:e.jsx(_t,{className:"w-4 h-4"})})]})})]},q.user_id))})]})})})]}),i==="roles"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Role Definitions"}),B?e.jsx("div",{className:"py-12 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E==null?void 0:E.map(q=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.display_name}),e.jsx(Mt,{className:"w-5 h-5 text-blue-600"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.permissions.map(z=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:z},z))})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(y==null?void 0:y.role_distribution[q.role_name])||0," admin(s) with this role"]})]},q.role_name))})]})}),i==="activity"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Administrative Activity Logs"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),e.jsx("option",{value:"last_90_days",children:"Last 90 Days"}),e.jsx("option",{value:"all_time",children:"All Time"})]})]}),L?e.jsx("div",{className:"py-12 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):A&&A.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(He,{className:"w-4 h-4 mr-2 text-gray-400"}),new Date(q.timestamp).toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.admin_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:q.action_type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:q.action_description})]},q.log_id))})]})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(Rs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No activity logs found"})]})]})}),i==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security Policies"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Password Policy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Minimum Password Length"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Require minimum characters for passwords"})]}),e.jsx("input",{type:"number",min:"8",max:"32",defaultValue:"12",className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password Expiration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Days before password must be changed"})]}),e.jsx("input",{type:"number",min:"30",max:"365",defaultValue:"90",className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Special Characters"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enforce special character requirement"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Session Timeout"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Minutes of inactivity before auto-logout"})]}),e.jsx("input",{type:"number",min:"5",max:"120",defaultValue:"30",className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Concurrent Session Limit"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Maximum simultaneous logins per admin"})]}),e.jsx("input",{type:"number",min:"1",max:"10",defaultValue:"3",className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enforce 2FA for All Admins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for all administrative accounts"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enforce 2FA for Super Admins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Mandatory 2FA for super administrator role"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded opacity-50 cursor-not-allowed"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>alert("Security settings would be saved"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Save Security Settings"})})]})]})})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create New Admin User"}),e.jsx("button",{onClick:()=>{d(!1),I()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{id:"email",type:"email",value:w.email,onChange:q=>{C(z=>({...z,email:q.target.value})),k(z=>({...z,email:""}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.email?"border-red-300":"border-gray-300"}`,placeholder:"admin@buildeasy.com"}),f.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{id:"first_name",type:"text",value:w.first_name,onChange:q=>{C(z=>({...z,first_name:q.target.value})),k(z=>({...z,first_name:""}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.first_name?"border-red-300":"border-gray-300"}`}),f.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{id:"last_name",type:"text",value:w.last_name,onChange:q=>{C(z=>({...z,last_name:q.target.value})),k(z=>({...z,last_name:""}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.last_name?"border-red-300":"border-gray-300"}`}),f.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Role *"}),e.jsxs("select",{id:"role",value:w.role,onChange:q=>{C(z=>({...z,role:q.target.value})),k(z=>({...z,role:""}))},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${f.role?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"support_admin",children:"Support Administrator"}),e.jsx("option",{value:"finance_admin",children:"Finance Administrator"}),e.jsx("option",{value:"content_admin",children:"Content Administrator"}),e.jsx("option",{value:"super_admin",children:"Super Administrator"})]}),f.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.role}),w.role==="super_admin"&&e.jsx("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx(de,{className:"w-5 h-5 text-amber-500 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Super Administrator role grants full platform access. Use with caution."})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"is_active",type:"checkbox",checked:w.is_active,onChange:q=>C(z=>({...z,is_active:q.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Active (user can log in immediately)"})]}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"})," A temporary password will be generated and sent to the admin's email. They will be required to change it on first login."]})})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{d(!1),I()},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:N.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?"Creating...":"Create Admin User"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Admin Permissions"}),e.jsx("button",{onClick:()=>{u(!1),I()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"User:"})," ",w.first_name," ",w.last_name]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Role"}),e.jsxs("select",{value:w.role,onChange:q=>C(z=>({...z,role:q.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"support_admin",children:"Support Administrator"}),e.jsx("option",{value:"finance_admin",children:"Finance Administrator"}),e.jsx("option",{value:"content_admin",children:"Content Administrator"}),e.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"edit_is_active",type:"checkbox",checked:w.is_active,onChange:q=>C(z=>({...z,is_active:q.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_active",className:"text-sm font-medium text-gray-700",children:"Account is active"})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{u(!1),I()},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:R.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?"Saving...":"Save Changes"})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto mb-4",children:e.jsx(de,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Deactivate Admin User"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Are you sure you want to deactivate this admin user? They will lose access to the admin panel immediately."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{h(!1),v(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:$,disabled:O.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O.isPending?"Deactivating...":"Deactivate User"})]})]})})})]})},qJ=async t=>{const s=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/system/health",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{uptime_percentage:s.data.uptime_percentage||99.9,response_time_avg:s.data.average_response_time_ms||150,error_rate:s.data.error_rate_percentage||.01,active_connections:s.data.active_websocket_connections||0,database_status:s.data.database_status||"operational",api_status:s.data.api_status||"operational",last_updated:s.data.last_checked_timestamp||new Date().toISOString()}},BJ=async(t,s,r)=>{var i;const a=new URLSearchParams;s.log_level&&a.append("level",s.log_level),s.component&&a.append("component",s.component),s.time_range&&a.append("time_range",s.time_range),a.append("limit","50"),a.append("offset",String((r-1)*50));const n=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/logs/application?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{logs:((i=n.data.logs)==null?void 0:i.map(l=>({log_id:l.log_id,timestamp:l.timestamp,level:l.severity_level||l.level,component:l.component_name||l.component,message:l.log_message||l.message,stack_trace:l.stack_trace,user_id:l.user_id,request_id:l.request_id})))||[],total_count:n.data.total_count||0,current_page:Math.floor((n.data.offset||0)/50)+1}},UJ=async(t,s)=>{var a;const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/logs/api-performance?time_range=${s}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{endpoints:((a=r.data.endpoint_metrics)==null?void 0:a.map(n=>({endpoint:n.endpoint_path||n.endpoint,method:n.http_method||n.method,avg_response_time:n.average_response_time_ms||0,request_count:n.total_requests||0,error_count:n.error_count||0,success_rate:(n.total_requests-n.error_count)/n.total_requests*100||100})))||[],api_health_score:r.data.overall_api_health_score||100}},zJ=async(t,s)=>{var a;const r=await G.get(`https://123create-construction-app-with-a.launchpulse.ai/api/admin/logs/user-activity?time_range=${s}&limit=100&offset=0`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{activities:((a=r.data.activity_logs)==null?void 0:a.map(n=>({activity_id:n.activity_id,user_id:n.user_id,user_type:n.user_type,action_type:n.action_type,resource:n.affected_resource||n.resource,timestamp:n.timestamp,ip_address:n.ip_address,user_agent:n.user_agent})))||[],total_count:r.data.total_count||0}},WJ=async t=>{var r,a;const s=await G.get("https://123create-construction-app-with-a.launchpulse.ai/api/admin/logs/error-summary?period=24h",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return{total_errors_24h:s.data.total_errors_last_24h||0,critical_errors:s.data.critical_error_count||0,error_trend:((r=s.data.hourly_error_counts)==null?void 0:r.map(n=>({hour:n.hour_timestamp,error_count:n.error_count})))||[],top_errors:((a=s.data.top_error_types)==null?void 0:a.map(n=>({error_type:n.error_type,count:n.occurrence_count,latest_occurrence:n.latest_timestamp})))||[]}},VJ=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/admin/logs/export",{log_type:s.component,time_range:s.time_range,format:"csv"},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},responseType:"blob"})).data,KJ=()=>{const t=re(R=>R.authentication_state.auth_token),[s,r]=Fe(),[a,n]=_.useState("logs"),[i,l]=_.useState({log_level:s.get("log_level")||null,component:s.get("component")||null,time_range:s.get("time_range")||"last_24_hours",date_from:null,date_to:null}),[o,d]=_.useState(Number(s.get("page"))||1),[c,u]=_.useState(""),{data:m,isLoading:h}=ne({queryKey:["system-health"],queryFn:()=>qJ(t),enabled:!!t,refetchInterval:3e4,staleTime:25e3}),{data:x,isLoading:p,refetch:b}=ne({queryKey:["application-logs",i,o],queryFn:()=>BJ(t,i,o),enabled:!!t&&a==="logs",staleTime:6e4}),{data:v,isLoading:j,refetch:P}=ne({queryKey:["api-performance",i.time_range],queryFn:()=>UJ(t,i.time_range),enabled:!!t&&a==="api",staleTime:6e4}),{data:w,isLoading:C}=ne({queryKey:["user-activity",i.time_range],queryFn:()=>zJ(t,i.time_range),enabled:!!t&&a==="activity",staleTime:6e4}),{data:f,isLoading:k,refetch:y}=ne({queryKey:["error-summary"],queryFn:()=>WJ(t),enabled:!!t&&a==="errors",refetchInterval:6e4,staleTime:55e3}),F=oe({mutationFn:()=>VJ(t,i),onSuccess:R=>{const O=window.URL.createObjectURL(R),T=document.createElement("a");T.href=O,T.download=`logs-export-${new Date().toISOString()}.csv`,T.click(),window.URL.revokeObjectURL(O)}}),M=R=>{const O={...i,...R};l(O);const T=new URLSearchParams;O.log_level&&T.set("log_level",O.log_level),O.component&&T.set("component",O.component),O.time_range&&T.set("time_range",O.time_range),T.set("page","1"),r(T),d(1)},E=R=>{d(R);const O=new URLSearchParams(s);O.set("page",String(R)),r(O)},B=()=>{F.mutate()},A=R=>new Date(R).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),L=R=>{switch(R.toLowerCase()){case"error":case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},N=R=>R==="operational"?"text-green-600":"text-red-600";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Monitoring & Logs"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monitor system health, analyze logs, and track performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{b(),P(),y()},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:B,disabled:F.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),F.isPending?"Exporting...":"Export Logs"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(R=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},R))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Uptime"}),e.jsx(cb,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[m==null?void 0:m.uptime_percentage.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Last 30 days"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response Time"}),e.jsx(He,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[m==null?void 0:m.response_time_avg,"ms"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"API average"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Error Rate"}),e.jsx(de,{className:`h-5 w-5 ${((m==null?void 0:m.error_rate)||0)>1?"text-red-600":"text-green-600"}`})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[m==null?void 0:m.error_rate.toFixed(3),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Last 24 hours"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Connections"}),e.jsx(ct,{className:"h-5 w-5 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m==null?void 0:m.active_connections.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"WebSocket clients"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Al,{className:`h-6 w-6 mr-3 ${N((m==null?void 0:m.database_status)||"operational")}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Database Status"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${N((m==null?void 0:m.database_status)||"operational")}`,children:(m==null?void 0:m.database_status)||"operational"})]})]}),(m==null?void 0:m.database_status)==="operational"?e.jsx(he,{className:"h-8 w-8 text-green-500"}):e.jsx(Ve,{className:"h-8 w-8 text-red-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Aw,{className:`h-6 w-6 mr-3 ${N((m==null?void 0:m.api_status)||"operational")}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"API Status"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${N((m==null?void 0:m.api_status)||"operational")}`,children:(m==null?void 0:m.api_status)||"operational"})]})]}),(m==null?void 0:m.api_status)==="operational"?e.jsx(he,{className:"h-8 w-8 text-green-500"}):e.jsx(Ve,{className:"h-8 w-8 text-red-500"})]})})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>n("logs"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${a==="logs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Rs,{className:"h-5 w-5 mr-2"}),"Application Logs"]})}),e.jsx("button",{onClick:()=>n("api"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${a==="api"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"API Performance"]})}),e.jsx("button",{onClick:()=>n("activity"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${a==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"User Activity"]})}),e.jsx("button",{onClick:()=>n("errors"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${a==="errors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),"Error Summary",((f==null?void 0:f.critical_errors)||0)>0&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:f==null?void 0:f.critical_errors})]})})]})}),a==="logs"&&e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Log Level"}),e.jsxs("select",{value:i.log_level||"all",onChange:R=>M({log_level:R.target.value==="all"?null:R.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Component"}),e.jsxs("select",{value:i.component||"all",onChange:R=>M({component:R.target.value==="all"?null:R.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Components"}),e.jsx("option",{value:"api",children:"API"}),e.jsx("option",{value:"database",children:"Database"}),e.jsx("option",{value:"auth",children:"Authentication"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"email",children:"Email Service"}),e.jsx("option",{value:"websocket",children:"WebSocket"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Time Range"}),e.jsxs("select",{value:i.time_range,onChange:R=>M({time_range:R.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"last_hour",children:"Last Hour"}),e.jsx("option",{value:"last_24_hours",children:"Last 24 Hours"}),e.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),e.jsx("option",{value:"last_30_days",children:"Last 30 Days"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search Logs"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:c,onChange:R=>u(R.target.value),placeholder:"Search in logs...",className:"block w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[a==="logs"&&e.jsx(e.Fragment,{children:p?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(R=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},R))}):x&&x.logs.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:x.logs.filter(R=>!c||R.message.toLowerCase().includes(c.toLowerCase())||R.component.toLowerCase().includes(c.toLowerCase())).map(R=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${L(R.level)}`,children:R.level.toUpperCase()}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:R.component}),e.jsx("span",{className:"text-xs text-gray-500",children:A(R.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-900 font-medium line-clamp-2",children:R.message}),R.stack_trace&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:text-blue-700",children:"View Stack Trace"}),e.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-3 rounded border border-gray-200 overflow-x-auto",children:R.stack_trace})]}),R.user_id&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["User ID: ",R.user_id]}),R.request_id&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Request ID: ",R.request_id]})]})})},R.log_id))}),x.total_count>50&&e.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(o-1)*50+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o*50,x.total_count)})," of"," ",e.jsx("span",{className:"font-medium",children:x.total_count})," logs"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(o-1),disabled:o===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("button",{onClick:()=>E(o+1),disabled:o*50>=x.total_count,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rs,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No logs found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or time range"})]})}),a==="api"&&e.jsx(e.Fragment,{children:j?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(R=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},R))}):v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Overall API Health Score"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-900",children:[v.api_health_score.toFixed(1),"%"]})]}),e.jsx("div",{className:`text-6xl ${v.api_health_score>=95?"text-green-500":v.api_health_score>=85?"text-yellow-500":"text-red-500"}`,children:v.api_health_score>=95?"":v.api_health_score>=85?"":""})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endpoint"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Response"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requests"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.endpoints.map((R,O)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.endpoint}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${R.method==="GET"?"bg-blue-100 text-blue-800":R.method==="POST"?"bg-green-100 text-green-800":R.method==="PUT"?"bg-yellow-100 text-yellow-800":R.method==="DELETE"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:R.method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:`font-medium ${R.avg_response_time<200?"text-green-600":R.avg_response_time<500?"text-yellow-600":"text-red-600"}`,children:[R.avg_response_time,"ms"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.request_count.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("span",{className:R.error_count>0?"text-red-600 font-medium":"text-gray-500",children:R.error_count})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative pt-1",children:e.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-gray-200",children:e.jsx("div",{style:{width:`${R.success_rate}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ${R.success_rate>=99?"bg-green-500":R.success_rate>=95?"bg-yellow-500":"bg-red-500"}`})})})}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-gray-900",children:[R.success_rate.toFixed(1),"%"]})]})})]},O))})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No metrics available"})]})}),a==="activity"&&e.jsx(e.Fragment,{children:C?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(R=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},R))}):w&&w.activities.length>0?e.jsx("div",{className:"space-y-3",children:w.activities.map(R=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:R.user_type}),e.jsx("span",{className:"text-xs text-gray-500",children:A(R.timestamp)})]}),e.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[R.action_type," - ",R.resource]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-x-4",children:[e.jsxs("span",{children:["User: ",R.user_id]}),R.ip_address&&e.jsxs("span",{children:["IP: ",R.ip_address]})]})]})})},R.activity_id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No activity logs"})]})}),a==="errors"&&e.jsx(e.Fragment,{children:k?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[1,2].map(R=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},R))})}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Errors (24h)"}),e.jsx(de,{className:"h-5 w-5 text-red-600"})]}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:f.total_errors_24h.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical Errors"}),e.jsx(Ve,{className:"h-5 w-5 text-red-600"})]}),e.jsx("p",{className:"text-4xl font-bold text-red-600",children:f.critical_errors})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Error Types"}),e.jsx("div",{className:"space-y-3",children:f.top_errors.map((R,O)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.error_type}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last occurred: ",A(R.latest_occurrence)]})]}),e.jsx("div",{className:"ml-4 flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:R.count}),e.jsx("p",{className:"text-xs text-gray-500",children:"occurrences"})]})})]})},O))})]}),f.error_trend.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Error Trend (24h)"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-end justify-between space-x-2 h-48",children:f.error_trend.map((R,O)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end",children:[e.jsx("div",{className:"w-full bg-red-500 rounded-t transition-all hover:bg-red-600",style:{height:`${R.error_count/Math.max(...f.error_trend.map(T=>T.error_count))*100}%`,minHeight:R.error_count>0?"4px":"0"},title:`${R.error_count} errors`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left whitespace-nowrap",children:[new Date(R.hour).getHours(),":00"]})]},O))})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No error data available"})]})})]})]})})]})})},Tr="https://123create-construction-app-with-a.launchpulse.ai/api",HJ=async t=>{const s=await G.get(`${Tr}/admin/maintenance/status`,{headers:{Authorization:`Bearer ${t}`}});return{is_maintenance_active:s.data.maintenance_mode_active,maintenance_message:s.data.maintenance_message,scheduled_start:s.data.scheduled_start_time,scheduled_end:s.data.scheduled_end_time,affected_services:s.data.affected_services||[],last_activated_by:s.data.last_activated_by,last_activated_at:s.data.last_activated_timestamp}},YJ=async(t,s)=>{const r=await G.put(`${Tr}/admin/maintenance/toggle`,s,{headers:{Authorization:`Bearer ${t}`}});return{is_maintenance_active:r.data.maintenance_mode_active,maintenance_message:r.data.maintenance_message,scheduled_start:null,scheduled_end:null,affected_services:r.data.affected_services||[],last_activated_by:r.data.activated_by,last_activated_at:r.data.activated_at}},GJ=async t=>(await G.get(`${Tr}/admin/features/flags`,{headers:{Authorization:`Bearer ${t}`}})).data.feature_flags.map(r=>({flag_id:r.flag_id,flag_name:r.flag_name,description:r.description,is_enabled:r.is_enabled,rollout_percentage:r.rollout_percentage,target_user_types:r.target_user_types||[],updated_by:r.updated_by,updated_at:r.updated_at})),QJ=async(t,s,r)=>{await G.put(`${Tr}/admin/features/flags/${s}`,r,{headers:{Authorization:`Bearer ${t}`}})},XJ=async t=>{const s=await G.get(`${Tr}/admin/platform/version`,{headers:{Authorization:`Bearer ${t}`}});return{current_version:s.data.version_number,deployment_date:s.data.deployment_timestamp,build_number:s.data.build_id,commit_hash:s.data.git_commit_hash,environment:s.data.environment_name,rollback_available:s.data.rollback_available,previous_version:s.data.previous_version}},JJ=async t=>(await G.get(`${Tr}/admin/maintenance/scheduled`,{headers:{Authorization:`Bearer ${t}`}})).data.scheduled_windows.map(r=>({maintenance_id:r.maintenance_id,title:r.title,description:r.description,scheduled_start:r.scheduled_start_time,scheduled_end:r.scheduled_end_time,maintenance_type:r.maintenance_type,affected_services:r.affected_services||[],status:r.status,created_by:r.created_by})),ZJ=async(t,s)=>{await G.post(`${Tr}/admin/maintenance/schedule`,s,{headers:{Authorization:`Bearer ${t}`}})},eZ=async(t,s)=>{await G.post(`${Tr}/admin/maintenance/emergency`,s,{headers:{Authorization:`Bearer ${t}`}})},tZ=()=>{const t=re(pe=>pe.authentication_state.auth_token),s=Pe(),[r,a]=_.useState("maintenance"),[n,i]=_.useState(!1),[l,o]=_.useState(!1),[d,c]=_.useState(!1),[u,m]=_.useState(""),[h,x]=_.useState([]),[p,b]=_.useState(""),[v,j]=_.useState(""),[P,w]=_.useState(""),[C,f]=_.useState(""),[k,y]=_.useState([]),[F,M]=_.useState(!0),[E,B]=_.useState(30),[A,L]=_.useState(""),[N,R]=_.useState(60),[O,T]=_.useState(""),[g,D]=_.useState(null),[S,$]=_.useState(0),[I,K]=_.useState([]),U=["api","web_app","mobile_app","search","payments","notifications","chat","analytics"],q=["customer","supplier","admin"],{data:z,isLoading:Y,error:se}=ne({queryKey:["maintenance-status"],queryFn:()=>HJ(t),enabled:!!t,staleTime:3e4,refetchInterval:6e4}),{data:J,isLoading:te}=ne({queryKey:["feature-flags"],queryFn:()=>GJ(t),enabled:!!t&&r==="features",staleTime:3e4}),{data:V,isLoading:W}=ne({queryKey:["version-info"],queryFn:()=>XJ(t),enabled:!!t&&r==="version",staleTime:3e5}),{data:X,isLoading:H}=ne({queryKey:["scheduled-maintenance"],queryFn:()=>JJ(t),enabled:!!t&&r==="scheduled",staleTime:6e4}),ee=oe({mutationFn:pe=>YJ(t,pe),onSuccess:()=>{s.invalidateQueries({queryKey:["maintenance-status"]}),c(!1),m(""),x([])}}),ue=oe({mutationFn:pe=>eZ(t,pe),onSuccess:()=>{s.invalidateQueries({queryKey:["maintenance-status"]}),i(!1),L(""),R(60),T("")}}),be=oe({mutationFn:pe=>ZJ(t,pe),onSuccess:()=>{s.invalidateQueries({queryKey:["scheduled-maintenance"]}),o(!1),b(""),j(""),w(""),f(""),y([]),M(!0),B(30)}}),ke=oe({mutationFn:({flagId:pe,payload:rt})=>QJ(t,pe,rt),onSuccess:()=>{s.invalidateQueries({queryKey:["feature-flags"]}),D(null)}}),De=()=>{z!=null&&z.is_maintenance_active,c(!0)},ht=()=>{ee.mutate({maintenance_active:!(z!=null&&z.is_maintenance_active),maintenance_message:u||"Platform is currently under maintenance. We will be back soon.",affected_services:h.length>0?h:U})},me=()=>{!A||!O||ue.mutate({reason:A,estimated_duration_minutes:N,maintenance_message:O})},We=()=>{!p||!P||!C||be.mutate({title:p,description:v,scheduled_start:P,scheduled_end:C,affected_services:k.length>0?k:U,notify_users:F,warning_duration_minutes:E})},Fs=pe=>{ke.mutate({flagId:pe.flag_id,payload:{is_enabled:!pe.is_enabled,rollout_percentage:pe.rollout_percentage,target_user_types:pe.target_user_types}})},ds=pe=>{var rt;ke.mutate({flagId:pe,payload:{is_enabled:((rt=J==null?void 0:J.find(ma=>ma.flag_id===pe))==null?void 0:rt.is_enabled)||!1,rollout_percentage:S,target_user_types:I}})},Er=(pe,rt,ma)=>{rt.includes(pe)?ma(rt.filter(zc=>zc!==pe)):ma([...rt,pe])},Uc=pe=>{I.includes(pe)?K(I.filter(rt=>rt!==pe)):K([...I,pe])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Maintenance"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Control system maintenance, feature flags, and platform updates"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:z!=null&&z.is_maintenance_active?e.jsxs("div",{className:"flex items-center space-x-2 bg-red-100 text-red-800 px-4 py-2 rounded-lg",children:[e.jsx(At,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Maintenance Mode Active"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg",children:[e.jsx(Mt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"System Operational"})]})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>a("maintenance"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="maintenance"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vc,{className:"h-5 w-5"}),e.jsx("span",{children:"Maintenance Control"})]})}),e.jsx("button",{onClick:()=>a("features"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="features"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-5 w-5"}),e.jsx("span",{children:"Feature Flags"})]})}),e.jsx("button",{onClick:()=>a("version"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="version"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kc,{className:"h-5 w-5"}),e.jsx("span",{children:"Version Info"})]})}),e.jsx("button",{onClick:()=>a("scheduled"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="scheduled"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mt,{className:"h-5 w-5"}),e.jsx("span",{children:"Scheduled Maintenance"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r==="maintenance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Maintenance Status"})}),e.jsx("div",{className:"p-6",children:Y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):se?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700",children:"Failed to load maintenance status"})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3",children:z!=null&&z.is_maintenance_active?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Mode: ACTIVE"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Mode: INACTIVE"})]})}),(z==null?void 0:z.maintenance_message)&&e.jsxs("p",{className:"mt-2 text-gray-600",children:[e.jsx("strong",{children:"Message:"})," ",z.maintenance_message]}),(z==null?void 0:z.affected_services)&&z.affected_services.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Affected Services:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.affected_services.map(pe=>e.jsx("span",{className:"px-3 py-1 bg-amber-100 text-amber-800 text-xs font-medium rounded-full",children:pe},pe))})]}),(z==null?void 0:z.last_activated_at)&&e.jsxs("p",{className:"mt-3 text-sm text-gray-500",children:["Last updated: ",new Date(z.last_activated_at).toLocaleString(),z.last_activated_by&&` by ${z.last_activated_by}`]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:De,disabled:ee.isPending,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg flex items-center space-x-2 ${z!=null&&z.is_maintenance_active?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(Vc,{className:"h-5 w-5"}),e.jsxs("span",{children:[z!=null&&z.is_maintenance_active?"Deactivate":"Activate"," Maintenance"]})]}),e.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg flex items-center space-x-2",children:[e.jsx(ya,{className:"h-5 w-5"}),e.jsx("span",{children:"Emergency Mode"})]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(mt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule Maintenance"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Plan maintenance windows with user notifications"}),e.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Schedule Window"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Vt,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Feature Flags"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Control feature rollout and availability"}),e.jsx("button",{onClick:()=>a("features"),className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:"Manage Flags"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Kc,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Version Info"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"View deployment details and rollback options"}),e.jsx("button",{onClick:()=>a("version"),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"View Version"})]})]})]}),r==="features"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Feature Flag Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Control feature availability and gradual rollout across user types"})]}),e.jsx("div",{className:"p-6",children:te?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-purple-600"})}):!J||J.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No feature flags configured"})]}):e.jsx("div",{className:"space-y-4",children:J.map(pe=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:pe.flag_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe.is_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:pe.is_enabled?"Enabled":"Disabled"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:pe.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Rollout:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[pe.rollout_percentage,"%"]})]}),pe.target_user_types.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"Target:"}),e.jsx("div",{className:"flex space-x-1",children:pe.target_user_types.map(rt=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:rt},rt))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:new Date(pe.updated_at).toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsx("button",{onClick:()=>Fs(pe),disabled:ke.isPending,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${pe.is_enabled?"bg-red-100 hover:bg-red-200 text-red-700":"bg-green-100 hover:bg-green-200 text-green-700"} disabled:opacity-50`,children:pe.is_enabled?"Disable":"Enable"}),e.jsx("button",{onClick:()=>{D(pe.flag_id),$(pe.rollout_percentage),K(pe.target_user_types)},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Configure"})]})]}),g===pe.flag_id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rollout Percentage: ",S,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:S,onChange:rt=>$(Number(rt.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target User Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(rt=>e.jsx("button",{type:"button",onClick:()=>Uc(rt),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${I.includes(rt)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:rt},rt))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>ds(pe.flag_id),disabled:ke.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Save Configuration"}),e.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})]},pe.flag_id))})})]})}),r==="version"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-50 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Version Information"})}),e.jsx("div",{className:"p-6",children:W?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-green-600"})}):V?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Version"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.current_version})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Environment"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${V.environment==="production"?"bg-green-100 text-green-800":V.environment==="staging"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:V.environment})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Build Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:V.build_number})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Deployment Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(V.deployment_date).toLocaleString()})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Commit Hash"}),e.jsx("code",{className:"text-sm font-mono text-gray-900 bg-gray-50 px-2 py-1 rounded",children:V.commit_hash})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Rollback Available"}),e.jsx("div",{className:"flex items-center space-x-2",children:V.rollback_available?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-green-600 font-semibold",children:"Yes"}),V.previous_version&&e.jsxs("span",{className:"text-gray-600 text-sm",children:["(to ",V.previous_version,")"]})]}):e.jsx("span",{className:"text-gray-600 font-semibold",children:"No"})})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Kc,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No version information available"})]})})]})}),r==="scheduled"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scheduled Maintenance Windows"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Plan and manage future maintenance periods"})]}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"+ Schedule New"})]}),e.jsx("div",{className:"p-6",children:H?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}):!X||X.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled maintenance windows"})]}):e.jsx("div",{className:"space-y-4",children:X.map(pe=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-1",children:pe.title}),e.jsx("p",{className:"text-sm text-gray-600",children:pe.description})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${pe.status==="scheduled"?"bg-blue-100 text-blue-800":pe.status==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:pe.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(pe.scheduled_start).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(pe.scheduled_end).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:pe.maintenance_type})]})]}),pe.affected_services.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Affected Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pe.affected_services.map(rt=>e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 text-xs font-medium rounded",children:rt},rt))})]})]},pe.maintenance_id))})})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${z!=null&&z.is_maintenance_active?"bg-green-100":"bg-red-100"}`,children:e.jsx(Vc,{className:`h-6 w-6 ${z!=null&&z.is_maintenance_active?"text-green-600":"text-red-600"}`})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[z!=null&&z.is_maintenance_active?"Deactivate":"Activate"," Maintenance Mode"]})]}),!(z!=null&&z.is_maintenance_active)&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Message"}),e.jsx("textarea",{value:u,onChange:pe=>m(pe.target.value),placeholder:"Platform is currently under maintenance...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affected Services"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(pe=>e.jsx("button",{type:"button",onClick:()=>Er(pe,h,x),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h.includes(pe)?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:pe},pe))}),h.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All services will be affected"})]})]}),e.jsx("div",{className:`p-4 rounded-lg mb-6 ${z!=null&&z.is_maintenance_active?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`text-sm ${z!=null&&z.is_maintenance_active?"text-green-800":"text-red-800"}`,children:z!=null&&z.is_maintenance_active?"This will restore platform access to all users immediately.":"This will prevent users from accessing the platform. Use only when necessary."})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:ht,disabled:ee.isPending,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg disabled:opacity-50 ${z!=null&&z.is_maintenance_active?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:ee.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Confirm ${z!=null&&z.is_maintenance_active?"Deactivation":"Activation"}`}),e.jsx("button",{onClick:()=>{c(!1),m(""),x([])},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(ya,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Emergency Maintenance"})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"WARNING:"})," This will immediately activate maintenance mode with minimal notice to users. Use only for critical system issues."]})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Reason *"}),e.jsx("input",{type:"text",value:A,onChange:pe=>L(pe.target.value),placeholder:"Critical database issue requiring immediate attention",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes)"}),e.jsx("input",{type:"number",value:N,onChange:pe=>R(Number(pe.target.value)),min:"5",max:"480",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Message *"}),e.jsx("textarea",{value:O,onChange:pe=>T(pe.target.value),placeholder:"We are performing emergency maintenance. Service will be restored shortly.",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:me,disabled:ue.isPending||!A||!O,className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:ue.isPending?"Activating...":"Activate Emergency Mode"}),e.jsx("button",{onClick:()=>{i(!1),L(""),R(60),T("")},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 my-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(mt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Schedule Maintenance Window"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Title *"}),e.jsx("input",{type:"text",value:p,onChange:pe=>b(pe.target.value),placeholder:"Scheduled System Upgrade",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:v,onChange:pe=>j(pe.target.value),placeholder:"Database migration and performance improvements",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx("input",{type:"datetime-local",value:P,onChange:pe=>w(pe.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),e.jsx("input",{type:"datetime-local",value:C,onChange:pe=>f(pe.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affected Services"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(pe=>e.jsx("button",{type:"button",onClick:()=>Er(pe,k,y),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${k.includes(pe)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:pe},pe))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"notify-users",checked:F,onChange:pe=>M(pe.target.checked),className:"h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"notify-users",className:"text-sm font-medium text-gray-700",children:"Notify All Users"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warning Duration (minutes)"}),e.jsx("input",{type:"number",value:E,onChange:pe=>B(Number(pe.target.value)),min:"5",max:"1440",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:z!=null&&z.is_maintenance_active?ht:We,disabled:(z!=null&&z.is_maintenance_active?ee.isPending:be.isPending)||!(z!=null&&z.is_maintenance_active)&&(!p||!P||!C),className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:(z!=null&&z.is_maintenance_active?ee.isPending:be.isPending)?"Processing...":z!=null&&z.is_maintenance_active?"Confirm Deactivation":"Schedule Maintenance"}),e.jsx("button",{onClick:()=>{c(!1),o(!1),m(""),x([]),b(""),j(""),w(""),f(""),y([])},className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})})]})})},ua="https://123create-construction-app-with-a.launchpulse.ai",sZ=async t=>{const s={};return t&&(s.Authorization=`Bearer ${t}`),(await G.get(`${ua}/help/categories`,{headers:s})).data.categories.map(a=>({category_id:a.category_id,category_name:a.category_name,category_slug:a.category_slug,description:a.description,icon_url:a.icon_url,article_count:a.article_count,subcategories:a.subcategories?a.subcategories.map(n=>({category_id:n.category_id,category_name:n.category_name,article_count:n.article_count})):[]}))},rZ=async(t,s)=>{const r={};s&&(r.Authorization=`Bearer ${s}`);const a=await G.get(`${ua}/help/articles/search`,{params:t,headers:r});return{articles:a.data.articles.map(n=>({article_id:n.article_id,title:n.title,content_preview:n.content.substring(0,200)+"...",category_name:n.category_name,author:n.author_name,last_updated:n.updated_at,view_count:n.view_count,helpful_votes:n.helpful_votes,reading_time_minutes:Math.ceil(n.content.length/200)})),total_count:a.data.total_count,search_query:a.data.query_used}},aZ=async(t,s)=>{const r={};s&&(r.Authorization=`Bearer ${s}`);const a=await G.get(`${ua}/help/articles/featured`,{params:{user_type:t},headers:r});return{popular_articles:a.data.popular_articles.map(n=>({article_id:n.article_id,title:n.title,category_name:n.category_name,view_count:n.view_count,helpful_votes:n.helpful_votes})),getting_started_articles:a.data.getting_started.map(n=>({article_id:n.article_id,title:n.title,description:n.description}))}},nZ=async(t,s)=>{const r={};s&&(r.Authorization=`Bearer ${s}`);const a=await G.get(`${ua}/help/articles/${t}`,{headers:r});return{article_id:a.data.article_id,title:a.data.title,content:a.data.content,category_name:a.data.category_name,author:a.data.author_name,last_updated:a.data.updated_at,reading_time_minutes:Math.ceil(a.data.content.length/200),helpful_votes:a.data.helpful_votes,was_this_helpful_voted:a.data.user_vote,related_articles:a.data.related_articles.map(n=>({article_id:n.article_id,title:n.title,category_name:n.category_name}))}},iZ=async(t,s)=>{if(!t||t.length<2)return[];const r={};return s&&(r.Authorization=`Bearer ${s}`),(await G.get(`${ua}/help/articles/suggestions`,{params:{q:t,limit:5},headers:r})).data.suggestions.map(n=>({article_id:n.article_id,title:n.title,category_name:n.category_name}))},lZ=async(t,s,r)=>{const a=await G.post(`${ua}/help/articles/${t}/helpful`,{was_helpful:s},{headers:{Authorization:`Bearer ${r}`}});return{helpful_votes:a.data.new_helpful_vote_count,was_this_helpful_voted:a.data.user_vote}},oZ=async(t,s)=>{const r={};s&&(r.Authorization=`Bearer ${s}`),await G.post(`${ua}/help/articles/${t}/view`,{},{headers:r})},cZ=(t,s)=>{const[r,a]=_.useState(t);return _.useEffect(()=>{const n=setTimeout(()=>{a(t)},s);return()=>{clearTimeout(n)}},[t,s]),r};function dZ(){const t=re(q=>q.authentication_state.current_user),s=re(q=>q.authentication_state.auth_token),r=re(q=>q.authentication_state.authentication_status.is_authenticated),[a,n]=Fe(),[i,l]=_.useState(""),[o,d]=_.useState(null),[c,u]=_.useState(null),[m,h]=_.useState(!1),[x,p]=_.useState(!1),b=cZ(i,300);_.useEffect(()=>{const q=a.get("search_query"),z=a.get("category"),Y=a.get("article_id");q&&l(q),z&&d(z),Y&&u(Y)},[a]);const{data:v=[],isLoading:j,error:P}=ne({queryKey:["help-categories"],queryFn:()=>sZ(s),staleTime:10*60*1e3,retry:2}),{data:w,isLoading:C}=ne({queryKey:["help-featured-articles",(t==null?void 0:t.user_type)||"guest"],queryFn:()=>aZ((t==null?void 0:t.user_type)||"guest",s),staleTime:5*60*1e3,retry:2,enabled:!c&&!i}),{data:f,isLoading:k,error:y}=ne({queryKey:["help-articles-search",{q:i,category:o,user_type:t==null?void 0:t.user_type}],queryFn:()=>rZ({q:i||void 0,category_id:o||void 0,user_type:(t==null?void 0:t.user_type)||"guest",limit:20,offset:0},s),enabled:!!i||!!o,staleTime:2*60*1e3,retry:1}),{data:F,isLoading:M,error:E}=ne({queryKey:["help-article",c],queryFn:()=>nZ(c,s),enabled:!!c,staleTime:5*60*1e3,retry:2});_.useEffect(()=>{c&&F&&oZ(c,s).catch(console.error)},[c,F,s]);const{data:B=[],isLoading:A}=ne({queryKey:["help-suggestions",b],queryFn:()=>iZ(b,s),enabled:b.length>=2&&m&&!c,staleTime:30*1e3,retry:1}),L=oe({mutationFn:({articleId:q,wasHelpful:z})=>{if(!s)throw new Error("Authentication required to vote");return lZ(q,z,s)},onSuccess:()=>{}}),N=q=>{if(q.preventDefault(),!i.trim())return;const z=new URLSearchParams;z.set("search_query",i),o&&z.set("category",o),n(z),u(null),h(!1),p(!1)},R=q=>{d(q),u(null),l(""),p(!1);const z=new URLSearchParams;z.set("category",q),n(z)},O=q=>{u(q),l(""),p(!1);const z=new URLSearchParams;z.set("article_id",q),n(z)},T=q=>{O(q)},g=()=>{l(""),d(null),u(null),n({})},D=q=>{if(!r){alert("Please sign in to vote on articles");return}c&&L.mutate({articleId:c,wasHelpful:q})},S=()=>{l(""),h(!1),n({})},$=!c&&!i&&!o,I=!c&&(!!i||!!o),K=!!c,U=_.useMemo(()=>v.find(q=>q.category_id===o),[v,o]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Help Center"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Find answers and get support"})]}),e.jsxs("form",{onSubmit:N,className:"relative max-w-2xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:q=>l(q.target.value),onFocus:()=>h(!0),onBlur:()=>setTimeout(()=>h(!1),200),placeholder:"Search for help articles...",className:"w-full pl-12 pr-12 py-4 text-lg border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),i&&e.jsx("button",{type:"button",onClick:S,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"h-5 w-5"})})]}),m&&B.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 max-h-80 overflow-y-auto",children:B.map(q=>e.jsxs("button",{type:"button",onClick:()=>T(q.article_id),className:"w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:q.title}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:q.category_name})]},q.article_id))}),A&&m&&b.length>=2&&e.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Searching..."})]})})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("aside",{className:`lg:w-80 ${K?"hidden lg:block":""}`,children:[e.jsxs("button",{onClick:()=>p(!x),className:"lg:hidden w-full mb-4 px-4 py-3 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Categories"}),e.jsx(Fo,{className:"h-5 w-5 text-gray-600"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden ${x?"block":"hidden lg:block"}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Browse by Category"})}),e.jsx("nav",{className:"p-4 space-y-2 max-h-[600px] overflow-y-auto",children:j?e.jsx(e.Fragment,{children:[1,2,3,4,5].map(q=>e.jsx("div",{className:"h-12 bg-gray-100 rounded-lg animate-pulse"},q))}):P?e.jsx("div",{className:"text-center py-8 text-red-600",children:e.jsx("p",{className:"text-sm",children:"Failed to load categories"})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:`w-full text-left px-4 py-3 rounded-lg transition-all ${!o&&!c&&!i?"bg-blue-100 text-blue-900 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{children:"All Articles"})})}),v.map(q=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>R(q.category_id),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${o===q.category_id?"bg-blue-100 text-blue-900 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:q.category_name}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:q.article_count})]})}),q.subcategories&&q.subcategories.length>0&&o===q.category_id&&e.jsx("div",{className:"ml-4 mt-2 space-y-1",children:q.subcategories.map(z=>e.jsx("button",{onClick:()=>R(z.category_id),className:"w-full text-left px-3 py-2 rounded-md text-sm text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:z.category_name}),e.jsx("span",{className:"text-xs text-gray-400",children:z.article_count})]})},z.category_id))})]},q.category_id))]})})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsx(zt,{className:"h-8 w-8 mb-3"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Still need help?"}),e.jsx("p",{className:"text-blue-100 text-sm mb-4",children:"Our support team is here to assist you"}),e.jsx("button",{className:"w-full bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:"Contact Support"})]})]}),e.jsxs("main",{className:"flex-1",children:[$&&e.jsxs("div",{className:"space-y-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Popular Articles"}),C?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(q=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4"})]},q))}):w!=null&&w.popular_articles&&w.popular_articles.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.popular_articles.map(q=>e.jsxs("button",{onClick:()=>O(q.article_id),className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 text-left border border-gray-100 hover:border-blue-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx(Me,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:q.category_name})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 line-clamp-2",children:q.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ba,{className:"h-3 w-3 mr-1"}),q.helpful_votes," helpful"]}),e.jsxs("span",{children:[q.view_count," views"]})]})]},q.article_id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md",children:[e.jsx(Me,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No featured articles available"})]})]}),(w==null?void 0:w.getting_started_articles)&&w.getting_started_articles.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Getting Started"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.getting_started_articles.map(q=>e.jsxs("button",{onClick:()=>O(q.article_id),className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all p-6 text-left border border-gray-100 hover:border-blue-300 flex items-start space-x-4",children:[e.jsx($w,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:q.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:q.description})]}),e.jsx(Ie,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},q.article_id))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Browse by Topic"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.slice(0,6).map(q=>e.jsxs("button",{onClick:()=>R(q.category_id),className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 text-left border border-gray-100 hover:border-blue-300",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:q.category_name}),q.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:q.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[q.article_count," ",q.article_count===1?"article":"articles"]}),e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})]})]},q.category_id))})]})]}),I&&e.jsxs("div",{children:[e.jsxs("nav",{className:"mb-6 flex items-center space-x-2 text-sm",children:[e.jsx("button",{onClick:g,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Help Center"}),e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:U?U.category_name:"Search Results"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:i?`Results for "${i}"`:(U==null?void 0:U.category_name)||"Articles"}),f&&e.jsxs("p",{className:"text-gray-600",children:["Found ",f.total_count," ",f.total_count===1?"article":"articles"]})]}),k?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(q=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-2 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-2/3"})]},q))}):y?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Failed to load search results"}),e.jsx("p",{className:"text-red-600 text-sm",children:"Please try again"})]}):f&&f.articles.length>0?e.jsx("div",{className:"space-y-4",children:f.articles.map(q=>e.jsxs("button",{onClick:()=>O(q.article_id),className:"w-full bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 text-left border border-gray-100 hover:border-blue-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg flex-1 pr-4",children:q.title}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full flex-shrink-0",children:q.category_name})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:q.content_preview}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"}),q.author]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),q.reading_time_minutes," min read"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ba,{className:"h-3 w-3 mr-1"}),q.helpful_votes]}),e.jsxs("span",{children:[q.view_count," views"]})]})]})]},q.article_id))}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[e.jsx(Me,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No articles found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any articles matching your search."}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsx("p",{children:"Try:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Using different keywords"}),e.jsx("li",{children:"Checking your spelling"}),e.jsx("li",{children:"Browsing categories instead"})]})]}),e.jsx("button",{onClick:g,className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Browse All Articles"})]})]}),K&&e.jsx("div",{className:"max-w-4xl",children:M?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12 animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded mb-6 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-3 w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded mb-3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-4/5"})]}):E?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[e.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Article not found"}),e.jsx("p",{className:"text-red-600 text-sm mb-4",children:"The article you're looking for doesn't exist or has been removed."}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Back to Help Center"})]}):F?e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"mb-6 flex items-center space-x-2 text-sm",children:[e.jsx("button",{onClick:g,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Help Center"}),e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:F.category_name}),e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 font-medium truncate",children:F.title})]}),e.jsxs("article",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12 border border-gray-100",children:[e.jsxs("header",{className:"mb-8 pb-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4 leading-tight",children:F.title}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Xt,{className:"h-4 w-4 mr-1"}),F.author]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),F.reading_time_minutes," min read"]})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(F.last_updated).toLocaleDateString()]})]})]}),e.jsx("div",{className:"prose prose-lg max-w-none mb-12",children:e.jsx("div",{className:"text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:F.content}})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Was this article helpful?"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("button",{onClick:()=>D(!0),disabled:L.isPending||F.was_this_helpful_voted===!0,className:`px-6 py-3 rounded-lg font-medium transition-all ${F.was_this_helpful_voted===!0?"bg-green-100 text-green-700 border-2 border-green-500":"bg-white text-gray-700 border-2 border-gray-300 hover:border-green-500 hover:bg-green-50"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2`,children:[e.jsx(ba,{className:"h-5 w-5"}),e.jsx("span",{children:"Yes"})]}),e.jsxs("button",{onClick:()=>D(!1),disabled:L.isPending||F.was_this_helpful_voted===!1,className:`px-6 py-3 rounded-lg font-medium transition-all ${F.was_this_helpful_voted===!1?"bg-red-100 text-red-700 border-2 border-red-500":"bg-white text-gray-700 border-2 border-gray-300 hover:border-red-500 hover:bg-red-50"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2`,children:[e.jsx(Ow,{className:"h-5 w-5"}),e.jsx("span",{children:"No"})]})]}),F.was_this_helpful_voted!==null&&e.jsx("p",{className:"text-center text-sm text-gray-600 mt-3",children:"Thank you for your feedback!"}),!r&&e.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"Sign in to vote on articles"})]}),e.jsxs("div",{className:"text-center text-sm text-gray-600 mb-8",children:[e.jsx(ba,{className:"h-4 w-4 inline mr-1"}),F.helpful_votes," people found this helpful"]})]}),F.related_articles&&F.related_articles.length>0&&e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:F.related_articles.map(q=>e.jsxs("button",{onClick:()=>O(q.article_id),className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all p-4 text-left border border-gray-100 hover:border-blue-300",children:[e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full inline-block mb-2",children:q.category_name}),e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:q.title})]},q.article_id))})]}),e.jsxs("div",{className:"mt-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl shadow-lg p-8 text-white text-center",children:[e.jsx(zt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Still need help?"}),e.jsx("p",{className:"text-blue-100 mb-6",children:"Our support team is ready to assist you"}),e.jsx("button",{className:"px-8 py-3 bg-white text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors shadow-lg",children:"Contact Support"})]})]}):null})]})]})})]})})}const uZ=async()=>{const s=await fetch("https://123create-construction-app-with-a.launchpulse.ai/api/platform/public-stats");if(!s.ok)throw new Error("Failed to fetch platform statistics");const r=await s.json();return{total_suppliers:r.verified_supplier_count||0,total_products:r.active_product_count||0,orders_completed:r.total_completed_orders||0,customer_satisfaction:r.average_customer_rating||0,average_delivery_time:`${r.average_delivery_time_days||0} days`,cities_served:r.service_area_city_count||0}},mZ=async t=>{const r=await fetch(`https://123create-construction-app-with-a.launchpulse.ai/api/testimonials?user_type=${t}&featured_only=true&limit=6`);if(!r.ok)return{customer_testimonials:[],supplier_testimonials:[]};const a=await r.json();return{customer_testimonials:(a.testimonials||[]).filter(n=>n.user_type==="customer").map(n=>({testimonial_id:n.testimonial_id,customer_name:n.customer_name,customer_type:n.customer_account_type,quote:n.testimonial_text,rating:n.overall_rating,location:n.location,project_details:n.project_description})),supplier_testimonials:(a.testimonials||[]).filter(n=>n.user_type==="supplier").map(n=>({testimonial_id:n.testimonial_id,supplier_name:n.business_name,business_type:n.business_type,quote:n.testimonial_text,results:n.business_results,location:n.location}))}},xZ=()=>({buyer_steps:[{step_number:1,title:"Browse & Search",description:"Search thousands of construction materials from 100+ verified suppliers in one unified marketplace.",icon_url:"",features:["Real-time inventory from multiple suppliers","Advanced filtering by category, price, location","Compare products side-by-side","Save favorites to wishlist"],illustration_url:null},{step_number:2,title:"Compare & Select",description:"Compare prices, delivery times, and supplier ratings to make informed decisions.",icon_url:"",features:["Transparent pricing with no hidden fees","Supplier ratings and verified reviews","Delivery window selection","Bulk pricing options"],illustration_url:null},{step_number:3,title:"Checkout",description:"Secure checkout with multiple payment options and flexible delivery scheduling.",icon_url:"",features:["Multi-supplier cart management","Trade credit options available","Schedule preferred delivery windows","Secure payment processing"],illustration_url:null},{step_number:4,title:"Track & Receive",description:"Real-time order tracking with GPS delivery updates and proof of delivery.",icon_url:"",features:["Live GPS tracking when out for delivery","SMS and email notifications","Photo proof of delivery","Easy reordering from history"],illustration_url:null}],seller_steps:[{step_number:1,title:"Apply & Verify",description:"Submit your supplier application with business verification for trusted marketplace access.",icon_url:"",features:["Quick application process","Business verification for trust","Dedicated onboarding support","Multiple subscription tiers"],illustration_url:null},{step_number:2,title:"Setup Your Shop",description:"Create your digital storefront with product listings, pricing, and delivery zones.",icon_url:"",features:["Easy product catalog management","Bulk upload via CSV","Custom pricing and promotions","Delivery zone configuration"],illustration_url:null},{step_number:3,title:"Receive Orders",description:"Get instant notifications for new orders and manage fulfillment efficiently.",icon_url:"",features:["Real-time order notifications","Order management dashboard","Direct customer communication","Flexible delivery scheduling"],illustration_url:null},{step_number:4,title:"Grow Your Business",description:"Access analytics, manage finances, and expand your customer base.",icon_url:"",features:["Sales analytics and insights","Automated payouts","Customer reviews and ratings","Marketing promotion tools"],illustration_url:null}]}),hZ=()=>({buyer_benefits:[{benefit_id:"b1",title:"Real-Time Inventory",description:"See exact stock levels updated every minute",icon_url:"",details:["Live stock updates across all suppliers","No more calling around to check availability","Back-in-stock alerts for wishlist items","Reserve items by adding to cart"]},{benefit_id:"b2",title:"Transparent Pricing",description:"Compare prices instantly across multiple suppliers",icon_url:"",details:["See all costs upfront - no hidden fees","Bulk pricing options clearly displayed","Price drop alerts on saved items","Trade pricing for professional accounts"]},{benefit_id:"b3",title:"Reliable Delivery",description:"Schedule delivery windows that work for your project",icon_url:"",details:["Choose your preferred delivery time","GPS tracking when out for delivery","SMS alerts 5 minutes before arrival","Photo proof of delivery"]},{benefit_id:"b4",title:"Trusted Suppliers",description:"Buy from verified, rated suppliers with confidence",icon_url:"",details:["All suppliers verified and vetted","Read verified customer reviews","Supplier response time displayed","Secure payment processing"]}],seller_benefits:[{benefit_id:"s1",title:"Reach More Customers",description:"Get discovered by thousands of active buyers",icon_url:"",details:["Appear in searches across the platform","Target professional and retail customers","Featured product opportunities","Marketing promotion tools"]},{benefit_id:"s2",title:"Easy Order Management",description:"Streamline your order process with powerful tools",icon_url:"",details:["Instant order notifications","Centralized dashboard for all orders","Direct customer messaging","Automated inventory sync"]},{benefit_id:"s3",title:"Grow Sales",description:"Tools to increase revenue and expand your business",icon_url:"",details:["Analytics on best-selling products","Create custom promotions and deals","Volume discounting capabilities","Trade customer access"]},{benefit_id:"s4",title:"Fast Payments",description:"Automated payouts with transparent commission",icon_url:"",details:["Weekly, bi-weekly, or monthly payouts","Low 8.5% platform commission","Detailed financial reporting","Secure payment processing"]}]}),pZ=()=>{const[t]=Fe(),s=re(f=>f.authentication_state.authentication_status.user_type),r=re(f=>f.authentication_state.auth_token),a=t.get("user_type"),[n,i]=_.useState(a||(s==="customer"?"customer":s==="supplier"?"supplier":"guest")),l=t.get("process_step"),[o,d]=_.useState(l?parseInt(l):null),c=xZ(),u=hZ(),{data:m,isLoading:h}=ne({queryKey:["platform-statistics"],queryFn:uZ,staleTime:6e4,refetchOnWindowFocus:!1}),{data:x,isLoading:p}=ne({queryKey:["testimonials",n],queryFn:()=>mZ(n),staleTime:3e5,refetchOnWindowFocus:!1}),b=n==="supplier"?c.seller_steps:c.buyer_steps,v=n==="supplier"?u.seller_benefits:u.buyer_benefits,j=n==="supplier"?(x==null?void 0:x.supplier_testimonials)||[]:(x==null?void 0:x.customer_testimonials)||[],P=async(f,k)=>{if(r)try{await fetch("https://123create-construction-app-with-a.launchpulse.ai/api/analytics/page-engagement",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({page_type:"how_it_works",user_type:n,engagement_type:f,content_element:k})})}catch(y){console.error("Analytics tracking error:",y)}},w=f=>{i(f),d(null),P("user_type_switch",f)},C=f=>{d(f),P("step_click",`step_${f}`)};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 py-16 lg:py-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:"How BuildEasy Works"}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:n==="supplier"?"Grow your construction supply business with our trusted marketplace platform":"Order construction materials from verified suppliers with transparent pricing and real-time tracking"}),e.jsxs("div",{className:"flex justify-center space-x-4 mb-8",children:[e.jsxs("button",{onClick:()=>w("customer"),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n!=="supplier"?"bg-blue-600 text-white shadow-lg hover:shadow-xl hover:bg-blue-700":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-300"}`,children:[e.jsx(Be,{className:"inline-block size-5 mr-2"}),"For Buyers"]}),e.jsxs("button",{onClick:()=>w("supplier"),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n==="supplier"?"bg-blue-600 text-white shadow-lg hover:shadow-xl hover:bg-blue-700":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-300"}`,children:[e.jsx(Js,{className:"inline-block size-5 mr-2"}),"For Suppliers"]})]})]})})}),!h&&m&&e.jsx("section",{className:"bg-white py-12 border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:[m.total_suppliers,"+"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Verified Suppliers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:[(m.total_products/1e3).toFixed(1),"K+"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Products Available"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:[(m.orders_completed/1e3).toFixed(1),"K+"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Orders Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:[m.customer_satisfaction.toFixed(1),e.jsx(Oe,{className:"inline-block size-6 ml-1 text-yellow-400 fill-yellow-400"})]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Customer Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:m.average_delivery_time}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Avg. Delivery"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold text-blue-600 mb-2",children:[m.cities_served,"+"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Cities Served"})]})]})})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:n==="supplier"?"How to Start Selling":"How to Order Materials"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:n==="supplier"?"Four simple steps to reach more customers and grow your business":"Four simple steps from search to delivery"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:b.map(f=>{const k=f.step_number===1?Xe:f.step_number===2?ve:f.step_number===3?Be:kt,y=o===f.step_number;return e.jsxs("div",{onClick:()=>C(f.step_number),className:`bg-white rounded-xl p-6 lg:p-8 shadow-lg border transition-all duration-200 cursor-pointer ${y?"border-blue-500 shadow-xl transform scale-105":"border-gray-100 hover:shadow-xl hover:border-blue-200"}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(k,{className:"size-8 text-blue-600"})}),e.jsxs("div",{className:"text-sm font-semibold text-blue-600 mb-2",children:["Step ",f.step_number]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:f.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:f.description})]}),e.jsx("ul",{className:"space-y-2",children:f.features.map((F,M)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[e.jsx(Qs,{className:"size-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:F})]},M))})]},f.step_number)})})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"text-center mb-16",children:e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:n==="supplier"?"Why Suppliers Choose BuildEasy":"Why Customers Love BuildEasy"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:v.map(f=>{const k=f.benefit_id==="b1"||f.benefit_id==="s1"?Re:f.benefit_id==="b2"||f.benefit_id==="s2"?Te:f.benefit_id==="b3"||f.benefit_id==="s3"?Tw:Mt;return e.jsxs("div",{className:"flex gap-6 p-6 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-lg transition-all duration-200",onMouseEnter:()=>P("benefit_hover",f.benefit_id),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"size-7 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:f.title}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:f.description}),e.jsx("ul",{className:"space-y-2",children:f.details.map((y,F)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[e.jsx(he,{className:"size-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:y})]},F))})]})]},f.benefit_id)})})]})}),!p&&j.length>0&&e.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:["What ",n==="supplier"?"Suppliers":"Customers"," Say"]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Real experiences from our platform users"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:j.slice(0,6).map(f=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsx("div",{className:"flex items-center mb-4",children:n!=="supplier"&&"rating"in f&&e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((k,y)=>e.jsx(Oe,{className:`size-4 ${y<f.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},y))})}),e.jsxs("p",{className:"text-gray-700 mb-4 leading-relaxed italic",children:['"',f.quote,'"']}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:n==="supplier"?f.supplier_name:f.customer_name}),n==="supplier"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600",children:f.business_type}),e.jsx("p",{className:"text-sm text-blue-600 font-medium mt-1",children:f.results})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600",children:f.customer_type}),f.project_details&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:f.project_details})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[e.jsx(Dt,{className:"size-3 mr-1"}),f.location]})]})]},f.testimonial_id))})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"See It In Action"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Watch how easy it is to ",n==="supplier"?"manage your shop":"order materials"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl p-8 lg:p-12 border border-gray-300",children:e.jsx("div",{className:"aspect-video bg-white rounded-xl shadow-xl flex items-center justify-center border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ve,{className:"size-10 text-blue-600"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:n==="supplier"?"Interactive supplier dashboard demo":"Interactive ordering process demo"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Coming soon"})]})})})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Built on Trust & Reliability"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:n==="supplier"?"We protect your business and ensure you get paid on time":"We verify every supplier and secure every transaction"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 text-center shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Mt,{className:"size-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n==="supplier"?"Secure Payments":"Verified Suppliers"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n==="supplier"?"Automated payouts with transparent commission structure":"All suppliers verified and background checked"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 text-center shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ct,{className:"size-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n==="supplier"?"Customer Support":"Dedicated Support"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n==="supplier"?"24/7 support for order and platform issues":"Live chat, phone, and email support available"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 text-center shadow-lg border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(He,{className:"size-8 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n==="supplier"?"Quick Onboarding":"Fast Delivery"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n==="supplier"?"Start selling within 2-3 business days after approval":"Same-day and next-day delivery options available"})]})]})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-blue-600",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-6",children:n==="supplier"?"Ready to Grow Your Business?":"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 leading-relaxed",children:n==="supplier"?"Join hundreds of suppliers already thriving on BuildEasy":"Join thousands of customers ordering smarter with BuildEasy"}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:n==="supplier"?e.jsxs(e.Fragment,{children:[e.jsxs(Q,{to:"/register/supplier",onClick:()=>P("cta_click","register_supplier"),className:"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:["Apply as Supplier",e.jsx(ls,{className:"ml-2 size-5"})]}),e.jsx(Q,{to:"/contact",className:"inline-flex items-center justify-center px-8 py-4 bg-blue-700 text-white font-semibold rounded-lg hover:bg-blue-800 transition-all duration-200 border-2 border-blue-400",children:"Talk to Sales"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{to:"/register/customer",onClick:()=>P("cta_click","register_customer"),className:"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:["Sign Up Free",e.jsx(ls,{className:"ml-2 size-5"})]}),e.jsx(Q,{to:"/products",className:"inline-flex items-center justify-center px-8 py-4 bg-blue-700 text-white font-semibold rounded-lg hover:bg-blue-800 transition-all duration-200 border-2 border-blue-400",children:"Browse Products"})]})}),e.jsx("p",{className:"text-blue-100 text-sm mt-6",children:"No credit card required  Free to join  Cancel anytime"})]})}),e.jsx("section",{className:"py-16 lg:py-24 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"})}),e.jsx("div",{className:"space-y-6",children:n==="supplier"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How much does it cost to join?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"BuildEasy charges an 8.5% commission on completed sales. No monthly fees, no setup costs. You only pay when you make a sale."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How long does verification take?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Most supplier applications are reviewed within 2-3 business days. We'll notify you via email once your application is approved."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"When do I get paid?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Choose weekly, bi-weekly, or monthly automatic payouts. Funds are deposited directly to your bank account after successful delivery confirmation."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I set my own prices and delivery areas?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Yes! You have full control over your pricing, promotions, delivery zones, and service areas. Set custom pricing for trade vs retail customers."})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Is there a minimum order amount?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"No platform minimum. Individual suppliers may have their own minimums which are clearly displayed before checkout."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How accurate is the delivery tracking?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"We provide real-time GPS tracking when your delivery is out for delivery. You'll receive SMS alerts when the driver is 5 minutes away."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What payment methods do you accept?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"We accept all major credit cards, debit cards, and offer trade credit accounts for verified professional customers. All payments are processed securely."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What if I have an issue with my order?"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Contact the supplier directly through our messaging system or report an issue through your order page. Our support team is also available 24/7 to help resolve any problems."})]})]})}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(Q,{to:"/help",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["View All Help Articles",e.jsx(ls,{className:"ml-2 size-4"})]})})]})})]})},gZ=async()=>({support_email:"support@buildeasy.com",support_phone:"1-800-BUILD-EZ",business_hours:{monday_friday:"8:00 AM - 8:00 PM",weekend:"9:00 AM - 5:00 PM",timezone:"EST"},office_address:{street_address:"123 Construction Ave",city:"Austin",state:"TX",postal_code:"78701"},response_times:{email:"24 hours",phone:"Immediate",chat:"2 minutes"}}),fZ=async()=>[{category_id:"general",category_name:"General Inquiry",description:"General questions about BuildEasy",requires_order_id:!1,estimated_response_time:"24 hours"},{category_id:"delivery",category_name:"Delivery Question",description:"Questions about order delivery",requires_order_id:!0,estimated_response_time:"12 hours"},{category_id:"product_quality",category_name:"Product Quality",description:"Issues with product quality",requires_order_id:!0,estimated_response_time:"24 hours"},{category_id:"payment",category_name:"Payment Issue",description:"Payment or billing questions",requires_order_id:!0,estimated_response_time:"12 hours"},{category_id:"account",category_name:"Account Help",description:"Account settings and access",requires_order_id:!1,estimated_response_time:"24 hours"},{category_id:"technical",category_name:"Technical Support",description:"Website or app technical issues",requires_order_id:!1,estimated_response_time:"24 hours"},{category_id:"other",category_name:"Other",description:"Other inquiries",requires_order_id:!1,estimated_response_time:"48 hours"}],bZ=async()=>{const t=new Date().getHours(),s=t>=8&&t<20;return{is_available:s,queue_length:s?Math.floor(Math.random()*3):0,estimated_wait_time:s?"2 minutes":null}},yZ=async(t,s)=>{const r="https://123create-construction-app-with-a.launchpulse.ai",a={user_id:null,order_id:t.order_id,issue_category:t.inquiry_type,subject:t.subject,message:t.message,attachments:t.attachment_urls,priority:"normal"},n={"Content-Type":"application/json"};return s&&(n.Authorization=`Bearer ${s}`),(await G.post(`${r}/api/support/tickets`,a,{headers:n})).data},vZ=async(t,s)=>new Promise(r=>{setTimeout(()=>{r({attachment_url:`https://cdn.buildeasy.com/support/${Date.now()}_${t.name}`,file_name:t.name,file_size:t.size})},1e3)}),jZ=async(t,s)=>(await G.post("https://123create-construction-app-with-a.launchpulse.ai/api/chat/conversations",{conversation_type:"customer_support",related_entity_type:"contact_page",related_entity_id:t},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,NZ=()=>{const[t]=Fe(),s=re(E=>E.authentication_state.current_user),r=re(E=>E.authentication_state.auth_token),a=re(E=>E.authentication_state.authentication_status.is_authenticated),n=re(E=>E.open_modal),[i,l]=_.useState({full_name:"",email:"",phone_number:null,inquiry_type:"general",subject:"",message:"",order_id:null,attachment_urls:[],privacy_consent:!1}),[o,d]=_.useState({full_name:null,email:null,subject:null,message:null,privacy_consent:null}),[c,u]=_.useState({ticket_id:null,submission_timestamp:null,estimated_response_time:null,next_steps:null}),[m,h]=_.useState(!1),{data:x}=ne({queryKey:["contactInformation"],queryFn:gZ,staleTime:30*60*1e3,retry:1}),{data:p=[]}=ne({queryKey:["inquiryCategories"],queryFn:fZ,staleTime:30*60*1e3,retry:1}),{data:b}=ne({queryKey:["chatAvailability"],queryFn:bZ,refetchInterval:6e4,retry:1}),v=oe({mutationFn:E=>yZ(E,r),onSuccess:E=>{u({ticket_id:E.ticket_id,submission_timestamp:E.created_date,estimated_response_time:"24 hours",next_steps:"Our team will review your message and respond via email within 24 hours."}),l({full_name:s?`${s.first_name||""} ${s.last_name||""}`.trim():"",email:(s==null?void 0:s.email)||"",phone_number:(s==null?void 0:s.phone_number)||null,inquiry_type:"general",subject:"",message:"",order_id:null,attachment_urls:[],privacy_consent:!1}),d({full_name:null,email:null,subject:null,message:null,privacy_consent:null}),window.scrollTo({top:0,behavior:"smooth"})},onError:E=>{var B,A;console.error("Contact form submission error:",E),alert(((A=(B=E.response)==null?void 0:B.data)==null?void 0:A.message)||"Failed to submit contact form. Please try again.")}});_.useEffect(()=>{const E=t.get("inquiry_type"),B=t.get("order_id");l(A=>({...A,full_name:s?`${s.first_name||""} ${s.last_name||""}`.trim():A.full_name,email:(s==null?void 0:s.email)||A.email,phone_number:(s==null?void 0:s.phone_number)||A.phone_number,inquiry_type:E||A.inquiry_type,order_id:B||A.order_id}))},[s,t]);const j=_.useCallback((E,B)=>{switch(E){case"full_name":return!B||B.trim().length===0?"Full name is required":B.trim().length<2?"Name must be at least 2 characters":null;case"email":return!B||B.trim().length===0?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B)?null:"Please enter a valid email address";case"subject":return!B||B.trim().length===0?"Subject is required":B.trim().length<5?"Subject must be at least 5 characters":null;case"message":return!B||B.trim().length===0?"Message is required":B.trim().length<20?"Message must be at least 20 characters":null;case"privacy_consent":return B?null:"You must agree to the privacy policy";default:return null}},[]),P=E=>{const B=i[E],A=j(E,B);d(L=>({...L,[E]:A}))},w=(E,B)=>{l(A=>({...A,[E]:B})),o[E]&&d(A=>({...A,[E]:null}))},C=async E=>{const B=E.target.files;if(!(!B||B.length===0)){if(i.attachment_urls.length+B.length>5){alert("Maximum 5 attachments allowed");return}h(!0);try{const A=Array.from(B).map(async N=>{if(N.size>5242880)throw new Error(`File ${N.name} exceeds 5MB limit`);if(!["image/jpeg","image/png","image/webp","application/pdf"].includes(N.type))throw new Error(`File ${N.name} has invalid type. Only images and PDFs allowed.`);return(await vZ(N)).attachment_url}),L=await Promise.all(A);l(N=>({...N,attachment_urls:[...N.attachment_urls,...L]}))}catch(A){alert(A.message||"Failed to upload files")}finally{h(!1),E.target.value=""}}},f=E=>{l(B=>({...B,attachment_urls:B.attachment_urls.filter(A=>A!==E)}))},k=()=>{const E={full_name:j("full_name",i.full_name),email:j("email",i.email),subject:j("subject",i.subject),message:j("message",i.message),privacy_consent:j("privacy_consent",i.privacy_consent)};return d(E),!Object.values(E).some(B=>B!==null)},y=async E=>{E.preventDefault(),k()&&v.mutate(i)},F=async()=>{if(!a){alert("Please sign in to use live chat");return}if(!r){alert("Authentication token missing");return}try{await jZ(i.inquiry_type,r),n("chat_widget")}catch(E){console.error("Failed to initiate chat:",E),alert("Failed to start chat. Please try again.")}},M=p.find(E=>E.category_id===i.inquiry_type);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.ticket_id&&e.jsx("div",{className:"mb-8 bg-green-50 border-2 border-green-200 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(he,{className:"h-6 w-6 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Message Sent Successfully!"}),e.jsxs("p",{className:"text-green-800 mb-3",children:["Thank you for contacting us. We've received your message and created support ticket"," ",e.jsxs("span",{className:"font-mono font-semibold",children:["#",c.ticket_id]}),"."]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:"Expected Response Time:"})," ",c.estimated_response_time]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Next Steps:"})," ",c.next_steps]})]}),a&&e.jsx("div",{className:"mt-4",children:e.jsx(Q,{to:"/support",className:"inline-flex items-center text-sm font-medium text-green-700 hover:text-green-800",children:"View all support tickets "})})]})]})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Get in Touch"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Have questions? We're here to help. Choose your preferred method of contact below."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-16",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4",children:e.jsx(jt,{className:"h-7 w-7 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Email Us"}),e.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Send us a detailed message and we'll respond within ",(x==null?void 0:x.response_times.email)||"24 hours","."]}),e.jsx("a",{href:`mailto:${(x==null?void 0:x.support_email)||"support@buildeasy.com"}`,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:(x==null?void 0:x.support_email)||"support@buildeasy.com"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center mb-4",children:e.jsx(Zs,{className:"h-7 w-7 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Call Us"}),e.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Speak with our team directly. Available ",(x==null?void 0:x.business_hours.monday_friday)||"Mon-Fri 8AM-8PM","."]}),e.jsx("a",{href:`tel:${(x==null?void 0:x.support_phone)||"1-800-BUILD-EZ"}`,className:"text-green-600 hover:text-green-700 font-medium text-sm",children:(x==null?void 0:x.support_phone)||"1-800-BUILD-EZ"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 hover:shadow-xl transition-all duration-200",children:[e.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4",children:e.jsx(zt,{className:"h-7 w-7 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Live Chat"}),e.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Get instant help from our support team. Average response: ",(x==null?void 0:x.response_times.chat)||"2 minutes","."]}),b!=null&&b.is_available?e.jsx("button",{onClick:F,disabled:!a,className:"text-purple-600 hover:text-purple-700 font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:["Start Chat  ",b.queue_length," in queue"]}):"Sign in to chat"}):e.jsx("span",{className:"text-gray-500 text-sm",children:"Currently offline"})]})]}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Send Us a Message"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Fill out the form below and we'll get back to you soon"})]}),e.jsxs("form",{onSubmit:y,className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"inquiry_type",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Inquiry Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:"inquiry_type",value:i.inquiry_type,onChange:E=>w("inquiry_type",E.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900",children:p.map(E=>e.jsx("option",{value:E.category_id,children:E.category_name},E.category_id))}),M&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[M.description,"  Response time: ",M.estimated_response_time]})]}),(M==null?void 0:M.requires_order_id)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"order_id",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Order Number"}),e.jsx("input",{id:"order_id",type:"text",value:i.order_id||"",onChange:E=>w("order_id",E.target.value||null),placeholder:"e.g., ORD-2024-001",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900 placeholder-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Enter your order number if your inquiry is related to a specific order"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"full_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"full_name",type:"text",required:!0,value:i.full_name,onChange:E=>w("full_name",E.target.value),onBlur:()=>P("full_name"),placeholder:"John Smith",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-gray-900 placeholder-gray-400 ${o.full_name?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),o.full_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),o.full_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"email",type:"email",required:!0,value:i.email,onChange:E=>w("email",E.target.value),onBlur:()=>P("email"),placeholder:"john.smith@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-gray-900 placeholder-gray-400 ${o.email?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),o.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),o.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("input",{id:"phone_number",type:"tel",value:i.phone_number||"",onChange:E=>w("phone_number",E.target.value||null),placeholder:"+1 (555) 123-4567",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900 placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"subject",type:"text",required:!0,value:i.subject,onChange:E=>w("subject",E.target.value),onBlur:()=>P("subject"),placeholder:"Brief description of your inquiry",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-gray-900 placeholder-gray-400 ${o.subject?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),o.subject&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),o.subject]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",required:!0,rows:6,value:i.message,onChange:E=>w("message",E.target.value),onBlur:()=>P("message"),placeholder:"Please provide as much detail as possible...",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-gray-900 placeholder-gray-400 resize-none ${o.message?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:o.message?e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),o.message]}):e.jsxs("p",{className:"text-sm text-gray-500",children:[i.message.length," / 5000 characters"]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Attachments ",e.jsx("span",{className:"text-gray-400",children:"(Optional, max 5 files)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"file_upload",multiple:!0,accept:"image/jpeg,image/png,image/webp,application/pdf",onChange:C,disabled:m||i.attachment_urls.length>=5,className:"hidden"}),e.jsxs("label",{htmlFor:"file_upload",className:`flex items-center justify-center w-full px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition-all duration-200 ${m||i.attachment_urls.length>=5?"bg-gray-50 border-gray-200 cursor-not-allowed":"bg-gray-50 border-gray-300 hover:bg-gray-100 hover:border-blue-400"}`,children:[e.jsx(os,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:m?"Uploading...":"Click to upload files"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Accepted formats: JPG, PNG, WebP, PDF  Max size: 5MB per file"}),i.attachment_urls.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:i.attachment_urls.map((E,B)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-2 border border-gray-200",children:[e.jsxs("span",{className:"text-sm text-gray-700 truncate flex-1",children:["Attachment ",B+1]}),e.jsx("button",{type:"button",onClick:()=>f(E),className:"ml-2 text-red-600 hover:text-red-700",children:e.jsx(ge,{className:"h-4 w-4"})})]},E))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:i.privacy_consent,onChange:E=>w("privacy_consent",E.target.checked),className:`mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 ${o.privacy_consent?"border-red-300":""}`}),e.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["I agree to the"," ",e.jsx(Q,{to:"/privacy",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Privacy Policy"})," ","and consent to BuildEasy storing and processing my information."," ",e.jsx("span",{className:"text-red-500",children:"*"})]})]}),o.privacy_consent&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center ml-6",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),o.privacy_consent]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:v.isPending||m,className:"w-full bg-blue-600 text-white px-6 py-4 rounded-lg font-semibold text-base hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:v.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Message..."]}):"Send Message"})})]})]})}),e.jsxs("div",{className:"max-w-3xl mx-auto mt-12 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(He,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Hours"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Monday - Friday:"}),e.jsx("span",{className:"font-medium text-gray-900",children:(x==null?void 0:x.business_hours.monday_friday)||"8:00 AM - 8:00 PM"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Weekend:"}),e.jsx("span",{className:"font-medium text-gray-900",children:(x==null?void 0:x.business_hours.weekend)||"9:00 AM - 5:00 PM"})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Timezone:"}),e.jsx("span",{className:"font-medium text-gray-900",children:(x==null?void 0:x.business_hours.timezone)||"EST"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Dt,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Office Location"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsx("p",{children:(x==null?void 0:x.office_address.street_address)||"123 Construction Ave"}),e.jsxs("p",{children:[(x==null?void 0:x.office_address.city)||"Austin",","," ",(x==null?void 0:x.office_address.state)||"TX"," ",(x==null?void 0:x.office_address.postal_code)||"78701"]})]})]})]}),e.jsxs("div",{className:"max-w-3xl mx-auto mt-12 bg-blue-50 border-2 border-blue-200 rounded-xl p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Before You Reach Out"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"You might find answers to your questions faster in our help resources:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(Q,{to:"/help",className:"flex items-center px-4 py-3 bg-white rounded-lg border border-blue-200 hover:border-blue-400 hover:shadow-md transition-all duration-200",children:[e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:"Knowledge Base"}),e.jsx("span",{className:"ml-auto text-blue-600",children:""})]}),e.jsxs(Q,{to:"/how-it-works",className:"flex items-center px-4 py-3 bg-white rounded-lg border border-blue-200 hover:border-blue-400 hover:shadow-md transition-all duration-200",children:[e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:"How It Works"}),e.jsx("span",{className:"ml-auto text-blue-600",children:""})]})]})]})]})})})},wZ={title:"About BuildEasy",sections:[{id:"overview",title:"Revolutionizing Construction Supply",content:"BuildEasy is transforming how construction professionals and DIY enthusiasts source materials. We connect buyers with verified suppliers across the nation, providing real-time inventory, transparent pricing, and reliable delivery trackingall in one seamless platform.",image_url:null},{id:"story",title:"Our Story",content:`Founded in 2024, BuildEasy emerged from a simple frustration: finding and purchasing construction materials shouldn't be this hard. Our founders, experienced contractors and tech entrepreneurs, witnessed firsthand the inefficiencies plaguing the construction supply industryscattered suppliers, unclear pricing, unreliable stock information, and delivery uncertainty.

We built BuildEasy to solve these challenges. By aggregating multiple suppliers into one unified marketplace, implementing real-time inventory synchronization, and providing transparent end-to-end tracking, we're making construction supply purchasing as simple as ordering anything else online.`,image_url:null},{id:"mission",title:"Our Mission",content:"To empower buildersfrom professional contractors to weekend DIYerswith instant access to verified construction materials at transparent prices, backed by reliable delivery and exceptional service. We believe every project deserves the right materials delivered on time, every time.",image_url:null},{id:"vision",title:"Our Vision",content:"To become the nation's most trusted construction supply marketplace, where finding, comparing, and purchasing materials is effortless, where suppliers thrive through increased reach and efficiency, and where every build starts with confidence.",image_url:null},{id:"values",title:"Our Values",content:`Transparency First: Clear pricing, real stock levels, honest timelines.

Reliability Always: Verified suppliers, guaranteed delivery windows, real-time tracking.

Simplicity Matters: Minimal clicks, intuitive experiences, no hidden fees.

Trust Through Action: Every promise kept, every issue resolved, every feedback heard.

Growth Together: Supporting suppliers to scale, helping customers build better, growing the industry.`,image_url:null}],last_updated:new Date().toISOString()},_Z=[{member_id:"tm_001",name:"Sarah Johnson",role:"Co-Founder & CEO",bio:"Former general contractor with 15+ years in commercial construction. Sarah led teams building over $200M in projects before founding BuildEasy to solve the procurement challenges she experienced daily.",image_url:null,linkedin_url:null},{member_id:"tm_002",name:"Michael Chen",role:"Co-Founder & CTO",bio:"Tech entrepreneur with exits in logistics and marketplaces. Michael previously built real-time supply chain platforms at Amazon and brings deep expertise in inventory management systems and marketplace dynamics.",image_url:null,linkedin_url:null},{member_id:"tm_003",name:"Jennifer Martinez",role:"VP of Supplier Success",bio:"Former regional manager at a national building supply chain with 12+ years in supplier relations. Jennifer ensures our supplier partners have the tools and support to grow their business on BuildEasy.",image_url:null,linkedin_url:null},{member_id:"tm_004",name:"David Thompson",role:"VP of Product",bio:"Product leader with experience at construction tech startups. David focuses on building features that contractors actually need, not just what sounds good in a pitch deck.",image_url:null,linkedin_url:null}],kZ={founding_year:2024,team_size:24,suppliers_served:102,orders_processed:1247,customer_satisfaction:4.7},SZ=[{year:"2024",quarter:"Q1",title:"Platform Launch",description:"BuildEasy officially launches with 50+ verified suppliers across Texas"},{year:"2024",quarter:"Q2",title:"100 Suppliers Milestone",description:"Reached 100+ verified suppliers serving major metro areas"},{year:"2024",quarter:"Q3",title:"1,000 Orders Delivered",description:"Processed and delivered over 1,000 construction supply orders with 98% on-time delivery"},{year:"2024",quarter:"Q4",title:"Trade Credit Launch",description:"Introduced trade credit program for professional contractors, unlocking $2M+ in purchasing power"}],CZ=()=>{const[t,s]=Fe(),r=t.get("section")||"overview",[a,n]=_.useState(r),[i]=_.useState(!1),[l]=_.useState(null),[o]=_.useState(wZ),[d]=_.useState(_Z),[c]=_.useState(kZ),u=re(x=>x.authentication_state.authentication_status.is_authenticated);_.useEffect(()=>{r!==a&&(n(r),m(r))},[r,a]),_.useEffect(()=>{console.log("About page viewed at:",new Date().toISOString())},[]);const m=x=>{const p=document.getElementById(x);if(p){const j=p.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:j,behavior:"smooth"})}},h=x=>{n(x),s({section:x}),m(x)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-blue-600 to-blue-800 text-white py-20 lg:py-32",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight",children:["Building the Future of ",e.jsx("br",{className:"hidden sm:block"}),"Construction Supply"]}),e.jsx("p",{className:"text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto leading-relaxed",children:"Connecting verified suppliers with builders nationwide through technology, transparency, and trust"}),e.jsxs("div",{className:"mt-12 grid grid-cols-2 md:grid-cols-4 gap-6 lg:gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:c.founding_year}),e.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Founded"})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold",children:[c.suppliers_served,"+"]}),e.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Verified Suppliers"})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold",children:[c.orders_processed.toLocaleString(),"+"]}),e.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Orders Delivered"})]}),e.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[e.jsxs("div",{className:"text-3xl lg:text-4xl font-bold",children:[c.customer_satisfaction,"/5.0"]}),e.jsx("div",{className:"text-blue-100 text-sm mt-1",children:"Satisfaction Rating"})]})]})]})})]}),e.jsx("div",{className:"sticky top-16 z-10 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex overflow-x-auto py-4 space-x-8",children:[o.sections.map(x=>e.jsx("button",{onClick:()=>h(x.id),className:`whitespace-nowrap text-sm font-medium transition-colors pb-2 border-b-2 ${a===x.id?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"}`,children:x.title},x.id)),e.jsx("button",{onClick:()=>h("team"),className:`whitespace-nowrap text-sm font-medium transition-colors pb-2 border-b-2 ${a==="team"?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"}`,children:"Our Team"}),e.jsx("button",{onClick:()=>h("milestones"),className:`whitespace-nowrap text-sm font-medium transition-colors pb-2 border-b-2 ${a==="milestones"?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"}`,children:"Milestones"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:[i&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}),l&&e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:l})})]})})}),!i&&!l&&e.jsxs("div",{className:"space-y-24",children:[e.jsx("section",{id:"overview",className:"scroll-mt-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:o.sections[0].title}),e.jsx("p",{className:"text-lg lg:text-xl text-gray-600 leading-relaxed",children:o.sections[0].content})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Verified Suppliers"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Every supplier undergoes rigorous verification including business registration, tax ID, and background checks."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-600 rounded-lg mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Real-Time Inventory"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Live stock levels updated every 30 seconds. No more showing up to find items out of stock."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-100",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-600 rounded-lg mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Transparent Pricing"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Compare prices across suppliers instantly. No hidden fees. What you see is what you pay."})]})]})]})}),e.jsx("section",{id:"story",className:"scroll-mt-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:o.sections[1].title}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-600 leading-relaxed",children:o.sections[1].content.split(`

`).map((x,p)=>e.jsx("p",{className:"mb-4",children:x},p))}),e.jsxs("div",{className:"mt-12 grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"The Problem"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:""}),e.jsx("span",{children:"Hours wasted calling suppliers for availability"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:""}),e.jsx("span",{children:"No price transparency or comparison"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:""}),e.jsx("span",{children:"Unreliable delivery windows causing delays"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:""}),e.jsx("span",{children:"Limited supplier options in one location"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Our Solution"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:""}),e.jsx("span",{children:"Real-time inventory across 100+ suppliers"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:""}),e.jsx("span",{children:"Instant price comparison in one view"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:""}),e.jsx("span",{children:"Guaranteed delivery windows with GPS tracking"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:""}),e.jsx("span",{children:"Nationwide supplier network at your fingertips"})]})]})]})]})]})}),e.jsx("section",{id:"mission",className:"scroll-mt-32",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 lg:p-10 border border-blue-100",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-600 rounded-xl mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-4",children:o.sections[2].title}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.sections[2].content})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-8 lg:p-10 border border-purple-100",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-purple-600 rounded-xl mb-6",children:e.jsxs("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-4",children:o.sections[3].title}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.sections[3].content})]})]})})}),e.jsx("section",{id:"values",className:"scroll-mt-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:o.sections[4].title})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:o.sections[4].content.split(`

`).map((x,p)=>{const[b,...v]=x.split(": "),j=[e.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})];return e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:j[p%j.length]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:b}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:v.join(": ")})]})]})},p)})})]})}),e.jsx("section",{id:"team",className:"scroll-mt-32 bg-gray-50 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Experienced professionals from construction, technology, and logistics working together to revolutionize the supply chain"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:d.map(x=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 hover:shadow-2xl transition-all duration-200",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 h-64 flex items-center justify-center text-white",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl font-bold",children:x.name.split(" ").map(p=>p[0]).join("")})})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:x.name}),e.jsx("p",{className:"text-blue-600 font-medium text-sm mb-4",children:x.role}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:x.bio}),x.linkedin_url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:x.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"LinkedIn"]})})]})]},x.member_id))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-block bg-white rounded-xl px-8 py-6 shadow-lg border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Join Our Growing Team"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We're always looking for talented individuals passionate about transforming construction"}),e.jsxs(Q,{to:"/contact",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200",children:["View Open Positions",e.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]})}),e.jsx("section",{id:"milestones",className:"scroll-mt-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Our Journey"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Key milestones in building the future of construction supply"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-blue-200 hidden md:block"}),e.jsx("div",{className:"space-y-8",children:SZ.map((x,p)=>e.jsxs("div",{className:"relative pl-0 md:pl-20",children:[e.jsx("div",{className:"absolute left-6 top-2 w-5 h-5 rounded-full bg-blue-600 border-4 border-white shadow-lg hidden md:block"}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 mb-2 md:mb-0",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-full",children:x.year}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:x.quarter})]})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:x.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:x.description})]})]},p))})]})]})}),e.jsx("section",{className:"scroll-mt-32 bg-gray-50 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-16 lg:py-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Trusted by Builders Nationwide"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Building credibility through verified partnerships and industry recognition"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Verified & Secure"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"PCI DSS Level 1 compliant with bank-grade security. All supplier credentials verified."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Fair Pricing"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Transparent commission structure. Suppliers keep more, buyers pay less."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"24/7 Support"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Dedicated customer success team ready to help via chat, phone, or email."})]})]})]})}),e.jsx("section",{className:"scroll-mt-32",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-12 lg:p-16 text-center text-white shadow-2xl",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-6",children:"Ready to Simplify Your Supply Chain?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Join thousands of builders who trust BuildEasy for their construction materials"}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:u?e.jsxs(e.Fragment,{children:[e.jsxs(Q,{to:"/products",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:["Start Shopping",e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsx(Q,{to:"/contact",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 bg-transparent text-white font-semibold rounded-lg border-2 border-white hover:bg-white hover:text-blue-600 transition-all duration-200",children:"Contact Us"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{to:"/register",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:["Get Started Free",e.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsx(Q,{to:"/how-it-works",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 bg-transparent text-white font-semibold rounded-lg border-2 border-white hover:bg-white hover:text-blue-600 transition-all duration-200",children:"Learn How It Works"})]})})]})})})]})]}),e.jsx("div",{className:"fixed bottom-8 right-8",children:e.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),n("overview"),s({section:"overview"})},className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-200 hover:shadow-xl","aria-label":"Back to top",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})})]})})},PZ={title:"Terms of Service",version:"1.0",effective_date:"2024-01-01",last_updated:"2024-01-01T00:00:00Z",sections:[{id:"introduction",title:"1. Introduction and Acceptance",content:`
        <p>Welcome to BuildEasy ("Platform", "Service", "we", "us", or "our"). BuildEasy is a construction supply marketplace platform that connects buyers (customers) with construction material suppliers across the United States.</p>
        
        <p>These Terms of Service ("Terms", "Agreement") constitute a legally binding agreement between you ("User", "you", or "your") and BuildEasy. By accessing or using our Platform, you acknowledge that you have read, understood, and agree to be bound by these Terms.</p>
        
        <h3>Acceptance of Terms</h3>
        <p>By creating an account, browsing products, making purchases, or using any services on the BuildEasy Platform, you expressly agree to these Terms and our Privacy Policy. If you do not agree to these Terms, you must not access or use the Platform.</p>
        
        <h3>Modifications to Terms</h3>
        <p>We reserve the right to modify these Terms at any time. We will notify users of material changes via email and in-app notifications at least 30 days before the changes take effect. Your continued use of the Platform after changes become effective constitutes acceptance of the modified Terms.</p>
      `,subsections:[]},{id:"definitions",title:"2. Definitions",content:`
        <p>For the purposes of these Terms, the following definitions apply:</p>
        
        <ul>
          <li><strong>Buyer/Customer:</strong> An individual or business entity purchasing construction materials through the Platform.</li>
          <li><strong>Supplier:</strong> A verified business selling construction materials through the Platform.</li>
          <li><strong>Product:</strong> Construction materials, supplies, or equipment listed for sale on the Platform.</li>
          <li><strong>Order:</strong> A confirmed purchase transaction between a Customer and one or more Suppliers.</li>
          <li><strong>Trade Credit:</strong> A line of credit extended to qualified business customers for purchases on the Platform.</li>
          <li><strong>Surplus Marketplace:</strong> The peer-to-peer section of the Platform where users can buy and sell unused construction materials.</li>
          <li><strong>Delivery Window:</strong> The scheduled time range for delivery of purchased products.</li>
          <li><strong>GMV (Gross Merchandise Value):</strong> The total sales value of merchandise sold through the Platform.</li>
        </ul>
      `,subsections:[]},{id:"eligibility",title:"3. Eligibility and Account Registration",content:`
        <h3>3.1 Age and Capacity</h3>
        <p>You must be at least 18 years old and have the legal capacity to enter into contracts to use this Platform. By registering, you represent and warrant that you meet these requirements.</p>
        
        <h3>3.2 Account Types</h3>
        <p>BuildEasy offers two primary account types:</p>
        <ul>
          <li><strong>Customer Accounts:</strong> For individuals or businesses purchasing construction materials. Customer accounts may be classified as Retail (DIY/personal use) or Trade (professional contractors/businesses).</li>
          <li><strong>Supplier Accounts:</strong> For verified businesses selling construction materials. Supplier accounts require application, verification, and approval by BuildEasy administrators.</li>
        </ul>
        
        <h3>3.3 Account Registration</h3>
        <p>When creating an account, you agree to:</p>
        <ul>
          <li>Provide accurate, current, and complete information</li>
          <li>Maintain and promptly update your account information</li>
          <li>Maintain the security of your password and account credentials</li>
          <li>Accept responsibility for all activities that occur under your account</li>
          <li>Immediately notify BuildEasy of any unauthorized use of your account</li>
        </ul>
        
        <h3>3.4 Email Verification</h3>
        <p>All users must verify their email address within 7 days of registration. Unverified accounts may have limited access to Platform features.</p>
        
        <h3>3.5 Account Suspension and Termination</h3>
        <p>BuildEasy reserves the right to suspend or terminate accounts that violate these Terms, engage in fraudulent activity, or pose a risk to the Platform or other users.</p>
      `,subsections:[]},{id:"customer-obligations",title:"4. Customer Obligations and Conduct",content:`
        <h3>4.1 Purchasing Rules</h3>
        <p>As a Customer, you agree to:</p>
        <ul>
          <li>Provide accurate delivery addresses and contact information</li>
          <li>Be available during scheduled delivery windows or provide appropriate receiving arrangements</li>
          <li>Inspect delivered products promptly and report issues within 48 hours of delivery</li>
          <li>Pay for all orders placed using your account</li>
          <li>Not resell products purchased for personal use as commercial transactions</li>
        </ul>
        
        <h3>4.2 Trade Credit Terms</h3>
        <p>If approved for trade credit:</p>
        <ul>
          <li>You agree to the payment terms specified in your credit agreement (typically Net 30 days)</li>
          <li>Late payments may incur fees and interest as specified in your credit terms</li>
          <li>Failure to pay may result in credit suspension, account suspension, or legal action</li>
          <li>BuildEasy reserves the right to modify or revoke trade credit at any time</li>
        </ul>
        
        <h3>4.3 Prohibited Activities</h3>
        <p>Customers must not:</p>
        <ul>
          <li>Use the Platform for any illegal purposes</li>
          <li>Submit false or fraudulent orders</li>
          <li>Abuse return or refund policies</li>
          <li>Harass or abuse Suppliers or Platform staff</li>
          <li>Attempt to manipulate reviews or ratings</li>
          <li>Share account credentials with others</li>
          <li>Use automated bots or scrapers to access the Platform</li>
        </ul>
      `,subsections:[]},{id:"supplier-obligations",title:"5. Supplier Obligations and Conduct",content:`
        <h3>5.1 Supplier Verification</h3>
        <p>All Suppliers must complete our verification process, which includes:</p>
        <ul>
          <li>Business registration verification</li>
          <li>Tax ID verification</li>
          <li>Identity verification of business owners</li>
          <li>Address and location verification</li>
          <li>Background and compliance checks</li>
        </ul>
        
        <h3>5.2 Product Listing Requirements</h3>
        <p>Suppliers must:</p>
        <ul>
          <li>Provide accurate product descriptions, specifications, and pricing</li>
          <li>Include clear, high-quality product images</li>
          <li>Maintain real-time inventory accuracy (stock quantities must reflect actual availability)</li>
          <li>Update product information promptly when changes occur</li>
          <li>Only list products they are legally authorized to sell</li>
          <li>Clearly state product conditions, warranties, and return policies</li>
        </ul>
        
        <h3>5.3 Order Fulfillment Obligations</h3>
        <p>Suppliers agree to:</p>
        <ul>
          <li>Accept or decline orders within 24 hours of placement</li>
          <li>Fulfill accepted orders within the committed timeframe</li>
          <li>Deliver products within scheduled delivery windows</li>
          <li>Provide accurate tracking information when available</li>
          <li>Maintain a minimum 95% fulfillment rate</li>
          <li>Communicate proactively about delays or issues</li>
        </ul>
        
        <h3>5.4 Customer Service Requirements</h3>
        <p>Suppliers must:</p>
        <ul>
          <li>Respond to customer inquiries within 24 hours</li>
          <li>Handle returns and refunds according to stated policies and Platform standards</li>
          <li>Resolve customer issues professionally and promptly</li>
          <li>Maintain a minimum 4.0-star average rating</li>
        </ul>
        
        <h3>5.5 Prohibited Supplier Activities</h3>
        <p>Suppliers must not:</p>
        <ul>
          <li>List counterfeit, stolen, or illegal products</li>
          <li>Manipulate inventory levels to create false scarcity</li>
          <li>Engage in price manipulation or collusion with other suppliers</li>
          <li>Solicit customers to complete transactions outside the Platform</li>
          <li>Post fake reviews or incentivize positive reviews improperly</li>
          <li>Discriminate against customers based on protected characteristics</li>
        </ul>
        
        <h3>5.6 Commission and Payment Terms</h3>
        <p>Suppliers agree to pay BuildEasy a commission on all sales completed through the Platform. Commission rates are specified in individual supplier agreements and typically range from 5-12% depending on subscription tier. Payouts are processed according to the agreed payout frequency (weekly, bi-weekly, or monthly).</p>
      `,subsections:[]},{id:"transactions",title:"6. Transactions and Payments",content:`
        <h3>6.1 Payment Processing</h3>
        <p>All payments are processed securely through our integrated payment partners (Stripe and PayPal). BuildEasy does not directly store credit card information. By making a purchase, you authorize BuildEasy to charge your selected payment method for the total order amount, including products, delivery fees, and applicable taxes.</p>
        
        <h3>6.2 Pricing and Availability</h3>
        <p>Product prices are set by individual Suppliers and displayed in US Dollars (USD). Prices are subject to change without notice. BuildEasy makes reasonable efforts to ensure price accuracy, but errors may occur. If a product is listed at an incorrect price due to system error, BuildEasy or the Supplier reserves the right to cancel the order and refund the payment.</p>
        
        <h3>6.3 Taxes</h3>
        <p>Customers are responsible for all applicable taxes based on their delivery location. Tax amounts are calculated and displayed at checkout before order confirmation.</p>
        
        <h3>6.4 Order Confirmation</h3>
        <p>Orders are not final until you receive an order confirmation email. Order confirmations are sent to the email address associated with your account. You are responsible for ensuring your email address is current and accurate.</p>
        
        <h3>6.5 Payment Security</h3>
        <p>BuildEasy is PCI DSS Level 1 compliant. All payment transactions are encrypted and transmitted securely. We implement industry-standard security measures to protect your financial information.</p>
      `,subsections:[]},{id:"delivery",title:"7. Delivery and Fulfillment",content:`
        <h3>7.1 Delivery Windows</h3>
        <p>Delivery windows are scheduled during checkout and confirmed by Suppliers. Customers must select an available delivery window for each Supplier in multi-supplier orders. Delivery windows are estimates and may be subject to change due to weather, traffic, or unforeseen circumstances.</p>
        
        <h3>7.2 Delivery Fees</h3>
        <p>Delivery fees are calculated based on delivery distance, order size, and selected delivery method. Fees are displayed at checkout before order confirmation. Some Suppliers may offer free delivery for orders exceeding a minimum purchase amount.</p>
        
        <h3>7.3 Failed Deliveries</h3>
        <p>If delivery fails due to Customer unavailability, incorrect address, or refusal of delivery, the Customer may be charged redelivery fees. After two failed delivery attempts, the order may be cancelled, and restocking fees may apply.</p>
        
        <h3>7.4 Inspection and Acceptance</h3>
        <p>Customers must inspect delivered products upon receipt. Issues must be reported within 48 hours of delivery. Acceptance of delivery (signature or photographic proof) indicates apparent satisfactory condition subject to reasonable inspection period.</p>
      `,subsections:[]},{id:"returns-refunds",title:"8. Returns, Refunds, and Cancellations",content:`
        <h3>8.1 Cancellation Policy</h3>
        <p>Customers may cancel orders before they enter "preparing" status. Once a Supplier begins preparing an order, cancellation may not be possible, or restocking fees may apply. Cancellations are processed through the Platform, and refunds are issued to the original payment method within 5-7 business days.</p>
        
        <h3>8.2 Return Policy</h3>
        <p>Return policies vary by Supplier and product type. Standard return policy allows returns within 30 days of delivery for undamaged, unopened products in original packaging. Special-order or custom products may not be returnable. Customers are responsible for return shipping costs unless the product is defective or incorrect.</p>
        
        <h3>8.3 Refund Processing</h3>
        <p>Approved refunds are processed within 5-7 business days of return receipt and inspection. Refunds are issued to the original payment method. Trade credit refunds are credited back to the customer's credit balance.</p>
        
        <h3>8.4 Damaged or Defective Products</h3>
        <p>If products arrive damaged or defective, Customers must report the issue within 48 hours of delivery with photographic evidence. BuildEasy or the Supplier will provide a replacement or full refund at no additional cost to the Customer, including return shipping.</p>
      `,subsections:[]},{id:"intellectual-property",title:"9. Intellectual Property Rights",content:`
        <h3>9.1 Platform Ownership</h3>
        <p>The BuildEasy Platform, including its design, code, features, content, and trademarks, is owned by BuildEasy and protected by United States and international copyright, trademark, and other intellectual property laws. You may not copy, modify, distribute, or create derivative works from the Platform without express written permission.</p>
        
        <h3>9.2 User-Generated Content</h3>
        <p>By submitting content to the Platform (reviews, photos, messages, surplus listings), you grant BuildEasy a worldwide, non-exclusive, royalty-free, transferable license to use, reproduce, distribute, modify, and display such content in connection with operating and promoting the Platform.</p>
        
        <h3>9.3 Product Images and Descriptions</h3>
        <p>Suppliers represent that they have the right to use all product images and descriptions they upload. Suppliers are responsible for ensuring they do not infringe on third-party intellectual property rights.</p>
        
        <h3>9.4 Trademark Usage</h3>
        <p>The "BuildEasy" name, logo, and related marks are trademarks of BuildEasy. You may not use our trademarks without prior written consent, except as necessary to identify BuildEasy as the platform facilitating your transaction.</p>
      `,subsections:[]},{id:"privacy",title:"10. Privacy and Data Protection",content:`
        <p>Your privacy is important to us. Our collection, use, and protection of personal information is governed by our Privacy Policy, which is incorporated by reference into these Terms. By using the Platform, you consent to the practices described in the Privacy Policy.</p>
        
        <h3>Key Privacy Commitments:</h3>
        <ul>
          <li>We collect only information necessary to provide our services</li>
          <li>We use industry-standard encryption to protect your data</li>
          <li>We do not sell your personal information to third parties</li>
          <li>You may request access to or deletion of your personal data (subject to legal obligations)</li>
          <li>We comply with applicable data protection regulations including GDPR and CCPA</li>
        </ul>
        
        <p>For complete details on our data practices, please review our <a href="/privacy" class="text-blue-600 hover:text-blue-700 underline">Privacy Policy</a>.</p>
      `,subsections:[]},{id:"reviews",title:"11. Reviews, Ratings, and User Content",content:`
        <h3>11.1 Review Eligibility</h3>
        <p>Only verified purchasers may leave reviews for products and Suppliers. Reviews must be based on genuine personal experience with the product or service.</p>
        
        <h3>11.2 Review Guidelines</h3>
        <p>Reviews must:</p>
        <ul>
          <li>Be honest and based on actual experience</li>
          <li>Relate to the product or service being reviewed</li>
          <li>Not contain profanity, hate speech, or personal attacks</li>
          <li>Not include promotional content or competitor references</li>
          <li>Not violate any laws or third-party rights</li>
        </ul>
        
        <h3>11.3 Content Moderation</h3>
        <p>BuildEasy reserves the right to remove reviews or content that violates these guidelines. Repeated violations may result in account suspension. We do not pre-approve reviews but may moderate flagged content.</p>
        
        <h3>11.4 Supplier Responses</h3>
        <p>Suppliers may respond to reviews publicly. Responses must be professional and constructive. Suppliers may not offer incentives to customers in exchange for removing or modifying negative reviews.</p>
      `,subsections:[]},{id:"liability",title:"12. Limitation of Liability",content:`
        <h3>12.1 Platform as Marketplace</h3>
        <p>BuildEasy acts as a marketplace connecting Buyers and Suppliers. We are not a construction supplier, manufacturer, or distributor. We do not take title to products listed on the Platform. Transactions are directly between Customers and Suppliers.</p>
        
        <h3>12.2 Product Quality and Safety</h3>
        <p>Suppliers are solely responsible for the quality, safety, and legality of products they list and sell. BuildEasy does not inspect, test, or verify products (except through standard moderation processes). BuildEasy is not liable for defective, dangerous, or non-compliant products.</p>
        
        <h3>12.3 Disclaimer of Warranties</h3>
        <p>THE PLATFORM IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.</p>
        
        <h3>12.4 Limitation of Damages</h3>
        <p>TO THE MAXIMUM EXTENT PERMITTED BY LAW, BUILDEASY'S TOTAL LIABILITY FOR ANY CLAIMS ARISING FROM YOUR USE OF THE PLATFORM SHALL NOT EXCEED THE GREATER OF (A) $500 OR (B) THE AMOUNT YOU PAID TO BUILDEASY IN THE 12 MONTHS PRECEDING THE CLAIM.</p>
        
        <h3>12.5 Indemnification</h3>
        <p>You agree to indemnify, defend, and hold harmless BuildEasy, its officers, directors, employees, and agents from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from:</p>
        <ul>
          <li>Your use of the Platform</li>
          <li>Your violation of these Terms</li>
          <li>Your violation of any law or third-party rights</li>
          <li>Content you submit to the Platform</li>
          <li>Products you list (if Supplier) or disputes related to your orders (if Customer)</li>
        </ul>
      `,subsections:[]},{id:"disputes",title:"13. Dispute Resolution and Legal",content:`
        <h3>13.1 Platform Dispute Resolution</h3>
        <p>For issues between Customers and Suppliers, we encourage resolution through the Platform's issue reporting and dispute resolution system. BuildEasy administrators may mediate disputes when escalated.</p>
        
        <h3>13.2 Governing Law</h3>
        <p>These Terms shall be governed by and construed in accordance with the laws of the State of Delaware, United States, without regard to its conflict of law provisions.</p>
        
        <h3>13.3 Arbitration Agreement</h3>
        <p>Any dispute arising from these Terms or your use of the Platform shall be resolved through binding arbitration in accordance with the American Arbitration Association's Commercial Arbitration Rules. You waive your right to participate in class action lawsuits or class-wide arbitration.</p>
        
        <h3>13.4 Exceptions to Arbitration</h3>
        <p>Either party may seek injunctive relief in court for intellectual property infringement or unauthorized access to the Platform. Small claims court actions are also exempt from mandatory arbitration.</p>
        
        <h3>13.5 Venue</h3>
        <p>To the extent court proceedings are permitted under these Terms, the exclusive venue shall be state or federal courts located in Delaware.</p>
      `,subsections:[]},{id:"surplus-marketplace",title:"14. Surplus Marketplace Terms",content:`
        <h3>14.1 Surplus Marketplace Overview</h3>
        <p>The Surplus Marketplace allows registered users to list unused construction materials for peer-to-peer sale. These transactions are subject to additional terms beyond standard product purchases.</p>
        
        <h3>14.2 Listing Requirements</h3>
        <p>Surplus listings must:</p>
        <ul>
          <li>Accurately describe the item's condition</li>
          <li>Include clear photographs showing actual condition</li>
          <li>Specify pickup location or shipping availability</li>
          <li>Comply with all applicable laws regarding sale of goods</li>
          <li>Not include prohibited items (hazardous materials, stolen goods, etc.)</li>
        </ul>
        
        <h3>14.3 Payment Escrow</h3>
        <p>Payments for surplus items are held in escrow by BuildEasy until:</p>
        <ul>
          <li>Buyer confirms receipt and satisfactory condition (for pickup), OR</li>
          <li>Delivery confirmation is received (for shipped items), OR</li>
          <li>14 days have passed without dispute</li>
        </ul>
        
        <h3>14.4 Surplus Transaction Disputes</h3>
        <p>In case of disputes regarding surplus items, BuildEasy may refund the buyer and withhold payment from the seller. Repeated disputes may result in suspension from the Surplus Marketplace.</p>
      `,subsections:[]},{id:"termination",title:"15. Termination and Account Closure",content:`
        <h3>15.1 Voluntary Termination</h3>
        <p>You may terminate your account at any time through account settings. Upon termination:</p>
        <ul>
          <li>You must complete or cancel all pending orders</li>
          <li>Outstanding balances (trade credit, surplus escrow) must be settled</li>
          <li>Your personal data will be handled according to our Privacy Policy</li>
          <li>Order history will be retained for legal and accounting purposes</li>
        </ul>
        
        <h3>15.2 Termination by BuildEasy</h3>
        <p>BuildEasy may terminate or suspend your account immediately for:</p>
        <ul>
          <li>Violation of these Terms</li>
          <li>Fraudulent activity</li>
          <li>Non-payment (for trade credit accounts)</li>
          <li>Violation of laws or regulations</li>
          <li>Damage to Platform reputation or other users</li>
        </ul>
        
        <h3>15.3 Effect of Termination</h3>
        <p>Upon termination, your right to access and use the Platform immediately ceases. Provisions of these Terms that by their nature should survive termination shall survive, including intellectual property rights, liability limitations, and dispute resolution provisions.</p>
      `,subsections:[]},{id:"miscellaneous",title:"16. Miscellaneous Provisions",content:`
        <h3>16.1 Entire Agreement</h3>
        <p>These Terms, together with our Privacy Policy and any additional agreements entered into with BuildEasy, constitute the entire agreement between you and BuildEasy regarding use of the Platform.</p>
        
        <h3>16.2 Severability</h3>
        <p>If any provision of these Terms is found to be invalid or unenforceable, the remaining provisions shall remain in full force and effect.</p>
        
        <h3>16.3 Waiver</h3>
        <p>No waiver of any provision of these Terms shall be deemed a further or continuing waiver of such provision or any other provision.</p>
        
        <h3>16.4 Assignment</h3>
        <p>You may not assign or transfer these Terms or your account without BuildEasy's prior written consent. BuildEasy may assign these Terms without restriction.</p>
        
        <h3>16.5 Force Majeure</h3>
        <p>BuildEasy is not liable for failure to perform obligations due to circumstances beyond reasonable control, including natural disasters, acts of government, war, terrorism, internet failures, or other force majeure events.</p>
        
        <h3>16.6 Contact Information</h3>
        <p>For questions about these Terms or the Platform, contact us at:</p>
        <ul>
          <li>Email: legal@buildeasy.com</li>
          <li>Phone: 1-800-BUILD-EZ</li>
          <li>Mail: BuildEasy, Inc., Legal Department, [Address]</li>
        </ul>
      `,subsections:[]}]},AZ=()=>{const[t,s]=Fe(),r=ze(),a=re(y=>y.authentication_state.authentication_status.is_authenticated),n=re(y=>y.authentication_state.current_user),[i]=_.useState(PZ),[l,o]=_.useState(t.get("section")||"introduction"),[d,c]=_.useState([]),[u,m]=_.useState({accepted:!1,acceptance_date:null,version_accepted:null}),[h]=_.useState(!1),[x]=_.useState(null),[p,b]=_.useState(!1),[v,j]=_.useState(!1),P=_.useRef({});_.useEffect(()=>{const y=i.sections.map(F=>({section_id:F.id,title:F.title,subsections:F.subsections.map(M=>({id:M.id,title:M.title}))}));if(c(y),a&&n){const F=localStorage.getItem(`terms_acceptance_${n.user_id}`);if(F){const M=JSON.parse(F);m(M)}}},[i,a,n]),_.useEffect(()=>{const y=t.get("section");y&&y!==l&&o(y)},[t,l]),_.useEffect(()=>{l&&P.current[l]&&setTimeout(()=>{var y;(y=P.current[l])==null||y.scrollIntoView({behavior:"smooth",block:"start"})},100)},[l]);const w=y=>{var F;o(y),s({section:y}),j(!1),P.current[y]&&((F=P.current[y])==null||F.scrollIntoView({behavior:"smooth",block:"start"}))},C=()=>{if(!a||!n){r("/login?redirect_url=/terms");return}const y={accepted:!0,acceptance_date:new Date().toISOString(),version_accepted:i.version};localStorage.setItem(`terms_acceptance_${n.user_id}`,JSON.stringify(y)),m(y),b(!0),setTimeout(()=>{b(!1)},5e3)},f=()=>{alert("PDF download will be available soon. This feature requires backend implementation.")},k=y=>{console.log(`Section viewed: ${y} at ${new Date().toISOString()}`)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Me,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i.title})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Version ",i.version]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Effective Date: ",new Date(i.effective_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Last Updated: ",new Date(i.last_updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Download PDF"})]}),e.jsx("button",{onClick:()=>j(!v),className:"lg:hidden px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&u.accepted&&e.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsxs("p",{className:"text-sm text-green-800",children:["You accepted these terms on ",new Date(u.acceptance_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u.version_accepted&&` (Version ${u.version_accepted})`]})]})}),p&&e.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-4 animate-fade-in",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"Thank you for accepting our Terms of Service!"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:`lg:w-80 ${v?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Table of Contents"}),e.jsx("nav",{className:"space-y-1",children:d.map(y=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>w(y.section_id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${l===y.section_id?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50 border-l-4 border-transparent"}`,children:y.title}),y.subsections.length>0&&l===y.section_id&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:y.subsections.map(F=>e.jsx("button",{onClick:()=>w(F.id),className:"w-full text-left px-3 py-1 text-xs text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md",children:F.title},F.id))})]},y.section_id))}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Related Documents"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{to:"/privacy",className:"block text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Privacy Policy "}),e.jsx(Q,{to:"/help",className:"block text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Help Center "}),e.jsx(Q,{to:"/contact",className:"block text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Contact Us "})]})]})]})}),e.jsxs("main",{className:"flex-1 bg-white rounded-lg shadow-lg border border-gray-200 p-8 lg:p-12",children:[x&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-800",children:x})]})}),h&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600"})}),!h&&!x&&e.jsxs("div",{className:"prose prose-lg prose-blue max-w-none",children:[i.sections.map(y=>e.jsxs("section",{id:y.id,ref:F=>{P.current[y.id]=F},className:`mb-12 scroll-mt-24 ${l===y.id?"ring-2 ring-blue-200 ring-offset-4 rounded-lg p-4 -m-4":""}`,onMouseEnter:()=>k(y.id),children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-gray-200",children:y.title}),e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:y.content}}),y.subsections.map(F=>e.jsxs("div",{id:F.id,ref:M=>{P.current[F.id]=M},className:"mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:F.title}),e.jsx("div",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:F.content}})]},F.id))]},y.id)),e.jsxs("section",{className:"mt-12 pt-8 border-t-2 border-gray-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acknowledgment"}),e.jsx("p",{className:"text-gray-700 mb-6",children:'BY CLICKING "I ACCEPT" BELOW OR BY CONTINUING TO USE THE BUILDEASY PLATFORM, YOU ACKNOWLEDGE THAT YOU HAVE READ, UNDERSTOOD, AND AGREE TO BE BOUND BY THESE TERMS OF SERVICE.'}),a&&!u.accepted&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-800 mb-4",children:"Please accept these Terms of Service to continue using BuildEasy."}),e.jsx("button",{onClick:C,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:"I Accept the Terms of Service"})]}),!a&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"To accept these terms and use BuildEasy, please sign in or create an account."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Q,{to:"/login?redirect_url=/terms",className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors text-center",children:"Sign In"}),e.jsx(Q,{to:"/register?redirect_url=/terms",className:"px-6 py-3 bg-white border-2 border-blue-600 text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-colors text-center",children:"Create Account"})]})]})]}),e.jsxs("section",{className:"mt-12 pt-8 border-t border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Questions About These Terms?"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"If you have any questions or concerns about these Terms of Service, please don't hesitate to contact us:"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-2",children:[e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:"mailto:legal@buildeasy.com",className:"text-blue-600 hover:text-blue-700 underline",children:"legal@buildeasy.com"})]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Phone:"})," ",e.jsx("a",{href:"tel:1-800-BUILD-EZ",className:"text-blue-600 hover:text-blue-700 underline",children:"1-800-BUILD-EZ"})]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Support:"})," ",e.jsx(Q,{to:"/support",className:"text-blue-600 hover:text-blue-700 underline",children:"Visit our Support Center"})]})]})]})]})]})]})}),e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-8 right-8 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-all hover:scale-110 hidden lg:block","aria-label":"Scroll to top",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})},$Z={title:"Privacy Policy",version:"1.0",effective_date:"2024-01-15",last_updated:"2024-01-15",gdpr_compliant:!0,ccpa_compliant:!0,sections:[{id:"overview",title:"Privacy Policy Overview",content:`Welcome to BuildEasy. This Privacy Policy explains how BuildEasy, Inc. ("BuildEasy," "we," "us," or "our") collects, uses, discloses, and protects your personal information when you use our construction supply marketplace platform, including our website, mobile applications, and related services (collectively, the "Services").

We are committed to protecting your privacy and ensuring you have a positive experience on our platform. This policy outlines our practices concerning the collection and use of your personal data and your rights in relation to that data.

By accessing or using our Services, you agree to the collection and use of information in accordance with this Privacy Policy. If you do not agree with our policies and practices, please do not use our Services.`},{id:"information-collection",title:"1. Information We Collect",content:"We collect several types of information from and about users of our Services, including:",subsections:[{id:"personal-information",title:"1.1 Personal Information",content:`Personal information that identifies you directly or indirectly, including:

 Account Information: Name, email address, phone number, password, profile photo
 Business Information (for suppliers): Business name, registration number, business type, tax identification
 Delivery Information: Shipping addresses, delivery contact details, location data
 Payment Information: Credit/debit card details (tokenized), billing addresses, trade credit information
 Identity Verification: Government-issued IDs, business licenses (for supplier verification)
 Communication Data: Messages between buyers and sellers, customer support interactions`},{id:"transactional-data",title:"1.2 Transactional Data",content:`Information about your interactions with our Services:

 Order History: Products purchased, quantities, prices, delivery details, order status
 Shopping Behavior: Products viewed, searches performed, items saved to wishlist, cart contents
 Review and Rating Data: Reviews posted, ratings given, helpfulness votes
 Supplier Performance Data: Order fulfillment metrics, response times, customer satisfaction scores
 Financial Transactions: Payment records, refunds, trade credit usage, supplier payouts`},{id:"technical-information",title:"1.3 Technical Information",content:`Automatically collected technical data:

 Device Information: IP address, browser type and version, operating system, device identifiers
 Usage Data: Pages visited, time spent on pages, click patterns, navigation paths
 Location Data: GPS coordinates for delivery tracking (with your consent), approximate location from IP address
 Cookies and Similar Technologies: Session cookies, preference cookies, analytics cookies (see Cookie Policy)
 Log Data: Server logs, error reports, performance metrics`},{id:"third-party-information",title:"1.4 Information from Third Parties",content:`We may receive information from external sources:

 Social Media Platforms: If you connect your social media accounts, we may receive basic profile information
 Payment Processors: Transaction confirmation, payment method validation
 Delivery Partners: Shipment tracking, delivery confirmation, GPS location during delivery
 Identity Verification Services: For supplier background checks and fraud prevention
 Analytics Providers: Aggregated usage statistics and demographic data`}]},{id:"information-use",title:"2. How We Use Your Information",content:"We use the information we collect for various purposes:",subsections:[{id:"service-provision",title:"2.1 To Provide and Improve Our Services",content:` Process and fulfill your orders, including payment processing and delivery coordination
 Create and manage your account, including authentication and security
 Enable communication between buyers and suppliers
 Provide customer support and respond to your inquiries
 Display real-time inventory availability and pricing information
 Facilitate product reviews and ratings to help users make informed decisions
 Personalize your experience based on your preferences and browsing history
 Develop new features and improve existing functionality`},{id:"business-operations",title:"2.2 For Business Operations",content:` Verify supplier identities and business credentials
 Calculate and process supplier payouts and commissions
 Monitor platform performance and prevent fraud
 Enforce our Terms of Service and other policies
 Resolve disputes between buyers and suppliers
 Maintain platform security and prevent unauthorized access
 Generate analytics and business intelligence reports`},{id:"marketing-communications",title:"2.3 Marketing and Communications",content:`With your consent, we may use your information to:

 Send you promotional emails about new products, special offers, and platform updates
 Provide personalized product recommendations based on your browsing and purchase history
 Notify you about price drops on products in your wishlist
 Send SMS notifications about order updates and delivery tracking
 Display targeted advertisements on our platform and third-party websites

You can opt out of marketing communications at any time through your account settings or by clicking "unsubscribe" in our emails.`},{id:"legal-compliance",title:"2.4 Legal Compliance and Protection",content:` Comply with applicable laws, regulations, and legal processes
 Respond to lawful requests from public authorities
 Protect our rights, privacy, safety, or property
 Enforce our legal terms and conditions
 Detect, prevent, and investigate fraud, security breaches, or illegal activities
 Resolve disputes and enforce our agreements`}]},{id:"information-sharing",title:"3. How We Share Your Information",content:"We may share your information in the following circumstances:",subsections:[{id:"suppliers-customers",title:"3.1 Between Buyers and Suppliers",content:`When you place an order:
 Your name, delivery address, and contact information are shared with the supplier to fulfill your order
 Suppliers can see your order history with them to provide better service
 Your review information (including name, unless posted anonymously) is visible to all users`},{id:"service-providers",title:"3.2 Service Providers and Partners",content:`We work with third-party service providers who perform services on our behalf:

 Payment Processors: Stripe, PayPal for secure payment processing (they receive payment card information directly, we only store tokenized references)
 Shipping and Logistics Partners: FedEx, UPS, local delivery services for order fulfillment and GPS tracking
 Cloud Hosting: AWS for secure data storage and content delivery
 Email and SMS Services: SendGrid, Twilio for transactional and marketing communications
 Analytics Providers: Google Analytics for website usage analysis
 Customer Support Tools: For live chat and ticket management
 Identity Verification Services: For supplier background checks

These providers are contractually obligated to protect your data and use it only for providing services to us.`},{id:"business-transfers",title:"3.3 Business Transfers",content:"If BuildEasy is involved in a merger, acquisition, asset sale, or bankruptcy, your information may be transferred as part of that transaction. We will notify you via email and/or prominent notice on our platform of any change in ownership or uses of your personal information."},{id:"legal-requirements",title:"3.4 Legal Requirements and Protection",content:"We may disclose your information if required to do so by law or in response to valid requests by public authorities (e.g., court orders, subpoenas, or government agencies). We may also disclose information to protect our rights, privacy, safety, or property, or that of our users and the public."},{id:"aggregated-data",title:"3.5 Aggregated or De-identified Data",content:"We may share aggregated or de-identified information that cannot reasonably be used to identify you. For example, we may share statistics about platform usage, sales trends, or market insights with suppliers to help them make informed business decisions."}]},{id:"user-rights",title:"4. Your Privacy Rights",content:"Depending on your location, you may have certain rights regarding your personal information:",subsections:[{id:"gdpr-rights",title:"4.1 GDPR Rights (European Economic Area)",content:`If you are located in the EEA, you have the following rights under GDPR:

 Right to Access: Request copies of your personal data
 Right to Rectification: Request correction of inaccurate or incomplete data
 Right to Erasure ("Right to be Forgotten"): Request deletion of your personal data
 Right to Restrict Processing: Request limitation of how we process your data
 Right to Data Portability: Receive your data in a machine-readable format
 Right to Object: Object to processing of your personal data for certain purposes
 Right to Withdraw Consent: Withdraw consent for data processing at any time
 Right to Lodge a Complaint: File a complaint with your local data protection authority

To exercise these rights, please contact us at privacy@buildeasy.com or use the data management tools in your account settings.`},{id:"ccpa-rights",title:"4.2 CCPA Rights (California Residents)",content:`If you are a California resident, you have rights under the California Consumer Privacy Act (CCPA):

 Right to Know: Request information about the categories and specific pieces of personal information we collect
 Right to Delete: Request deletion of your personal information (subject to certain exceptions)
 Right to Opt-Out: Opt-out of the sale of your personal information (Note: We do not sell personal information)
 Right to Non-Discrimination: Exercise your CCPA rights without discriminatory treatment

To submit a verifiable consumer request, please visit your account settings or email privacy@buildeasy.com.`},{id:"other-rights",title:"4.3 Other Jurisdictions",content:"Users in other jurisdictions may have additional rights under local privacy laws. Please contact us to learn about your specific rights and how to exercise them."}]},{id:"data-retention",title:"5. Data Retention",content:`We retain your personal information for as long as necessary to provide our Services and fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required or permitted by law.

Retention Periods:

 Account Information: Retained while your account is active and for 7 years after account closure for legal and tax purposes
 Transaction Records: Retained for 7 years to comply with financial record-keeping requirements
 Communication Records: Retained for 3 years for customer support and dispute resolution purposes
 Marketing Data: Retained until you withdraw consent or request deletion
 Technical Logs: Retained for 90 days for security and system maintenance
 Anonymized Analytics Data: May be retained indefinitely as it cannot identify you

After the retention period expires, we will delete or anonymize your personal information in accordance with applicable laws.`},{id:"data-security",title:"6. Data Security",content:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.",subsections:[{id:"security-measures",title:"6.1 Security Measures",content:`Our security practices include:

 Encryption: All data transmitted between your device and our servers is encrypted using TLS 1.3 or higher
 Data at Rest: Personal data stored in our databases is encrypted using AES-256 encryption
 Access Controls: Role-based access controls limit employee access to personal data on a need-to-know basis
 Authentication: Multi-factor authentication (MFA) for admin accounts and optional for user accounts
 Payment Security: PCI DSS Level 1 compliant payment processing; we never store complete credit card numbers
 Regular Security Audits: Third-party penetration testing and security assessments conducted annually
 Monitoring: 24/7 security monitoring and incident response procedures
 Employee Training: Regular security awareness training for all employees with access to personal data`},{id:"data-breaches",title:"6.2 Data Breach Notification",content:`In the event of a data breach that is likely to result in a risk to your rights and freedoms, we will notify you within 72 hours of becoming aware of the breach, as required by GDPR. Notification will be sent via email to your registered email address and may include:

 Description of the breach and affected data
 Potential consequences of the breach
 Measures taken to address the breach
 Recommended actions you should take`}]},{id:"cookies-tracking",title:"7. Cookies and Tracking Technologies",content:"We use cookies and similar tracking technologies to enhance your experience on our platform.",subsections:[{id:"cookie-types",title:"7.1 Types of Cookies We Use",content:` Essential Cookies: Necessary for the platform to function (authentication, shopping cart, security)
 Performance Cookies: Help us understand how users interact with our platform (Google Analytics)
 Functionality Cookies: Remember your preferences and settings
 Advertising Cookies: Used to deliver relevant advertisements based on your interests

You can control cookie preferences through your browser settings. Note that disabling essential cookies may prevent you from using certain features of our Services.`},{id:"tracking-technologies",title:"7.2 Other Tracking Technologies",content:` Web Beacons: Small graphic images in emails to track open rates and engagement
 Pixel Tags: Monitor user behavior and conversions for advertising purposes
 Local Storage: Store user preferences and session data locally in your browser
 Device Fingerprinting: Identify devices for security and fraud prevention purposes`}]},{id:"childrens-privacy",title:"8. Children's Privacy",content:"Our Services are not intended for children under the age of 18. We do not knowingly collect personal information from children under 18. If you are a parent or guardian and believe your child has provided us with personal information, please contact us at privacy@buildeasy.com, and we will delete such information from our systems."},{id:"international-transfers",title:"9. International Data Transfers",content:`BuildEasy operates in the United States, and your information may be transferred to, stored, and processed in the United States or other countries where our service providers operate.

For users in the European Economic Area (EEA), United Kingdom, or Switzerland, we ensure appropriate safeguards are in place for international transfers:

 Standard Contractual Clauses (SCCs): We use European Commission-approved SCCs with our service providers
 Privacy Shield (where applicable): We comply with applicable Privacy Shield frameworks
 Adequacy Decisions: We rely on European Commission adequacy decisions where available

By using our Services, you consent to the transfer of your information to countries outside your country of residence, which may have different data protection laws.`},{id:"third-party-services",title:"10. Third-Party Services and Links",content:`Our Services may contain links to third-party websites, plugins, or applications. This Privacy Policy does not apply to these external services. We are not responsible for the privacy practices of third parties.

Third-party services we integrate with include:
 Payment Processors: Stripe, PayPal
 Mapping Services: Google Maps for address validation and delivery tracking
 Social Media Platforms: For social login and sharing features
 Analytics Providers: Google Analytics, Hotjar for usage analytics

We encourage you to read the privacy policies of any third-party services you interact with through our platform.`},{id:"changes-policy",title:"11. Changes to This Privacy Policy",content:`We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. When we make material changes, we will:

 Update the "Last Updated" date at the top of this policy
 Notify you via email (if you have an account)
 Display a prominent notice on our platform
 For significant changes, request your renewed consent where required by law

We encourage you to review this Privacy Policy periodically. Your continued use of our Services after changes are posted constitutes your acceptance of the updated Privacy Policy.`},{id:"contact-information",title:"12. Contact Us",content:`If you have questions, concerns, or requests regarding this Privacy Policy or our data practices, please contact us:

BuildEasy, Inc.
Privacy Team
Email: privacy@buildeasy.com
Phone: 1-800-BUILD-EZ (1-800-284-5339)
Mailing Address:
123 Construction Plaza, Suite 500
Austin, TX 78701
United States

Data Protection Officer (DPO):
Email: dpo@buildeasy.com

For EEA users, you may also contact our EU Representative:
BuildEasy EU Representative
Email: eu-privacy@buildeasy.com

We will respond to all requests within 30 days, or sooner as required by applicable law.`},{id:"california-notice",title:"13. California Privacy Notice",content:`This section provides additional information for California residents as required by the California Consumer Privacy Act (CCPA).

Categories of Personal Information Collected (Last 12 Months):
 Identifiers (name, email, phone, address)
 Commercial information (order history, preferences)
 Internet activity (browsing history, search queries)
 Geolocation data (delivery addresses, GPS tracking)
 Professional information (trade credentials for business accounts)

Sources of Information:
 Directly from you (account registration, orders, communications)
 Automatically through your use of our Services (cookies, logs)
 From third parties (payment processors, delivery partners)

Business Purposes for Collection:
 Providing marketplace services and customer support
 Processing transactions and managing orders
 Personalizing user experience
 Security and fraud prevention
 Legal compliance

We Do NOT Sell Personal Information:
BuildEasy does not sell personal information to third parties for monetary or other valuable consideration. We may share information with service providers and partners as described in this Privacy Policy, but such sharing does not constitute a "sale" under CCPA.`}]},OZ=()=>{const[t,s]=Fe(),r=t.get("section")||"overview",[a]=_.useState($Z),[n,i]=_.useState(r),[l,o]=_.useState(null),[d,c]=_.useState(!1),[u,m]=_.useState({analytics_consent:!1,marketing_consent:!1,personalization_consent:!1,data_sharing_consent:!1,last_updated:null}),[h,x]=_.useState({export_requested:!1,export_status:null,deletion_requested:!1,deletion_status:null}),p={gdpr:a.gdpr_compliant,ccpa:a.ccpa_compliant},b=a.sections.map(F=>{var M;return{section_id:F.id,title:F.title,subsections:((M=F.subsections)==null?void 0:M.map(E=>({id:E.id,title:E.title})))||[]}}),v=re(F=>F.authentication_state.authentication_status.is_authenticated),j=_.useRef({});_.useEffect(()=>{i(r),j.current[r]&&setTimeout(()=>{var F;(F=j.current[r])==null||F.scrollIntoView({behavior:"smooth",block:"start"})},100)},[r]),_.useEffect(()=>{const F=()=>{c(window.scrollY>400);const M=window.scrollY+100;for(const E of a.sections){const B=j.current[E.id];if(B){const{offsetTop:A,offsetHeight:L}=B;if(M>=A&&M<A+L){i(E.id);break}}}};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[a.sections]);const P=F=>{s({section:F}),i(F);const M=j.current[F];M&&M.scrollIntoView({behavior:"smooth",block:"start"})},w=()=>{window.scrollTo({top:0,behavior:"smooth"})},C=async(F,M)=>{if(!v)return;const E={...u,[F]:M,last_updated:new Date().toISOString()};m(E);try{console.log("Privacy preferences updated (API endpoint not available):",E)}catch(B){console.error("Failed to update privacy preferences:",B),o("Failed to update privacy preferences. Please try again.")}},f=async()=>{if(v){x(F=>({...F,export_requested:!0,export_status:"processing"}));try{console.log("Data export requested (API endpoint not available)"),setTimeout(()=>{x(F=>({...F,export_status:"completed"})),alert("Data export request received. You will receive a download link via email within 48 hours.")},1e3)}catch(F){console.error("Failed to request data export:",F),x(M=>({...M,export_status:"failed"})),o("Failed to request data export. Please try again or contact support.")}}},k=async()=>{if(!(!v||!window.confirm("Are you sure you want to delete your account? This action cannot be undone. All your data, including order history and reviews, will be permanently deleted."))){x(M=>({...M,deletion_requested:!0,deletion_status:"pending_verification"}));try{console.log("Account deletion requested (API endpoint not available)"),alert("Account deletion request received. You will receive a verification email to confirm this request within 24 hours.")}catch(M){console.error("Failed to request account deletion:",M),x(E=>({...E,deletion_status:"failed"})),o("Failed to request account deletion. Please contact support at privacy@buildeasy.com.")}}},y=()=>{alert("PDF download feature is coming soon. For now, you can print this page using your browser's print function (Ctrl+P or Cmd+P).")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Mt,{className:"h-16 w-16 text-blue-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:a.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Version ",a.version]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Effective Date:"})," ",new Date(a.effective_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(a.last_updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-6",children:[p.gdpr&&e.jsxs("div",{className:"flex items-center bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-full text-sm font-medium",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"GDPR Compliant"]}),p.ccpa&&e.jsxs("div",{className:"flex items-center bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-full text-sm font-medium",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"CCPA Compliant"]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:y,className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200 shadow-sm",children:[e.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Download as PDF"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("aside",{className:"hidden lg:block lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Table of Contents"}),e.jsx("nav",{className:"space-y-1",children:b.map(F=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>P(F.section_id),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n===F.section_id?"bg-blue-50 text-blue-700 border-l-4 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 border-l-4 border-transparent"}`,children:F.title}),F.subsections.length>0&&n===F.section_id&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:F.subsections.map(M=>e.jsx("button",{onClick:()=>P(M.id),className:"w-full text-left px-3 py-1 text-xs text-gray-500 hover:text-blue-600",children:M.title},M.id))})]},F.section_id))})]})}),e.jsxs("div",{className:"lg:col-span-3 space-y-12",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12",children:e.jsx("div",{className:"prose prose-lg max-w-none",children:a.sections.map(F=>e.jsxs("section",{id:F.id,ref:M=>{j.current[F.id]=M},className:"mb-16 scroll-mt-24",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 pb-3 border-b-2 border-gray-200",children:F.title}),e.jsx("div",{className:"text-base leading-relaxed text-gray-700 whitespace-pre-line mb-6",children:F.content}),F.subsections&&F.subsections.length>0&&e.jsx("div",{className:"space-y-8 ml-0 lg:ml-6",children:F.subsections.map(M=>e.jsxs("div",{id:M.id,ref:E=>{j.current[M.id]=E},className:"scroll-mt-24",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-4",children:M.title}),e.jsx("div",{className:"text-base leading-relaxed text-gray-600 whitespace-pre-line",children:M.content})]},M.id))})]},F.id))})}),v&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Your Privacy Preferences"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Control how we use your data. Changes are saved automatically."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Analytics and Performance"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Allow us to collect anonymized usage data to improve our platform performance and user experience."})]}),e.jsx("button",{onClick:()=>C("analytics_consent",!u.analytics_consent),className:`ml-6 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u.analytics_consent?"bg-blue-600":"bg-gray-200"}`,role:"switch","aria-checked":u.analytics_consent,children:e.jsx("span",{className:`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${u.analytics_consent?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Marketing Communications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Receive personalized offers, promotions, and product recommendations via email."})]}),e.jsx("button",{onClick:()=>C("marketing_consent",!u.marketing_consent),className:`ml-6 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u.marketing_consent?"bg-blue-600":"bg-gray-200"}`,role:"switch","aria-checked":u.marketing_consent,children:e.jsx("span",{className:`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${u.marketing_consent?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Personalization"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use your browsing history and preferences to personalize product recommendations."})]}),e.jsx("button",{onClick:()=>C("personalization_consent",!u.personalization_consent),className:`ml-6 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u.personalization_consent?"bg-blue-600":"bg-gray-200"}`,role:"switch","aria-checked":u.personalization_consent,children:e.jsx("span",{className:`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${u.personalization_consent?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Anonymized Data Sharing"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Allow sharing of anonymized data with suppliers for market analytics (no personal information shared)."})]}),e.jsx("button",{onClick:()=>C("data_sharing_consent",!u.data_sharing_consent),className:`ml-6 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u.data_sharing_consent?"bg-blue-600":"bg-gray-200"}`,role:"switch","aria-checked":u.data_sharing_consent,children:e.jsx("span",{className:`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${u.data_sharing_consent?"translate-x-5":"translate-x-0"}`})})]})]}),u.last_updated&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(u.last_updated).toLocaleString()]})})]}),v&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Your Data Rights"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Exercise your GDPR and CCPA rights to access, export, or delete your personal data."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Download Your Data"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Request a copy of all personal data we have about you. You'll receive a download link via email within 48 hours."}),h.export_requested&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${h.export_status==="completed"?"bg-green-100 text-green-800":h.export_status==="processing"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:["Status: ",h.export_status||"Unknown"]})})]}),e.jsx("button",{onClick:f,disabled:h.export_requested&&h.export_status==="processing",className:"ml-4 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h.export_requested&&h.export_status==="processing"?"Processing...":"Request Data Export"})]})}),e.jsx("div",{className:"border border-red-200 bg-red-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-medium text-red-900 mb-2 flex items-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),"Delete Your Account"]}),e.jsxs("p",{className:"text-sm text-red-700 mb-2",children:[e.jsx("strong",{children:"Warning:"})," This action cannot be undone. All your data, including order history, reviews, and saved items, will be permanently deleted."]}),e.jsx("p",{className:"text-sm text-red-600",children:"Outstanding orders must be completed or cancelled before account deletion."}),h.deletion_requested&&e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:["Status: ",h.deletion_status||"Pending verification"]})})]}),e.jsx("button",{onClick:k,disabled:h.deletion_requested,className:"ml-4 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h.deletion_requested?"Request Sent":"Delete Account"})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(jt,{className:"h-6 w-6 text-blue-600 mt-1 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Questions About Privacy?"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Our Privacy Team is here to help. If you have questions about this policy or how we handle your data, please don't hesitate to reach out."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("a",{href:"mailto:privacy@buildeasy.com",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:[e.jsx(jt,{className:"h-5 w-5 mr-2"}),"Email Privacy Team"]}),e.jsxs(Q,{to:"/contact",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:["Contact Support",e.jsx(Ie,{className:"h-5 w-5 ml-2"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Related Legal Documents"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(Q,{to:"/terms",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all duration-200",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Terms of Service"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Platform usage terms"})]})]}),e.jsxs(Q,{to:"/help",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all duration-200",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Cookie Policy"}),e.jsx("div",{className:"text-sm text-gray-600",children:"How we use cookies"})]})]})]})]})]})]})}),d&&e.jsx("button",{onClick:w,className:"fixed bottom-8 right-8 p-4 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-100 z-50","aria-label":"Back to top",children:e.jsx(Ew,{className:"h-6 w-6"})}),l&&e.jsx("div",{className:"fixed top-20 right-4 max-w-md bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 mr-3 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium",children:l})}),e.jsx("button",{onClick:()=>o(null),className:"ml-4 text-red-700 hover:text-red-900",children:""})]})})]})})},TZ=new XN({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),KN=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}),we=({children:t,requiredRole:s})=>{const r=re(i=>i.authentication_state.authentication_status.is_authenticated),a=re(i=>i.authentication_state.authentication_status.is_loading),n=re(i=>i.authentication_state.authentication_status.user_type);return a?e.jsx(KN,{}):r?s&&n!==s?n==="customer"?e.jsx(fa,{to:"/dashboard",replace:!0}):n==="supplier"?e.jsx(fa,{to:"/supplier/dashboard",replace:!0}):n==="admin"?e.jsx(fa,{to:"/admin",replace:!0}):e.jsx(fa,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t}):e.jsx(fa,{to:"/login",replace:!0})},EZ=()=>re(s=>s.authentication_state.authentication_status.is_authenticated)?e.jsx(e6,{}):e.jsx(K1,{}),FZ=()=>re(s=>s.authentication_state.authentication_status.is_authenticated)?e.jsx(u6,{}):e.jsx(a6,{}),It=({children:t,showFooter:s=!0})=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(l1,{}),e.jsx("main",{className:"flex-1 pt-16",children:t}),s&&e.jsx(Dm,{})]}),lt=({children:t,showFooter:s=!0,showMiniCart:r=!0,showChat:a=!0})=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(P1,{}),e.jsx("main",{className:"flex-1 pt-16",children:t}),s&&e.jsx(Dm,{}),r&&e.jsx(M1,{}),a&&e.jsx(Qb,{})]}),Ot=({children:t,showFooter:s=!0,showChat:r=!0})=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx(E1,{}),e.jsx("main",{className:"flex-1 pt-16",children:t}),s&&e.jsx(Dm,{}),r&&e.jsx(Qb,{})]}),Kt=({children:t})=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[e.jsx(F1,{}),e.jsx("main",{className:"flex-1 pt-16",children:t})]}),MZ=()=>{const t=re(r=>r.authentication_state.authentication_status.is_loading),s=re(r=>r.initialize_auth);return _.useEffect(()=>{s()},[s]),t?e.jsx(KN,{}):e.jsx(ew,{children:e.jsx(JN,{client:TZ,children:e.jsxs(tw,{children:[e.jsx(fe,{path:"/",element:e.jsx(It,{children:e.jsx(I1,{})})}),e.jsx(fe,{path:"/products",element:e.jsx(It,{children:e.jsx(U1,{})})}),e.jsx(fe,{path:"/product/:product_id",element:e.jsx(It,{children:e.jsx(EZ,{})})}),e.jsx(fe,{path:"/supplier/:supplier_id",element:e.jsx(It,{children:e.jsx(FZ,{})})}),e.jsx(fe,{path:"/register",element:e.jsx(It,{showFooter:!1,children:e.jsx(m6,{})})}),e.jsx(fe,{path:"/register/customer",element:e.jsx(It,{showFooter:!1,children:e.jsx(f6,{})})}),e.jsx(fe,{path:"/register/supplier",element:e.jsx(It,{showFooter:!1,children:e.jsx(v6,{})})}),e.jsx(fe,{path:"/login",element:e.jsx(It,{showFooter:!1,children:e.jsx(j6,{})})}),e.jsx(fe,{path:"/forgot-password",element:e.jsx(It,{showFooter:!1,children:e.jsx(N6,{})})}),e.jsx(fe,{path:"/reset-password",element:e.jsx(It,{showFooter:!1,children:e.jsx(C6,{})})}),e.jsx(fe,{path:"/help",element:e.jsx(It,{children:e.jsx(dZ,{})})}),e.jsx(fe,{path:"/how-it-works",element:e.jsx(It,{children:e.jsx(pZ,{})})}),e.jsx(fe,{path:"/contact",element:e.jsx(It,{children:e.jsx(NZ,{})})}),e.jsx(fe,{path:"/about",element:e.jsx(It,{children:e.jsx(CZ,{})})}),e.jsx(fe,{path:"/terms",element:e.jsx(It,{children:e.jsx(AZ,{})})}),e.jsx(fe,{path:"/privacy",element:e.jsx(It,{children:e.jsx(OZ,{})})}),e.jsx(fe,{path:"/dashboard",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(F6,{})})})}),e.jsx(fe,{path:"/onboarding",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{showFooter:!1,showMiniCart:!1,showChat:!1,children:e.jsx(P6,{})})})}),e.jsx(fe,{path:"/compare",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(D6,{})})})}),e.jsx(fe,{path:"/cart",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{showMiniCart:!1,children:e.jsx(B6,{})})})}),e.jsx(fe,{path:"/wishlist",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(V6,{})})})}),e.jsx(fe,{path:"/projects",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(X6,{})})})}),e.jsx(fe,{path:"/projects/:project_id",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(t4,{})})})}),e.jsx(fe,{path:"/checkout",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{showFooter:!1,showMiniCart:!1,showChat:!1,children:e.jsx(o4,{})})})}),e.jsx(fe,{path:"/order-confirmation",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{showFooter:!1,showMiniCart:!1,children:e.jsx(p4,{})})})}),e.jsx(fe,{path:"/orders",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(f4,{})})})}),e.jsx(fe,{path:"/orders/:order_id",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(w4,{})})})}),e.jsx(fe,{path:"/notifications",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(O4,{})})})}),e.jsx(fe,{path:"/account",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(z4,{})})})}),e.jsx(fe,{path:"/account/reviews",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(W4,{})})})}),e.jsx(fe,{path:"/report-issue",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(G4,{})})})}),e.jsx(fe,{path:"/issues/:issue_id",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(r5,{})})})}),e.jsx(fe,{path:"/support",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(i5,{})})})}),e.jsx(fe,{path:"/surplus",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(d5,{})})})}),e.jsx(fe,{path:"/surplus/:listing_id",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(u5,{})})})}),e.jsx(fe,{path:"/surplus/create",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(h5,{})})})}),e.jsx(fe,{path:"/surplus/my-listings",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx(v5,{})})})}),e.jsx(fe,{path:"/trade-credit/apply",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{showFooter:!1,children:e.jsx(_5,{})})})}),e.jsx(fe,{path:"/trade-credit",element:e.jsx(we,{requiredRole:"customer",children:e.jsx(lt,{children:e.jsx($5,{})})})}),e.jsx(fe,{path:"/supplier/dashboard",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(I5,{})})})}),e.jsx(fe,{path:"/supplier/onboarding",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{showFooter:!1,showChat:!1,children:e.jsx(F5,{})})})}),e.jsx(fe,{path:"/supplier/products",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(U5,{})})})}),e.jsx(fe,{path:"/supplier/products/add",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{showFooter:!1,children:e.jsx(V5,{})})})}),e.jsx(fe,{path:"/supplier/products/:product_id/edit",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{showFooter:!1,children:e.jsx(Q5,{})})})}),e.jsx(fe,{path:"/supplier/products/bulk-upload",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{showFooter:!1,children:e.jsx(X5,{})})})}),e.jsx(fe,{path:"/supplier/inventory",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(t3,{})})})}),e.jsx(fe,{path:"/supplier/orders",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(l3,{})})})}),e.jsx(fe,{path:"/supplier/orders/:order_id",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(o3,{})})})}),e.jsx(fe,{path:"/supplier/delivery",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(h3,{})})})}),e.jsx(fe,{path:"/supplier/pricing",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(y3,{})})})}),e.jsx(fe,{path:"/supplier/messages",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(w3,{})})})}),e.jsx(fe,{path:"/supplier/reviews",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(S3,{})})})}),e.jsx(fe,{path:"/supplier/analytics",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(E3,{})})})}),e.jsx(fe,{path:"/supplier/financials",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(L3,{})})})}),e.jsx(fe,{path:"/supplier/settings",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(W3,{})})})}),e.jsx(fe,{path:"/supplier/education",element:e.jsx(we,{requiredRole:"supplier",children:e.jsx(Ot,{children:e.jsx(Z3,{})})})}),e.jsx(fe,{path:"/admin",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(ik,{})})})}),e.jsx(fe,{path:"/admin/customers",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(Vh,{})})})}),e.jsx(fe,{path:"/admin/suppliers",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(Vh,{})})})}),e.jsx(fe,{path:"/admin/supplier-applications",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(pk,{})})})}),e.jsx(fe,{path:"/admin/products",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(gk,{})})})}),e.jsx(fe,{path:"/admin/orders",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(jk,{})})})}),e.jsx(fe,{path:"/admin/disputes",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(Sk,{})})})}),e.jsx(fe,{path:"/admin/reviews",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(Ok,{})})})}),e.jsx(fe,{path:"/admin/financials",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(Dk,{})})})}),e.jsx(fe,{path:"/admin/settings",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(qk,{})})})}),e.jsx(fe,{path:"/admin/analytics",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(CJ,{})})})}),e.jsx(fe,{path:"/admin/communication",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(FJ,{})})})}),e.jsx(fe,{path:"/admin/team",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(IJ,{})})})}),e.jsx(fe,{path:"/admin/system-logs",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(KJ,{})})})}),e.jsx(fe,{path:"/admin/maintenance",element:e.jsx(we,{requiredRole:"admin",children:e.jsx(Kt,{children:e.jsx(tZ,{})})})}),e.jsx(fe,{path:"*",element:e.jsx(fa,{to:"/",replace:!0})})]})})})};class RZ extends _.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("Application Error:",s,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We apologize for the inconvenience. An unexpected error occurred."}),this.state.error&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-left",children:e.jsx("p",{className:"text-xs text-red-800 font-mono",children:this.state.error.message})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const DZ=()=>e.jsx(RZ,{children:e.jsx(MZ,{})});db(document.getElementById("root")).render(e.jsx(DZ,{}));
