import{a as te,u as $,b as A,j as e}from"./state-vendor-__gb9IU9.js";import{f as re,r as m,L as q}from"./react-vendor-QYi6USC3.js";import{u as R,a as p}from"./index-4570EpHZ.js";import{X as V,P as T,_ as le,g as w,N as L,z as _,V as ie,q as ne,S as de,a0 as oe,c as ce,W as B,K as U}from"./ui-vendor-CuJPReAW.js";const C="https://urls-washer-articles-luke.trycloudflare.com",xe=async r=>{const{data:l}=await p.get(`${C}/suppliers/${r}`);return l},me=async(r,l,o)=>{const i={status:l.status||"active",limit:12,offset:(o-1)*12,sort_by:l.sort_by,sort_order:l.sort_order};l.category_id&&(i.category=l.category_id),l.search_query&&(i.search_query=l.search_query),l.price_min!==null&&(i.price_min=l.price_min),l.price_max!==null&&(i.price_max=l.price_max),l.in_stock_only&&(i.in_stock_only=!0);const{data:u}=await p.get(`${C}/suppliers/${r}/products`,{params:i});return u},ue=async(r,l,o,i)=>{const u={supplier_id:r,status:"published",limit:10,offset:(o-1)*10,sort_by:l.sort_by,sort_order:"desc"};l.rating!==null&&(u.min_rating=l.rating),l.verified_only&&(u.verified_purchase=!0);const{data:x}=await p.get(`${C}/reviews`,{params:u,headers:{Authorization:`Bearer ${i}`}});return x},ge=async(r,l)=>{const{data:o}=await p.patch(`${C}/customers/me`,{preferred_suppliers:r},{headers:{Authorization:`Bearer ${l}`}});return o},he=async(r,l)=>{const{data:o}=await p.post("/cart/items",{product_id:r,quantity:l});return o},pe=async r=>{const{data:l}=await p.post("/api/chat/conversations",{conversation_type:"customer_supplier",supplier_id:r});return l},ve=()=>{const{supplier_id:r}=re(),l=te(),o=R(s=>s.authentication_state.auth_token),i=R(s=>s.authentication_state.customer_profile),u=R(s=>s.fetch_cart),[x,k]=m.useState("about"),[H,v]=m.useState(!1),[b,F]=m.useState(1),[y,S]=m.useState(1),[g,K]=m.useState({category_id:null,search_query:null,price_min:null,price_max:null,in_stock_only:null,sort_by:"created_at",sort_order:"desc"}),[j,Y]=m.useState({rating:null,verified_only:!1,sort_by:"review_date"}),[O,I]=m.useState(!1),N=m.useMemo(()=>!(i!=null&&i.preferred_suppliers)||!r?!1:i.preferred_suppliers.includes(r),[i==null?void 0:i.preferred_suppliers,r]),{data:a,isLoading:Q,error:W}=$({queryKey:["supplier",r],queryFn:()=>xe(r),enabled:!!r,staleTime:5*60*1e3}),{data:c,isLoading:X}=$({queryKey:["supplier-products",r,g,b],queryFn:()=>me(r,g,b),enabled:!!r&&x==="products",staleTime:2*60*1e3,select:s=>({products:s.products,total_count:s.total,total_pages:Math.ceil(s.total/12)})}),{data:d,isLoading:Z}=$({queryKey:["supplier-reviews",r,j,y],queryFn:()=>ue(r,j,y,o),enabled:!!r&&!!o&&x==="reviews",staleTime:2*60*1e3,select:s=>({reviews:s.reviews,total_count:s.total,average_rating:s.average_rating,total_pages:Math.ceil(s.total/10),rating_distribution:G(s.reviews)})}),z=A({mutationFn:async()=>{const s=(i==null?void 0:i.preferred_suppliers)||[],t=N?s.filter(n=>n!==r):[...s,r];return ge(t,o)},onSuccess:()=>{l.invalidateQueries({queryKey:["customer-profile"]})}}),D=A({mutationFn:({product_id:s,quantity:t})=>he(s,t),onSuccess:()=>{u()}}),P=A({mutationFn:()=>pe(r),onSuccess:()=>{v(!1)}}),G=s=>{const t={5:0,4:0,3:0,2:0,1:0};return s.forEach(n=>{const h=Math.floor(n.rating_overall);h>=1&&h<=5&&t[h]++}),t},J=s=>{const t=new Date(s),n=new Date,h=n.getFullYear()-t.getFullYear();if(h>0)return`${h} year${h>1?"s":""}`;const E=(n.getFullYear()-t.getFullYear())*12+n.getMonth()-t.getMonth();return`${E} month${E>1?"s":""}`},ee=()=>{z.mutate()},se=s=>{D.mutate({product_id:s,quantity:1})},ae=()=>{P.mutate()},f=(s,t)=>{K(n=>({...n,[s]:t})),F(1)},M=(s,t)=>{Y(n=>({...n,[s]:t})),S(1)};return Q?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading supplier profile..."})]})})}):W||!a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsx("div",{className:"max-w-md w-full text-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-200",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Supplier Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The supplier you're looking for doesn't exist or has been removed."}),e.jsx(q,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Browse All Products"})]})})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-64 md:h-80 bg-gradient-to-br from-blue-500 to-indigo-600 relative overflow-hidden",children:a.cover_photo_url?e.jsx("img",{src:a.cover_photo_url,alt:`${a.business_name} cover`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(T,{className:"w-32 h-32 text-white opacity-20"})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"relative -mt-16 sm:-mt-20",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-white rounded-full shadow-lg border-4 border-white overflow-hidden",children:a.logo_url?e.jsx("img",{src:a.logo_url,alt:`${a.business_name} logo`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-indigo-100 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:a.business_name.charAt(0)})})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 truncate",children:a.business_name}),a.verification_status==="verified"&&e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(s=>e.jsx(w,{className:`w-5 h-5 ${s<=Math.round(a.rating_average)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},s))}),e.jsx("span",{className:"font-medium text-gray-900",children:Number(a.rating_average).toFixed(1)}),e.jsxs("span",{children:["(",a.total_reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{children:["Member for ",J(a.member_since)]})]}),a.response_time_average!==null&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:["Replies within ",Number(a.response_time_average).toFixed(1)," hours"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ee,disabled:z.isPending,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${N?"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ie,{className:`w-5 h-5 ${N?"fill-current":""}`}),e.jsx("span",{className:"hidden sm:inline",children:N?"Following":"Follow"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Contact"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(c==null?void 0:c.total_count)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.total_orders}),e.jsx("div",{className:"text-sm text-gray-600",children:"Orders"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Number(a.fulfillment_rate).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fulfillment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.total_reviews}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reviews"})]})]})]})})})]}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex gap-8",children:["about","products","reviews","contact"].map(s=>e.jsx("button",{onClick:()=>k(s),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${x===s?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x==="about"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"About"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:a.business_description||"No description provided."})]}),a.service_areas&&a.service_areas.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),"Service Areas"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.service_areas.map((s,t)=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:s},t))})]}),a.operating_hours&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-blue-600"}),"Operating Hours"]}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.operating_hours).map(([s,t])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:s}),e.jsx("span",{className:"text-gray-600",children:String(t)})]},s))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.return_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Return Policy"}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-4",children:a.return_policy}),e.jsx("button",{onClick:()=>k("contact"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",children:"View full policy →"})]}),a.shipping_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Shipping Policy"}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-4",children:a.shipping_policy}),e.jsx("button",{onClick:()=>k("contact"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",children:"View full policy →"})]})]})]}),x==="products"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:g.search_query||"",onChange:s=>f("search_query",s.target.value||null),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})}),e.jsxs("button",{onClick:()=>I(!O),className:"sm:hidden flex items-center gap-2 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(oe,{className:"w-5 h-5"}),"Filters"]}),e.jsxs("select",{value:g.sort_by,onChange:s=>f("sort_by",s.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 bg-white",children:[e.jsx("option",{value:"created_at",children:"Newest"}),e.jsx("option",{value:"price_per_unit",children:"Price: Low to High"}),e.jsx("option",{value:"sales_count",children:"Most Popular"}),e.jsx("option",{value:"product_name",children:"Name A-Z"})]})]}),(O||window.innerWidth>=640)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:g.in_stock_only||!1,onChange:s=>f("in_stock_only",s.target.checked||null),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"In Stock Only"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min $",value:g.price_min||"",onChange:s=>f("price_min",s.target.value?Number(s.target.value):null),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max $",value:g.price_max||"",onChange:s=>f("price_max",s.target.value?Number(s.target.value):null),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]})]})})]}),X?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((s,t)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},t))}):c&&c.products.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.products.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-shadow",children:[e.jsx(q,{to:`/product/${s.product_id}`,children:e.jsxs("div",{className:"relative h-64 bg-gray-100",children:[s.primary_image_url?e.jsx("img",{src:s.primary_image_url,alt:s.product_name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(T,{className:"w-16 h-16 text-gray-300"})}),s.is_featured&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded",children:"FEATURED"}),s.stock_quantity>0?e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"In Stock"}):e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Out of Stock"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(q,{to:`/product/${s.product_id}`,children:e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition-colors",children:s.product_name})}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",Number(s.price_per_unit||0).toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",s.unit_of_measure]})]}),e.jsxs("button",{onClick:()=>se(s.product_id),disabled:s.stock_quantity===0||D.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ce,{className:"w-5 h-5"}),s.stock_quantity===0?"Out of Stock":"Add to Cart"]})]})]},s.product_id))}),c.total_pages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>F(s=>Math.max(1,s-1)),disabled:b===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 text-sm font-medium text-gray-700",children:["Page ",b," of ",c.total_pages]}),e.jsx("button",{onClick:()=>F(s=>Math.min(c.total_pages,s+1)),disabled:b===c.total_pages,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(U,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-200",children:[e.jsx(T,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600",children:"This supplier hasn't listed any products yet."})]})]}),x==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[d&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:Number(d.average_rating).toFixed(1)}),e.jsx("div",{className:"flex items-center justify-center md:justify-start gap-1 mb-2",children:[1,2,3,4,5].map(s=>e.jsx(w,{className:`w-6 h-6 ${s<=Math.round(Number(d.average_rating))?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},s))}),e.jsxs("p",{className:"text-gray-600",children:["Based on ",d.total_count," reviews"]})]}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(s=>{const t=d.rating_distribution[s]||0,n=d.total_count>0?t/d.total_count*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 w-12",children:[s," star"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400 rounded-full transition-all",style:{width:`${n}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-12 text-right",children:t})]},s)})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 flex flex-wrap gap-3",children:[e.jsxs("select",{value:j.rating||"",onChange:s=>M("rating",s.target.value?Number(s.target.value):null),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"",children:"All ratings"}),e.jsx("option",{value:"5",children:"5 stars"}),e.jsx("option",{value:"4",children:"4+ stars"}),e.jsx("option",{value:"3",children:"3+ stars"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:j.verified_only,onChange:s=>M("verified_only",s.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verified only"})]}),e.jsxs("select",{value:j.sort_by,onChange:s=>M("sort_by",s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[e.jsx("option",{value:"review_date",children:"Most Recent"}),e.jsx("option",{value:"rating_overall",children:"Highest Rating"}),e.jsx("option",{value:"helpful_votes",children:"Most Helpful"})]})]})]}),Z?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},t))}):d&&d.reviews.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:d.reviews.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[e.jsx("div",{className:"flex items-start justify-between gap-4 mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>e.jsx(w,{className:`w-5 h-5 ${t<=s.rating_overall?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},t))}),s.verified_purchase&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:"Verified Purchase"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.is_anonymous?"Anonymous":"Customer"," •"," ",new Date(s.review_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),s.review_text&&e.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:s.review_text}),s.photos&&s.photos.length>0&&e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:s.photos.map((t,n)=>e.jsx("img",{src:t,alt:`Review photo ${n+1}`,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"},n))}),s.supplier_response&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 bg-blue-50 -mx-6 -mb-6 px-6 py-4 rounded-b-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm font-bold",children:a.business_name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-1",children:[a.business_name," responded"]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.supplier_response})]})]})})]},s.review_id))}),d.total_pages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>S(s=>Math.max(1,s-1)),disabled:y===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 text-sm font-medium text-gray-700",children:["Page ",y," of ",d.total_pages]}),e.jsx("button",{onClick:()=>S(s=>Math.min(d.total_pages,s+1)),disabled:y===d.total_pages,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(U,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-200",children:[e.jsx(w,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-gray-600",children:"Be the first to review this supplier!"})]})]}),x==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center gap-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(_,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Send Message"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Chat with ",a.business_name]})]})]}),a.response_time_average!==null&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(L,{className:"w-6 h-6 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Response Time"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Usually replies within ",Number(a.response_time_average).toFixed(1)," hours"]})]})]})]})]}),a.return_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Return Policy"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:a.return_policy})]}),a.shipping_policy&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Shipping Policy"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:a.shipping_policy})]}),a.minimum_order_value!==null&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 lg:p-8 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Minimum Order"}),e.jsxs("p",{className:"text-gray-700",children:["Minimum order value: ",e.jsxs("span",{className:"font-bold text-gray-900",children:["$",Number(a.minimum_order_value||0).toFixed(2)]})]})]})]})]}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Contact Supplier"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(V,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ae,disabled:P.isPending,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(_,{className:"w-5 h-5"}),P.isPending?"Starting chat...":"Start Chat"]}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Our team typically responds within"," ",a.response_time_average!==null?`${Number(a.response_time_average).toFixed(1)} hours`:"a few hours"]})]})]})})]})})};export{ve as default};
