import{a as J,u as E,b as L,j as e}from"./state-vendor-__gb9IU9.js";import{r as x,R as X,L as z}from"./react-vendor-QYi6USC3.js";import{u as Z,a as y}from"./index-CFqXVpuW.js";import"./ui-vendor-CuJPReAW.js";const j="https://123create-construction-app-with-a.launchpulse.ai",ee=async(n,l,o,u)=>{var b,v;const i=new URLSearchParams;l.status!=="all"&&i.append("status",l.status),i.append("limit",u.toString()),i.append("offset",((o-1)*u).toString());let g="created_date",a="desc";l.sort_by==="created_date_asc"?(g="created_date",a="asc"):l.sort_by==="price_high"?(g="asking_price",a="desc"):l.sort_by==="price_low"?(g="asking_price",a="asc"):l.sort_by==="views_high"&&(g="views_count",a="desc"),i.append("sort_by",g),i.append("sort_order",a);const p=await y.get(`${j}/api/surplus/my-listings?${i.toString()}`,{headers:{Authorization:`Bearer ${n}`}});return{listings:((b=p.data)==null?void 0:b.listings)||[],total:((v=p.data)==null?void 0:v.total)||0}},se=async(n,l,o)=>(await y.patch(`${j}/api/surplus/${l}`,{status:o},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data,te=async(n,l)=>{await y.delete(`${j}/api/surplus/${l}`,{headers:{Authorization:`Bearer ${n}`}})},re=async(n,l)=>{await y.patch(`${j}/api/surplus/offers/${l}`,{status:"accepted"},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})},ae=async(n,l,o)=>{await y.patch(`${j}/api/surplus/offers/${l}`,{status:"declined"},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})},de=()=>{var I;const n=J(),l=Z(s=>s.authentication_state.auth_token),[o,u]=x.useState("listings"),[i,g]=x.useState({status:"all",date_range:"all_time",sort_by:"created_date_desc"}),[a,p]=x.useState({current_page:1,total_pages:1,total_count:0,limit:20}),[b,v]=x.useState(""),[C,S]=x.useState({open:!1,listingId:null}),[m,N]=x.useState({open:!1,offerId:null,reason:""}),[M,A]=x.useState({open:!1,offerId:null}),[f,$]=x.useState({show:!1,message:"",type:"success"}),d=E({queryKey:["surplus-listings","my-listings",i,a.current_page],queryFn:()=>ee(l,i,a.current_page,a.limit),enabled:!!l&&o==="listings",staleTime:3e4,select:s=>({listings:s.listings.filter(t=>b===""||t.product_name.toLowerCase().includes(b.toLowerCase())),total:s.total})});X.useEffect(()=>{d.data&&p(s=>({...s,total_count:d.data.total,total_pages:Math.ceil(d.data.total/s.limit)}))},[d.data]);const h=E({queryKey:["surplus-offers","pending"],queryFn:async()=>(await y.get(`${j}/api/surplus/my-offers?status=pending`,{headers:{Authorization:`Bearer ${l}`}})).data,enabled:!!l&&o==="offers",staleTime:3e4}),w=L({mutationFn:s=>re(l,s),onSuccess:()=>{n.invalidateQueries({queryKey:["surplus-listings"]}),n.invalidateQueries({queryKey:["surplus-offers"]}),A({open:!1,offerId:null}),c("Offer accepted successfully! Sale initiated.","success")},onError:s=>{var t,r;c(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to accept offer","error")}}),_=L({mutationFn:({offerId:s,reason:t})=>ae(l,s),onSuccess:()=>{n.invalidateQueries({queryKey:["surplus-offers"]}),N({open:!1,offerId:null,reason:""}),c("Offer declined","success")},onError:s=>{var t,r;c(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to decline offer","error")}}),P=L({mutationFn:({listingId:s,status:t})=>se(l,s,t),onSuccess:s=>{n.setQueryData(["surplus-listings","my-listings",i,a.current_page],t=>t&&{...t,listings:t.listings.map(r=>r.listing_id===s.listing_id?s:r)}),c("Listing updated successfully","success")},onError:s=>{var t,r;c(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update listing","error")}}),k=L({mutationFn:s=>te(l,s),onSuccess:(s,t)=>{n.setQueryData(["surplus-listings","my-listings",i,a.current_page],r=>r&&{...r,listings:r.listings.filter(G=>G.listing_id!==t),total:r.total-1}),S({open:!1,listingId:null}),c("Listing deleted successfully","success")},onError:s=>{var t,r;c(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete listing","error")}}),c=(s,t)=>{$({show:!0,message:s,type:t}),setTimeout(()=>$({show:!1,message:"",type:"success"}),5e3)},D=(s,t)=>{g(r=>({...r,[s]:t})),p(r=>({...r,current_page:1}))},B=s=>{p(t=>({...t,current_page:s})),window.scrollTo({top:0,behavior:"smooth"})},R=s=>{P.mutate({listingId:s,status:"sold"})},H=s=>{S({open:!0,listingId:s})},Q=()=>{C.listingId&&k.mutate(C.listingId)},W=s=>{A({open:!0,offerId:s})},q=()=>{M.offerId&&w.mutate(M.offerId)},U=s=>{N({open:!0,offerId:s,reason:""})},V=()=>{m.offerId&&m.reason.trim()&&_.mutate({offerId:m.offerId,reason:m.reason})},K=s=>{switch(s){case"new":return"bg-green-100 text-green-800 border-green-200";case"like_new":return"bg-blue-100 text-blue-800 border-blue-200";case"used":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"refurbished":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Y=s=>{switch(s){case"active":return"bg-green-100 text-green-800 border-green-200";case"sold":return"bg-gray-100 text-gray-800 border-gray-200";case"expired":return"bg-amber-100 text-amber-800 border-amber-200";case"removed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},O=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),F=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),T=((I=h.data)==null?void 0:I.length)||0;return e.jsxs(e.Fragment,{children:[f.show&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in-right",children:e.jsx("div",{className:`rounded-lg px-6 py-4 shadow-lg ${f.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[f.type==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:`text-sm font-medium ${f.type==="success"?"text-green-800":"text-red-800"}`,children:f.message}),e.jsx("button",{onClick:()=>$({show:!1,message:"",type:"success"}),className:`ml-4 ${f.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"}`,children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}),C.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Delete Listing?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this listing? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>S({open:!1,listingId:null}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:k.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:k.isPending?"Deleting...":"Delete"})]})]})}),M.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Accept Offer?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"By accepting this offer, you commit to completing the sale. The buyer will be notified and next steps will be provided."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>A({open:!1,offerId:null}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:w.isPending,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:w.isPending?"Accepting...":"Accept Offer"})]})]})}),m.open&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Decline Offer"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for declining this offer (optional but recommended):"}),e.jsx("textarea",{value:m.reason,onChange:s=>N(t=>({...t,reason:s.target.value})),placeholder:"E.g., Price too low, already accepted another offer...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>N({open:!1,offerId:null,reason:""}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:_.isPending||!m.reason.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:_.isPending?"Declining...":"Decline Offer"})]})]})}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"My Surplus Listings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your surplus materials, respond to offers, and track your sales"})]}),e.jsxs(z,{to:"/surplus/create",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Listing"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>u("listings"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${o==="listings"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Active Listings",d.data&&e.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2.5 py-0.5 rounded-full text-xs font-semibold",children:d.data.listings.length})]}),e.jsxs("button",{onClick:()=>u("offers"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${o==="offers"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Pending Offers",T>0&&e.jsx("span",{className:"ml-2 bg-green-100 text-green-800 px-2.5 py-0.5 rounded-full text-xs font-semibold",children:T})]}),e.jsx("button",{onClick:()=>u("sales"),className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm transition-colors ${o==="sales"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:"Sales History"})]})})}),o==="listings"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Listings"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:b,onChange:s=>v(s.target.value),placeholder:"Search by product name...",className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:i.status,onChange:s=>D("status",s.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"removed",children:"Removed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:i.sort_by,onChange:s=>D("sort_by",s.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[e.jsx("option",{value:"created_date_desc",children:"Newest First"}),e.jsx("option",{value:"created_date_asc",children:"Oldest First"}),e.jsx("option",{value:"price_high",children:"Price: High to Low"}),e.jsx("option",{value:"price_low",children:"Price: Low to High"}),e.jsx("option",{value:"views_high",children:"Most Views"})]})]})]})}),d.isLoading?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]},s))}):d.isError?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Listings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading your surplus listings."}),e.jsx("button",{onClick:()=>d.refetch(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"})]}):!d.data||d.data.listings.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Listings Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first surplus listing to start selling unused construction materials."}),e.jsxs(z,{to:"/surplus/create",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Your First Listing"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:d.data.listings.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[s.photos&&s.photos.length>0?e.jsx("img",{src:s.photos[0],alt:s.product_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300",children:e.jsx("svg",{className:"h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${Y(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight flex-1",children:s.product_name})}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold border ${K(s.condition)}`,children:s.condition.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Qty: ",s.quantity]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:F(s.asking_price)}),s.price_type==="negotiable"&&e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"(negotiable)"})]})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:[s.views_count," views"]})]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{children:["Listed ",O(s.created_date)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[s.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{to:`/surplus/${s.listing_id}`,className:"flex-1 px-4 py-2 border-2 border-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors text-center text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>R(s.listing_id),disabled:P.isPending,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",children:"Mark Sold"})]}),e.jsx("button",{onClick:()=>H(s.listing_id),disabled:k.isPending,className:"px-4 py-2 bg-red-50 text-red-600 rounded-lg font-medium hover:bg-red-100 transition-colors disabled:opacity-50 border border-red-200 text-sm",children:"Delete"})]})]})]},s.listing_id))}),a.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[e.jsx("button",{onClick:()=>B(a.current_page-1),disabled:a.current_page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,a.total_pages)},(s,t)=>{let r;return a.total_pages<=5||a.current_page<=3?r=t+1:a.current_page>=a.total_pages-2?r=a.total_pages-4+t:r=a.current_page-2+t,e.jsx("button",{onClick:()=>B(r),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a.current_page===r?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:r},r)})}),e.jsx("button",{onClick:()=>B(a.current_page+1),disabled:a.current_page===a.total_pages,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}),o==="offers"&&e.jsx("div",{className:"space-y-4",children:h.isLoading?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},s))}):h.isError?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Offers"}),e.jsx("button",{onClick:()=>h.refetch(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Try Again"})]}):!h.data||h.data.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Pending Offers"}),e.jsx("p",{className:"text-gray-600",children:"You'll see offers from buyers here when they're interested in your listings."})]}):e.jsx(e.Fragment,{children:h.data.map(s=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Offer from ",s.buyer_name]}),s.expires_at&&e.jsxs("span",{className:"text-xs text-amber-600 font-medium",children:["Expires ",O(s.expires_at)]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Listing: ",s.listing_id," "]}),e.jsxs("div",{className:"flex items-baseline space-x-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Offer Amount"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:F(s.offer_amount)})]}),e.jsx("span",{className:"text-gray-400",children:"vs"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Your Price"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:F(s.original_asking_price)})]}),e.jsx("div",{className:"flex-1 text-right",children:e.jsxs("span",{className:`text-sm font-semibold ${s.offer_amount>=s.original_asking_price*.9?"text-green-600":s.offer_amount>=s.original_asking_price*.75?"text-amber-600":"text-red-600"}`,children:[(s.offer_amount/s.original_asking_price*100).toFixed(0),"% of asking"]})})]}),s.message&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Buyer's Message:"}),e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',s.message,'"']})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Received ",O(s.offer_date)]})]}),e.jsxs("div",{className:"flex md:flex-col space-x-2 md:space-x-0 md:space-y-2 md:ml-6",children:[e.jsx("button",{onClick:()=>W(s.offer_id),disabled:w.isPending,className:"flex-1 md:w-32 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",children:"Accept"}),e.jsx("button",{onClick:()=>U(s.offer_id),disabled:_.isPending,className:"flex-1 md:w-32 px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 text-sm",children:"Decline"})]})]})},s.offer_id))})}),o==="sales"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Sales History"}),e.jsx("p",{className:"text-gray-600",children:"This feature is coming soon. You'll be able to view your completed surplus sales and buyer ratings here."})]})]})})]})};export{de as default};
